;/*FB_PKG_DELIM*/

__d("TCompactProtocol",["StringToUtf8","ThriftTypes","Utf8ToString"],(function(a,b,c,d,e,f,g){var h,i=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),j=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:i.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:i.CT_BOOLEAN_FALSE}),k=[i.CT_STOP,0,i.CT_BOOLEAN_TRUE,i.CT_BYTE,i.CT_DOUBLE,0,i.CT_I16,0,i.CT_I32,0,i.CT_I64,i.CT_BINARY,i.CT_STRUCT,i.CT_MAP,i.CT_SET,i.CT_LIST,0,0,0,i.CT_FLOAT],l=Math.pow(2,7)-1,m=-1*Math.pow(2,7),n=Math.pow(2,15)-1,o=-1*Math.pow(2,15),p=Math.pow(2,31)-1,q=-1*Math.pow(2,31),r=Math.pow(2,32)-1,s=BigInt("9223372036854775807"),t=BigInt("-9223372036854775808"),u=BigInt("18446744073709551615"),v=BigInt(63),w=BigInt(1),x=BigInt(7),y=BigInt("0x7f"),z=BigInt("0x80"),A=Math.pow(2,4);a=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var b=a.prototype;b.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};b.readStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};b.writeStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeFieldBegin=function(a){if(a.ftype===(h||(h=c("ThriftTypes"))).BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,j.NONE)};b.writeListBegin=function(a){return this.$8(a)};b.writeListEnd=function(){return 0};b.writeSetBegin=function(a){return this.$8(a)};b.writeSetEnd=function(){return 0};b.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};b.writeMapEnd=function(){return 0};b.$7=function(a,b){var c=0;b=b===j.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=A-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};b.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=A-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};b.readFieldBegin=function(){var a=this.$1.readByte(),b=a&15;if(b===(h||(h=c("ThriftTypes"))).STOP)return{ftype:(h||(h=c("ThriftTypes"))).STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(b);(b===i.CT_BOOLEAN_TRUE||b===i.CT_BOOLEAN_FALSE)&&(this.$5=b===i.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};b.readListBegin=function(){return this.$11()};b.readListEnd=function(){return 0};b.readSetBegin=function(){return this.$11()};b.readSetEnd=function(){return 0};b.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};b.readMapEnd=function(){return 0};b.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};b.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};b.readFieldEnd=function(){return 0};b.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};b.writeByte=function(a){if(a<m||a>l)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};b.readFloat=function(){return this.$1.readFloatBE()};b.writeFloat=function(a){return this.$1.writeFloatBE(a)};b.readDouble=function(){return this.$1.readDoubleBE()};b.writeDouble=function(a){return this.$1.writeDoubleBE(a)};b.writeString=function(a){return this.writeBinary(d("StringToUtf8").StringToUtf8(a))};b.skip=function(a){switch(a){case(h||(h=c("ThriftTypes"))).STOP:return;case(h||(h=c("ThriftTypes"))).BOOL:this.readBool();break;case(h||(h=c("ThriftTypes"))).BYTE:this.readByte();break;case(h||(h=c("ThriftTypes"))).DOUBLE:this.readDouble();break;case(h||(h=c("ThriftTypes"))).I16:this.readI16();break;case(h||(h=c("ThriftTypes"))).I32:this.readI32();break;case(h||(h=c("ThriftTypes"))).I64:this.readI64();break;case(h||(h=c("ThriftTypes"))).STRING:this.readString();break;case(h||(h=c("ThriftTypes"))).STRUCT:this.readStructBegin();var b;while(!0){b=this.readFieldBegin();if(b.ftype===(h||(h=c("ThriftTypes"))).STOP)break;this.skip(b.ftype)}this.readStructEnd();break;case(h||(h=c("ThriftTypes"))).MAP:b=this.readMapBegin();if(b.size>0&&b.ktype!=null&&b.vtype!=null){var d=b.ktype,e=b.vtype;for(var f=0;f<b.size;f++)this.skip(d),this.skip(e)}break;case(h||(h=c("ThriftTypes"))).SET:case(h||(h=c("ThriftTypes"))).LIST:f=this.$11();for(d=0;d<f.size;d++)this.skip(f.etype);break;case(h||(h=c("ThriftTypes"))).FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};b.toByteArray=function(){return this.$1.toByteArray()};b.writeFieldEnd=function(){return 0};b.writeFieldStop=function(){return this.$1.writeByte((h||(h=c("ThriftTypes"))).STOP)};b.writeI16=function(a){if(a<o||a>n)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<o||a>n)throw new Error("read invalid i16: "+a);return a};b.writeI32=function(a){if(a<q||a>p)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI32=function(){return this.zigzagToI32(this.readVarint32())};b.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};b.readI64=function(){return this.zigzagToI64(this.readVarint64())};b.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===i.CT_BOOLEAN_TRUE;return a};b.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?j.CT_BOOLEAN_TRUE:j.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?i.CT_BOOLEAN_TRUE:i.CT_BOOLEAN_FALSE);return b};b.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};b.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};b.i32ToZigzag=function(a){if(a<q||a>p)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};b.zigzagToI32=function(a){if(a<0||a>r)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};b.i64ToZigzag=function(a){if(a>s||a<t)throw new Error("i64 out of range: "+a.toString());return a>>v^a<<w};b.zigzagToI64=function(a){if(a<0||a>u)throw new Error("invalid uint64: "+a.toString());return(a&w)===w?~(a>>w):a>>w};b.writeVarint32=function(a){if(a<0||a>r)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};b.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};b.writeVarint64=function(a){if(a<0||a>u)throw new Error("invalid uint64: "+a.toString());a=a;var b=0;while(!0)if(a>>x==0){this.$1.writeByte(Number(a));b++;break}else this.$1.writeByte(Number(a&y|z)),b++,a>>=x;return b};b.readVarint64=function(){var a=BigInt(0),b=BigInt(0),c;while(!0){c=BigInt(this.$1.readByte());a|=(c&y)<<b;b+=x;if((c&z)==0){if(b==70&&c!==w)throw new Error("result exceeded 64 bit limit");break}if(b>63)throw new Error("result exceeded 64 bit limit")}return a};b.readString=function(){return d("Utf8ToString").Utf8ToString(this.readBinary())};b.getLastFieldId=function(){return this.$3};b.getLastField=function(){return this.$2};b.getBooleanFieldInfo=function(){return this.$4};b.getBooleanValue=function(){return this.$5};b.$9=function(a){return k[a]};b.$10=function(a){switch(a){case i.CT_STOP:return(h||(h=c("ThriftTypes"))).STOP;case i.CT_BOOLEAN_FALSE:case i.CT_BOOLEAN_TRUE:return(h||(h=c("ThriftTypes"))).BOOL;case i.CT_BYTE:return(h||(h=c("ThriftTypes"))).BYTE;case i.CT_I16:return(h||(h=c("ThriftTypes"))).I16;case i.CT_I32:return(h||(h=c("ThriftTypes"))).I32;case i.CT_I64:return(h||(h=c("ThriftTypes"))).I64;case i.CT_DOUBLE:return(h||(h=c("ThriftTypes"))).DOUBLE;case i.CT_FLOAT:return(h||(h=c("ThriftTypes"))).FLOAT;case i.CT_BINARY:return(h||(h=c("ThriftTypes"))).STRING;case i.CT_LIST:return(h||(h=c("ThriftTypes"))).LIST;case i.CT_SET:return(h||(h=c("ThriftTypes"))).SET;case i.CT_MAP:return(h||(h=c("ThriftTypes"))).MAP;case i.CT_STRUCT:return(h||(h=c("ThriftTypes"))).STRUCT;default:throw new Error("don't know what type")}};return a}();g["default"]=a}),98);
__d("CompactSerializer",["TCompactProtocol","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f,g){function a(a,b,c){try{return h(a,b)}catch(a){c!=null&&c(a)}return null}function h(a,b){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);return b(a)}function b(a,b,c,d){c===void 0&&(c=!1);try{return i(a,b,c)}catch(a){d!=null&&d(a)}return null}function i(a,b,d){d===void 0&&(d=!1);if(d){d=new(c("TNoOpWriteBuffer"))();var e=new(c("TCompactProtocol"))(d);b(a,e);e=new(c("TWriteBuffer"))(d.currentSize())}else e=new(c("TWriteBuffer"))();d=new(c("TCompactProtocol"))(e);b(a,d);return d.toByteArray()}g.deserializeNoThrow=a;g.deserialize=h;g.serializeNoThrow=b;g.serialize=i}),98);
__d("MultiwaySharedTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({UNKNOWN:0,SFU:1,P2P:2});d=a({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23});f=a({OFFER:0,PRANSWER:1,ANSWER:2,PROFFER:3});b=a({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4});var g=a({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2}),h=a({NOT_SET:0,CONTROL:1,TEST:2}),i=a({NotPaused:0,Paused:1}),j=a({AUDIO:0,VIDEO:1,DATA:2}),k=a({UDP:1,TCP:2}),l=a({DEFAULT:0,DIRECT_XPOP:1,PSEUDO_QUIC:2,OVERRIDE:3,RT_GATEWAY:4,GENAI_EDGE:5,SFU_EDGE:6}),m=a({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8}),n=a({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2}),o=a({UNKNOWN:0,DEFAULT:1,SCREEN_SHARE:2}),p=a({UNSPECIFIED:0,FNA:1,FNA_PREFERRED:2});a=a({IntValue:"intValue",StringValue:"stringValue"});e.exports={ConferenceType:d,E2eeInfraMandatedExpStatus:h,E2eeMode:g,EdgerayType:p,EndpointServiceType:m,MediaPath:c,MediaPauseStatus:i,MediaType:j,ProxygenCandidateProtocol:k,ProxygenVipType:l,QuickExperimentValue$Types:a,RenderedStreamType:o,SdpType:f,SubscriptionType:n,VideoQuality:b}}),null);
__d("WebrtcSignalingCommonTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3,CUSTOM_VIDEO:4,CUSTOM_AUDIO:5});d=a({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5});f=a({NONE:0,AVATAR:1,AUGMENTED_CALLING:2,SCENE_COMPOSITION:3,STEREO_VIDEO:4,SHARED_STATE:5});b=a({NONE:0,AMBISONIC:1,CONVERSATION_BOT:2,MONOMIX:3});e.exports={ClientStack:d,CustomAudioContentType:b,CustomVideoContentType:f,TrackLabel:c}}),null);
__d("MultiwaySharedSerializers",["MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{cluster:"",nonce:""}}function b(){return{cluster:"",conferenceName:"",nonce:"",userId:"",clientSessionId:""}}function e(){return{userId:"",deviceId:"",appId:"",appVersion:"",appBuildNumber:""}}function f(){return{mode:d("MultiwaySharedTypes").E2eeMode.cast(0),preventSfuMode:!1,infraMandatedExpStatus:d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0)}}function i(){return{semantics:"",ssrcs:[]}}function j(){return{type:d("MultiwaySharedTypes").MediaType.cast(0),id:"",ssrcs:[],enabled:!1,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function k(){return{protocol:d("MultiwaySharedTypes").ProxygenCandidateProtocol.cast(0),vipAddress:"",port:0}}function l(){return{candidates:[],edgeRegion:""}}function m(){return{vipTypeAllocationsMap:{}}}function n(){return{parameters:{},conditionFbid:"0",exposureHasBeenLogged:!1,canExposureLog:!1,universeShortName:"",userFbid:"0",unitId:""}}function o(){return{experiments:{},userFbid:"0"}}function p(){return{conditionFbid:"0",userFbid:"0",universeName:"",unitId:""}}function q(){return{enabled:!1,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0),customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0)}}function r(){return{tracks:{}}}function s(){return{videoQuality:d("MultiwaySharedTypes").VideoQuality.cast(0)}}function t(){return{cname:"",type:d("MultiwaySharedTypes").SubscriptionType.cast(0)}}function u(){return{restrictiveLogging:!0,verboseLogging:!1}}function v(){return{userId:"",streamId:"",streamType:0,renderWidth:0,renderHeight:0}}function w(){return{}}function x(){return{}}function y(){return{}}function z(){return{host:Uint8Array.of(),port:0}}function A(){return{}}function B(a,b){b.writeStructBegin("ServerInfo");b.writeFieldBegin({fname:"cluster",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cluster!=null)b.writeString(a.cluster);else{var d="";b.writeString(d)}b.writeFieldEnd();a.conferenceName_deprecated!=null&&(b.writeFieldBegin({fname:"conferenceName_deprecated",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.conferenceName_deprecated),b.writeFieldEnd());b.writeFieldBegin({fname:"nonce",ftype:h.STRING,fid:3});if(a.nonce!=null)b.writeString(a.nonce);else{d="";b.writeString(d)}b.writeFieldEnd();a.conferenceId!=null&&(b.writeFieldBegin({fname:"conferenceId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:4}),b.writeI64(BigInt(a.conferenceId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("ClientSessionInfo");b.writeFieldBegin({fname:"cluster",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cluster!=null)b.writeString(a.cluster);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"conferenceName",ftype:h.STRING,fid:2});if(a.conferenceName!=null)b.writeString(a.conferenceName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"nonce",ftype:h.STRING,fid:3});if(a.nonce!=null)b.writeString(a.nonce);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"userId",ftype:h.STRING,fid:4});if(a.userId!=null)b.writeString(a.userId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"clientSessionId",ftype:h.STRING,fid:5});if(a.clientSessionId!=null)b.writeString(a.clientSessionId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("Endpoint");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceId",ftype:h.STRING,fid:2});if(a.deviceId!=null)b.writeString(a.deviceId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appId",ftype:h.STRING,fid:3});if(a.appId!=null)b.writeString(a.appId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appVersion",ftype:h.STRING,fid:4});if(a.appVersion!=null)b.writeString(a.appVersion);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"appBuildNumber",ftype:h.STRING,fid:5});if(a.appBuildNumber!=null)b.writeString(a.appBuildNumber);else{d="";b.writeString(d)}b.writeFieldEnd();a.clientStackInfo!=null&&(b.writeFieldBegin({fname:"clientStackInfo",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.clientStackInfo),b.writeFieldEnd());a.familyDeviceId!=null&&(b.writeFieldBegin({fname:"familyDeviceId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.familyDeviceId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function E(a,b){b.writeStructBegin("E2eeEnforcement");b.writeFieldBegin({fname:"mode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.mode!=null){var e;b.writeI32((e=a.mode)!=null?e:0)}else{e=d("MultiwaySharedTypes").E2eeMode.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"preventSfuMode",ftype:h.BOOL,fid:2});if(a.preventSfuMode!=null)b.writeBool(a.preventSfuMode);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"infraMandatedExpStatus",ftype:h.I32,fid:3});if(a.infraMandatedExpStatus!=null){b.writeI32((e=a.infraMandatedExpStatus)!=null?e:0)}else{a=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function F(a,b){b.writeStructBegin("SsrcGroup");b.writeFieldBegin({fname:"semantics",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.semantics!=null)b.writeString(a.semantics);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcs",ftype:h.LIST,fid:2});if(a.ssrcs!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.ssrcs.length});for(var d=a.ssrcs,a=Array.isArray(d),e=0,d=a?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(a){if(e>=d.length)break;f=d[e++]}else{e=d.next();if(e.done)break;f=e.value}f=f;b.writeI64(BigInt(f))}b.writeListEnd()}else{f=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:f.length});for(e=0;e<f.length;e++){a=f[e];b.writeI64(BigInt(a))}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("Media");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"id",ftype:h.STRING,fid:2});if(a.id!=null)b.writeString(a.id);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcs",ftype:h.LIST,fid:3});if(a.ssrcs!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:a.ssrcs.length});for(var e=a.ssrcs,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;b.writeI64(BigInt(i))}b.writeListEnd()}else{i=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I64,size:i.length});for(g=0;g<i.length;g++){f=i[g];b.writeI64(BigInt(f))}b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"enabled",ftype:h.BOOL,fid:4});if(a.enabled!=null)b.writeBool(a.enabled);else{e=!1;b.writeBool(e)}b.writeFieldEnd();if(a.pausedDownlink!=null){b.writeFieldBegin({fname:"pausedDownlink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5});b.writeI32((f=a.pausedDownlink)!=null?f:0);b.writeFieldEnd()}if(a.pausedUplink!=null){b.writeFieldBegin({fname:"pausedUplink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((i=a.pausedUplink)!=null?i:0);b.writeFieldEnd()}a.owner!=null&&(b.writeFieldBegin({fname:"owner",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.owner),b.writeFieldEnd());if(a.label!=null){b.writeFieldBegin({fname:"label",ftype:(h||(h=c("ThriftTypes"))).I32,fid:8});b.writeI32((g=a.label)!=null?g:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"customVideoContentType",ftype:h.I32,fid:9});if(a.customVideoContentType!=null){b.writeI32((e=a.customVideoContentType)!=null?e:0)}else{f=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);b.writeI32((i=f)!=null?i:0)}b.writeFieldEnd();a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.name),b.writeFieldEnd());b.writeFieldBegin({fname:"customAudioContentType",ftype:h.I32,fid:11});if(a.customAudioContentType!=null){b.writeI32((g=a.customAudioContentType)!=null?g:0)}else{e=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);b.writeI32((f=e)!=null?f:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("ProxygenCandidate");b.writeFieldBegin({fname:"protocol",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.protocol!=null){var e;b.writeI32((e=a.protocol)!=null?e:0)}else{e=d("MultiwaySharedTypes").ProxygenCandidateProtocol.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"vipAddress",ftype:h.STRING,fid:2});if(a.vipAddress!=null)b.writeString(a.vipAddress);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"port",ftype:h.I32,fid:3});if(a.port!=null)b.writeI32(a.port);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("ProxygenAllocation");b.writeFieldBegin({fname:"candidates",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.candidates!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.candidates.length});for(var d=a.candidates,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;H(g,b)}b.writeListEnd()}else{g=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:g.length});for(f=0;f<g.length;f++){e=g[f];H(e,b)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"edgeRegion",ftype:h.STRING,fid:2});if(a.edgeRegion!=null)b.writeString(a.edgeRegion);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("ProxygenAllocationResult");b.writeFieldBegin({fname:"vipTypeAllocationsMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:3});if(a.vipTypeAllocationsMap!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.LIST,size:Object.keys(a.vipTypeAllocationsMap).length});a=Object.entries(a.vipTypeAllocationsMap);for(var d=0;d<a.length;d++){var e=a[d],f=e[0];e=e[1];b.writeI32((f=Number(f))!=null?f:0);b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(var f=e,e=Array.isArray(f),g=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(e){if(g>=f.length)break;i=f[g++]}else{g=f.next();if(g.done)break;i=g.value}i=i;I(i,b)}b.writeListEnd()}b.writeMapEnd()}else{i={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.LIST,size:Object.keys(i).length});g=Object.entries(i);for(e=0;e<g.length;e++){f=g[e];a=f[0];d=f[1];b.writeI32((i=Number(a))!=null?i:0);b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:d.length});for(f=d,a=Array.isArray(f),i=0,f=a?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(a){if(i>=f.length)break;d=f[i++]}else{i=f.next();if(i.done)break;d=i.value}d=d;I(d,b)}b.writeListEnd()}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("QuickExperiment");b.writeFieldBegin({fname:"parameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.parameters!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.parameters).length});var d=Object.entries(a.parameters);for(var e=0;e<d.length;e++){var f=d[e],g=f[0];f=f[1];b.writeString(g);S(f,b)}b.writeMapEnd()}else{g={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(g).length});f=Object.entries(g);for(d=0;d<f.length;d++){e=f[d];g=e[0];e=e[1];b.writeString(g);S(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"conditionFbid",ftype:h.I64,fid:2});if(a.conditionFbid!=null)b.writeI64(BigInt(a.conditionFbid));else{g="0";b.writeI64(BigInt(g))}b.writeFieldEnd();b.writeFieldBegin({fname:"exposureHasBeenLogged",ftype:h.BOOL,fid:3});if(a.exposureHasBeenLogged!=null)b.writeBool(a.exposureHasBeenLogged);else{e=!1;b.writeBool(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"canExposureLog",ftype:h.BOOL,fid:4});if(a.canExposureLog!=null)b.writeBool(a.canExposureLog);else{f=!1;b.writeBool(f)}b.writeFieldEnd();b.writeFieldBegin({fname:"universeShortName",ftype:h.STRING,fid:5});if(a.universeShortName!=null)b.writeString(a.universeShortName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:6});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{g="0";b.writeI64(BigInt(g))}b.writeFieldEnd();b.writeFieldBegin({fname:"unitId",ftype:h.STRING,fid:7});if(a.unitId!=null)b.writeString(a.unitId);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("QuickExperimentResult");b.writeFieldBegin({fname:"experiments",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.experiments!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.experiments).length});var d=Object.entries(a.experiments);for(var e=0;e<d.length;e++){var f=d[e],g=f[0];f=f[1];b.writeString(g);K(f,b)}b.writeMapEnd()}else{g={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(g).length});f=Object.entries(g);for(d=0;d<f.length;d++){e=f[d];g=e[0];e=e[1];b.writeString(g);K(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:2});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{g="0";b.writeI64(BigInt(g))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("QuickExperimentExposureLoggingEvent");b.writeFieldBegin({fname:"conditionFbid",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.conditionFbid!=null)b.writeI64(BigInt(a.conditionFbid));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"userFbid",ftype:h.I64,fid:2});if(a.userFbid!=null)b.writeI64(BigInt(a.userFbid));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"universeName",ftype:h.STRING,fid:3});if(a.universeName!=null)b.writeString(a.universeName);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"unitId",ftype:h.STRING,fid:4});if(a.unitId!=null)b.writeString(a.unitId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function N(a,b){b.writeStructBegin("ClientTrackInfo");b.writeFieldBegin({fname:"enabled",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:1});if(a.enabled!=null)b.writeBool(a.enabled);else{var e=!1;b.writeBool(e)}b.writeFieldEnd();if(a.pausedUplink!=null){b.writeFieldBegin({fname:"pausedUplink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((e=a.pausedUplink)!=null?e:0);b.writeFieldEnd()}if(a.pausedDownlink!=null){b.writeFieldBegin({fname:"pausedDownlink",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3});b.writeI32((e=a.pausedDownlink)!=null?e:0);b.writeFieldEnd()}a.owner!=null&&(b.writeFieldBegin({fname:"owner",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.owner),b.writeFieldEnd());if(a.label!=null){b.writeFieldBegin({fname:"label",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5});b.writeI32((e=a.label)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"customVideoContentType",ftype:h.I32,fid:6});if(a.customVideoContentType!=null){b.writeI32((e=a.customVideoContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.name),b.writeFieldEnd());b.writeFieldBegin({fname:"customAudioContentType",ftype:h.I32,fid:8});if(a.customAudioContentType!=null){b.writeI32((e=a.customAudioContentType)!=null?e:0)}else{e=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.nodeId!=null&&(b.writeFieldBegin({fname:"nodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:9}),b.writeI64(BigInt(a.nodeId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function O(a,b){b.writeStructBegin("ClientMediaStatus");b.writeFieldBegin({fname:"tracks",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.tracks!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.tracks).length});a=Object.entries(a.tracks);for(var d=0;d<a.length;d++){var e=a[d],f=e[0];e=e[1];b.writeString(f);N(e,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(f).length});e=Object.entries(f);for(a=0;a<e.length;a++){d=e[a];f=d[0];d=d[1];b.writeString(f);N(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function P(a,b){b.writeStructBegin("SubscriptionOptions");b.writeFieldBegin({fname:"videoQuality",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.videoQuality!=null){var e;b.writeI32((e=a.videoQuality)!=null?e:0)}else{e=d("MultiwaySharedTypes").VideoQuality.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.qualityIndex!=null&&(b.writeFieldBegin({fname:"qualityIndex",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2}),b.writeI32(a.qualityIndex),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function aa(a,b){b.writeStructBegin("Subscription");b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cname!=null)b.writeString(a.cname);else{var e="";b.writeString(e)}b.writeFieldEnd();a.options!=null&&(b.writeFieldBegin({fname:"options",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),P(a.options,b),b.writeFieldEnd());b.writeFieldBegin({fname:"type",ftype:h.I32,fid:3});if(a.type!=null){b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwaySharedTypes").SubscriptionType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.trackId!=null&&(b.writeFieldBegin({fname:"trackId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.trackId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function ba(a,b){b.writeStructBegin("LoggingOptions");b.writeFieldBegin({fname:"restrictiveLogging",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:1});if(a.restrictiveLogging!=null)b.writeBool(a.restrictiveLogging);else{var d=!0;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"verboseLogging",ftype:h.BOOL,fid:2});if(a.verboseLogging!=null)b.writeBool(a.verboseLogging);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function ca(a,b){b.writeStructBegin("ResolutionData");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"streamId",ftype:h.STRING,fid:2});if(a.streamId!=null)b.writeString(a.streamId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"streamType",ftype:h.I32,fid:3});if(a.streamType!=null)b.writeI32(a.streamType);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"renderWidth",ftype:h.I32,fid:4});if(a.renderWidth!=null)b.writeI32(a.renderWidth);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"renderHeight",ftype:h.I32,fid:5});if(a.renderHeight!=null)b.writeI32(a.renderHeight);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Q(a,b){b.writeStructBegin("TurnInfo"),a.ipv4!=null&&(b.writeFieldBegin({fname:"ipv4",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeBinary(a.ipv4),b.writeFieldEnd()),a.ipv6!=null&&(b.writeFieldBegin({fname:"ipv6",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.ipv6),b.writeFieldEnd()),a.udpPort!=null&&(b.writeFieldBegin({fname:"udpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.udpPort),b.writeFieldEnd()),a.tcpPort!=null&&(b.writeFieldBegin({fname:"tcpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.tcpPort),b.writeFieldEnd()),a.sslTcpPort!=null&&(b.writeFieldBegin({fname:"sslTcpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5}),b.writeI32(a.sslTcpPort),b.writeFieldEnd()),a.portInfoIdx!=null&&(b.writeFieldBegin({fname:"portInfoIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6}),b.writeI32(a.portInfoIdx),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function R(a,b){b.writeStructBegin("EdgerayInfo");if(a.edgerayType!=null){var d;b.writeFieldBegin({fname:"edgerayType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((d=a.edgerayType)!=null?d:0);b.writeFieldEnd()}a.ipv4!=null&&(b.writeFieldBegin({fname:"ipv4",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.ipv4),b.writeFieldEnd());a.ipv6!=null&&(b.writeFieldBegin({fname:"ipv6",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.ipv6),b.writeFieldEnd());a.token!=null&&(b.writeFieldBegin({fname:"token",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.token),b.writeFieldEnd());a.tokenIdx!=null&&(b.writeFieldBegin({fname:"tokenIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:5}),b.writeI32(a.tokenIdx),b.writeFieldEnd());a.secret!=null&&(b.writeFieldBegin({fname:"secret",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeBinary(a.secret),b.writeFieldEnd());a.secretIdx!=null&&(b.writeFieldBegin({fname:"secretIdx",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7}),b.writeI32(a.secretIdx),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function da(a,b){b.writeStructBegin("RelayInfo");if(a.turns!=null){b.writeFieldBegin({fname:"turns",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});b.writeListBegin({etype:h.STRUCT,size:a.turns.length});for(var d=a.turns,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;Q(g,b)}b.writeListEnd();b.writeFieldEnd()}if(a.edgerays!=null){b.writeFieldBegin({fname:"edgerays",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.edgerays.length});for(g=a.edgerays,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}d=d;R(d,b)}b.writeListEnd();b.writeFieldEnd()}a.turnUsername!=null&&(b.writeFieldBegin({fname:"turnUsername",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.turnUsername),b.writeFieldEnd());a.turnPassword!=null&&(b.writeFieldBegin({fname:"turnPassword",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.turnPassword),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function ea(a,b){b.writeStructBegin("TSocketAddress");b.writeFieldBegin({fname:"host",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.host!=null)b.writeBinary(a.host);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"port",ftype:h.I16,fid:2});if(a.port!=null)b.writeI16(a.port);else{d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function S(a,b){b.writeStructBegin("QuickExperimentValue");if(a.intValue!=null){b.writeFieldBegin({fname:"intValue",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});b.writeI64(BigInt(a.intValue));b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.stringValue!=null){b.writeFieldBegin({fname:"stringValue",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});b.writeString(a.stringValue);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function fa(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.cluster=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName_deprecated=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.nonce=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I64?b.conferenceId=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.cluster===void 0&&(b.cluster="");b.nonce===void 0&&(b.nonce="");return b}function ga(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.cluster=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.nonce=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.clientSessionId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.cluster===void 0&&(b.cluster="");b.conferenceName===void 0&&(b.conferenceName="");b.nonce===void 0&&(b.nonce="");b.userId===void 0&&(b.userId="");b.clientSessionId===void 0&&(b.clientSessionId="");return b}function ha(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.deviceId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.appId=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.appVersion=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.appBuildNumber=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRING?b.clientStackInfo=a.readString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).STRING?b.familyDeviceId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.deviceId===void 0&&(b.deviceId="");b.appId===void 0&&(b.appId="");b.appVersion===void 0&&(b.appVersion="");b.appBuildNumber===void 0&&(b.appBuildNumber="");return b}function ia(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.mode=d("MultiwaySharedTypes").E2eeMode.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).BOOL?b.preventSfuMode=a.readBool():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.infraMandatedExpStatus=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.mode===void 0&&(b.mode=d("MultiwaySharedTypes").E2eeMode.cast(0));b.preventSfuMode===void 0&&(b.preventSfuMode=!1);b.infraMandatedExpStatus===void 0&&(b.infraMandatedExpStatus=d("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.cast(0));return b}function ja(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.semantics=a.readString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.ssrcs=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.ssrcs.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.semantics===void 0&&(b.semantics="");b.ssrcs===void 0&&(b.ssrcs=[]);return b}function ka(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwaySharedTypes").MediaType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcs=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString();b.ssrcs.push(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BOOL?b.enabled=a.readBool():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.pausedDownlink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.pausedUplink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.owner=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.label=d("WebrtcSignalingCommonTypes").TrackLabel.cast(a.readI32()):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32()):a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I32?b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwaySharedTypes").MediaType.cast(0));b.id===void 0&&(b.id="");b.ssrcs===void 0&&(b.ssrcs=[]);b.enabled===void 0&&(b.enabled=!1);b.customVideoContentType===void 0&&(b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0));b.customAudioContentType===void 0&&(b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0));return b}function T(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.protocol=d("MultiwaySharedTypes").ProxygenCandidateProtocol.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.vipAddress=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.port=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.protocol===void 0&&(b.protocol=d("MultiwaySharedTypes").ProxygenCandidateProtocol.cast(0));b.vipAddress===void 0&&(b.vipAddress="");b.port===void 0&&(b.port=0);return b}function U(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.candidates=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=T(a);b.candidates.push(g)}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.edgeRegion=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.candidates===void 0&&(b.candidates=[]);b.edgeRegion===void 0&&(b.edgeRegion="");return b}function la(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 3:if(f===(h||(h=c("ThriftTypes"))).MAP){b.vipTypeAllocationsMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedTypes").ProxygenVipType.cast(a.readI32()),j=[],k=a.readListBegin();for(var l=0;l<k.size;l++){var m=U(a);j.push(m)}i!=null&&(b.vipTypeAllocationsMap[i]=j)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.vipTypeAllocationsMap===void 0&&(b.vipTypeAllocationsMap={});return b}function V(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.parameters={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=$(a);b.parameters[g]=i}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.conditionFbid=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.exposureHasBeenLogged=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.canExposureLog=a.readBool():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.universeShortName=a.readString():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;case 7:e===(h||(h=c("ThriftTypes"))).STRING?b.unitId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.parameters===void 0&&(b.parameters={});b.conditionFbid===void 0&&(b.conditionFbid="0");b.exposureHasBeenLogged===void 0&&(b.exposureHasBeenLogged=!1);b.canExposureLog===void 0&&(b.canExposureLog=!1);b.universeShortName===void 0&&(b.universeShortName="");b.userFbid===void 0&&(b.userFbid="0");b.unitId===void 0&&(b.unitId="");return b}function ma(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.experiments={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=V(a);b.experiments[g]=i}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.experiments===void 0&&(b.experiments={});b.userFbid===void 0&&(b.userFbid="0");return b}function na(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.conditionFbid=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.userFbid=a.readI64().toString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.universeName=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.unitId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.conditionFbid===void 0&&(b.conditionFbid="0");b.userFbid===void 0&&(b.userFbid="0");b.universeName===void 0&&(b.universeName="");b.unitId===void 0&&(b.unitId="");return b}function W(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).BOOL?b.enabled=a.readBool():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.pausedUplink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.pausedDownlink=d("MultiwaySharedTypes").MediaPauseStatus.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.owner=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.label=d("WebrtcSignalingCommonTypes").TrackLabel.cast(a.readI32()):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(a.readI32()):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I64?b.nodeId=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.enabled===void 0&&(b.enabled=!1);b.customVideoContentType===void 0&&(b.customVideoContentType=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(0));b.customAudioContentType===void 0&&(b.customAudioContentType=d("WebrtcSignalingCommonTypes").CustomAudioContentType.cast(0));return b}function oa(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.tracks={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readString(),i=W(a);b.tracks[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.tracks===void 0&&(b.tracks={});return b}function X(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.videoQuality=d("MultiwaySharedTypes").VideoQuality.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.qualityIndex=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.videoQuality===void 0&&(b.videoQuality=d("MultiwaySharedTypes").VideoQuality.cast(0));return b}function pa(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.options=X(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwaySharedTypes").SubscriptionType.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.trackId=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.cname===void 0&&(b.cname="");b.type===void 0&&(b.type=d("MultiwaySharedTypes").SubscriptionType.cast(0));return b}function qa(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).BOOL?b.restrictiveLogging=a.readBool():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.verboseLogging=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.restrictiveLogging===void 0&&(b.restrictiveLogging=!0);b.verboseLogging===void 0&&(b.verboseLogging=!1);return b}function ra(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.streamId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.streamType=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.renderWidth=a.readI32():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I32?b.renderHeight=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.streamId===void 0&&(b.streamId="");b.streamType===void 0&&(b.streamType=0);b.renderWidth===void 0&&(b.renderWidth=0);b.renderHeight===void 0&&(b.renderHeight=0);return b}function Y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.ipv4=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.ipv6=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.udpPort=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.tcpPort=a.readI32():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I32?b.sslTcpPort=a.readI32():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).I32?b.portInfoIdx=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Z(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.edgerayType=d("MultiwaySharedTypes").EdgerayType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.ipv4=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.ipv6=a.readBinary():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.token=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.tokenIdx=a.readI32():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRING?b.secret=a.readBinary():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.secretIdx=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function sa(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.turns=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=Y(a);b.turns.push(g)}}else a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.edgerays=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=Z(a);b.edgerays.push(d)}}else a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.turnUsername=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.turnPassword=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function ta(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.host=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I16?b.port=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.host===void 0&&(b.host=Uint8Array.of());b.port===void 0&&(b.port=0);return b}function $(a){var b,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).I64)if(b==null)d.intValue=a.readI64().toString(),b="intValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: intValue, previous deserialized field: "+b);else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).STRING)if(b==null)d.stringValue=a.readString(),b="stringValue";else throw new Error("more than one field have been deserialized in union type: QuickExperimentValue; current field: stringValue, previous deserialized field: "+b);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}g.ServerInfo$DefaultConstructor=a;g.ClientSessionInfo$DefaultConstructor=b;g.Endpoint$DefaultConstructor=e;g.E2eeEnforcement$DefaultConstructor=f;g.SsrcGroup$DefaultConstructor=i;g.Media$DefaultConstructor=j;g.ProxygenCandidate$DefaultConstructor=k;g.ProxygenAllocation$DefaultConstructor=l;g.ProxygenAllocationResult$DefaultConstructor=m;g.QuickExperiment$DefaultConstructor=n;g.QuickExperimentResult$DefaultConstructor=o;g.QuickExperimentExposureLoggingEvent$DefaultConstructor=p;g.ClientTrackInfo$DefaultConstructor=q;g.ClientMediaStatus$DefaultConstructor=r;g.SubscriptionOptions$DefaultConstructor=s;g.Subscription$DefaultConstructor=t;g.LoggingOptions$DefaultConstructor=u;g.ResolutionData$DefaultConstructor=v;g.TurnInfo$DefaultConstructor=w;g.EdgerayInfo$DefaultConstructor=x;g.RelayInfo$DefaultConstructor=y;g.TSocketAddress$DefaultConstructor=z;g.QuickExperimentValue$DefaultConstructor=A;g.serializeServerInfo=B;g.serializeClientSessionInfo=C;g.serializeEndpoint=D;g.serializeE2eeEnforcement=E;g.serializeSsrcGroup=F;g.serializeMedia=G;g.serializeProxygenCandidate=H;g.serializeProxygenAllocation=I;g.serializeProxygenAllocationResult=J;g.serializeQuickExperiment=K;g.serializeQuickExperimentResult=L;g.serializeQuickExperimentExposureLoggingEvent=M;g.serializeClientTrackInfo=N;g.serializeClientMediaStatus=O;g.serializeSubscriptionOptions=P;g.serializeSubscription=aa;g.serializeLoggingOptions=ba;g.serializeResolutionData=ca;g.serializeTurnInfo=Q;g.serializeEdgerayInfo=R;g.serializeRelayInfo=da;g.serializeTSocketAddress=ea;g.serializeQuickExperimentValue=S;g.deserializeServerInfo=fa;g.deserializeClientSessionInfo=ga;g.deserializeEndpoint=ha;g.deserializeE2eeEnforcement=ia;g.deserializeSsrcGroup=ja;g.deserializeMedia=ka;g.deserializeProxygenCandidate=T;g.deserializeProxygenAllocation=U;g.deserializeProxygenAllocationResult=la;g.deserializeQuickExperiment=V;g.deserializeQuickExperimentResult=ma;g.deserializeQuickExperimentExposureLoggingEvent=na;g.deserializeClientTrackInfo=W;g.deserializeClientMediaStatus=oa;g.deserializeSubscriptionOptions=X;g.deserializeSubscription=pa;g.deserializeLoggingOptions=qa;g.deserializeResolutionData=ra;g.deserializeTurnInfo=Y;g.deserializeEdgerayInfo=Z;g.deserializeRelayInfo=sa;g.deserializeTSocketAddress=ta;g.deserializeQuickExperimentValue=$}),98);
__d("WebrtcSignalingCommonSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{topic:"",data:Uint8Array.of()}}function b(a,b){b.writeStructBegin("GenericDataMessage");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"data",ftype:h.STRING,fid:2});if(a.data!=null)b.writeBinary(a.data);else{d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.e2eEncryptedData!=null&&(b.writeFieldBegin({fname:"e2eEncryptedData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.e2eEncryptedData),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.e2eEncryptedData=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.data===void 0&&(b.data=Uint8Array.of());return b}g.GenericDataMessage$DefaultConstructor=a;g.serializeGenericDataMessage=b;g.deserializeGenericDataMessage=d}),98);
__d("DataMessageSerializers",["MultiwaySharedSerializers","MultiwaySharedTypes","ThriftTypes","WebrtcSignalingCommonSerializers"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){return{topic_DEPRECATED:""}}function a(){return{userId:""}}function b(){return{userId:"",cname:"",trackIds:[],transactionId:"0"}}function e(){return{cname:"",quality_DEPRECATED:d("MultiwaySharedTypes").VideoQuality.cast(0)}}function f(){return{userId:"",bottleneckBps:0}}function j(){return{bottleneckUplinksByLayer:{}}}function k(){return{duplicationAmount:0,delayMs:0}}function l(){return{}}function m(){return{}}function n(){return{primarySpeakerUserId:"",transactionId:"0"}}function o(){return{}}function p(){return{signalingMessagePayload:Uint8Array.of()}}function q(){return{signalingMessagePayload:Uint8Array.of()}}function r(){return{subscriptionMessagePayload:[]}}function s(){return{}}function t(){return{}}function u(){return{nodeIdToUserIdMap:{},nodeIdToServiceTypeMap:{}}}function v(){return{}}function w(){return{header:i()}}function x(a,b){b.writeStructBegin("DataHeader");a.sender!=null&&(b.writeFieldBegin({fname:"sender",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sender),b.writeFieldEnd());b.writeFieldBegin({fname:"topic_DEPRECATED",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic_DEPRECATED!=null)b.writeString(a.topic_DEPRECATED);else{var d="";b.writeString(d)}b.writeFieldEnd();if(a.recipients!=null){b.writeFieldBegin({fname:"recipients",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});b.writeSetBegin({etype:h.STRING,size:a.recipients.size});for(var d=a.recipients,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.writeString(g)}b.writeSetEnd();b.writeFieldEnd()}if(a.serviceSender!=null){b.writeFieldBegin({fname:"serviceSender",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4});b.writeI32((g=a.serviceSender)!=null?g:0);b.writeFieldEnd()}if(a.serviceRecipients!=null){b.writeFieldBegin({fname:"serviceRecipients",ftype:(h||(h=c("ThriftTypes"))).SET,fid:5});b.writeSetBegin({etype:h.I32,size:a.serviceRecipients.size});for(f=a.serviceRecipients,e=Array.isArray(f),d=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(d>=f.length)break;g=f[d++]}else{d=f.next();if(d.done)break;g=d.value}g=g;b.writeI32((g=g)!=null?g:0)}b.writeSetEnd();b.writeFieldEnd()}a.shouldSendToAllUsers!=null&&(b.writeFieldBegin({fname:"shouldSendToAllUsers",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:6}),b.writeBool(a.shouldSendToAllUsers),b.writeFieldEnd());a.senderE2eeId!=null&&(b.writeFieldBegin({fname:"senderE2eeId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeBinary(a.senderE2eeId),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("SpeakerDetail");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("DominantSpeakerNotification");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"cname",ftype:h.STRING,fid:2});if(a.cname!=null)b.writeString(a.cname);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"trackIds",ftype:h.LIST,fid:4});if(a.trackIds!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.trackIds.length});for(var d=a.trackIds,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.writeString(g)}b.writeListEnd()}else{g=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:g.length});for(f=0;f<g.length;f++){e=g[f];b.writeString(e)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.I64,fid:5});if(a.transactionId!=null)b.writeI64(BigInt(a.transactionId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();if(a.dominantSpeakers!=null){b.writeFieldBegin({fname:"dominantSpeakers",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:6});b.writeListBegin({etype:h.STRUCT,size:a.dominantSpeakers.length});for(e=a.dominantSpeakers,g=Array.isArray(e),f=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=e.length)break;d=e[f++]}else{f=e.next();if(f.done)break;d=f.value}a=d;y(a,b)}b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("VideoUploadRequest");b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.cname!=null)b.writeString(a.cname);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"quality_DEPRECATED",ftype:h.I32,fid:2});if(a.quality_DEPRECATED!=null){b.writeI32((e=a.quality_DEPRECATED)!=null?e:0)}else{e=d("MultiwaySharedTypes").VideoQuality.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.qualityMask!=null&&(b.writeFieldBegin({fname:"qualityMask",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.qualityMask),b.writeFieldEnd());if(a.perSsrcTargetBitrateBpsMap!=null){b.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:4});b.writeMapBegin({ktype:h.I64,vtype:h.I64,size:Object.keys(a.perSsrcTargetBitrateBpsMap).length});e=Object.entries(a.perSsrcTargetBitrateBpsMap);for(a=0;a<e.length;a++){var f=e[a],g=f[0];f=f[1];b.writeI64(BigInt(g));b.writeI64(BigInt(f))}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("ReceiverBottleneck");b.writeFieldBegin({fname:"userId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.userId!=null)b.writeString(a.userId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"bottleneckBps",ftype:h.I32,fid:2});if(a.bottleneckBps!=null)b.writeI32(a.bottleneckBps);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("BweDebugInfo");b.writeFieldBegin({fname:"bottleneckUplinksByLayer",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.bottleneckUplinksByLayer!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.bottleneckUplinksByLayer).length});a=Object.entries(a.bottleneckUplinksByLayer);for(var d=0;d<a.length;d++){var e=a[d],f=e[0];e=e[1];b.writeI32(Number(f));B(e,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});e=Object.entries(f);for(a=0;a<e.length;a++){d=e[a];f=d[0];d=d[1];b.writeI32(Number(f));B(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("AudioDuplicationDebugInfo");b.writeFieldBegin({fname:"duplicationAmount",ftype:(h||(h=c("ThriftTypes"))).I16,fid:1});if(a.duplicationAmount!=null)b.writeI16(a.duplicationAmount);else{var d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"delayMs",ftype:h.I16,fid:2});if(a.delayMs!=null)b.writeI16(a.delayMs);else{d=0;b.writeI16(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function E(a,b){b.writeStructBegin("ReceiveTrackDebugInfo"),a.trackId!=null&&(b.writeFieldBegin({fname:"trackId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.trackId),b.writeFieldEnd()),a.numSimulcastLayersSupported!=null&&(b.writeFieldBegin({fname:"numSimulcastLayersSupported",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2}),b.writeI32(a.numSimulcastLayersSupported),b.writeFieldEnd()),a.numSimulcastLayersAllocated!=null&&(b.writeFieldBegin({fname:"numSimulcastLayersAllocated",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.numSimulcastLayersAllocated),b.writeFieldEnd()),a.spatialLayerIndex!=null&&(b.writeFieldBegin({fname:"spatialLayerIndex",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.spatialLayerIndex),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function F(a,b){b.writeStructBegin("DebugInfo");a.audioDuplicationDebugInfo!=null&&(b.writeFieldBegin({fname:"audioDuplicationDebugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),D(a.audioDuplicationDebugInfo,b),b.writeFieldEnd());if(a.receiveTrackDebugInfo!=null){b.writeFieldBegin({fname:"receiveTrackDebugInfo",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.receiveTrackDebugInfo.length});for(var a=a.receiveTrackDebugInfo,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;E(f,b)}b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function G(a,b){b.writeStructBegin("DominantSpeakerInfo");b.writeFieldBegin({fname:"primarySpeakerUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.primarySpeakerUserId!=null)b.writeString(a.primarySpeakerUserId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.I64,fid:2});if(a.transactionId!=null)b.writeI64(BigInt(a.transactionId));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("VideoUploadInfo");a.qualityMask!=null&&(b.writeFieldBegin({fname:"qualityMask",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.qualityMask),b.writeFieldEnd());if(a.perSsrcTargetBitrateBpsMap!=null){b.writeFieldBegin({fname:"perSsrcTargetBitrateBpsMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:2});b.writeMapBegin({ktype:h.I64,vtype:h.I64,size:Object.keys(a.perSsrcTargetBitrateBpsMap).length});a=Object.entries(a.perSsrcTargetBitrateBpsMap);for(var d=0;d<a.length;d++){var e=a[d],f=e[0];e=e[1];b.writeI64(BigInt(f));b.writeI64(BigInt(e))}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("SignalingMessageToClient");b.writeFieldBegin({fname:"signalingMessagePayload",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.signalingMessagePayload!=null)b.writeBinary(a.signalingMessagePayload);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("SignalingMessageFromClient");b.writeFieldBegin({fname:"signalingMessagePayload",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.signalingMessagePayload!=null)b.writeBinary(a.signalingMessagePayload);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.version!=null&&(b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.version)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("SubscriptionMessageFromClient");b.writeFieldBegin({fname:"subscriptionMessagePayload",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.subscriptionMessagePayload!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.subscriptionMessagePayload.length});for(var a=a.subscriptionMessagePayload,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;d("MultiwaySharedSerializers").serializeSubscription(g,b)}b.writeListEnd()}else{g=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:g.length});for(f=0;f<g.length;f++){e=g[f];d("MultiwaySharedSerializers").serializeSubscription(e,b)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("RenderResolutionMessageFromClient");if(a.renderResolutionMap!=null){b.writeFieldBegin({fname:"renderResolutionMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});b.writeMapBegin({ktype:h.STRING,vtype:h.MAP,size:Object.keys(a.renderResolutionMap).length});a=Object.entries(a.renderResolutionMap);for(var e=0;e<a.length;e++){var f=a[e],g=f[0];f=f[1];b.writeString(g);b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});g=Object.entries(f);for(f=0;f<g.length;f++){var i=g[f],j=i[0];i=i[1];b.writeI32((j=Number(j))!=null?j:0);d("MultiwaySharedSerializers").serializeResolutionData(i,b)}b.writeMapEnd()}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function aa(a,b){b.writeStructBegin("RenderResolutionMessageToClient");if(a.renderResolutionMap!=null){b.writeFieldBegin({fname:"renderResolutionMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});b.writeMapBegin({ktype:h.STRING,vtype:h.MAP,size:Object.keys(a.renderResolutionMap).length});a=Object.entries(a.renderResolutionMap);for(var e=0;e<a.length;e++){var f=a[e],g=f[0];f=f[1];b.writeString(g);b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});g=Object.entries(f);for(f=0;f<g.length;f++){var i=g[f],j=i[0];i=i[1];b.writeI32((j=Number(j))!=null?j:0);d("MultiwaySharedSerializers").serializeResolutionData(i,b)}b.writeMapEnd()}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function ba(a,b){b.writeStructBegin("NodeIdNotification");b.writeFieldBegin({fname:"nodeIdToUserIdMap",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.nodeIdToUserIdMap!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I64,size:Object.keys(a.nodeIdToUserIdMap).length});var d=Object.entries(a.nodeIdToUserIdMap);for(var e=0;e<d.length;e++){var f=d[e],g=f[0];f=f[1];b.writeI64(BigInt(g));b.writeI64(BigInt(f))}b.writeMapEnd()}else{g={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I64,size:Object.keys(g).length});f=Object.entries(g);for(d=0;d<f.length;d++){e=f[d];g=e[0];e=e[1];b.writeI64(BigInt(g));b.writeI64(BigInt(e))}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"nodeIdToServiceTypeMap",ftype:h.MAP,fid:2});if(a.nodeIdToServiceTypeMap!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I32,size:Object.keys(a.nodeIdToServiceTypeMap).length});g=Object.entries(a.nodeIdToServiceTypeMap);for(e=0;e<g.length;e++){f=g[e];d=f[0];a=f[1];b.writeI64(BigInt(d));b.writeI32((f=a)!=null?f:0)}b.writeMapEnd()}else{d={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I64,vtype:h.I32,size:Object.keys(d).length});a=Object.entries(d);for(f=0;f<a.length;f++){g=a[f];e=g[0];d=g[1];b.writeI64(BigInt(e));b.writeI32((g=d)!=null?g:0)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("DataMessageBody"),a.genericMessage!=null&&(b.writeFieldBegin({fname:"genericMessage",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),d("WebrtcSignalingCommonSerializers").serializeGenericDataMessage(a.genericMessage,b),b.writeFieldEnd()),a.dominantSpeakerNotification!=null&&(b.writeFieldBegin({fname:"dominantSpeakerNotification",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),z(a.dominantSpeakerNotification,b),b.writeFieldEnd()),a.videoUploadRequest!=null&&(b.writeFieldBegin({fname:"videoUploadRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),A(a.videoUploadRequest,b),b.writeFieldEnd()),a.dominantSpeakerSignalingInfo!=null&&(b.writeFieldBegin({fname:"dominantSpeakerSignalingInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),G(a.dominantSpeakerSignalingInfo,b),b.writeFieldEnd()),a.bweDebugInfo!=null&&(b.writeFieldBegin({fname:"bweDebugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),C(a.bweDebugInfo,b),b.writeFieldEnd()),a.debugInfo!=null&&(b.writeFieldBegin({fname:"debugInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),F(a.debugInfo,b),b.writeFieldEnd()),a.videoUploadSignalingInfo!=null&&(b.writeFieldBegin({fname:"videoUploadSignalingInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),H(a.videoUploadSignalingInfo,b),b.writeFieldEnd()),a.signalingMessageToClient!=null&&(b.writeFieldBegin({fname:"signalingMessageToClient",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8}),I(a.signalingMessageToClient,b),b.writeFieldEnd()),a.signalingMessageFromClient!=null&&(b.writeFieldBegin({fname:"signalingMessageFromClient",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),J(a.signalingMessageFromClient,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function ca(a,b){b.writeStructBegin("DataMessage");b.writeFieldBegin({fname:"header",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.header!=null)x(a.header,b);else{var d=i();x(d,b)}b.writeFieldEnd();a.data_DEPRECATED!=null&&(b.writeFieldBegin({fname:"data_DEPRECATED",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.data_DEPRECATED),b.writeFieldEnd());a.body!=null&&(b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),M(a.body,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function N(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sender=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic_DEPRECATED=a.readString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.recipients=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.recipients.add(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.serviceSender=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32()):a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).SET){b.serviceRecipients=new Set();i=a.readSetBegin();for(g=0;g<i.size;g++){e=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());b.serviceRecipients.add(e)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).BOOL?b.shouldSendToAllUsers=a.readBool():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.senderE2eeId=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic_DEPRECATED===void 0&&(b.topic_DEPRECATED="");return b}function O(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");return b}function P(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(e);break;case 4:if(e===(h||(h=c("ThriftTypes"))).LIST){b.trackIds=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.trackIds.push(g)}}else a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).I64?b.transactionId=a.readI64().toString():a.skip(e);break;case 6:if(e===(h||(h=c("ThriftTypes"))).LIST){b.dominantSpeakers=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=O(a);b.dominantSpeakers.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.cname===void 0&&(b.cname="");b.trackIds===void 0&&(b.trackIds=[]);b.transactionId===void 0&&(b.transactionId="0");return b}function Q(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.quality_DEPRECATED=d("MultiwaySharedTypes").VideoQuality.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.qualityMask=a.readI32():a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.perSsrcTargetBitrateBpsMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString(),j=a.readI64().toString();b.perSsrcTargetBitrateBpsMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.cname===void 0&&(b.cname="");b.quality_DEPRECATED===void 0&&(b.quality_DEPRECATED=d("MultiwaySharedTypes").VideoQuality.cast(0));return b}function R(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.bottleneckBps=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.userId===void 0&&(b.userId="");b.bottleneckBps===void 0&&(b.bottleneckBps=0);return b}function S(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.bottleneckUplinksByLayer={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI32(),i=R(a);b.bottleneckUplinksByLayer[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bottleneckUplinksByLayer===void 0&&(b.bottleneckUplinksByLayer={});return b}function T(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I16?b.duplicationAmount=a.readI16():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I16?b.delayMs=a.readI16():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.duplicationAmount===void 0&&(b.duplicationAmount=0);b.delayMs===void 0&&(b.delayMs=0);return b}function U(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.trackId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.numSimulcastLayersSupported=a.readI32():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.numSimulcastLayersAllocated=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).I32?b.spatialLayerIndex=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function V(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.audioDuplicationDebugInfo=T(a):a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.receiveTrackDebugInfo=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=U(a);b.receiveTrackDebugInfo.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function W(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.primarySpeakerUserId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.transactionId=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.primarySpeakerUserId===void 0&&(b.primarySpeakerUserId="");b.transactionId===void 0&&(b.transactionId="0");return b}function X(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.qualityMask=a.readI32():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).MAP){b.perSsrcTargetBitrateBpsMap={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString(),i=a.readI64().toString();b.perSsrcTargetBitrateBpsMap[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.signalingMessagePayload=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.signalingMessagePayload===void 0&&(b.signalingMessagePayload=Uint8Array.of());return b}function Z(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.signalingMessagePayload=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.signalingMessagePayload===void 0&&(b.signalingMessagePayload=Uint8Array.of());return b}function da(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).LIST){b.subscriptionMessagePayload=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeSubscription(a);b.subscriptionMessagePayload.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.subscriptionMessagePayload===void 0&&(b.subscriptionMessagePayload=[]);return b}function ea(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.renderResolutionMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j={},k=a.readMapBegin();for(var l=0;l<k.size;l++){var m=d("MultiwaySharedTypes").RenderedStreamType.cast(a.readI32()),n=d("MultiwaySharedSerializers").deserializeResolutionData(a);m!=null&&(j[m]=n)}b.renderResolutionMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function fa(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.renderResolutionMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j={},k=a.readMapBegin();for(var l=0;l<k.size;l++){var m=d("MultiwaySharedTypes").RenderedStreamType.cast(a.readI32()),n=d("MultiwaySharedSerializers").deserializeResolutionData(a);m!=null&&(j[m]=n)}b.renderResolutionMap[i]=j}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ga(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.nodeIdToUserIdMap={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readI64().toString(),j=a.readI64().toString();b.nodeIdToUserIdMap[i]=j}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.nodeIdToServiceTypeMap={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=a.readI64().toString();e=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());b.nodeIdToServiceTypeMap[g]=e}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.nodeIdToUserIdMap===void 0&&(b.nodeIdToUserIdMap={});b.nodeIdToServiceTypeMap===void 0&&(b.nodeIdToServiceTypeMap={});return b}function $(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.genericMessage=d("WebrtcSignalingCommonSerializers").deserializeGenericDataMessage(a):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.dominantSpeakerNotification=P(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.videoUploadRequest=Q(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.dominantSpeakerSignalingInfo=W(a):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bweDebugInfo=S(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.debugInfo=V(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.videoUploadSignalingInfo=X(a):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRUCT?b.signalingMessageToClient=Y(a):a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRUCT?b.signalingMessageFromClient=Z(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function ha(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.header=N(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.data_DEPRECATED=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRUCT?b.body=$(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.header===void 0&&(b.header=i());return b}g.DataHeader$DefaultConstructor=i;g.SpeakerDetail$DefaultConstructor=a;g.DominantSpeakerNotification$DefaultConstructor=b;g.VideoUploadRequest$DefaultConstructor=e;g.ReceiverBottleneck$DefaultConstructor=f;g.BweDebugInfo$DefaultConstructor=j;g.AudioDuplicationDebugInfo$DefaultConstructor=k;g.ReceiveTrackDebugInfo$DefaultConstructor=l;g.DebugInfo$DefaultConstructor=m;g.DominantSpeakerInfo$DefaultConstructor=n;g.VideoUploadInfo$DefaultConstructor=o;g.SignalingMessageToClient$DefaultConstructor=p;g.SignalingMessageFromClient$DefaultConstructor=q;g.SubscriptionMessageFromClient$DefaultConstructor=r;g.RenderResolutionMessageFromClient$DefaultConstructor=s;g.RenderResolutionMessageToClient$DefaultConstructor=t;g.NodeIdNotification$DefaultConstructor=u;g.DataMessageBody$DefaultConstructor=v;g.DataMessage$DefaultConstructor=w;g.serializeDataHeader=x;g.serializeSpeakerDetail=y;g.serializeDominantSpeakerNotification=z;g.serializeVideoUploadRequest=A;g.serializeReceiverBottleneck=B;g.serializeBweDebugInfo=C;g.serializeAudioDuplicationDebugInfo=D;g.serializeReceiveTrackDebugInfo=E;g.serializeDebugInfo=F;g.serializeDominantSpeakerInfo=G;g.serializeVideoUploadInfo=H;g.serializeSignalingMessageToClient=I;g.serializeSignalingMessageFromClient=J;g.serializeSubscriptionMessageFromClient=K;g.serializeRenderResolutionMessageFromClient=L;g.serializeRenderResolutionMessageToClient=aa;g.serializeNodeIdNotification=ba;g.serializeDataMessageBody=M;g.serializeDataMessage=ca;g.deserializeDataHeader=N;g.deserializeSpeakerDetail=O;g.deserializeDominantSpeakerNotification=P;g.deserializeVideoUploadRequest=Q;g.deserializeReceiverBottleneck=R;g.deserializeBweDebugInfo=S;g.deserializeAudioDuplicationDebugInfo=T;g.deserializeReceiveTrackDebugInfo=U;g.deserializeDebugInfo=V;g.deserializeDominantSpeakerInfo=W;g.deserializeVideoUploadInfo=X;g.deserializeSignalingMessageToClient=Y;g.deserializeSignalingMessageFromClient=Z;g.deserializeSubscriptionMessageFromClient=da;g.deserializeRenderResolutionMessageFromClient=ea;g.deserializeRenderResolutionMessageToClient=fa;g.deserializeNodeIdNotification=ga;g.deserializeDataMessageBody=$;g.deserializeDataMessage=ha}),98);
__d("DataMessageTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({OK:200,NOT_FOUND:404});e.exports={DataMessageStatusCode:a}}),null);
__d("HorizonWebMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();function h(){var a;d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);return new(c("MqttChannel"))({appId:(a=c("MqttWebConfig")).appID,capabilities:a.capabilities,chatVisibility:!0,clientCapabilities:a.clientCapabilities,endpoint:a.endpoint,initialSubscribedTopics:a.subscribedTopics,pageId:null,phpOverride:a.hostNameOverride,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid})}var i=null;function a(){i==null&&(i=h());return i}function b(){i!=null&&(i.shutdown(),i=null)}g.getHorizonWebMqttChannelInstance=a;g.shutdownAndClear=b}),98);
__d("MqttThriftHeaderSerializers",["ThriftTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(a,b){b.writeStructBegin("MqttThriftHeader"),a.traceInfo!=null&&(b.writeFieldBegin({fname:"traceInfo",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.traceInfo),b.writeFieldEnd()),a.coreContextRequestId!=null&&(b.writeFieldBegin({fname:"coreContextRequestId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.coreContextRequestId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function d(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.traceInfo=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.coreContextRequestId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g.MqttThriftHeader$DefaultConstructor=a;g.serializeMqttThriftHeader=b;g.deserializeMqttThriftHeader=d}),98);
__d("MultiwayCommonTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({STRING:0,THRIFT:1,BOTH:2});d=a({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503});f=a({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,SHOULD_USE_NEW_SIGNALING_PATH:3007,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3});b=a({NONE:0,INFO:1,ERROR:2});var g=a({SUCCESS:0,ERROR:1,SESSION_NOT_FOUND:10,SESSION_MISMATCH:11,SESSION_TERMINATING:12,CONNECTION_ALREADY_EXIST:20,CONNECTION_OLD_EXIST:21,CONNECTION_NOT_FOUND:23,CONNECTION_MISMATCH:24,SDP_INVALID:30,SDP_NEGOTIATION_FAILED:31,EXCEEDED_MAX_PARTICIPANT_COUNT:40,UNAUTHORIZED:50}),h=a({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28,PREFETCH:29}),i=a({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10}),j=a({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22}),k=a({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20}),l=a({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8}),m=a({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10}),n=a({ACTIVE:0,TERMINATED:1}),o=a({UNKNOWN:0,ACTIVE:1,TERMINATED:2}),p=a({DENIED:0,APPROVED:1}),q=a({UNKNOWN:0,SIGNALING_DATA_MESSAGE:1,STATE_SYNC_UPDATE:2,STATE_SYNC_SNAPSHOT:3}),r=a({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17}),s=a({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002}),t=a({PRIMARY:0,SECONDARY:1}),u=a({UNKNOWN:0,MEDIA_CONNECTED:1});a=a({JoinRequest:"joinRequest",JoinResponse:"joinResponse",ServerMediaUpdateRequest:"serverMediaUpdateRequest",ServerMediaUpdateResponse:"serverMediaUpdateResponse",HangupRequest:"hangupRequest",IceCandidateRequest:"iceCandidateRequest",RingRequest:"ringRequest",RingResponse:"ringResponse",DismissRequest:"dismissRequest",ConferenceStateRequest:"conferenceStateRequest",ConferenceStateResponse:"conferenceStateResponse",AddParticipantsRequest:"addParticipantsRequest",SubscriptionRequest:"subscriptionRequest",ClientMediaUpdateRequest:"clientMediaUpdateRequest",ClientMediaUpdateResponse:"clientMediaUpdateResponse",DataMessageRequest:"dataMessageRequest",RemoveParticipantsRequest:"removeParticipantsRequest",DataMessageResponse:"dataMessageResponse",UpdateRequest:"updateRequest",UpdateResponse:"updateResponse",NotifyRequest:"notifyRequest",NotifyResponse:"notifyResponse",ConnectRequest:"connectRequest",ConnectResponse:"connectResponse",ClientEventRequest:"clientEventRequest",ClientEventResponse:"clientEventResponse",UnsubscribeRequest:"unsubscribeRequest",UnsubscribeResponse:"unsubscribeResponse",ApprovalRequest:"approvalRequest",TransferRequest:"transferRequest",PrefetchSdpRequest:"prefetchSdpRequest",PrefetchSdpResponse:"prefetchSdpResponse"});e.exports={ApprovalStatus:p,Capability:k,ClientEventType:u,DeviceStatus:m,DismissReason:j,E2eeDataMessageType:q,ExtensionSessionStatus:o,HangupReason:i,JoinMode:t,MediaConnectionStatus:n,MessageTag:s,MessageType:h,ParticipantCallState:r,RingType:l,RtcApiStatusCode:g,RtcLogSeverity:b,RtcMessageBodyVariant$Types:a,RtcResponseStatusCode:d,RtcResponseSubCode:f,SdpPayloadType:c}}),null);
__d("StateSyncTopicsConfigTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({UNKNOWN:0,INTERNAL:1,EXTERNAL:2});d=a({UNKNOWN:0,PARTICIPANT_JOIN:100,PARTICIPANT_UPDATE:101,PARTICIPANT_LEAVE:102,PARTICIPANT_NEGOTIATED:103,PARTICIPANT_SDP_CHANGED:104,EXTENSION_CREATION:201,EXTENSION_JOIN:202,EXTENSION_UPDATE:203,EXTENSION_LEAVE:204,EXTENSION_REQUEST:205,CONFERENCE_UPDATE:501,DOMINANT_SPEAKER_UPDATE:1001,MEDIA_ASPECT_RATIO_UPDATE:1002,TIMER_FIRED:1003,MEDIA_PATH_CHANGED:1004,PARTICIPANTS_ACKED_MEDIA:1005});f=a({UNKNOWN:0,ANY_PARTICIPANT_SUBSCRIBED:1,ALWAYS_RESOLVE:2});b=a({CACHIUS:1,IRIS:2});a=a({Config_engine:1,E2eeState:2,Media_information:3,Breakout:4,Countdown_timer:5,Effect_match:6,Emoji_reactions:7,Entered_avatars_mode:8,Moderator_controls:9,Polls:10,Raised_hands_queue:11,Xac_calling:12,Action_items:13,Can_you_see_my_screen:14,Collage:15,Companion:16,Coplay:17,Coview:18,Custom_video_capabilities:19,Dropin:20,Dtmf:21,E2ee_v2_msg:22,Effect_sync:23,Et_pluto_activity:24,Et_pluto_session:25,Et_test_activity:26,Et_test_session:27,Et_tubi_activity:28,Et_tubi_session:29,External_resolution_enabled:30,Hyperspace_copresence_state:31,Hyperspace_mic_state:32,Intenticons:33,Live_stream:34,Live_stream_app_message:35,Max_video_subscriptions:36,Media_sync:37,Media_sync_autoplay:38,Meeting_assistant:39,Meeting_transcription:40,Morpheo_grid:41,Multipeer_ar:42,Number_of_people:43,Opaque_blob:44,Photo_booth:45,Qna:46,Quizzes:47,Reactions:48,Role_assignments:49,Room_features_availability:50,Rooms_notes:51,Screenshare_floor_control:52,Screenshare_single_floor_control:53,Sctp_negotiation:54,Sideband:55,Simple:56,Simple_external:57,Simple_pass_through:58,Simple_passthrough:59,Snippets:60,Sound_effects:61,Whiteboard:62,Whiteboard_messenger:63,Workroom:64,Workrooms_ask_everyone_to_open:65,Workrooms_vr:66,Avatar_transport_state:67,Ambisonic:68,Cathode_extension:69,Biz_calling:70,Work_costreaming:71,Conversation_bot:72,Voip_zone:73,Admin_initiated_casting:74,Smart_glasses_assistant:75});e.exports={CryptoAuthVerifierIdentity:b,DataSource:d,DataSourceCondition:f,ResolutionPath:c,TopicId:a}}),null);
__d("WebrtcEnumsTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({OFFER:0,ANSWER:1,ICE_CANDIDATE:2,OK:3,HANG_UP:4,OTHER_DISMISS:5,PRANSWER:7,PING:8,PING_ACK:9,ICE_RESTART_OFFER:10,ICE_RESTART_ANSWER:11,OFFER_ACK:12,ANSWER_ACK:13,NOTIFY_MEDIA_STATE:14,ACK:15,INVALID:16,OFFER_NACK:17,NACK:18,VIDEO_REQUEST:19,SDP_UPDATE:20,SWITCH_TO_MULTIWAY:28,NEGOTIATE:30,PR_OFFER_ACK:32,CLIENT_REPORTED_EVENT:33});d=a({OFFER:0,ANSWER:1});f=a({LL_NIL:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5});b=a({IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,MICROPHONE_PERMISSION_DENIED:20,CAMERA_PERMISSION_DENIED:21,SESSION_MIGRATED:22,RING_MUTED:23,MAX_ALLOWED_PARTICIPANTS_REACHED:24,CALLEE_REQUIRES_MULTIWAY:25,LIVE_NOT_ACKED:26,TX_ACK_TIMEDOUT:27,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:28,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:29,ANSWERED_BY_OTHER_USER:30,LONG_LASTING_AUDIO_ISSUE:31,ADMIN_CALLING_OWN_PAGE:32,PAGE_CALLS_BLOCKED:33});var g=a({UDP:0,TCP:1,SSLTCP:2}),h=a({HOST:0,SERVER_REFLEXIVE:1,PEER_REFLEXIVE:2,RELAY:3}),i=a({TCPTYPE_NONE:0,TCPTYPE_PASSIVE:1,TCPTYPE_ACTIVE:2,TCPTYPE_SIMOPEN:3}),j=a({SENDONLY:0,SENDRECV:1,RECVONLY:2,INACTIVE:3}),k=a({AUDIO:0,VIDEO:1,DATA:2}),l=a({AUDIO:0,VIDEO:1,SCREEN:2}),m=a({AES_CM_128_HMAC_SHA1_80:0,AES_CM_128_HMAC_SHA1_32:1,F8_128_HMAC_SHA1_80:2,AEAD_AES_256_GCM:8}),n=a({RTP_SAVPF:0,DTLS_SCTP:1,SCTP:2}),o=a({URN_IETF_PARAMS_RTP_HDREXT_SSRC_AUDIO_LEVEL:0,URN_IETF_PARAMS_RTP_HDREXT_TOFFSET:1,IETF_DRAFT_HOLMER_RMCAT_TRANSPORT_WIDE_CC_01:2,URN_3GPP_VIDEO_ORIENTATION:3,ABS_SEND_TIME:4,PLAYOUT_DELAY:5,VIDEO_CONTENT_TYPE:6,VIDEO_TIMING:7,RTP_MID:8,RTP_STREAM_ID:9,RTP_REPAIRED_STREAM_ID:10,ENCRYPT_EXTENSIONS:11,FRAME_MARKING:12,GENERIC_FRAME_DESCRIPTOR:13,RTP_LOSS_INFO:14,RTP_CONGESTION_INFO:15,RTP_AUDIO_DROP_INFO:16,FRAME_ENCRYPTION_INFO:17,GENERIC_FRAME_DESCRIPTOR_01:18,DEPENDENCY_DESCRIPTOR:19,COLOR_SPACE:20,ABS_CAPTURE_TIME:21,VIDEO_FRAME_TRACKING_ID:22}),p=a({ISAC:0,SPEEX_ISAC_OBSOLETE:1,SPEEX:2,OPUS:3,PCMU_OBSOLETE:4,PCMA_OBSOLETE:5,CN:6,TELEPHONE_EVENT:7,VP8:8,RED:9,ULPFEC:10,H264:17,ISPX_WB_2:32,GOOGLE_DATA:33,AAC:36,AAC_LD:37,VP9:96,GOOGLE_SCTP_DATA:97,H265:98,RTX:99,FLEXFEC:100,MULTIPLEX:101,VIDEO_DATA:102,AV1:103}),q=a({SILENCEBIT_OBSOLETE:0,SPEEXUSEJITTERBIT_OBSOLETE:1,USEINBANDFEC:2,USEADAPTIVEFEC_OBSOLETE:3,EXTERNALBWE_OBSOLETE:4,FEC_BEI_OBSOLETE:5,ISPX_ADAPTIVE_FEC:6,CBR:7,USEDTX:8}),r=a({MINPTIME:0,MAXAVERAGEBITRATE:1,SPROP_STEREO:2,STEREO:3,MAXPTIME:4,PTIME:5,FEC_BEI_OBSOLETE:6,PORT:7,H264PROFILELEVELID:8,PACKETIZATION_MODE:9,LEVEL_ASYMMETRY_ALLOWED:10,APT:11,MAXPLAYBACKRATE:12,REPAIR_WINDOW:13,EMPTY_KEY:14}),s=a({CR_NONE:0,CR_ACTIVE:1,CR_PASSIVE:2,CR_ACTPASS:3,CR_HOLDCONN:4});a=a({EVENT_NONE:0,EVENT_MEDIA_CONNECTED:1});e.exports={CallEndReason:b,ClientReportedEventType:a,CodecName:p,CodecOption:r,CodecOptionBoolean:q,ConnectionRole:s,CryptoSuite:m,ExtmapUris:o,IceCandidateProtocolType:h,IceCandidateTcpType:i,IceCandidateTransport:g,MediaProtocol:n,MediaType:k,PayloadType:c,SdpNegotiateType:d,SendRecvMode:j,StreamType:l,UploadLogLevel:f}}),null);
__d("WebrtcSdpSerializers",["ThriftTypes","WebrtcEnumsTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{msid:"stream_label"}}function e(){return{id:""}}function f(){return{bwtype:"",bw:0}}function i(){return{numAudioChannels:1}}function j(){return{id:1,extensionAttributes:[]}}function k(){return{}}function l(){return{componentId:1,transport:d("WebrtcEnumsTypes").IceCandidateTransport.cast(0),generation:0}}function m(){return{port:1,protocol:d("WebrtcEnumsTypes").MediaProtocol.cast(0),sendRecvMode:d("WebrtcEnumsTypes").SendRecvMode.cast(1),hasRtcpMux:!0}}function n(){return{supportsMsid:!0}}function o(){return{}}function p(a,b){b.writeStructBegin("SsrcGroup");a.semantics!=null&&(b.writeFieldBegin({fname:"semantics",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.semantics),b.writeFieldEnd());if(a.ssrcIds!=null){b.writeFieldBegin({fname:"ssrcIds",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.I32,size:a.ssrcIds.length});for(var a=a.ssrcIds,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;b.writeI32(f)}b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("SsrcObject");a.ssrcId!=null&&(b.writeFieldBegin({fname:"ssrcId",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.ssrcId),b.writeFieldEnd());a.cname!=null&&(b.writeFieldBegin({fname:"cname",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.cname),b.writeFieldEnd());b.writeFieldBegin({fname:"msid",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3});if(a.msid!=null)b.writeString(a.msid);else{var d="stream_label";b.writeString(d)}b.writeFieldEnd();a.msidAppData!=null&&(b.writeFieldBegin({fname:"msidAppData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.msidAppData),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("RtcpFbVal");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.id!=null)b.writeString(a.id);else{var d="";b.writeString(d)}b.writeFieldEnd();a.param!=null&&(b.writeFieldBegin({fname:"param",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.param),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("Bandwidth");b.writeFieldBegin({fname:"bwtype",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.bwtype!=null)b.writeString(a.bwtype);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"bw",ftype:h.I32,fid:2});if(a.bw!=null)b.writeI32(a.bw);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("CodecDescription");a.payloadType!=null&&(b.writeFieldBegin({fname:"payloadType",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:1}),b.writeByte(a.payloadType),b.writeFieldEnd());if(a.encodingName!=null){var d;b.writeFieldBegin({fname:"encodingName",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.encodingName)!=null?d:0);b.writeFieldEnd()}a.clockRateKhz!=null&&(b.writeFieldBegin({fname:"clockRateKhz",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:3}),b.writeByte(a.clockRateKhz),b.writeFieldEnd());b.writeFieldBegin({fname:"numAudioChannels",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:4});if(a.numAudioChannels!=null)b.writeByte(a.numAudioChannels);else{d=1;b.writeByte(d)}b.writeFieldEnd();if(a.fmtParameters!=null){b.writeFieldBegin({fname:"fmtParameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:5});b.writeMapBegin({ktype:h.I32,vtype:h.STRING,size:Object.keys(a.fmtParameters).length});d=Object.entries(a.fmtParameters);for(var e=0;e<d.length;e++){var f=d[e],g=f[0];f=f[1];b.writeI32((g=Number(g))!=null?g:0);b.writeString(f)}b.writeMapEnd();b.writeFieldEnd()}if(a.enabledOptions!=null){b.writeFieldBegin({fname:"enabledOptions",ftype:(h||(h=c("ThriftTypes"))).SET,fid:6});b.writeSetBegin({etype:h.I32,size:a.enabledOptions.size});for(g=a.enabledOptions,f=Array.isArray(g),d=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(d>=g.length)break;e=g[d++]}else{d=g.next();if(d.done)break;e=d.value}e=e;b.writeI32((e=e)!=null?e:0)}b.writeSetEnd();b.writeFieldEnd()}if(a.rtcpFbParameters!=null){b.writeFieldBegin({fname:"rtcpFbParameters",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRING,size:Object.keys(a.rtcpFbParameters).length});e=Object.entries(a.rtcpFbParameters);for(d=0;d<e.length;d++){f=e[d];g=f[0];f=f[1];b.writeString(g);b.writeString(f)}b.writeMapEnd();b.writeFieldEnd()}if(a.rtcpFbParamList!=null){b.writeFieldBegin({fname:"rtcpFbParamList",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:10});b.writeListBegin({etype:h.STRUCT,size:a.rtcpFbParamList.length});for(g=a.rtcpFbParamList,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}d=d;r(d,b)}b.writeListEnd();b.writeFieldEnd()}a.videoWidth!=null&&(b.writeFieldBegin({fname:"videoWidth",ftype:(h||(h=c("ThriftTypes"))).I32,fid:8}),b.writeI32(a.videoWidth),b.writeFieldEnd());a.videoHeight!=null&&(b.writeFieldBegin({fname:"videoHeight",ftype:(h||(h=c("ThriftTypes"))).I32,fid:9}),b.writeI32(a.videoHeight),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function u(a,b){b.writeStructBegin("Extmap");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.id!=null)b.writeI32(a.id);else{var d=1;b.writeI32(d)}b.writeFieldEnd();if(a.uri!=null){b.writeFieldBegin({fname:"uri",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.uri)!=null?d:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"extensionAttributes",ftype:h.LIST,fid:3});if(a.extensionAttributes!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.extensionAttributes.length});for(var d=a.extensionAttributes,a=Array.isArray(d),e=0,d=a?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(a){if(e>=d.length)break;f=d[e++]}else{e=d.next();if(e.done)break;f=e.value}f=f;b.writeI32((f=f)!=null?f:0)}b.writeListEnd()}else{f=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:f.length});for(e=0;e<f.length;e++){a=f[e];b.writeI32((d=a)!=null?d:0)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("CryptoParam");a.tag!=null&&(b.writeFieldBegin({fname:"tag",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1}),b.writeI32(a.tag),b.writeFieldEnd());if(a.suite!=null){var d;b.writeFieldBegin({fname:"suite",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});b.writeI32((d=a.suite)!=null?d:0);b.writeFieldEnd()}a.keyParams!=null&&(b.writeFieldBegin({fname:"keyParams",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.keyParams),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("IceCandidateSdp");a.foundation!=null&&(b.writeFieldBegin({fname:"foundation",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.foundation),b.writeFieldEnd());b.writeFieldBegin({fname:"componentId",ftype:(h||(h=c("ThriftTypes"))).BYTE,fid:2});if(a.componentId!=null)b.writeByte(a.componentId);else{var e=1;b.writeByte(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"transport",ftype:h.I32,fid:3});if(a.transport!=null){b.writeI32((e=a.transport)!=null?e:0)}else{e=d("WebrtcEnumsTypes").IceCandidateTransport.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.priority!=null&&(b.writeFieldBegin({fname:"priority",ftype:(h||(h=c("ThriftTypes"))).I32,fid:4}),b.writeI32(a.priority),b.writeFieldEnd());a.address!=null&&(b.writeFieldBegin({fname:"address",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.address),b.writeFieldEnd());a.port!=null&&(b.writeFieldBegin({fname:"port",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6}),b.writeI32(a.port),b.writeFieldEnd());if(a.protocolType!=null){b.writeFieldBegin({fname:"protocolType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:7});b.writeI32((e=a.protocolType)!=null?e:0);b.writeFieldEnd()}a.relatedAddress!=null&&(b.writeFieldBegin({fname:"relatedAddress",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:8}),b.writeString(a.relatedAddress),b.writeFieldEnd());a.relatedPort!=null&&(b.writeFieldBegin({fname:"relatedPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:9}),b.writeI32(a.relatedPort),b.writeFieldEnd());a.username!=null&&(b.writeFieldBegin({fname:"username",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.username),b.writeFieldEnd());a.password!=null&&(b.writeFieldBegin({fname:"password",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:11}),b.writeString(a.password),b.writeFieldEnd());b.writeFieldBegin({fname:"generation",ftype:h.I32,fid:12});if(a.generation!=null)b.writeI32(a.generation);else{e=0;b.writeI32(e)}b.writeFieldEnd();if(a.tcptype!=null){b.writeFieldBegin({fname:"tcptype",ftype:(h||(h=c("ThriftTypes"))).I32,fid:13});b.writeI32((e=a.tcptype)!=null?e:0);b.writeFieldEnd()}a.networkId!=null&&(b.writeFieldBegin({fname:"networkId",ftype:(h||(h=c("ThriftTypes"))).I16,fid:14}),b.writeI16(a.networkId),b.writeFieldEnd());a.networkCost!=null&&(b.writeFieldBegin({fname:"networkCost",ftype:(h||(h=c("ThriftTypes"))).I16,fid:15}),b.writeI16(a.networkCost),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("MediaDescription");if(a.mediaType!=null){var e;b.writeFieldBegin({fname:"mediaType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((e=a.mediaType)!=null?e:0);b.writeFieldEnd()}b.writeFieldBegin({fname:"port",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.port!=null)b.writeI32(a.port);else{e=1;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"protocol",ftype:h.I32,fid:3});if(a.protocol!=null){b.writeI32((e=a.protocol)!=null?e:0)}else{e=d("WebrtcEnumsTypes").MediaProtocol.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.fmt!=null&&(b.writeFieldBegin({fname:"fmt",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:22}),b.writeString(a.fmt),b.writeFieldEnd());a.mediaIceUserFrag!=null&&(b.writeFieldBegin({fname:"mediaIceUserFrag",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.mediaIceUserFrag),b.writeFieldEnd());a.mediaIcePassword!=null&&(b.writeFieldBegin({fname:"mediaIcePassword",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.mediaIcePassword),b.writeFieldEnd());if(a.mediaIceOptions!=null){b.writeFieldBegin({fname:"mediaIceOptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:6});b.writeListBegin({etype:h.STRING,size:a.mediaIceOptions.length});for(var e=a.mediaIceOptions,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;b.writeString(i)}b.writeListEnd();b.writeFieldEnd()}a.mediaSslFingerprintHash!=null&&(b.writeFieldBegin({fname:"mediaSslFingerprintHash",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:7}),b.writeString(a.mediaSslFingerprintHash),b.writeFieldEnd());a.mediaSslFingerprintDigest!=null&&(b.writeFieldBegin({fname:"mediaSslFingerprintDigest",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:8}),b.writeString(a.mediaSslFingerprintDigest),b.writeFieldEnd());if(a.extmaps!=null){b.writeFieldBegin({fname:"extmaps",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.extmaps.length});for(i=a.extmaps,g=Array.isArray(i),f=0,i=g?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=i.length)break;e=i[f++]}else{f=i.next();if(f.done)break;e=f.value}e=e;u(e,b)}b.writeListEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"sendRecvMode",ftype:h.I32,fid:10});if(a.sendRecvMode!=null){b.writeI32((e=a.sendRecvMode)!=null?e:0)}else{f=d("WebrtcEnumsTypes").SendRecvMode.cast(1);b.writeI32((g=f)!=null?g:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"hasRtcpMux",ftype:h.BOOL,fid:11});if(a.hasRtcpMux!=null)b.writeBool(a.hasRtcpMux);else{i=!0;b.writeBool(i)}b.writeFieldEnd();a.rtcpReducedSize!=null&&(b.writeFieldBegin({fname:"rtcpReducedSize",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:25}),b.writeBool(a.rtcpReducedSize),b.writeFieldEnd());if(a.cryptoParams!=null){b.writeFieldBegin({fname:"cryptoParams",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:12});b.writeListBegin({etype:h.STRUCT,size:a.cryptoParams.length});for(e=a.cryptoParams,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;v(i,b)}b.writeListEnd();b.writeFieldEnd()}if(a.codecs!=null){b.writeFieldBegin({fname:"codecs",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:13});b.writeListBegin({etype:h.STRUCT,size:a.codecs.length});for(i=a.codecs,g=Array.isArray(i),f=0,i=g?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=i.length)break;e=i[f++]}else{f=i.next();if(f.done)break;e=f.value}e=e;t(e,b)}b.writeListEnd();b.writeFieldEnd()}a.maxPTime!=null&&(b.writeFieldBegin({fname:"maxPTime",ftype:(h||(h=c("ThriftTypes"))).I32,fid:14}),b.writeI32(a.maxPTime),b.writeFieldEnd());a.pTime!=null&&(b.writeFieldBegin({fname:"pTime",ftype:(h||(h=c("ThriftTypes"))).I32,fid:15}),b.writeI32(a.pTime),b.writeFieldEnd());if(a.ssrcObjects!=null){b.writeFieldBegin({fname:"ssrcObjects",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:16});b.writeListBegin({etype:h.STRUCT,size:a.ssrcObjects.length});for(e=a.ssrcObjects,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;q(i,b)}b.writeListEnd();b.writeFieldEnd()}if(a.candidates!=null){b.writeFieldBegin({fname:"candidates",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:17});b.writeListBegin({etype:h.STRUCT,size:a.candidates.length});for(i=a.candidates,g=Array.isArray(i),f=0,i=g?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=i.length)break;e=i[f++]}else{f=i.next();if(f.done)break;e=f.value}e=e;w(e,b)}b.writeListEnd();b.writeFieldEnd()}a.conferenceMode!=null&&(b.writeFieldBegin({fname:"conferenceMode",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:18}),b.writeBool(a.conferenceMode),b.writeFieldEnd());if(a.ssrcGroups!=null){b.writeFieldBegin({fname:"ssrcGroups",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:19});b.writeListBegin({etype:h.STRUCT,size:a.ssrcGroups.length});for(e=a.ssrcGroups,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;p(i,b)}b.writeListEnd();b.writeFieldEnd()}if(a.connectionRole!=null){b.writeFieldBegin({fname:"connectionRole",ftype:(h||(h=c("ThriftTypes"))).I32,fid:20});b.writeI32((i=a.connectionRole)!=null?i:0);b.writeFieldEnd()}a.mid!=null&&(b.writeFieldBegin({fname:"mid",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:21}),b.writeString(a.mid),b.writeFieldEnd());a.bandwidth!=null&&(b.writeFieldBegin({fname:"bandwidth",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:23}),s(a.bandwidth,b),b.writeFieldEnd());a.sctpPort!=null&&(b.writeFieldBegin({fname:"sctpPort",ftype:(h||(h=c("ThriftTypes"))).I32,fid:24}),b.writeI32(a.sctpPort),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("SessionDescription");a.sessionId!=null&&(b.writeFieldBegin({fname:"sessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sessionId),b.writeFieldEnd());a.sessionVersion!=null&&(b.writeFieldBegin({fname:"sessionVersion",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.sessionVersion),b.writeFieldEnd());b.writeFieldBegin({fname:"supportsMsid",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:3});if(a.supportsMsid!=null)b.writeBool(a.supportsMsid);else{var d=!0;b.writeBool(d)}b.writeFieldEnd();a.useIceLite!=null&&(b.writeFieldBegin({fname:"useIceLite",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:4}),b.writeBool(a.useIceLite),b.writeFieldEnd());if(a.features!=null){b.writeFieldBegin({fname:"features",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.STRING,size:a.features.length});for(var d=a.features,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.writeString(g)}b.writeListEnd();b.writeFieldEnd()}if(a.connectionRole!=null){b.writeFieldBegin({fname:"connectionRole",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((g=a.connectionRole)!=null?g:0);b.writeFieldEnd()}a.bandwidth!=null&&(b.writeFieldBegin({fname:"bandwidth",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),s(a.bandwidth,b),b.writeFieldEnd());if(a.transportBundle!=null){b.writeFieldBegin({fname:"transportBundle",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:8});b.writeListBegin({etype:h.STRING,size:a.transportBundle.length});for(f=a.transportBundle,e=Array.isArray(f),d=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(d>=f.length)break;g=f[d++]}else{d=f.next();if(d.done)break;g=d.value}g=g;b.writeString(g)}b.writeListEnd();b.writeFieldEnd()}if(a.commonCryptos!=null){b.writeFieldBegin({fname:"commonCryptos",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.commonCryptos.length});for(g=a.commonCryptos,d=Array.isArray(g),e=0,g=d?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(e>=g.length)break;f=g[e++]}else{e=g.next();if(e.done)break;f=e.value}a=f;v(a,b)}b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function z(a,b){b.writeStructBegin("Sdp");a.sessionDescription!=null&&(b.writeFieldBegin({fname:"sessionDescription",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),y(a.sessionDescription,b),b.writeFieldEnd());if(a.mediaDescriptions!=null){b.writeFieldBegin({fname:"mediaDescriptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.mediaDescriptions.length});for(var a=a.mediaDescriptions,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;x(f,b)}b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function A(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.semantics=a.readString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.ssrcIds=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI32();b.ssrcIds.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function B(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.ssrcId=a.readI32():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.cname=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.msid=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.msidAppData=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.msid===void 0&&(b.msid="stream_label");return b}function C(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.param=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id="");return b}function D(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.bwtype=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.bw=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bwtype===void 0&&(b.bwtype="");b.bw===void 0&&(b.bw=0);return b}function E(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).BYTE?b.payloadType=a.readByte():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.encodingName=d("WebrtcEnumsTypes").CodecName.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).BYTE?b.clockRateKhz=a.readByte():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BYTE?b.numAudioChannels=a.readByte():a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).MAP){b.fmtParameters={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=d("WebrtcEnumsTypes").CodecOption.cast(a.readI32()),j=a.readString();i!=null&&(b.fmtParameters[i]=j)}}else a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).SET){b.enabledOptions=new Set();i=a.readSetBegin();for(j=0;j<i.size;j++){g=d("WebrtcEnumsTypes").CodecOptionBoolean.cast(a.readI32());b.enabledOptions.add(g)}}else a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.rtcpFbParameters={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=a.readString();i=a.readString();b.rtcpFbParameters[j]=i}}else a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).LIST){b.rtcpFbParamList=[];j=a.readListBegin();for(i=0;i<j.size;i++){g=C(a);b.rtcpFbParamList.push(g)}}else a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I32?b.videoWidth=a.readI32():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.videoHeight=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.numAudioChannels===void 0&&(b.numAudioChannels=1);return b}function F(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.id=a.readI32():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.uri=d("WebrtcEnumsTypes").ExtmapUris.cast(a.readI32()):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.extensionAttributes=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("WebrtcEnumsTypes").ExtmapUris.cast(a.readI32());b.extensionAttributes.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id=1);b.extensionAttributes===void 0&&(b.extensionAttributes=[]);return b}function G(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.tag=a.readI32():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.suite=d("WebrtcEnumsTypes").CryptoSuite.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.keyParams=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function H(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.foundation=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).BYTE?b.componentId=a.readByte():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.transport=d("WebrtcEnumsTypes").IceCandidateTransport.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.priority=a.readI32():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.address=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.port=a.readI32():a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).I32?b.protocolType=d("WebrtcEnumsTypes").IceCandidateProtocolType.cast(a.readI32()):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRING?b.relatedAddress=a.readString():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).I32?b.relatedPort=a.readI32():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.username=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRING?b.password=a.readString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).I32?b.generation=a.readI32():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.tcptype=d("WebrtcEnumsTypes").IceCandidateTcpType.cast(a.readI32()):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).I16?b.networkId=a.readI16():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I16?b.networkCost=a.readI16():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.componentId===void 0&&(b.componentId=1);b.transport===void 0&&(b.transport=d("WebrtcEnumsTypes").IceCandidateTransport.cast(0));b.generation===void 0&&(b.generation=0);return b}function I(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.mediaType=d("WebrtcEnumsTypes").MediaType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.port=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.protocol=d("WebrtcEnumsTypes").MediaProtocol.cast(a.readI32()):a.skip(f);break;case 22:f===(h||(h=c("ThriftTypes"))).STRING?b.fmt=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaIceUserFrag=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaIcePassword=a.readString():a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).LIST){b.mediaIceOptions=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.mediaIceOptions.push(i)}}else a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaSslFingerprintHash=a.readString():a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).STRING?b.mediaSslFingerprintDigest=a.readString():a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.extmaps=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=F(a);b.extmaps.push(e)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).I32?b.sendRecvMode=d("WebrtcEnumsTypes").SendRecvMode.cast(a.readI32()):a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).BOOL?b.hasRtcpMux=a.readBool():a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).BOOL?b.rtcpReducedSize=a.readBool():a.skip(f);break;case 12:if(f===(h||(h=c("ThriftTypes"))).LIST){b.cryptoParams=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=G(a);b.cryptoParams.push(i)}}else a.skip(f);break;case 13:if(f===(h||(h=c("ThriftTypes"))).LIST){b.codecs=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=E(a);b.codecs.push(e)}}else a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).I32?b.maxPTime=a.readI32():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.pTime=a.readI32():a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcObjects=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=B(a);b.ssrcObjects.push(i)}}else a.skip(f);break;case 17:if(f===(h||(h=c("ThriftTypes"))).LIST){b.candidates=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=H(a);b.candidates.push(e)}}else a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).BOOL?b.conferenceMode=a.readBool():a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcGroups=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=A(a);b.ssrcGroups.push(i)}}else a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).I32?b.connectionRole=d("WebrtcEnumsTypes").ConnectionRole.cast(a.readI32()):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRING?b.mid=a.readString():a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bandwidth=D(a):a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).I32?b.sctpPort=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.port===void 0&&(b.port=1);b.protocol===void 0&&(b.protocol=d("WebrtcEnumsTypes").MediaProtocol.cast(0));b.sendRecvMode===void 0&&(b.sendRecvMode=d("WebrtcEnumsTypes").SendRecvMode.cast(1));b.hasRtcpMux===void 0&&(b.hasRtcpMux=!0);return b}function J(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sessionId=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.sessionVersion=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).BOOL?b.supportsMsid=a.readBool():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).BOOL?b.useIceLite=a.readBool():a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).LIST){b.features=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.features.push(i)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.connectionRole=d("WebrtcEnumsTypes").ConnectionRole.cast(a.readI32()):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.bandwidth=D(a):a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).LIST){b.transportBundle=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=a.readString();b.transportBundle.push(e)}}else a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.commonCryptos=[];e=a.readListBegin();for(g=0;g<e.size;g++){i=G(a);b.commonCryptos.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.supportsMsid===void 0&&(b.supportsMsid=!0);return b}function K(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.sessionDescription=J(a):a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.mediaDescriptions=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=I(a);b.mediaDescriptions.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}g.SsrcGroup$DefaultConstructor=a;g.SsrcObject$DefaultConstructor=b;g.RtcpFbVal$DefaultConstructor=e;g.Bandwidth$DefaultConstructor=f;g.CodecDescription$DefaultConstructor=i;g.Extmap$DefaultConstructor=j;g.CryptoParam$DefaultConstructor=k;g.IceCandidateSdp$DefaultConstructor=l;g.MediaDescription$DefaultConstructor=m;g.SessionDescription$DefaultConstructor=n;g.Sdp$DefaultConstructor=o;g.serializeSsrcGroup=p;g.serializeSsrcObject=q;g.serializeRtcpFbVal=r;g.serializeBandwidth=s;g.serializeCodecDescription=t;g.serializeExtmap=u;g.serializeCryptoParam=v;g.serializeIceCandidateSdp=w;g.serializeMediaDescription=x;g.serializeSessionDescription=y;g.serializeSdp=z;g.deserializeSsrcGroup=A;g.deserializeSsrcObject=B;g.deserializeRtcpFbVal=C;g.deserializeBandwidth=D;g.deserializeCodecDescription=E;g.deserializeExtmap=F;g.deserializeCryptoParam=G;g.deserializeIceCandidateSdp=H;g.deserializeMediaDescription=I;g.deserializeSessionDescription=J;g.deserializeSdp=K}),98);
__d("MultiwayCommonSerializers",["DataMessageSerializers","DataMessageTypes","MultiwayCommonTypes","MultiwaySharedSerializers","MultiwaySharedTypes","StateSyncSerializers","StateSyncTopicsConfigTypes","StringToUtf8","ThriftTypes","Utf8ToString","WebrtcSdpSerializers","WebrtcSignalingCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a;return{message:"",responseStatusCode:(a=d("MultiwayCommonTypes")).RtcResponseStatusCode.cast(0),responseSubCode:a.RtcResponseSubCode.cast(0),apiStatusCode:a.RtcApiStatusCode.cast(0),rtcLogSeverity:a.RtcLogSeverity.cast(0)}}function i(){return{}}function b(){return{media:{}}}function e(){return{body:"",msid:"",mid:""}}function f(){return{sourceKey:"",media:[],ssrcGroups:[]}}function j(){return{mediaStatus:{}}}function k(){return{sdpMLineIndex:"0",sdpMid:""}}function l(){return{stateStore:{},stateStoreV2:{}}}function aa(){return{version:0}}function ba(){return{encryptedTopic:"",encryptedData:Uint8Array.of(),senderId:Uint8Array.of(),messageType:d("MultiwayCommonTypes").E2eeDataMessageType.cast(0)}}function ca(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[]}}function da(){return{currentVersion:"0",mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0)}}function ea(){return{callerUserId:"",calleeUserId:"",sessionId:""}}function fa(){return{fromVersion:"0",toVersion:"0",mediaUpdates:[],renegotiationRequested:!1,multipleVideoStreamsAllowed:!1,mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),screenShareStreamAllowed:!1}}function ga(){return{currentVersion:"0"}}function ha(){return{}}function ia(){return{reason:d("MultiwayCommonTypes").HangupReason.cast(0),detailedReasonString:""}}function ja(){return{iceCandidateSdps:[]}}function ka(){return{reason:d("MultiwayCommonTypes").DismissReason.cast(0),detailedReasonString:""}}function la(){return{clientCrypto:"",clientFingerprint:""}}function ma(){return{serverSdp:i()}}function na(){return{joinMode:d("MultiwayCommonTypes").JoinMode.cast(0)}}function oa(){return{state:d("MultiwayCommonTypes").ParticipantCallState.cast(0)}}function pa(){return{}}function qa(){return{}}function ra(){return{}}function sa(){return{version:"0",participantStates:{},groupsOfUsers:[]}}function ta(){return{currentVersion:"0"}}function ua(){return{subscriptions:[]}}function va(){return{message:d("DataMessageSerializers").DataMessage$DefaultConstructor()}}function wa(){return{deliveryResult:{}}}function xa(){return{usersToInvite:new Set()}}function ya(){return{smcTier:"",region:"",isUsfu:!1,isEdge:!1}}function za(){return{offer:i(),deviceCapabilities:new Set()}}function Aa(){return{answer:i(),mediaStatus:{},initiator:"",isPendingApproval:!1,multipleVideoStreamsAllowed:!1,mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),groupsOfUsers:[],screenShareStreamAllowed:!1}}function Ba(){return{deviceCapabilities:new Set()}}function Ca(){return{}}function Da(){return{type:d("MultiwayCommonTypes").ClientEventType.cast(0)}}function Ea(){return{clientEvents:[]}}function Fa(){return{}}function Ga(){return{}}function Ha(){return{caller:"",otherParticipants:new Set(),ringType:d("MultiwayCommonTypes").RingType.cast(0),mediaPath:d("MultiwaySharedTypes").MediaPath.cast(0),isTransferCall:!1}}function Ia(){return{deviceStatus:d("MultiwayCommonTypes").DeviceStatus.cast(0)}}function Ja(){return{usersToRemove:new Set()}}function Ka(){return{topic:"",version:0,topicId:d("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function La(){return{topic:"",version:0}}function Ma(){return{syncPayload:l(),topic:"",version:0,topicId:d("StateSyncTopicsConfigTypes").TopicId.cast(0)}}function Na(){return{topic:"",version:0}}function Oa(){return{topic:"",version:0,data:Uint8Array.of()}}function Pa(){return{topic:"",version:0}}function Qa(){return{approvalStatus:d("MultiwayCommonTypes").ApprovalStatus.cast(0),targetUsers:new Set()}}function Ra(){return{id:""}}function Sa(){return{actorId:"",baseId:""}}function m(){return{type:d("MultiwayCommonTypes").MessageType.cast(0),conferenceName:"",transactionId:"",retryCount:0}}function n(){return{}}function Ta(){return{messageHeader:m(),messageBody:n()}}function Ua(){return{users:new Set(),allowMultipleJoins:!1,dismissOthersOnFirstJoin:!1,aliasId:""}}function Va(){return{}}function Wa(a,b){b.writeStructBegin("RtcException");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.message!=null)b.writeString(a.message);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"responseStatusCode",ftype:h.I32,fid:2});if(a.responseStatusCode!=null){b.writeI32((e=a.responseStatusCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"responseSubCode",ftype:h.I32,fid:3});if(a.responseSubCode!=null){b.writeI32((e=a.responseSubCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcResponseSubCode.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"apiStatusCode",ftype:h.I32,fid:4});if(a.apiStatusCode!=null){b.writeI32((e=a.apiStatusCode)!=null?e:0)}else{e=d("MultiwayCommonTypes").RtcApiStatusCode.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"rtcLogSeverity",ftype:h.I32,fid:5});if(a.rtcLogSeverity!=null){b.writeI32((e=a.rtcLogSeverity)!=null?e:0)}else{a=d("MultiwayCommonTypes").RtcLogSeverity.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function o(a,b){b.writeStructBegin("SessionDescription"),a.sdpString!=null&&(b.writeFieldBegin({fname:"sdpString",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.sdpString),b.writeFieldEnd()),a.sdpThrift!=null&&(b.writeFieldBegin({fname:"sdpThrift",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),d("WebrtcSdpSerializers").serializeSdp(a.sdpThrift,b),b.writeFieldEnd()),a.sdpCompressionVersion!=null&&(b.writeFieldBegin({fname:"sdpCompressionVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.sdpCompressionVersion)),b.writeFieldEnd()),a.sdpCompressedData!=null&&(b.writeFieldBegin({fname:"sdpCompressedData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.sdpCompressedData),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function Xa(a,b){b.writeStructBegin("SessionDescriptionUpdate");b.writeFieldBegin({fname:"media",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.media!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.media).length});a=Object.entries(a.media);for(var d=0;d<a.length;d++){var e=a[d],f=e[0];e=e[1];b.writeI32(Number(f));p(e,b)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(f).length});e=Object.entries(f);for(a=0;a<e.length;a++){d=e[a];f=d[0];d=d[1];b.writeI32(Number(f));p(d,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function p(a,b){b.writeStructBegin("MediaDescriptionUpdate");b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.body!=null)b.writeString(a.body);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"msid",ftype:h.STRING,fid:2});if(a.msid!=null)b.writeString(a.msid);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"mid",ftype:h.STRING,fid:3});if(a.mid!=null)b.writeString(a.mid);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("ServerMediaUpdate");b.writeFieldBegin({fname:"sourceKey",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.sourceKey!=null)b.writeString(a.sourceKey);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"media",ftype:h.LIST,fid:2});if(a.media!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.media.length});for(var e=a.media,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;d("MultiwaySharedSerializers").serializeMedia(i,b)}b.writeListEnd()}else{i=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:i.length});for(g=0;g<i.length;g++){f=i[g];d("MultiwaySharedSerializers").serializeMedia(f,b)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"ssrcGroups",ftype:h.LIST,fid:3});if(a.ssrcGroups!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.ssrcGroups.length});for(e=a.ssrcGroups,f=Array.isArray(e),i=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(i>=e.length)break;g=e[i++]}else{i=e.next();if(i.done)break;g=i.value}a=g;d("MultiwaySharedSerializers").serializeSsrcGroup(a,b)}b.writeListEnd()}else{g=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:g.length});for(a=0;a<g.length;a++){i=g[a];d("MultiwaySharedSerializers").serializeSsrcGroup(i,b)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("ClientMediaUpdate");b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.mediaStatus!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});var e=Object.entries(a.mediaStatus);for(var f=0;f<e.length;f++){var g=e[f],i=g[0];g=g[1];b.writeString(i);b.writeBool(g)}b.writeMapEnd()}else{i={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(i).length});g=Object.entries(i);for(e=0;e<g.length;e++){f=g[e];i=f[0];f=f[1];b.writeString(i);b.writeBool(f)}b.writeMapEnd()}b.writeFieldEnd();a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("IceCandidate");a.candidateSdpString!=null&&(b.writeFieldBegin({fname:"candidateSdpString",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.candidateSdpString),b.writeFieldEnd());b.writeFieldBegin({fname:"sdpMLineIndex",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2});if(a.sdpMLineIndex!=null)b.writeI64(BigInt(a.sdpMLineIndex));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"sdpMid",ftype:h.STRING,fid:3});if(a.sdpMid!=null)b.writeString(a.sdpMid);else{e="";b.writeString(e)}b.writeFieldEnd();a.candidateSdpThrift!=null&&(b.writeFieldBegin({fname:"candidateSdpThrift",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),d("WebrtcSdpSerializers").serializeIceCandidateSdp(a.candidateSdpThrift,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("SyncPayload");b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.stateStore!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});var e=Object.entries(a.stateStore);for(var f=0;f<e.length;f++){var g=e[f],i=g[0];g=g[1];b.writeString(i);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd()}else{i={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(i).length});g=Object.entries(i);for(e=0;e<g.length;e++){f=g[e];i=f[0];f=f[1];b.writeString(i);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"stateStoreV2",ftype:h.MAP,fid:4});if(a.stateStoreV2!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});i=Object.entries(a.stateStoreV2);for(f=0;f<i.length;f++){g=i[f];e=g[0];a=g[1];b.writeI32((g=Number(e))!=null?g:0);d("StateSyncSerializers").serializeState(a,b)}b.writeMapEnd()}else{e={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).I32,vtype:h.STRUCT,size:Object.keys(e).length});g=Object.entries(e);for(a=0;a<g.length;a++){i=g[a];f=i[0];e=i[1];b.writeI32((i=Number(f))!=null?i:0);d("StateSyncSerializers").serializeState(e,b)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Ya(a,b){b.writeStructBegin("SyncAck");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.version!=null)b.writeI32(a.version);else{a=0;b.writeI32(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Za(a,b){b.writeStructBegin("E2eeData");b.writeFieldBegin({fname:"encryptedTopic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.encryptedTopic!=null)b.writeString(a.encryptedTopic);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"encryptedData",ftype:h.STRING,fid:2});if(a.encryptedData!=null)b.writeBinary(a.encryptedData);else{e=Uint8Array.of();b.writeBinary(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"senderId",ftype:h.STRING,fid:3});if(a.senderId!=null)b.writeBinary(a.senderId);else{e=Uint8Array.of();b.writeBinary(e)}b.writeFieldEnd();if(a.targetIds!=null){b.writeFieldBegin({fname:"targetIds",ftype:(h||(h=c("ThriftTypes"))).SET,fid:4});b.writeSetBegin({etype:h.STRING,size:a.targetIds.size});for(var e=a.targetIds,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;b.writeBinary(d("StringToUtf8").StringToUtf8(i))}b.writeSetEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"messageType",ftype:h.I32,fid:5});if(a.messageType!=null){b.writeI32((i=a.messageType)!=null?i:0)}else{g=d("MultiwayCommonTypes").E2eeDataMessageType.cast(0);b.writeI32((f=g)!=null?f:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function u(a,b){b.writeStructBegin("ClientMediaUpdateRequest");b.writeFieldBegin({fname:"fromVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.fromVersion!=null)b.writeI64(BigInt(a.fromVersion));else{var d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"toVersion",ftype:h.I64,fid:2});if(a.toVersion!=null)b.writeI64(BigInt(a.toVersion));else{d="0";b.writeI64(BigInt(d))}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaUpdates",ftype:h.LIST,fid:3});if(a.mediaUpdates!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.mediaUpdates.length});for(var d=a.mediaUpdates,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;r(g,b)}b.writeListEnd()}else{g=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:g.length});for(f=0;f<g.length;f++){e=g[f];r(e,b)}b.writeListEnd()}b.writeFieldEnd();a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),o(a.offer,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("ClientMediaUpdateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:6});if(a.mediaPath!=null){b.writeI32((e=a.mediaPath)!=null?e:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});e=Object.entries(a.stateStore);for(var f=0;f<e.length;f++){var g=e[f],i=g[0];g=g[1];b.writeString(i);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:8});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});i=Object.entries(a.stateStoreV2);for(g=0;g<i.length;g++){e=i[g];f=e[0];a=e[1];b.writeI32((e=Number(f))!=null?e:0);d("StateSyncSerializers").serializeState(a,b)}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function $a(a,b){b.writeStructBegin("MultipleRelaysAllocationParameters");b.writeFieldBegin({fname:"callerUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.callerUserId!=null)b.writeString(a.callerUserId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"calleeUserId",ftype:h.STRING,fid:2});if(a.calleeUserId!=null)b.writeString(a.calleeUserId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"sessionId",ftype:h.STRING,fid:3});if(a.sessionId!=null)b.writeString(a.sessionId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("ServerMediaUpdateRequest");b.writeFieldBegin({fname:"fromVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.fromVersion!=null)b.writeI64(BigInt(a.fromVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"toVersion",ftype:h.I64,fid:2});if(a.toVersion!=null)b.writeI64(BigInt(a.toVersion));else{e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaUpdates",ftype:h.LIST,fid:3});if(a.mediaUpdates!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.mediaUpdates.length});for(var e=a.mediaUpdates,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;q(i,b)}b.writeListEnd()}else{i=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:i.length});for(g=0;g<i.length;g++){f=i[g];q(f,b)}b.writeListEnd()}b.writeFieldEnd();a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),o(a.offer,b),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(e=a.appMessages,f=Array.isArray(e),i=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(i>=e.length)break;g=e[i++]}else{i=e.next();if(i.done)break;g=i.value}g=g;d("DataMessageSerializers").serializeDataMessage(g,b)}b.writeListEnd();b.writeFieldEnd()}a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());b.writeFieldBegin({fname:"renegotiationRequested",ftype:h.BOOL,fid:8});if(a.renegotiationRequested!=null)b.writeBool(a.renegotiationRequested);else{g=!1;b.writeBool(g)}b.writeFieldEnd();a.prAnswer!=null&&(b.writeFieldBegin({fname:"prAnswer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),o(a.prAnswer,b),b.writeFieldEnd());if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:10});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});i=Object.entries(a.stateStore);for(f=0;f<i.length;f++){e=i[f];g=e[0];e=e[1];b.writeString(g);d("StateSyncSerializers").serializeState(e,b)}b.writeMapEnd();b.writeFieldEnd()}a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:11}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.multipleRelaysParameters!=null&&(b.writeFieldBegin({fname:"multipleRelaysParameters",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12}),$a(a.multipleRelaysParameters,b),b.writeFieldEnd());b.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:h.BOOL,fid:13});if(a.multipleVideoStreamsAllowed!=null)b.writeBool(a.multipleVideoStreamsAllowed);else{g=!1;b.writeBool(g)}b.writeFieldEnd();a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:15});if(a.mediaPath!=null){b.writeI32((e=a.mediaPath)!=null?e:0)}else{i=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32((f=i)!=null?f:0)}b.writeFieldEnd();a.update!=null&&(b.writeFieldBegin({fname:"update",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),Xa(a.update,b),b.writeFieldEnd());b.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:h.BOOL,fid:17});if(a.screenShareStreamAllowed!=null)b.writeBool(a.screenShareStreamAllowed);else{g=!1;b.writeBool(g)}b.writeFieldEnd();if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:18});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});e=Object.entries(a.stateStoreV2);for(i=0;i<e.length;i++){f=e[i];g=f[0];f=f[1];b.writeI32((g=Number(g))!=null?g:0);d("StateSyncSerializers").serializeState(f,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.allowedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:19});b.writeSetBegin({etype:h.I32,size:a.allowedCustomVideoContentTypes.size});for(g=a.allowedCustomVideoContentTypes,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;i=g[e++]}else{e=g.next();if(e.done)break;i=e.value}i=i;b.writeI32((i=i)!=null?i:0)}b.writeSetEnd();b.writeFieldEnd()}a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("ServerMediaUpdateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),o(a.answer,b),b.writeFieldEnd());a.mediaStatus!=null&&(b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatus,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function y(a,b){b.writeStructBegin("TransferRequest"),b.writeFieldStop(),b.writeStructEnd()}function z(a,b){b.writeStructBegin("HangupRequest");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("MultiwayCommonTypes").HangupReason.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"detailedReasonString",ftype:h.STRING,fid:2});if(a.detailedReasonString!=null)b.writeString(a.detailedReasonString);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function A(a,b){b.writeStructBegin("IceCandidateRequest");b.writeFieldBegin({fname:"iceCandidateSdps",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.iceCandidateSdps!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.iceCandidateSdps.length});for(var a=a.iceCandidateSdps,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;s(f,b)}b.writeListEnd()}else{f=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:f.length});for(e=0;e<f.length;e++){d=f[e];s(d,b)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function B(a,b){b.writeStructBegin("DismissRequest");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("MultiwayCommonTypes").DismissReason.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"detailedReasonString",ftype:h.STRING,fid:2});if(a.detailedReasonString!=null)b.writeString(a.detailedReasonString);else{e="";b.writeString(e)}b.writeFieldEnd();a.callabilityResultErrorCode!=null&&(b.writeFieldBegin({fname:"callabilityResultErrorCode",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.callabilityResultErrorCode)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function C(a,b){b.writeStructBegin("PrefetchSdpRequest");b.writeFieldBegin({fname:"clientCrypto",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.clientCrypto!=null)b.writeString(a.clientCrypto);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"clientFingerprint",ftype:h.STRING,fid:2});if(a.clientFingerprint!=null)b.writeString(a.clientFingerprint);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function D(a,b){b.writeStructBegin("PrefetchSdpResponse");b.writeFieldBegin({fname:"serverSdp",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.serverSdp!=null)o(a.serverSdp,b);else{a=i();o(a,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function ab(a,b){b.writeStructBegin("EndpointSettings");b.writeFieldBegin({fname:"joinMode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.joinMode!=null){b.writeI32((a=a.joinMode)!=null?a:0)}else{a=d("MultiwayCommonTypes").JoinMode.cast(0);b.writeI32((a=a)!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function E(a,b){b.writeStructBegin("ParticipantState");b.writeFieldBegin({fname:"state",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.state!=null){var e;b.writeI32((e=a.state)!=null?e:0)}else{e=d("MultiwayCommonTypes").ParticipantCallState.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.userCapabilities!=null&&(b.writeFieldBegin({fname:"userCapabilities",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.userCapabilities),b.writeFieldEnd());a.sctpNodeId!=null&&(b.writeFieldBegin({fname:"sctpNodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(BigInt(a.sctpNodeId)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function bb(a,b){b.writeStructBegin("ServerOnlyParticipantState"),a.userCountry!=null&&(b.writeFieldBegin({fname:"userCountry",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.userCountry),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function F(a,b){b.writeStructBegin("UserProfile"),a.name!=null&&(b.writeFieldBegin({fname:"name",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.name),b.writeFieldEnd()),a.profilePictureUri!=null&&(b.writeFieldBegin({fname:"profilePictureUri",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.profilePictureUri),b.writeFieldEnd()),a.aliasId!=null&&(b.writeFieldBegin({fname:"aliasId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.aliasId),b.writeFieldEnd()),a.thirdPartyId!=null&&(b.writeFieldBegin({fname:"thirdPartyId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.thirdPartyId),b.writeFieldEnd()),a.groupId!=null&&(b.writeFieldBegin({fname:"groupId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.groupId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function cb(a,b){b.writeStructBegin("ProductMetadata"),a.callerInfo!=null&&(b.writeFieldBegin({fname:"callerInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),F(a.callerInfo,b),b.writeFieldEnd()),a.liveBroadcastId!=null&&(b.writeFieldBegin({fname:"liveBroadcastId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.liveBroadcastId),b.writeFieldEnd()),a.callingTags!=null&&(b.writeFieldBegin({fname:"callingTags",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3}),b.writeI32(a.callingTags),b.writeFieldEnd()),a.backingIdentifier!=null&&(b.writeFieldBegin({fname:"backingIdentifier",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.backingIdentifier),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function G(a,b){b.writeStructBegin("ConferenceStateRequest");b.writeFieldBegin({fname:"version",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.version!=null)b.writeI64(BigInt(a.version));else{var e="0";b.writeI64(BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"participantStates",ftype:h.MAP,fid:2});if(a.participantStates!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(a.participantStates).length});e=Object.entries(a.participantStates);for(var f=0;f<e.length;f++){var g=e[f],i=g[0];g=g[1];b.writeString(i);E(g,b)}b.writeMapEnd()}else{i={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.STRUCT,size:Object.keys(i).length});g=Object.entries(i);for(e=0;e<g.length;e++){f=g[e];i=f[0];f=f[1];b.writeString(i);E(f,b)}b.writeMapEnd()}b.writeFieldEnd();if(a.userProfiles!=null){b.writeFieldBegin({fname:"userProfiles",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:3});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.userProfiles).length});i=Object.entries(a.userProfiles);for(f=0;f<i.length;f++){g=i[f];e=g[0];g=g[1];b.writeString(e);F(g,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:4});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(e=a.appMessages,g=Array.isArray(e),i=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(i>=e.length)break;f=e[i++]}else{i=e.next();if(i.done)break;f=i.value}f=f;d("DataMessageSerializers").serializeDataMessage(f,b)}b.writeListEnd();b.writeFieldEnd()}b.writeFieldBegin({fname:"groupsOfUsers",ftype:h.LIST,fid:5});if(a.groupsOfUsers!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.groupsOfUsers.length});for(f=a.groupsOfUsers,i=Array.isArray(f),g=0,f=i?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(i){if(g>=f.length)break;e=f[g++]}else{g=f.next();if(g.done)break;e=g.value}a=e;Y(a,b)}b.writeListEnd()}else{e=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:e.length});for(a=0;a<e.length;a++){g=e[a];Y(g,b)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function H(a,b){b.writeStructBegin("ConferenceStateResponse");b.writeFieldBegin({fname:"currentVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.currentVersion!=null)b.writeI64(BigInt(a.currentVersion));else{a="0";b.writeI64(BigInt(a))}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function I(a,b){b.writeStructBegin("SubscriptionRequest");b.writeFieldBegin({fname:"subscriptions",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.subscriptions!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.subscriptions.length});for(var a=a.subscriptions,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;d("MultiwaySharedSerializers").serializeSubscription(g,b)}b.writeListEnd()}else{g=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:g.length});for(f=0;f<g.length;f++){e=g[f];d("MultiwaySharedSerializers").serializeSubscription(e,b)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function J(a,b){b.writeStructBegin("DataMessageRequest");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.message!=null)d("DataMessageSerializers").serializeDataMessage(a.message,b);else{a=d("DataMessageSerializers").DataMessage$DefaultConstructor();d("DataMessageSerializers").serializeDataMessage(a,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function K(a,b){b.writeStructBegin("DataMessageResponse");b.writeFieldBegin({fname:"deliveryResult",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:1});if(a.deliveryResult!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.I32,size:Object.keys(a.deliveryResult).length});var d=Object.entries(a.deliveryResult);for(var e=0;e<d.length;e++){var f=d[e],g=f[0];f=f[1];b.writeString(g);b.writeI32((g=f)!=null?g:0)}b.writeMapEnd()}else{f={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.I32,size:Object.keys(f).length});g=Object.entries(f);for(d=0;d<g.length;d++){e=g[d];f=e[0];e=e[1];b.writeString(f);b.writeI32((f=e)!=null?f:0)}b.writeMapEnd()}b.writeFieldEnd();if(a.serviceTypeDeliveryResult!=null){b.writeFieldBegin({fname:"serviceTypeDeliveryResult",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:2});b.writeMapBegin({ktype:h.I32,vtype:h.I32,size:Object.keys(a.serviceTypeDeliveryResult).length});e=Object.entries(a.serviceTypeDeliveryResult);for(f=0;f<e.length;f++){g=e[f];d=g[0];a=g[1];b.writeI32((g=Number(d))!=null?g:0);b.writeI32((d=a)!=null?d:0)}b.writeMapEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function L(a,b){b.writeStructBegin("AddParticipantsRequest");b.writeFieldBegin({fname:"usersToInvite",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.usersToInvite!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.usersToInvite.size});for(var e=a.usersToInvite,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;b.writeString(i)}b.writeSetEnd()}else{i=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:i.size});for(g=i,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;i=g[e++]}else{e=g.next();if(e.done)break;i=e.value}i=i;b.writeString(i)}b.writeSetEnd()}b.writeFieldEnd();if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(i=a.appMessages,e=Array.isArray(i),f=0,i=e?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(f>=i.length)break;g=i[f++]}else{f=i.next();if(f.done)break;g=f.value}a=g;d("DataMessageSerializers").serializeDataMessage(a,b)}b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function M(a,b){b.writeStructBegin("SfuAllocation");b.writeFieldBegin({fname:"smcTier",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.smcTier!=null)b.writeString(a.smcTier);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"region",ftype:h.STRING,fid:2});if(a.region!=null)b.writeString(a.region);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"isUsfu",ftype:h.BOOL,fid:3});if(a.isUsfu!=null)b.writeBool(a.isUsfu);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"isEdge",ftype:h.BOOL,fid:4});if(a.isEdge!=null)b.writeBool(a.isEdge);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function N(a,b){b.writeStructBegin("JoinRequest");b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.offer!=null)o(a.offer,b);else{var e=i();o(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"deviceCapabilities",ftype:h.SET,fid:2});if(a.deviceCapabilities!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.deviceCapabilities.size});for(var e=a.deviceCapabilities,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(f){if(g>=e.length)break;j=e[g++]}else{g=e.next();if(g.done)break;j=g.value}j=j;b.writeI32((j=j)!=null?j:0)}b.writeSetEnd()}else{j=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:j.size});for(g=j,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;j=g[e++]}else{e=g.next();if(e.done)break;j=e.value}j=j;b.writeI32((j=j)!=null?j:0)}b.writeSetEnd()}b.writeFieldEnd();if(a.usersToCall!=null){b.writeFieldBegin({fname:"usersToCall",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});b.writeSetBegin({etype:h.STRING,size:a.usersToCall.size});for(j=a.usersToCall,e=Array.isArray(j),f=0,j=e?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(f>=j.length)break;g=j[f++]}else{f=j.next();if(f.done)break;g=f.value}g=g;b.writeString(g)}b.writeSetEnd();b.writeFieldEnd()}if(a.mediaStatus!=null){b.writeFieldBegin({fname:"mediaStatus",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:4});b.writeMapBegin({ktype:h.STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});g=Object.entries(a.mediaStatus);for(f=0;f<g.length;f++){e=g[f];j=e[0];e=e[1];b.writeString(j);b.writeBool(e)}b.writeMapEnd();b.writeFieldEnd()}a.userCapabilities!=null&&(b.writeFieldBegin({fname:"userCapabilities",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeBinary(a.userCapabilities),b.writeFieldEnd());a.supportedExperiments!=null&&(b.writeFieldBegin({fname:"supportedExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:6}),b.writeString(a.supportedExperiments),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:9});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(j=a.appMessages,e=Array.isArray(j),g=0,j=e?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(g>=j.length)break;f=j[g++]}else{g=j.next();if(g.done)break;f=g.value}f=f;d("DataMessageSerializers").serializeDataMessage(f,b)}b.writeListEnd();b.writeFieldEnd()}a.userToEscalate!=null&&(b.writeFieldBegin({fname:"userToEscalate",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.userToEscalate),b.writeFieldEnd());a.escalatingCallId!=null&&(b.writeFieldBegin({fname:"escalatingCallId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:11}),b.writeI64(BigInt(a.escalatingCallId)),b.writeFieldEnd());if(a.conferenceType!=null){b.writeFieldBegin({fname:"conferenceType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:12});b.writeI32((f=a.conferenceType)!=null?f:0);b.writeFieldEnd()}a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());a.answer!=null&&(b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.answer,b),b.writeFieldEnd());a.syncPayload!=null&&(b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15}),t(a.syncPayload,b),b.writeFieldEnd());if(a.usersToApproveFromWaitingRoom!=null){b.writeFieldBegin({fname:"usersToApproveFromWaitingRoom",ftype:(h||(h=c("ThriftTypes"))).SET,fid:16});b.writeSetBegin({etype:h.STRING,size:a.usersToApproveFromWaitingRoom.size});for(g=a.usersToApproveFromWaitingRoom,e=Array.isArray(g),j=0,g=e?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(j>=g.length)break;f=g[j++]}else{j=g.next();if(j.done)break;f=j.value}f=f;b.writeString(f)}b.writeSetEnd();b.writeFieldEnd()}a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());a.sfuAllocation!=null&&(b.writeFieldBegin({fname:"sfuAllocation",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18}),M(a.sfuAllocation,b),b.writeFieldEnd());if(a.clientMediaMode!=null){b.writeFieldBegin({fname:"clientMediaMode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:19});b.writeI32((f=a.clientMediaMode)!=null?f:0);b.writeFieldEnd()}a.endpointSettings!=null&&(b.writeFieldBegin({fname:"endpointSettings",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),ab(a.endpointSettings,b),b.writeFieldEnd());a.backupSfuAllocation!=null&&(b.writeFieldBegin({fname:"backupSfuAllocation",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:21}),M(a.backupSfuAllocation,b),b.writeFieldEnd());if(a.supportedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:22});b.writeSetBegin({etype:h.I32,size:a.supportedCustomVideoContentTypes.size});for(j=a.supportedCustomVideoContentTypes,e=Array.isArray(j),g=0,j=e?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(g>=j.length)break;f=j[g++]}else{g=j.next();if(g.done)break;f=g.value}f=f;b.writeI32((f=f)!=null?f:0)}b.writeSetEnd();b.writeFieldEnd()}a.configIntegrityOpaqueToken!=null&&(b.writeFieldBegin({fname:"configIntegrityOpaqueToken",ftype:(h||(h=c("ThriftTypes"))).I32,fid:23}),b.writeI32(a.configIntegrityOpaqueToken),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function O(a,b){b.writeStructBegin("JoinResponse");b.writeFieldBegin({fname:"answer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.answer!=null)o(a.answer,b);else{var e=i();o(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaStatus",ftype:h.MAP,fid:2});if(a.mediaStatus!=null){b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(a.mediaStatus).length});e=Object.entries(a.mediaStatus);for(var f=0;f<e.length;f++){var g=e[f],j=g[0];g=g[1];b.writeString(j);b.writeBool(g)}b.writeMapEnd()}else{j={};b.writeMapBegin({ktype:(h||(h=c("ThriftTypes"))).STRING,vtype:h.BOOL,size:Object.keys(j).length});g=Object.entries(j);for(e=0;e<g.length;e++){f=g[e];j=f[0];f=f[1];b.writeString(j);b.writeBool(f)}b.writeMapEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"initiator",ftype:h.STRING,fid:3});if(a.initiator!=null)b.writeString(a.initiator);else{j="";b.writeString(j)}b.writeFieldEnd();a.negotiatedExperiments!=null&&(b.writeFieldBegin({fname:"negotiatedExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeString(a.negotiatedExperiments),b.writeFieldEnd());a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:7});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(f=a.appMessages,g=Array.isArray(f),e=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(e>=f.length)break;j=f[e++]}else{e=f.next();if(e.done)break;j=e.value}j=j;d("DataMessageSerializers").serializeDataMessage(j,b)}b.writeListEnd();b.writeFieldEnd()}if(a.stateStore!=null){b.writeFieldBegin({fname:"stateStore",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:8});b.writeMapBegin({ktype:h.STRING,vtype:h.STRUCT,size:Object.keys(a.stateStore).length});j=Object.entries(a.stateStore);for(e=0;e<j.length;e++){g=j[e];f=g[0];g=g[1];b.writeString(f);d("StateSyncSerializers").serializeState(g,b)}b.writeMapEnd();b.writeFieldEnd()}a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:9}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());b.writeFieldBegin({fname:"isPendingApproval",ftype:h.BOOL,fid:10});if(a.isPendingApproval!=null)b.writeBool(a.isPendingApproval);else{f=!1;b.writeBool(f)}b.writeFieldEnd();a.renegotiationOffer!=null&&(b.writeFieldBegin({fname:"renegotiationOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),o(a.renegotiationOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"multipleVideoStreamsAllowed",ftype:h.BOOL,fid:12});if(a.multipleVideoStreamsAllowed!=null)b.writeBool(a.multipleVideoStreamsAllowed);else{g=!1;b.writeBool(g)}b.writeFieldEnd();b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:13});if(a.mediaPath!=null){b.writeI32((j=a.mediaPath)!=null?j:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32((f=e)!=null?f:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"groupsOfUsers",ftype:h.LIST,fid:14});if(a.groupsOfUsers!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.groupsOfUsers.length});for(g=a.groupsOfUsers,j=Array.isArray(g),e=0,g=j?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(j){if(e>=g.length)break;f=g[e++]}else{e=g.next();if(e.done)break;f=e.value}f=f;Y(f,b)}b.writeListEnd()}else{f=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:f.length});for(e=0;e<f.length;e++){j=f[e];Y(j,b)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"screenShareStreamAllowed",ftype:h.BOOL,fid:15});if(a.screenShareStreamAllowed!=null)b.writeBool(a.screenShareStreamAllowed);else{g=!1;b.writeBool(g)}b.writeFieldEnd();a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());a.selfSctpNodeId!=null&&(b.writeFieldBegin({fname:"selfSctpNodeId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:17}),b.writeI64(BigInt(a.selfSctpNodeId)),b.writeFieldEnd());if(a.stateStoreV2!=null){b.writeFieldBegin({fname:"stateStoreV2",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:18});b.writeMapBegin({ktype:h.I32,vtype:h.STRUCT,size:Object.keys(a.stateStoreV2).length});j=Object.entries(a.stateStoreV2);for(f=0;f<j.length;f++){e=j[f];g=e[0];e=e[1];b.writeI32((g=Number(g))!=null?g:0);d("StateSyncSerializers").serializeState(e,b)}b.writeMapEnd();b.writeFieldEnd()}if(a.allowedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"allowedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:19});b.writeSetBegin({etype:h.I32,size:a.allowedCustomVideoContentTypes.size});for(g=a.allowedCustomVideoContentTypes,e=Array.isArray(g),j=0,g=e?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(j>=g.length)break;f=g[j++]}else{j=g.next();if(j.done)break;f=j.value}a=f;b.writeI32((f=a)!=null?f:0)}b.writeSetEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function P(a,b){b.writeStructBegin("ConnectRequest");a.sdp!=null&&(b.writeFieldBegin({fname:"sdp",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),o(a.sdp,b),b.writeFieldEnd());b.writeFieldBegin({fname:"deviceCapabilities",ftype:(h||(h=c("ThriftTypes"))).SET,fid:3});if(a.deviceCapabilities!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:a.deviceCapabilities.size});for(var e=a.deviceCapabilities,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;b.writeI32((i=i)!=null?i:0)}b.writeSetEnd()}else{i=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).I32,size:i.size});for(g=i,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;i=g[e++]}else{e=g.next();if(e.done)break;i=e.value}i=i;b.writeI32((i=i)!=null?i:0)}b.writeSetEnd()}b.writeFieldEnd();if(a.supportedCustomVideoContentTypes!=null){b.writeFieldBegin({fname:"supportedCustomVideoContentTypes",ftype:(h||(h=c("ThriftTypes"))).SET,fid:5});b.writeSetBegin({etype:h.I32,size:a.supportedCustomVideoContentTypes.size});for(i=a.supportedCustomVideoContentTypes,e=Array.isArray(i),f=0,i=e?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(f>=i.length)break;g=i[f++]}else{f=i.next();if(f.done)break;g=f.value}g=g;b.writeI32((g=g)!=null?g:0)}b.writeSetEnd();b.writeFieldEnd()}a.prOffer!=null&&(b.writeFieldBegin({fname:"prOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),o(a.prOffer,b),b.writeFieldEnd());a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function Q(a,b){b.writeStructBegin("ConnectResponse"),a.sdp!=null&&(b.writeFieldBegin({fname:"sdp",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),o(a.sdp,b),b.writeFieldEnd()),a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function R(a,b){b.writeStructBegin("ClientEvent");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwayCommonTypes").ClientEventType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.time!=null&&(b.writeFieldBegin({fname:"time",ftype:(h||(h=c("ThriftTypes"))).I64,fid:2}),b.writeI64(BigInt(a.time)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function S(a,b){b.writeStructBegin("ClientEventRequest");b.writeFieldBegin({fname:"clientEvents",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:1});if(a.clientEvents!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.clientEvents.length});for(var a=a.clientEvents,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;R(f,b)}b.writeListEnd()}else{f=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:f.length});for(e=0;e<f.length;e++){d=f[e];R(d,b)}b.writeListEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function db(a,b){b.writeStructBegin("ThreadIdInfo"),a.groupThreadId!=null&&(b.writeFieldBegin({fname:"groupThreadId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.groupThreadId),b.writeFieldEnd()),a.peerId!=null&&(b.writeFieldBegin({fname:"peerId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.peerId),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function T(a,b){b.writeStructBegin("ClientEventResponse"),b.writeFieldStop(),b.writeStructEnd()}function U(a,b){b.writeStructBegin("RingRequest");b.writeFieldBegin({fname:"caller",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.caller!=null)b.writeString(a.caller);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"otherParticipants",ftype:h.SET,fid:2});if(a.otherParticipants!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.otherParticipants.size});for(var e=a.otherParticipants,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;b.writeString(i)}b.writeSetEnd()}else{i=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:i.size});for(g=i,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;i=g[e++]}else{e=g.next();if(e.done)break;i=e.value}i=i;b.writeString(i)}b.writeSetEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"ringType",ftype:h.I32,fid:4});if(a.ringType!=null){b.writeI32((i=a.ringType)!=null?i:0)}else{e=d("MultiwayCommonTypes").RingType.cast(0);b.writeI32((f=e)!=null?f:0)}b.writeFieldEnd();a.offeredExperiments!=null&&(b.writeFieldBegin({fname:"offeredExperiments",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.offeredExperiments),b.writeFieldEnd());a.isScheduledCall!=null&&(b.writeFieldBegin({fname:"isScheduledCall",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:6}),b.writeBool(a.isScheduledCall),b.writeFieldEnd());if(a.appMessages!=null){b.writeFieldBegin({fname:"appMessages",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:8});b.writeListBegin({etype:h.STRUCT,size:a.appMessages.length});for(g=a.appMessages,i=Array.isArray(g),e=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(i){if(e>=g.length)break;f=g[e++]}else{e=g.next();if(e.done)break;f=e.value}f=f;d("DataMessageSerializers").serializeDataMessage(f,b)}b.writeListEnd();b.writeFieldEnd()}a.offer!=null&&(b.writeFieldBegin({fname:"offer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10}),o(a.offer,b),b.writeFieldEnd());a.mediaStatusEx!=null&&(b.writeFieldBegin({fname:"mediaStatusEx",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),d("MultiwaySharedSerializers").serializeClientMediaStatus(a.mediaStatusEx,b),b.writeFieldEnd());a.isPreconnectSupported!=null&&(b.writeFieldBegin({fname:"isPreconnectSupported",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:12}),b.writeBool(a.isPreconnectSupported),b.writeFieldEnd());a.sdpOriginLocalId!=null&&(b.writeFieldBegin({fname:"sdpOriginLocalId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:13}),b.writeString(a.sdpOriginLocalId),b.writeFieldEnd());a.unifiedOffer!=null&&(b.writeFieldBegin({fname:"unifiedOffer",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),o(a.unifiedOffer,b),b.writeFieldEnd());b.writeFieldBegin({fname:"mediaPath",ftype:h.I32,fid:15});if(a.mediaPath!=null){b.writeI32((f=a.mediaPath)!=null?f:0)}else{e=d("MultiwaySharedTypes").MediaPath.cast(0);b.writeI32((i=e)!=null?i:0)}b.writeFieldEnd();a.e2eeEnforcement!=null&&(b.writeFieldBegin({fname:"e2eeEnforcement",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),d("MultiwaySharedSerializers").serializeE2eeEnforcement(a.e2eeEnforcement,b),b.writeFieldEnd());a.isLegacyCall!=null&&(b.writeFieldBegin({fname:"isLegacyCall",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:17}),b.writeBool(a.isLegacyCall),b.writeFieldEnd());b.writeFieldBegin({fname:"isTransferCall",ftype:h.BOOL,fid:18});if(a.isTransferCall!=null)b.writeBool(a.isTransferCall);else{g=!1;b.writeBool(g)}b.writeFieldEnd();a.relayInfo!=null&&(b.writeFieldBegin({fname:"relayInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),d("MultiwaySharedSerializers").serializeRelayInfo(a.relayInfo,b),b.writeFieldEnd());if(a.overlayConfigs!=null){b.writeFieldBegin({fname:"overlayConfigs",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:21});b.writeMapBegin({ktype:h.I32,vtype:h.I32,size:Object.keys(a.overlayConfigs).length});f=Object.entries(a.overlayConfigs);for(e=0;e<f.length;e++){i=f[e];g=i[0];i=i[1];b.writeI32(Number(g));b.writeI32(i)}b.writeMapEnd();b.writeFieldEnd()}a.productMetadata!=null&&(b.writeFieldBegin({fname:"productMetadata",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:22}),cb(a.productMetadata,b),b.writeFieldEnd());a.callerClientSessionId!=null&&(b.writeFieldBegin({fname:"callerClientSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:23}),b.writeString(a.callerClientSessionId),b.writeFieldEnd());a.threadIdInfo!=null&&(b.writeFieldBegin({fname:"threadIdInfo",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:24}),db(a.threadIdInfo,b),b.writeFieldEnd());a.linkUrl!=null&&(b.writeFieldBegin({fname:"linkUrl",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:25}),b.writeString(a.linkUrl),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function V(a,b){b.writeStructBegin("RingResponse");b.writeFieldBegin({fname:"deviceStatus",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.deviceStatus!=null){b.writeI32((a=a.deviceStatus)!=null?a:0)}else{a=d("MultiwayCommonTypes").DeviceStatus.cast(0);b.writeI32((a=a)!=null?a:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function W(a,b){b.writeStructBegin("RemoveParticipantsRequest");b.writeFieldBegin({fname:"usersToRemove",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.usersToRemove!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.usersToRemove.size});for(var a=a.usersToRemove,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;b.writeString(f)}b.writeSetEnd()}else{f=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:f.size});for(e=f,d=Array.isArray(e),a=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(a>=e.length)break;f=e[a++]}else{a=e.next();if(a.done)break;f=a.value}f=f;b.writeString(f)}b.writeSetEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function X(a,b){b.writeStructBegin("UnsubscribeRequest");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:2});if(a.version!=null)b.writeI32(a.version);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"topicId",ftype:h.I32,fid:3});if(a.topicId!=null){b.writeI32((e=a.topicId)!=null?e:0)}else{a=d("StateSyncTopicsConfigTypes").TopicId.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function eb(a,b){b.writeStructBegin("UnsubscribeResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:2});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function fb(a,b){b.writeStructBegin("UpdateRequest");b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.syncPayload!=null)t(a.syncPayload,b);else{var e=l();t(e,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"topic",ftype:h.STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{e=0;b.writeI32(e)}b.writeFieldEnd();a.data!=null&&(b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.data),b.writeFieldEnd());b.writeFieldBegin({fname:"topicId",ftype:h.I32,fid:5});if(a.topicId!=null){b.writeI32((e=a.topicId)!=null?e:0)}else{a=d("StateSyncTopicsConfigTypes").TopicId.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function gb(a,b){b.writeStructBegin("UpdateResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function hb(a,b){b.writeStructBegin("NotifyRequest");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"data",ftype:h.STRING,fid:4});if(a.data!=null)b.writeBinary(a.data);else{d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.syncPayload!=null&&(b.writeFieldBegin({fname:"syncPayload",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),t(a.syncPayload,b),b.writeFieldEnd());if(a.topicId!=null){b.writeFieldBegin({fname:"topicId",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((d=a.topicId)!=null?d:0);b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function ib(a,b){b.writeStructBegin("NotifyResponse");b.writeFieldBegin({fname:"topic",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.topic!=null)b.writeString(a.topic);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"version",ftype:h.I32,fid:3});if(a.version!=null)b.writeI32(a.version);else{d=0;b.writeI32(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function jb(a,b){b.writeStructBegin("ApprovalRequest");b.writeFieldBegin({fname:"approvalStatus",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.approvalStatus!=null){var e;b.writeI32((e=a.approvalStatus)!=null?e:0)}else{e=d("MultiwayCommonTypes").ApprovalStatus.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"targetUsers",ftype:h.SET,fid:3});if(a.targetUsers!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.targetUsers.size});for(var e=a.targetUsers,a=Array.isArray(e),f=0,e=a?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(a){if(f>=e.length)break;g=e[f++]}else{f=e.next();if(f.done)break;g=f.value}g=g;b.writeString(g)}b.writeSetEnd()}else{g=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:g.size});for(f=g,a=Array.isArray(f),e=0,f=a?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(a){if(e>=f.length)break;g=f[e++]}else{e=f.next();if(e.done)break;g=e.value}g=g;b.writeString(g)}b.writeSetEnd()}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function kb(a,b){b.writeStructBegin("RtcSender");b.writeFieldBegin({fname:"id",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.id!=null)b.writeString(a.id);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function lb(a,b){b.writeStructBegin("RtcReceiver");b.writeFieldBegin({fname:"actorId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.actorId!=null)b.writeString(a.actorId);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"baseId",ftype:h.STRING,fid:2});if(a.baseId!=null)b.writeString(a.baseId);else{d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function mb(a,b){b.writeStructBegin("RtcMessageHeader");b.writeFieldBegin({fname:"type",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.type!=null){var e;b.writeI32((e=a.type)!=null?e:0)}else{e=d("MultiwayCommonTypes").MessageType.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();b.writeFieldBegin({fname:"conferenceName",ftype:h.STRING,fid:2});if(a.conferenceName!=null)b.writeString(a.conferenceName);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"transactionId",ftype:h.STRING,fid:3});if(a.transactionId!=null)b.writeString(a.transactionId);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"retryCount",ftype:h.I16,fid:4});if(a.retryCount!=null)b.writeI16(a.retryCount);else{e=0;b.writeI16(e)}b.writeFieldEnd();a.serverInfoData!=null&&(b.writeFieldBegin({fname:"serverInfoData",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeString(a.serverInfoData),b.writeFieldEnd());if(a.responseStatusCode!=null){b.writeFieldBegin({fname:"responseStatusCode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:6});b.writeI32((e=a.responseStatusCode)!=null?e:0);b.writeFieldEnd()}if(a.extensions!=null){b.writeFieldBegin({fname:"extensions",ftype:(h||(h=c("ThriftTypes"))).MAP,fid:7});b.writeMapBegin({ktype:h.STRING,vtype:h.STRING,size:Object.keys(a.extensions).length});e=Object.entries(a.extensions);for(var f=0;f<e.length;f++){var g=e[f],i=g[0];g=g[1];b.writeString(i);b.writeString(g)}b.writeMapEnd();b.writeFieldEnd()}a.sequenceNumber!=null&&(b.writeFieldBegin({fname:"sequenceNumber",ftype:(h||(h=c("ThriftTypes"))).I64,fid:8}),b.writeI64(BigInt(a.sequenceNumber)),b.writeFieldEnd());a.clientSessionId!=null&&(b.writeFieldBegin({fname:"clientSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:9}),b.writeString(a.clientSessionId),b.writeFieldEnd());a.responseStatusMessage!=null&&(b.writeFieldBegin({fname:"responseStatusMessage",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:10}),b.writeString(a.responseStatusMessage),b.writeFieldEnd());if(a.responseSubCode!=null){b.writeFieldBegin({fname:"responseSubCode",ftype:(h||(h=c("ThriftTypes"))).I32,fid:11});b.writeI32((i=a.responseSubCode)!=null?i:0);b.writeFieldEnd()}a.collisionKey!=null&&(b.writeFieldBegin({fname:"collisionKey",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:12}),b.writeString(a.collisionKey),b.writeFieldEnd());if(a.conferenceType!=null){b.writeFieldBegin({fname:"conferenceType",ftype:(h||(h=c("ThriftTypes"))).I32,fid:13});b.writeI32((g=a.conferenceType)!=null?g:0);b.writeFieldEnd()}a.serverSessionId!=null&&(b.writeFieldBegin({fname:"serverSessionId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:14}),b.writeString(a.serverSessionId),b.writeFieldEnd());a.rtcHandle!=null&&(b.writeFieldBegin({fname:"rtcHandle",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:15}),b.writeString(a.rtcHandle),b.writeFieldEnd());a.retryAfterMsec!=null&&(b.writeFieldBegin({fname:"retryAfterMsec",ftype:(h||(h=c("ThriftTypes"))).I32,fid:16}),b.writeI32(a.retryAfterMsec),b.writeFieldEnd());a.receiverUserId!=null&&(b.writeFieldBegin({fname:"receiverUserId",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:17}),b.writeString(a.receiverUserId),b.writeFieldEnd());if(a.clientStack!=null){b.writeFieldBegin({fname:"clientStack",ftype:(h||(h=c("ThriftTypes"))).I32,fid:18});b.writeI32((e=a.clientStack)!=null?e:0);b.writeFieldEnd()}a.serverMsgTime!=null&&(b.writeFieldBegin({fname:"serverMsgTime",ftype:(h||(h=c("ThriftTypes"))).I64,fid:19}),b.writeI64(BigInt(a.serverMsgTime)),b.writeFieldEnd());a.sender!=null&&(b.writeFieldBegin({fname:"sender",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:20}),kb(a.sender,b),b.writeFieldEnd());a.receiver!=null&&(b.writeFieldBegin({fname:"receiver",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:21}),lb(a.receiver,b),b.writeFieldEnd());if(a.messageTags!=null){b.writeFieldBegin({fname:"messageTags",ftype:(h||(h=c("ThriftTypes"))).SET,fid:22});b.writeSetBegin({etype:h.I32,size:a.messageTags.size});for(f=a.messageTags,i=Array.isArray(f),g=0,f=i?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(i){if(g>=f.length)break;e=f[g++]}else{g=f.next();if(g.done)break;e=g.value}e=e;b.writeI32((e=e)!=null?e:0)}b.writeSetEnd();b.writeFieldEnd()}a.conferenceId!=null&&(b.writeFieldBegin({fname:"conferenceId",ftype:(h||(h=c("ThriftTypes"))).I64,fid:23}),b.writeI64(BigInt(a.conferenceId)),b.writeFieldEnd());a.protocolVersion!=null&&(b.writeFieldBegin({fname:"protocolVersion",ftype:(h||(h=c("ThriftTypes"))).I32,fid:24}),b.writeI32(a.protocolVersion),b.writeFieldEnd());a.bodyCompressionVersion!=null&&(b.writeFieldBegin({fname:"bodyCompressionVersion",ftype:(h||(h=c("ThriftTypes"))).I64,fid:25}),b.writeI64(BigInt(a.bodyCompressionVersion)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function nb(a,b){b.writeStructBegin("RtcMessageBody"),a.joinRequest!=null&&(b.writeFieldBegin({fname:"joinRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1}),N(a.joinRequest,b),b.writeFieldEnd()),a.joinResponse!=null&&(b.writeFieldBegin({fname:"joinResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2}),O(a.joinResponse,b),b.writeFieldEnd()),a.serverMediaUpdateRequest!=null&&(b.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3}),w(a.serverMediaUpdateRequest,b),b.writeFieldEnd()),a.serverMediaUpdateResponse!=null&&(b.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4}),x(a.serverMediaUpdateResponse,b),b.writeFieldEnd()),a.hangupRequest!=null&&(b.writeFieldBegin({fname:"hangupRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5}),z(a.hangupRequest,b),b.writeFieldEnd()),a.iceCandidateRequest!=null&&(b.writeFieldBegin({fname:"iceCandidateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),A(a.iceCandidateRequest,b),b.writeFieldEnd()),a.ringRequest!=null&&(b.writeFieldBegin({fname:"ringRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8}),U(a.ringRequest,b),b.writeFieldEnd()),a.ringResponse!=null&&(b.writeFieldBegin({fname:"ringResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9}),V(a.ringResponse,b),b.writeFieldEnd()),a.dismissRequest!=null&&(b.writeFieldBegin({fname:"dismissRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10}),B(a.dismissRequest,b),b.writeFieldEnd()),a.conferenceStateRequest!=null&&(b.writeFieldBegin({fname:"conferenceStateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11}),G(a.conferenceStateRequest,b),b.writeFieldEnd()),a.conferenceStateResponse!=null&&(b.writeFieldBegin({fname:"conferenceStateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12}),H(a.conferenceStateResponse,b),b.writeFieldEnd()),a.addParticipantsRequest!=null&&(b.writeFieldBegin({fname:"addParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13}),L(a.addParticipantsRequest,b),b.writeFieldEnd()),a.subscriptionRequest!=null&&(b.writeFieldBegin({fname:"subscriptionRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14}),I(a.subscriptionRequest,b),b.writeFieldEnd()),a.clientMediaUpdateRequest!=null&&(b.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15}),u(a.clientMediaUpdateRequest,b),b.writeFieldEnd()),a.clientMediaUpdateResponse!=null&&(b.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16}),v(a.clientMediaUpdateResponse,b),b.writeFieldEnd()),a.dataMessageRequest!=null&&(b.writeFieldBegin({fname:"dataMessageRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17}),J(a.dataMessageRequest,b),b.writeFieldEnd()),a.removeParticipantsRequest!=null&&(b.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18}),W(a.removeParticipantsRequest,b),b.writeFieldEnd()),a.dataMessageResponse!=null&&(b.writeFieldBegin({fname:"dataMessageResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:19}),K(a.dataMessageResponse,b),b.writeFieldEnd()),a.updateRequest!=null&&(b.writeFieldBegin({fname:"updateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:30}),fb(a.updateRequest,b),b.writeFieldEnd()),a.updateResponse!=null&&(b.writeFieldBegin({fname:"updateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:31}),gb(a.updateResponse,b),b.writeFieldEnd()),a.notifyRequest!=null&&(b.writeFieldBegin({fname:"notifyRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:32}),hb(a.notifyRequest,b),b.writeFieldEnd()),a.notifyResponse!=null&&(b.writeFieldBegin({fname:"notifyResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:33}),ib(a.notifyResponse,b),b.writeFieldEnd()),a.connectRequest!=null&&(b.writeFieldBegin({fname:"connectRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:34}),P(a.connectRequest,b),b.writeFieldEnd()),a.connectResponse!=null&&(b.writeFieldBegin({fname:"connectResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:35}),Q(a.connectResponse,b),b.writeFieldEnd()),a.clientEventRequest!=null&&(b.writeFieldBegin({fname:"clientEventRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:36}),S(a.clientEventRequest,b),b.writeFieldEnd()),a.clientEventResponse!=null&&(b.writeFieldBegin({fname:"clientEventResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:37}),T(a.clientEventResponse,b),b.writeFieldEnd()),a.unsubscribeRequest!=null&&(b.writeFieldBegin({fname:"unsubscribeRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:40}),X(a.unsubscribeRequest,b),b.writeFieldEnd()),a.unsubscribeResponse!=null&&(b.writeFieldBegin({fname:"unsubscribeResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:41}),eb(a.unsubscribeResponse,b),b.writeFieldEnd()),a.approvalRequest!=null&&(b.writeFieldBegin({fname:"approvalRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:42}),jb(a.approvalRequest,b),b.writeFieldEnd()),a.transferRequest!=null&&(b.writeFieldBegin({fname:"transferRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:43}),y(a.transferRequest,b),b.writeFieldEnd()),a.prefetchSdpRequest!=null&&(b.writeFieldBegin({fname:"prefetchSdpRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:44}),C(a.prefetchSdpRequest,b),b.writeFieldEnd()),a.prefetchSdpResponse!=null&&(b.writeFieldBegin({fname:"prefetchSdpResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:45}),D(a.prefetchSdpResponse,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function ob(a,b){b.writeStructBegin("RtcMultiwayMessage");b.writeFieldBegin({fname:"messageHeader",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});if(a.messageHeader!=null)mb(a.messageHeader,b);else{var d=m();mb(d,b)}b.writeFieldEnd();b.writeFieldBegin({fname:"messageBody",ftype:h.STRUCT,fid:2});if(a.messageBody!=null)nb(a.messageBody,b);else{d=n();nb(d,b)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function Y(a,b){b.writeStructBegin("GroupOfUsers");b.writeFieldBegin({fname:"users",ftype:(h||(h=c("ThriftTypes"))).SET,fid:1});if(a.users!=null){b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:a.users.size});for(var d=a.users,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.writeString(g)}b.writeSetEnd()}else{g=new Set();b.writeSetBegin({etype:(h||(h=c("ThriftTypes"))).STRING,size:g.size});for(f=g,e=Array.isArray(f),d=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(d>=f.length)break;g=f[d++]}else{d=f.next();if(d.done)break;g=d.value}g=g;b.writeString(g)}b.writeSetEnd()}b.writeFieldEnd();b.writeFieldBegin({fname:"allowMultipleJoins",ftype:h.BOOL,fid:2});if(a.allowMultipleJoins!=null)b.writeBool(a.allowMultipleJoins);else{g=!1;b.writeBool(g)}b.writeFieldEnd();b.writeFieldBegin({fname:"dismissOthersOnFirstJoin",ftype:h.BOOL,fid:3});if(a.dismissOthersOnFirstJoin!=null)b.writeBool(a.dismissOthersOnFirstJoin);else{d=!1;b.writeBool(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"aliasId",ftype:h.STRING,fid:4});if(a.aliasId!=null)b.writeString(a.aliasId);else{e="";b.writeString(e)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function pb(a,b){b.writeStructBegin("RtcMessageBodyVariant");if(a.joinRequest!=null){b.writeFieldBegin({fname:"joinRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});N(a.joinRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.joinResponse!=null){b.writeFieldBegin({fname:"joinResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});O(a.joinResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.serverMediaUpdateRequest!=null){b.writeFieldBegin({fname:"serverMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});w(a.serverMediaUpdateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.serverMediaUpdateResponse!=null){b.writeFieldBegin({fname:"serverMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});x(a.serverMediaUpdateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.hangupRequest!=null){b.writeFieldBegin({fname:"hangupRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});z(a.hangupRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.iceCandidateRequest!=null){b.writeFieldBegin({fname:"iceCandidateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});A(a.iceCandidateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ringRequest!=null){b.writeFieldBegin({fname:"ringRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:8});U(a.ringRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ringResponse!=null){b.writeFieldBegin({fname:"ringResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:9});V(a.ringResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dismissRequest!=null){b.writeFieldBegin({fname:"dismissRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:10});B(a.dismissRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.conferenceStateRequest!=null){b.writeFieldBegin({fname:"conferenceStateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:11});G(a.conferenceStateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.conferenceStateResponse!=null){b.writeFieldBegin({fname:"conferenceStateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:12});H(a.conferenceStateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.addParticipantsRequest!=null){b.writeFieldBegin({fname:"addParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:13});L(a.addParticipantsRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.subscriptionRequest!=null){b.writeFieldBegin({fname:"subscriptionRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:14});I(a.subscriptionRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientMediaUpdateRequest!=null){b.writeFieldBegin({fname:"clientMediaUpdateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:15});u(a.clientMediaUpdateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientMediaUpdateResponse!=null){b.writeFieldBegin({fname:"clientMediaUpdateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:16});v(a.clientMediaUpdateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dataMessageRequest!=null){b.writeFieldBegin({fname:"dataMessageRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:17});J(a.dataMessageRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.removeParticipantsRequest!=null){b.writeFieldBegin({fname:"removeParticipantsRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:18});W(a.removeParticipantsRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.dataMessageResponse!=null){b.writeFieldBegin({fname:"dataMessageResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:19});K(a.dataMessageResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.updateRequest!=null){b.writeFieldBegin({fname:"updateRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:30});fb(a.updateRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.updateResponse!=null){b.writeFieldBegin({fname:"updateResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:31});gb(a.updateResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.notifyRequest!=null){b.writeFieldBegin({fname:"notifyRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:32});hb(a.notifyRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.notifyResponse!=null){b.writeFieldBegin({fname:"notifyResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:33});ib(a.notifyResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.connectRequest!=null){b.writeFieldBegin({fname:"connectRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:34});P(a.connectRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.connectResponse!=null){b.writeFieldBegin({fname:"connectResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:35});Q(a.connectResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientEventRequest!=null){b.writeFieldBegin({fname:"clientEventRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:36});S(a.clientEventRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.clientEventResponse!=null){b.writeFieldBegin({fname:"clientEventResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:37});T(a.clientEventResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.unsubscribeRequest!=null){b.writeFieldBegin({fname:"unsubscribeRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:40});X(a.unsubscribeRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.unsubscribeResponse!=null){b.writeFieldBegin({fname:"unsubscribeResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:41});eb(a.unsubscribeResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.approvalRequest!=null){b.writeFieldBegin({fname:"approvalRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:42});jb(a.approvalRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.transferRequest!=null){b.writeFieldBegin({fname:"transferRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:43});y(a.transferRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.prefetchSdpRequest!=null){b.writeFieldBegin({fname:"prefetchSdpRequest",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:44});C(a.prefetchSdpRequest,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.prefetchSdpResponse!=null){b.writeFieldBegin({fname:"prefetchSdpResponse",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:45});D(a.prefetchSdpResponse,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function qb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.apiStatusCode=d("MultiwayCommonTypes").RtcApiStatusCode.cast(a.readI32()):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.rtcLogSeverity=d("MultiwayCommonTypes").RtcLogSeverity.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message="");b.responseStatusCode===void 0&&(b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(0));b.responseSubCode===void 0&&(b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(0));b.apiStatusCode===void 0&&(b.apiStatusCode=d("MultiwayCommonTypes").RtcApiStatusCode.cast(0));b.rtcLogSeverity===void 0&&(b.rtcLogSeverity=d("MultiwayCommonTypes").RtcLogSeverity.cast(0));return b}function Z(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpString=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sdpThrift=d("WebrtcSdpSerializers").deserializeSdp(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.sdpCompressionVersion=a.readI64().toString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpCompressedData=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return b}function rb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).MAP){b.media={};d=a.readMapBegin();for(var f=0;f<d.size;f++){var g=a.readI32(),i=sb(a);b.media[g]=i}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.media===void 0&&(b.media={});return b}function sb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.body=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.msid=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.mid=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.body===void 0&&(b.body="");b.msid===void 0&&(b.msid="");b.mid===void 0&&(b.mid="");return b}function tb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.sourceKey=a.readString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.media=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeMedia(a);b.media.push(i)}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.ssrcGroups=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("MultiwaySharedSerializers").deserializeSsrcGroup(a);b.ssrcGroups.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.sourceKey===void 0&&(b.sourceKey="");b.media===void 0&&(b.media=[]);b.ssrcGroups===void 0&&(b.ssrcGroups=[]);return b}function ub(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=a.readBool();b.mediaStatus[i]=j}}else a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.mediaStatus===void 0&&(b.mediaStatus={});return b}function vb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.candidateSdpString=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.sdpMLineIndex=a.readI64().toString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpMid=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.candidateSdpThrift=d("WebrtcSdpSerializers").deserializeIceCandidateSdp(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.sdpMLineIndex===void 0&&(b.sdpMLineIndex="0");b.sdpMid===void 0&&(b.sdpMid="");return b}function $(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("StateSyncSerializers").deserializeState(a);b.stateStore[i]=j}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());e=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.stateStore===void 0&&(b.stateStore={});b.stateStoreV2===void 0&&(b.stateStoreV2={});return b}function wb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version=0);return b}function xb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.encryptedTopic=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.encryptedData=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.senderId=a.readBinary():a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).SET){b.targetIds=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=d("Utf8ToString").Utf8ToString(a.readBinary());b.targetIds.add(i)}}else a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.messageType=d("MultiwayCommonTypes").E2eeDataMessageType.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.encryptedTopic===void 0&&(b.encryptedTopic="");b.encryptedData===void 0&&(b.encryptedData=Uint8Array.of());b.senderId===void 0&&(b.senderId=Uint8Array.of());b.messageType===void 0&&(b.messageType=d("MultiwayCommonTypes").E2eeDataMessageType.cast(0));return b}function yb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.fromVersion=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I64?b.toVersion=a.readI64().toString():a.skip(e);break;case 3:if(e===(h||(h=c("ThriftTypes"))).LIST){b.mediaUpdates=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=ub(a);b.mediaUpdates.push(g)}}else a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.fromVersion===void 0&&(b.fromVersion="0");b.toVersion===void 0&&(b.toVersion="0");b.mediaUpdates===void 0&&(b.mediaUpdates=[]);return b}function zb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("StateSyncSerializers").deserializeState(a);b.stateStore[i]=j}}else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());e=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));return b}function Ab(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.callerUserId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.calleeUserId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.sessionId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.callerUserId===void 0&&(b.callerUserId="");b.calleeUserId===void 0&&(b.calleeUserId="");b.sessionId===void 0&&(b.sessionId="");return b}function Bb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.fromVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.toVersion=a.readI64().toString():a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).LIST){b.mediaUpdates=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=tb(a);b.mediaUpdates.push(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(e)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).BOOL?b.renegotiationRequested=a.readBool():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRUCT?b.prAnswer=Z(a):a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(g=0;g<e.size;g++){i=a.readString();var j=d("StateSyncSerializers").deserializeState(a);b.stateStore[i]=j}}else a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).STRUCT?b.multipleRelaysParameters=Ab(a):a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).BOOL?b.multipleVideoStreamsAllowed=a.readBool():a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.update=rb(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).BOOL?b.screenShareStreamAllowed=a.readBool():a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());e=d("StateSyncSerializers").deserializeState(a);g!=null&&(b.stateStoreV2[g]=e)}}else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).SET){b.allowedCustomVideoContentTypes=new Set();g=a.readSetBegin();for(e=0;e<g.size;e++){j=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.allowedCustomVideoContentTypes.add(j)}}else a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.fromVersion===void 0&&(b.fromVersion="0");b.toVersion===void 0&&(b.toVersion="0");b.mediaUpdates===void 0&&(b.mediaUpdates=[]);b.renegotiationRequested===void 0&&(b.renegotiationRequested=!1);b.multipleVideoStreamsAllowed===void 0&&(b.multipleVideoStreamsAllowed=!1);b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.screenShareStreamAllowed===void 0&&(b.screenShareStreamAllowed=!1);return b}function Cb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatus=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");return b}function Db(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Eb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("MultiwayCommonTypes").HangupReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.detailedReasonString=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("MultiwayCommonTypes").HangupReason.cast(0));b.detailedReasonString===void 0&&(b.detailedReasonString="");return b}function Fb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.iceCandidateSdps=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=vb(a);b.iceCandidateSdps.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.iceCandidateSdps===void 0&&(b.iceCandidateSdps=[]);return b}function Gb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("MultiwayCommonTypes").DismissReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.detailedReasonString=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.callabilityResultErrorCode=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("MultiwayCommonTypes").DismissReason.cast(0));b.detailedReasonString===void 0&&(b.detailedReasonString="");return b}function Hb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.clientCrypto=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.clientFingerprint=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.clientCrypto===void 0&&(b.clientCrypto="");b.clientFingerprint===void 0&&(b.clientFingerprint="");return b}function Ib(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.serverSdp=Z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.serverSdp===void 0&&(b.serverSdp=i());return b}function Jb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.joinMode=d("MultiwayCommonTypes").JoinMode.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.joinMode===void 0&&(b.joinMode=d("MultiwayCommonTypes").JoinMode.cast(0));return b}function Kb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.state=d("MultiwayCommonTypes").ParticipantCallState.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.userCapabilities=a.readBinary():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.sctpNodeId=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.state===void 0&&(b.state=d("MultiwayCommonTypes").ParticipantCallState.cast(0));return b}function Lb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.userCountry=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Mb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.name=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.profilePictureUri=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.aliasId=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.thirdPartyId=a.readString():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRING?b.groupId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Nb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.callerInfo=Mb(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.liveBroadcastId=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.callingTags=a.readI32():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.backingIdentifier=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Ob(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.version=a.readI64().toString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.participantStates={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=Kb(a);b.participantStates[i]=j}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).MAP){b.userProfiles={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=a.readString();e=Mb(a);b.userProfiles[g]=e}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];g=a.readListBegin();for(e=0;e<g.size;e++){j=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(j)}}else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).LIST){b.groupsOfUsers=[];i=a.readListBegin();for(j=0;j<i.size;j++){e=rc(a);b.groupsOfUsers.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.version===void 0&&(b.version="0");b.participantStates===void 0&&(b.participantStates={});b.groupsOfUsers===void 0&&(b.groupsOfUsers=[]);return b}function Pb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.currentVersion=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.currentVersion===void 0&&(b.currentVersion="0");return b}function Qb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).LIST){b.subscriptions=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("MultiwaySharedSerializers").deserializeSubscription(a);b.subscriptions.push(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.subscriptions===void 0&&(b.subscriptions=[]);return b}function Rb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.message=d("DataMessageSerializers").deserializeDataMessage(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message=d("DataMessageSerializers").DataMessage$DefaultConstructor());return b}function Sb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).MAP){b.deliveryResult={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=d("DataMessageTypes").DataMessageStatusCode.cast(a.readI32());b.deliveryResult[i]=j}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.serviceTypeDeliveryResult={};i=a.readMapBegin();for(j=0;j<i.size;j++){g=d("MultiwaySharedTypes").EndpointServiceType.cast(a.readI32());e=d("DataMessageTypes").DataMessageStatusCode.cast(a.readI32());g!=null&&(b.serviceTypeDeliveryResult[g]=e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deliveryResult===void 0&&(b.deliveryResult={});return b}function Tb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToInvite=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.usersToInvite.add(i)}}else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(e)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.usersToInvite===void 0&&(b.usersToInvite=new Set());return b}function Ub(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.smcTier=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.region=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.isUsfu=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.isEdge=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.smcTier===void 0&&(b.smcTier="");b.region===void 0&&(b.region="");b.isUsfu===void 0&&(b.isUsfu=!1);b.isEdge===void 0&&(b.isEdge=!1);return b}function Vb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).SET){b.deviceCapabilities=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var j=d("MultiwayCommonTypes").Capability.cast(a.readI32());b.deviceCapabilities.add(j)}}else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToCall=new Set();j=a.readSetBegin();for(g=0;g<j.size;g++){e=a.readString();b.usersToCall.add(e)}}else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=a.readString();var k=a.readBool();b.mediaStatus[j]=k}}else a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.userCapabilities=a.readBinary():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRING?b.supportedExperiments=a.readString():a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];j=a.readListBegin();for(k=0;k<j.size;k++){g=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(g)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.userToEscalate=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I64?b.escalatingCallId=a.readI64().toString():a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).I32?b.conferenceType=d("MultiwaySharedTypes").ConferenceType.cast(a.readI32()):a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).SET){b.usersToApproveFromWaitingRoom=new Set();e=a.readSetBegin();for(g=0;g<e.size;g++){k=a.readString();b.usersToApproveFromWaitingRoom.add(k)}}else a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sfuAllocation=Ub(a):a.skip(f);break;case 19:f===(h||(h=c("ThriftTypes"))).I32?b.clientMediaMode=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.endpointSettings=Jb(a):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRUCT?b.backupSfuAllocation=Ub(a):a.skip(f);break;case 22:if(f===(h||(h=c("ThriftTypes"))).SET){b.supportedCustomVideoContentTypes=new Set();j=a.readSetBegin();for(k=0;k<j.size;k++){g=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.supportedCustomVideoContentTypes.add(g)}}else a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).I32?b.configIntegrityOpaqueToken=a.readI32():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.offer===void 0&&(b.offer=i());b.deviceCapabilities===void 0&&(b.deviceCapabilities=new Set());return b}function Wb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.answer=Z(a):a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).MAP){b.mediaStatus={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var j=a.readString(),k=a.readBool();b.mediaStatus[j]=k}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.initiator=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.negotiatedExperiments=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];j=a.readListBegin();for(k=0;k<j.size;k++){g=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(g)}}else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStore={};e=a.readMapBegin();for(g=0;g<e.size;g++){k=a.readString();j=d("StateSyncSerializers").deserializeState(a);b.stateStore[k]=j}}else a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).BOOL?b.isPendingApproval=a.readBool():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRUCT?b.renegotiationOffer=Z(a):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).BOOL?b.multipleVideoStreamsAllowed=a.readBool():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 14:if(f===(h||(h=c("ThriftTypes"))).LIST){b.groupsOfUsers=[];k=a.readListBegin();for(j=0;j<k.size;j++){g=rc(a);b.groupsOfUsers.push(g)}}else a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).BOOL?b.screenShareStreamAllowed=a.readBool():a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).I64?b.selfSctpNodeId=a.readI64().toString():a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).MAP){b.stateStoreV2={};e=a.readMapBegin();for(g=0;g<e.size;g++){j=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32());k=d("StateSyncSerializers").deserializeState(a);j!=null&&(b.stateStoreV2[j]=k)}}else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).SET){b.allowedCustomVideoContentTypes=new Set();j=a.readSetBegin();for(k=0;k<j.size;k++){g=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.allowedCustomVideoContentTypes.add(g)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.answer===void 0&&(b.answer=i());b.mediaStatus===void 0&&(b.mediaStatus={});b.initiator===void 0&&(b.initiator="");b.isPendingApproval===void 0&&(b.isPendingApproval=!1);b.multipleVideoStreamsAllowed===void 0&&(b.multipleVideoStreamsAllowed=!1);b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.groupsOfUsers===void 0&&(b.groupsOfUsers=[]);b.screenShareStreamAllowed===void 0&&(b.screenShareStreamAllowed=!1);return b}function Xb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sdp=Z(a):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.deviceCapabilities=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=d("MultiwayCommonTypes").Capability.cast(a.readI32());b.deviceCapabilities.add(i)}}else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).SET){b.supportedCustomVideoContentTypes=new Set();i=a.readSetBegin();for(g=0;g<i.size;g++){e=d("WebrtcSignalingCommonTypes").CustomVideoContentType.cast(a.readI32());b.supportedCustomVideoContentTypes.add(e)}}else a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).STRUCT?b.prOffer=Z(a):a.skip(f);break;case 7:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deviceCapabilities===void 0&&(b.deviceCapabilities=new Set());return b}function Yb(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.sdp=Z(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function Zb(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwayCommonTypes").ClientEventType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I64?b.time=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwayCommonTypes").ClientEventType.cast(0));return b}function $b(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).LIST){b.clientEvents=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=Zb(a);b.clientEvents.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.clientEvents===void 0&&(b.clientEvents=[]);return b}function ac(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.groupThreadId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.peerId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function bc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function cc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.caller=a.readString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).SET){b.otherParticipants=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.otherParticipants.add(i)}}else a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.ringType=d("MultiwayCommonTypes").RingType.cast(a.readI32()):a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.offeredExperiments=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).BOOL?b.isScheduledCall=a.readBool():a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).LIST){b.appMessages=[];i=a.readListBegin();for(g=0;g<i.size;g++){e=d("DataMessageSerializers").deserializeDataMessage(a);b.appMessages.push(e)}}else a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRUCT?b.offer=Z(a):a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).STRUCT?b.mediaStatusEx=d("MultiwaySharedSerializers").deserializeClientMediaStatus(a):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).BOOL?b.isPreconnectSupported=a.readBool():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).STRING?b.sdpOriginLocalId=a.readString():a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRUCT?b.unifiedOffer=Z(a):a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).I32?b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(a.readI32()):a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).STRUCT?b.e2eeEnforcement=d("MultiwaySharedSerializers").deserializeE2eeEnforcement(a):a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).BOOL?b.isLegacyCall=a.readBool():a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).BOOL?b.isTransferCall=a.readBool():a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.relayInfo=d("MultiwaySharedSerializers").deserializeRelayInfo(a):a.skip(f);break;case 21:if(f===(h||(h=c("ThriftTypes"))).MAP){b.overlayConfigs={};e=a.readMapBegin();for(g=0;g<e.size;g++){i=a.readI32();var j=a.readI32();b.overlayConfigs[i]=j}}else a.skip(f);break;case 22:f===(h||(h=c("ThriftTypes"))).STRUCT?b.productMetadata=Nb(a):a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).STRING?b.callerClientSessionId=a.readString():a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).STRUCT?b.threadIdInfo=ac(a):a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).STRING?b.linkUrl=a.readString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.caller===void 0&&(b.caller="");b.otherParticipants===void 0&&(b.otherParticipants=new Set());b.ringType===void 0&&(b.ringType=d("MultiwayCommonTypes").RingType.cast(0));b.mediaPath===void 0&&(b.mediaPath=d("MultiwaySharedTypes").MediaPath.cast(0));b.isTransferCall===void 0&&(b.isTransferCall=!1);return b}function dc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).I32?b.deviceStatus=d("MultiwayCommonTypes").DeviceStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.deviceStatus===void 0&&(b.deviceStatus=d("MultiwayCommonTypes").DeviceStatus.cast(0));return b}function ec(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).SET){b.usersToRemove=new Set();d=a.readSetBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.usersToRemove.add(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.usersToRemove===void 0&&(b.usersToRemove=new Set());return b}function fc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.topicId===void 0&&(b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(0));return b}function gc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function hc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.syncPayload===void 0&&(b.syncPayload=l());b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.topicId===void 0&&(b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(0));return b}function ic(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function jc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.data=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRUCT?b.syncPayload=$(a):a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.topicId=d("StateSyncTopicsConfigTypes").TopicId.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);b.data===void 0&&(b.data=Uint8Array.of());return b}function kc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.topic=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).I32?b.version=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.topic===void 0&&(b.topic="");b.version===void 0&&(b.version=0);return b}function lc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 2:f===(h||(h=c("ThriftTypes"))).I32?b.approvalStatus=d("MultiwayCommonTypes").ApprovalStatus.cast(a.readI32()):a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).SET){b.targetUsers=new Set();e=a.readSetBegin();for(var g=0;g<e.size;g++){var i=a.readString();b.targetUsers.add(i)}}else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.approvalStatus===void 0&&(b.approvalStatus=d("MultiwayCommonTypes").ApprovalStatus.cast(0));b.targetUsers===void 0&&(b.targetUsers=new Set());return b}function mc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.id=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.id===void 0&&(b.id="");return b}function nc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.actorId=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.baseId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.actorId===void 0&&(b.actorId="");b.baseId===void 0&&(b.baseId="");return b}function oc(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.type=d("MultiwayCommonTypes").MessageType.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.conferenceName=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.transactionId=a.readString():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I16?b.retryCount=a.readI16():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.serverInfoData=a.readString():a.skip(f);break;case 6:f===(h||(h=c("ThriftTypes"))).I32?b.responseStatusCode=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(a.readI32()):a.skip(f);break;case 7:if(f===(h||(h=c("ThriftTypes"))).MAP){b.extensions={};e=a.readMapBegin();for(var g=0;g<e.size;g++){var i=a.readString(),j=a.readString();b.extensions[i]=j}}else a.skip(f);break;case 8:f===(h||(h=c("ThriftTypes"))).I64?b.sequenceNumber=a.readI64().toString():a.skip(f);break;case 9:f===(h||(h=c("ThriftTypes"))).STRING?b.clientSessionId=a.readString():a.skip(f);break;case 10:f===(h||(h=c("ThriftTypes"))).STRING?b.responseStatusMessage=a.readString():a.skip(f);break;case 11:f===(h||(h=c("ThriftTypes"))).I32?b.responseSubCode=d("MultiwayCommonTypes").RtcResponseSubCode.cast(a.readI32()):a.skip(f);break;case 12:f===(h||(h=c("ThriftTypes"))).STRING?b.collisionKey=a.readString():a.skip(f);break;case 13:f===(h||(h=c("ThriftTypes"))).I32?b.conferenceType=d("MultiwaySharedTypes").ConferenceType.cast(a.readI32()):a.skip(f);break;case 14:f===(h||(h=c("ThriftTypes"))).STRING?b.serverSessionId=a.readString():a.skip(f);break;case 15:f===(h||(h=c("ThriftTypes"))).STRING?b.rtcHandle=a.readString():a.skip(f);break;case 16:f===(h||(h=c("ThriftTypes"))).I32?b.retryAfterMsec=a.readI32():a.skip(f);break;case 17:f===(h||(h=c("ThriftTypes"))).STRING?b.receiverUserId=a.readString():a.skip(f);break;case 18:f===(h||(h=c("ThriftTypes"))).I32?b.clientStack=d("WebrtcSignalingCommonTypes").ClientStack.cast(a.readI32()):a.skip(f);break;case 19:f===(h||(h=c("ThriftTypes"))).I64?b.serverMsgTime=a.readI64().toString():a.skip(f);break;case 20:f===(h||(h=c("ThriftTypes"))).STRUCT?b.sender=mc(a):a.skip(f);break;case 21:f===(h||(h=c("ThriftTypes"))).STRUCT?b.receiver=nc(a):a.skip(f);break;case 22:if(f===(h||(h=c("ThriftTypes"))).SET){b.messageTags=new Set();i=a.readSetBegin();for(j=0;j<i.size;j++){g=d("MultiwayCommonTypes").MessageTag.cast(a.readI32());b.messageTags.add(g)}}else a.skip(f);break;case 23:f===(h||(h=c("ThriftTypes"))).I64?b.conferenceId=a.readI64().toString():a.skip(f);break;case 24:f===(h||(h=c("ThriftTypes"))).I32?b.protocolVersion=a.readI32():a.skip(f);break;case 25:f===(h||(h=c("ThriftTypes"))).I64?b.bodyCompressionVersion=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.type===void 0&&(b.type=d("MultiwayCommonTypes").MessageType.cast(0));b.conferenceName===void 0&&(b.conferenceName="");b.transactionId===void 0&&(b.transactionId="");b.retryCount===void 0&&(b.retryCount=0);return b}function pc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.joinRequest=Vb(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.joinResponse=Wb(a):a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRUCT?b.serverMediaUpdateRequest=Bb(a):a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRUCT?b.serverMediaUpdateResponse=Cb(a):a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).STRUCT?b.hangupRequest=Eb(a):a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRUCT?b.iceCandidateRequest=Fb(a):a.skip(e);break;case 8:e===(h||(h=c("ThriftTypes"))).STRUCT?b.ringRequest=cc(a):a.skip(e);break;case 9:e===(h||(h=c("ThriftTypes"))).STRUCT?b.ringResponse=dc(a):a.skip(e);break;case 10:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dismissRequest=Gb(a):a.skip(e);break;case 11:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conferenceStateRequest=Ob(a):a.skip(e);break;case 12:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conferenceStateResponse=Pb(a):a.skip(e);break;case 13:e===(h||(h=c("ThriftTypes"))).STRUCT?b.addParticipantsRequest=Tb(a):a.skip(e);break;case 14:e===(h||(h=c("ThriftTypes"))).STRUCT?b.subscriptionRequest=Qb(a):a.skip(e);break;case 15:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientMediaUpdateRequest=yb(a):a.skip(e);break;case 16:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientMediaUpdateResponse=zb(a):a.skip(e);break;case 17:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dataMessageRequest=Rb(a):a.skip(e);break;case 18:e===(h||(h=c("ThriftTypes"))).STRUCT?b.removeParticipantsRequest=ec(a):a.skip(e);break;case 19:e===(h||(h=c("ThriftTypes"))).STRUCT?b.dataMessageResponse=Sb(a):a.skip(e);break;case 30:e===(h||(h=c("ThriftTypes"))).STRUCT?b.updateRequest=hc(a):a.skip(e);break;case 31:e===(h||(h=c("ThriftTypes"))).STRUCT?b.updateResponse=ic(a):a.skip(e);break;case 32:e===(h||(h=c("ThriftTypes"))).STRUCT?b.notifyRequest=jc(a):a.skip(e);break;case 33:e===(h||(h=c("ThriftTypes"))).STRUCT?b.notifyResponse=kc(a):a.skip(e);break;case 34:e===(h||(h=c("ThriftTypes"))).STRUCT?b.connectRequest=Xb(a):a.skip(e);break;case 35:e===(h||(h=c("ThriftTypes"))).STRUCT?b.connectResponse=Yb(a):a.skip(e);break;case 36:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientEventRequest=$b(a):a.skip(e);break;case 37:e===(h||(h=c("ThriftTypes"))).STRUCT?b.clientEventResponse=bc(a):a.skip(e);break;case 40:e===(h||(h=c("ThriftTypes"))).STRUCT?b.unsubscribeRequest=fc(a):a.skip(e);break;case 41:e===(h||(h=c("ThriftTypes"))).STRUCT?b.unsubscribeResponse=gc(a):a.skip(e);break;case 42:e===(h||(h=c("ThriftTypes"))).STRUCT?b.approvalRequest=lc(a):a.skip(e);break;case 43:e===(h||(h=c("ThriftTypes"))).STRUCT?b.transferRequest=Db(a):a.skip(e);break;case 44:e===(h||(h=c("ThriftTypes"))).STRUCT?b.prefetchSdpRequest=Hb(a):a.skip(e);break;case 45:e===(h||(h=c("ThriftTypes"))).STRUCT?b.prefetchSdpResponse=Ib(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function qc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRUCT?b.messageHeader=oc(a):a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRUCT?b.messageBody=pc(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.messageHeader===void 0&&(b.messageHeader=m());b.messageBody===void 0&&(b.messageBody=n());return b}function rc(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:if(e===(h||(h=c("ThriftTypes"))).SET){b.users=new Set();d=a.readSetBegin();for(var f=0;f<d.size;f++){var g=a.readString();b.users.add(g)}}else a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.allowMultipleJoins=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.dismissOthersOnFirstJoin=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.aliasId=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.users===void 0&&(b.users=new Set());b.allowMultipleJoins===void 0&&(b.allowMultipleJoins=!1);b.dismissOthersOnFirstJoin===void 0&&(b.dismissOthersOnFirstJoin=!1);b.aliasId===void 0&&(b.aliasId="");return b}function sc(a){var b,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.joinRequest=Vb(a),b="joinRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinRequest, previous deserialized field: "+b);else a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.joinResponse=Wb(a),b="joinResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: joinResponse, previous deserialized field: "+b);else a.skip(f);break;case 3:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.serverMediaUpdateRequest=Bb(a),b="serverMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateRequest, previous deserialized field: "+b);else a.skip(f);break;case 4:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.serverMediaUpdateResponse=Cb(a),b="serverMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: serverMediaUpdateResponse, previous deserialized field: "+b);else a.skip(f);break;case 5:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.hangupRequest=Eb(a),b="hangupRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: hangupRequest, previous deserialized field: "+b);else a.skip(f);break;case 6:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.iceCandidateRequest=Fb(a),b="iceCandidateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: iceCandidateRequest, previous deserialized field: "+b);else a.skip(f);break;case 8:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.ringRequest=cc(a),b="ringRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringRequest, previous deserialized field: "+b);else a.skip(f);break;case 9:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.ringResponse=dc(a),b="ringResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: ringResponse, previous deserialized field: "+b);else a.skip(f);break;case 10:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dismissRequest=Gb(a),b="dismissRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dismissRequest, previous deserialized field: "+b);else a.skip(f);break;case 11:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.conferenceStateRequest=Ob(a),b="conferenceStateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateRequest, previous deserialized field: "+b);else a.skip(f);break;case 12:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.conferenceStateResponse=Pb(a),b="conferenceStateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: conferenceStateResponse, previous deserialized field: "+b);else a.skip(f);break;case 13:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.addParticipantsRequest=Tb(a),b="addParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: addParticipantsRequest, previous deserialized field: "+b);else a.skip(f);break;case 14:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.subscriptionRequest=Qb(a),b="subscriptionRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: subscriptionRequest, previous deserialized field: "+b);else a.skip(f);break;case 15:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientMediaUpdateRequest=yb(a),b="clientMediaUpdateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateRequest, previous deserialized field: "+b);else a.skip(f);break;case 16:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientMediaUpdateResponse=zb(a),b="clientMediaUpdateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientMediaUpdateResponse, previous deserialized field: "+b);else a.skip(f);break;case 17:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dataMessageRequest=Rb(a),b="dataMessageRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageRequest, previous deserialized field: "+b);else a.skip(f);break;case 18:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.removeParticipantsRequest=ec(a),b="removeParticipantsRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: removeParticipantsRequest, previous deserialized field: "+b);else a.skip(f);break;case 19:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.dataMessageResponse=Sb(a),b="dataMessageResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: dataMessageResponse, previous deserialized field: "+b);else a.skip(f);break;case 30:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.updateRequest=hc(a),b="updateRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateRequest, previous deserialized field: "+b);else a.skip(f);break;case 31:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.updateResponse=ic(a),b="updateResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: updateResponse, previous deserialized field: "+b);else a.skip(f);break;case 32:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.notifyRequest=jc(a),b="notifyRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyRequest, previous deserialized field: "+b);else a.skip(f);break;case 33:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.notifyResponse=kc(a),b="notifyResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: notifyResponse, previous deserialized field: "+b);else a.skip(f);break;case 34:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.connectRequest=Xb(a),b="connectRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectRequest, previous deserialized field: "+b);else a.skip(f);break;case 35:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.connectResponse=Yb(a),b="connectResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: connectResponse, previous deserialized field: "+b);else a.skip(f);break;case 36:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientEventRequest=$b(a),b="clientEventRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventRequest, previous deserialized field: "+b);else a.skip(f);break;case 37:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.clientEventResponse=bc(a),b="clientEventResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: clientEventResponse, previous deserialized field: "+b);else a.skip(f);break;case 40:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.unsubscribeRequest=fc(a),b="unsubscribeRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeRequest, previous deserialized field: "+b);else a.skip(f);break;case 41:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.unsubscribeResponse=gc(a),b="unsubscribeResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: unsubscribeResponse, previous deserialized field: "+b);else a.skip(f);break;case 42:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.approvalRequest=lc(a),b="approvalRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: approvalRequest, previous deserialized field: "+b);else a.skip(f);break;case 43:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.transferRequest=Db(a),b="transferRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: transferRequest, previous deserialized field: "+b);else a.skip(f);break;case 44:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.prefetchSdpRequest=Hb(a),b="prefetchSdpRequest";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: prefetchSdpRequest, previous deserialized field: "+b);else a.skip(f);break;case 45:if(f===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)d.prefetchSdpResponse=Ib(a),b="prefetchSdpResponse";else throw new Error("more than one field have been deserialized in union type: RtcMessageBodyVariant; current field: prefetchSdpResponse, previous deserialized field: "+b);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}g.RtcException$DefaultConstructor=a;g.SessionDescription$DefaultConstructor=i;g.SessionDescriptionUpdate$DefaultConstructor=b;g.MediaDescriptionUpdate$DefaultConstructor=e;g.ServerMediaUpdate$DefaultConstructor=f;g.ClientMediaUpdate$DefaultConstructor=j;g.IceCandidate$DefaultConstructor=k;g.SyncPayload$DefaultConstructor=l;g.SyncAck$DefaultConstructor=aa;g.E2eeData$DefaultConstructor=ba;g.ClientMediaUpdateRequest$DefaultConstructor=ca;g.ClientMediaUpdateResponse$DefaultConstructor=da;g.MultipleRelaysAllocationParameters$DefaultConstructor=ea;g.ServerMediaUpdateRequest$DefaultConstructor=fa;g.ServerMediaUpdateResponse$DefaultConstructor=ga;g.TransferRequest$DefaultConstructor=ha;g.HangupRequest$DefaultConstructor=ia;g.IceCandidateRequest$DefaultConstructor=ja;g.DismissRequest$DefaultConstructor=ka;g.PrefetchSdpRequest$DefaultConstructor=la;g.PrefetchSdpResponse$DefaultConstructor=ma;g.EndpointSettings$DefaultConstructor=na;g.ParticipantState$DefaultConstructor=oa;g.ServerOnlyParticipantState$DefaultConstructor=pa;g.UserProfile$DefaultConstructor=qa;g.ProductMetadata$DefaultConstructor=ra;g.ConferenceStateRequest$DefaultConstructor=sa;g.ConferenceStateResponse$DefaultConstructor=ta;g.SubscriptionRequest$DefaultConstructor=ua;g.DataMessageRequest$DefaultConstructor=va;g.DataMessageResponse$DefaultConstructor=wa;g.AddParticipantsRequest$DefaultConstructor=xa;g.SfuAllocation$DefaultConstructor=ya;g.JoinRequest$DefaultConstructor=za;g.JoinResponse$DefaultConstructor=Aa;g.ConnectRequest$DefaultConstructor=Ba;g.ConnectResponse$DefaultConstructor=Ca;g.ClientEvent$DefaultConstructor=Da;g.ClientEventRequest$DefaultConstructor=Ea;g.ThreadIdInfo$DefaultConstructor=Fa;g.ClientEventResponse$DefaultConstructor=Ga;g.RingRequest$DefaultConstructor=Ha;g.RingResponse$DefaultConstructor=Ia;g.RemoveParticipantsRequest$DefaultConstructor=Ja;g.UnsubscribeRequest$DefaultConstructor=Ka;g.UnsubscribeResponse$DefaultConstructor=La;g.UpdateRequest$DefaultConstructor=Ma;g.UpdateResponse$DefaultConstructor=Na;g.NotifyRequest$DefaultConstructor=Oa;g.NotifyResponse$DefaultConstructor=Pa;g.ApprovalRequest$DefaultConstructor=Qa;g.RtcSender$DefaultConstructor=Ra;g.RtcReceiver$DefaultConstructor=Sa;g.RtcMessageHeader$DefaultConstructor=m;g.RtcMessageBody$DefaultConstructor=n;g.RtcMultiwayMessage$DefaultConstructor=Ta;g.GroupOfUsers$DefaultConstructor=Ua;g.RtcMessageBodyVariant$DefaultConstructor=Va;g.serializeRtcException=Wa;g.serializeSessionDescription=o;g.serializeSessionDescriptionUpdate=Xa;g.serializeMediaDescriptionUpdate=p;g.serializeServerMediaUpdate=q;g.serializeClientMediaUpdate=r;g.serializeIceCandidate=s;g.serializeSyncPayload=t;g.serializeSyncAck=Ya;g.serializeE2eeData=Za;g.serializeClientMediaUpdateRequest=u;g.serializeClientMediaUpdateResponse=v;g.serializeMultipleRelaysAllocationParameters=$a;g.serializeServerMediaUpdateRequest=w;g.serializeServerMediaUpdateResponse=x;g.serializeTransferRequest=y;g.serializeHangupRequest=z;g.serializeIceCandidateRequest=A;g.serializeDismissRequest=B;g.serializePrefetchSdpRequest=C;g.serializePrefetchSdpResponse=D;g.serializeEndpointSettings=ab;g.serializeParticipantState=E;g.serializeServerOnlyParticipantState=bb;g.serializeUserProfile=F;g.serializeProductMetadata=cb;g.serializeConferenceStateRequest=G;g.serializeConferenceStateResponse=H;g.serializeSubscriptionRequest=I;g.serializeDataMessageRequest=J;g.serializeDataMessageResponse=K;g.serializeAddParticipantsRequest=L;g.serializeSfuAllocation=M;g.serializeJoinRequest=N;g.serializeJoinResponse=O;g.serializeConnectRequest=P;g.serializeConnectResponse=Q;g.serializeClientEvent=R;g.serializeClientEventRequest=S;g.serializeThreadIdInfo=db;g.serializeClientEventResponse=T;g.serializeRingRequest=U;g.serializeRingResponse=V;g.serializeRemoveParticipantsRequest=W;g.serializeUnsubscribeRequest=X;g.serializeUnsubscribeResponse=eb;g.serializeUpdateRequest=fb;g.serializeUpdateResponse=gb;g.serializeNotifyRequest=hb;g.serializeNotifyResponse=ib;g.serializeApprovalRequest=jb;g.serializeRtcSender=kb;g.serializeRtcReceiver=lb;g.serializeRtcMessageHeader=mb;g.serializeRtcMessageBody=nb;g.serializeRtcMultiwayMessage=ob;g.serializeGroupOfUsers=Y;g.serializeRtcMessageBodyVariant=pb;g.deserializeRtcException=qb;g.deserializeSessionDescription=Z;g.deserializeSessionDescriptionUpdate=rb;g.deserializeMediaDescriptionUpdate=sb;g.deserializeServerMediaUpdate=tb;g.deserializeClientMediaUpdate=ub;g.deserializeIceCandidate=vb;g.deserializeSyncPayload=$;g.deserializeSyncAck=wb;g.deserializeE2eeData=xb;g.deserializeClientMediaUpdateRequest=yb;g.deserializeClientMediaUpdateResponse=zb;g.deserializeMultipleRelaysAllocationParameters=Ab;g.deserializeServerMediaUpdateRequest=Bb;g.deserializeServerMediaUpdateResponse=Cb;g.deserializeTransferRequest=Db;g.deserializeHangupRequest=Eb;g.deserializeIceCandidateRequest=Fb;g.deserializeDismissRequest=Gb;g.deserializePrefetchSdpRequest=Hb;g.deserializePrefetchSdpResponse=Ib;g.deserializeEndpointSettings=Jb;g.deserializeParticipantState=Kb;g.deserializeServerOnlyParticipantState=Lb;g.deserializeUserProfile=Mb;g.deserializeProductMetadata=Nb;g.deserializeConferenceStateRequest=Ob;g.deserializeConferenceStateResponse=Pb;g.deserializeSubscriptionRequest=Qb;g.deserializeDataMessageRequest=Rb;g.deserializeDataMessageResponse=Sb;g.deserializeAddParticipantsRequest=Tb;g.deserializeSfuAllocation=Ub;g.deserializeJoinRequest=Vb;g.deserializeJoinResponse=Wb;g.deserializeConnectRequest=Xb;g.deserializeConnectResponse=Yb;g.deserializeClientEvent=Zb;g.deserializeClientEventRequest=$b;g.deserializeThreadIdInfo=ac;g.deserializeClientEventResponse=bc;g.deserializeRingRequest=cc;g.deserializeRingResponse=dc;g.deserializeRemoveParticipantsRequest=ec;g.deserializeUnsubscribeRequest=fc;g.deserializeUnsubscribeResponse=gc;g.deserializeUpdateRequest=hc;g.deserializeUpdateResponse=ic;g.deserializeNotifyRequest=jc;g.deserializeNotifyResponse=kc;g.deserializeApprovalRequest=lc;g.deserializeRtcSender=mc;g.deserializeRtcReceiver=nc;g.deserializeRtcMessageHeader=oc;g.deserializeRtcMessageBody=pc;g.deserializeRtcMultiwayMessage=qc;g.deserializeGroupOfUsers=rc;g.deserializeRtcMessageBodyVariant=sc}),98);
__d("OculusMqttChannel",["CurrentUser","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();function h(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);a=c("CurrentUser").getAppID()==null?2763362503905702:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"websocket",deviceId:c("uuidv4")(),endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var i=null;function a(a){i==null&&(i=h(a));return i}function b(){return i}function e(){i!=null&&(i.shutdown(),i=null)}g.getOculusMqttChannelInstance=a;g.getOculusMqttChannelInstanceDoNotCreate=b;g.shutdownAndClear=e}),98);
__d("OverlayConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a={OverlayConfigNumParameters:4798,OverlayConfigNotPresentFlagValue:-1};b=a;f["default"]=b}),66);
__d("OverlayConfigLayerSource",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({UNKNOWN:0,DEFAULT:1,MOBILECONFIG:2,APP_CRUCIBLE:3,APP_JNI:4,UNITTEST_CONFIG:5,SERVER:6,PLACEHOLDER:7,LS_MOBILECONFIG:8,APP_LS:9,APP_JS:10,BROWSER:11,APP_OVRRTC:12,APP_IG:13,MLITE4A_LEGACY_QE:14,APP_MLITE4A:15,APP_PORTAL:16,IG_LAUNCHER:17,APP_ARCHON:18,APP_WS:19,APP_NOX:20,APP_WEARABLE_MSNGR:21,APP_WEARABLE_IG:22,APP_ORCA_RSYS:23,APP_WILDE:24,APP_MKIOS:25,APP_MK4A:26,DYNAMIC:27,SDK_DEFAULT:28,APP_FB4A:29,APP_RSYS_SDK_SAMPLE:30,APP_BIZAPP:31,APP_WORKCHAT:32,APP_ARCHON_LOCAL_OVERRIDES:33,APP_CATHODE:34,APP_WR4I:35,APP_WR4A:36,APP_METACAM:37,HORIZON_EMERGENCY:38,APP_SOCIALPLATFORM:39,APP_TWILIGHT:40,APP_AR_CALLING_LOCAL_OVERRIDES:41,APP_TWILIGHT_CASTING:42,TWILIGHT_EMERGENCY:43,METACAM_EMERGENCY:44,CALL_SCOPED:45,APP_CASE50:46});b=a;f["default"]=b}),66);
__d("OverlayConfigServerLayer",["OverlayConfigConstants","OverlayConfigLayerSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.createFromHeader=function(b){try{b=b==null?void 0:(b=b.extensions)==null?void 0:b.oc1_json;if(b==null)return null;b=JSON.parse(b);b=b==null?void 0:b.values;return b==null?null:new a(b)}catch(a){return null}};function a(a){this.$1=a}var b=a.prototype;b.getLayerSource=function(){return c("OverlayConfigLayerSource").SERVER};b.getValue=function(a){a=this.$1[String(a)];return a!=null?a:c("OverlayConfigConstants").OverlayConfigNotPresentFlagValue};b.logExposure=function(a){};return a}();g["default"]=a}),98);
__d("RequestStreamBodyUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return g(atob(a))};b=function(a){return btoa(h(a))};c=function(a){a=btoa(a);var b=a.indexOf("=");return b===-1?a:a.substring(0,b)};var g=function(a){a=a;var b=a.length,c=new Uint8Array(b);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c},h=function(a){var b="",c=a.byteLength;for(var d=0;d<c;d++)b+=String.fromCharCode(a[d]);return b};f.base64ToUint8Array=a;f.uint8ArrayToBase64=b;f.stringToBase64WithoutPadding=c;f.stringToUint8Array=g;f.uint8ArrayToString=h}),66);
__d("ZenonArmadilloLoggingChecks",["justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("justknobx")._("1019")}function b(){return c("justknobx")._("1020")}function d(){return c("justknobx")._("1021")}function e(){return c("justknobx")._("1155")}g.isArmadilloCallSummaryLoggingEnabled=a;g.isArmadilloQPLLoggingEnabled=b;g.isArmadilloCheckpointLoggingEnabled=d;g.areArmadilloTslogsEnabled=e}),98);
__d("ZenonBrowsers",["UserAgent","UserAgentData"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("UserAgent").isBrowser("Chrome")}function i(){return!!navigator.webkitGetUserMedia}function a(){return c("UserAgent").isBrowser("Edge (Chromium Based)")||c("UserAgent").isBrowser("Edge PWA (Chromium Based)")}function j(){return c("UserAgent").isBrowser("Safari")}function k(){return c("UserAgent").isBrowser("Firefox")}function b(){return c("UserAgent").isBrowser("Opera")}function l(){return c("UserAgent").isBrowser("Mobile Safari")}function m(){return c("UserAgent").isBrowser("Oculus Browser")}function n(){return c("UserAgent").isBrowser("Samsung Browser")}function d(){return l()||c("UserAgent").isPlatform("Android")||n()}function o(){return c("UserAgent").isPlatform("Android")||c("UserAgent").isPlatform("iOS")}function p(){if(k()){var a;return(a=c("UserAgentData").browserVersion)!=null?a:0}if(i()){a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return a!=null?parseInt(a[2],10):999}return 0}function q(){return c("UserAgent").isBrowser("FBLite")||c("UserAgent").isBrowser("Facebook for Android")}function e(a){if(!q())return!1;var b=p();return b>=a}function f(){return k()}function r(){return k()||j()||c("UserAgent").isBrowser("Chrome >= 97")}function s(){return!o()&&(c("UserAgent").isBrowser("Chrome >= 51")||c("UserAgent").isBrowser("Opera >= 36"))}function t(){return c("UserAgent").isBrowser("Firefox < 60")||c("UserAgent").isBrowser("Edge")}function u(){return!m()}function v(){return!m()}function w(){return!l()&&!j()&&!((i()||h())&&p()<80)&&!(k()&&p()<70)}function x(){return(i()||h())&&p()>=77||c("UserAgent").isBrowser("Firefox >= 70")||c("UserAgent").isBrowser("Safari >= 14.1")}function y(){return c("UserAgent").isBrowser("Chrome >= 89")||c("UserAgent").isBrowser("Opera >= 75")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 89")||c("UserAgent").isBrowser("Edge PWA (Chromium Based) >= 89")}g.isChrome=h;g.isChromium=i;g.isChromiumBasedEdge=a;g.isDesktopSafari=j;g.isFirefox=k;g.isOpera=b;g.isMobileSafari=l;g.isOculusBrowser=m;g.isSamsung=n;g.isSupportedMobileBrowser=d;g.isMobileDevice=o;g.webrtcVersion=p;g.isFBWebview=q;g.isFBWebviewWithChromeMinVersion=e;g.noTransceiverForNegotiations=f;g.onlySupportsUnifiedPlan=r;g.isVideoFilterEffectSupported=s;g.videoEscalationByUnmuteWorkaround=t;g.supportsMWAVEscalation=u;g.supportsVideoCalls=v;g.supportsRollback=w;g.supportsIceRestart=x;g.isVideoLayersAllocationSupported=y}),98);
__d("ZenonCallsModelTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum")).Mirrored(["Disconnected","Precontacting","Contacting","Ringing","PendingApproval","Approved","FailedApproval","Connecting","Connected","Reconnecting","ProvisionalRinging"]);d=a.Mirrored(["Facebook","Instagram","Messenger","Guest","WhatsApp","Workplace"]);e=a.Mirrored(["New","Connecting","PendingApproval","Connected","Terminating","Terminated"]);b=a.Mirrored(["Unknown","CallsBlocked","PageAdminPressedDecline"]);a=a.Mirrored(["None","PendingPeerFeedback","Declined","RemoteDeclined","LocalDeclined","Cancelled","TimedOut","Accepted","InitiatedFromPeer"]);f.ZenonCallParticipantState=c;f.ZenonCallParticipantType=d;f.ZenonCallState=e;f.ZenonEndCallSubreason=b;f.ZenonVideoEscalationStatus=a}),66);
__d("ZenonEndCallReason",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BREAKOUT_SESSION_SWITCH_ROOM:"BreakoutSessionSwitchRoom",CALL_END_ACCEPT_AFTER_HANG_UP:"CallEndAcceptAfterHangUp",CALLER_NOT_VISIBLE:"CallerNotVisible",CAMERA_PERMISSION_DENIED:"CameraPermissionDenied",CARRIER_BLOCKED:"CarrierBlocked",CLIENT_ENCRYPTION_ERROR:"ClientEncryptionError",CLIENT_ERROR:"ClientError",CLIENT_INTERRUPTED:"ClientInterrupted",CONNECTION_DROPPED:"ConnectionDropped",END_TO_END_ENCRYPTION_INVARIANT_VIOLATED:"EndToEndEncryptionInvariantViolated",HANGUP_CALL:"HangupCall",IGNORE_CALL:"IgnoreCall",IN_ANOTHER_CALL:"InAnotherCall",INACTIVE_TIMEOUT:"InactiveTimeout",INCOMING_TIMEOUT:"IncomingTimeout",MAX_ALLOWED_PARTICIPANTS_REACHED:"MaxAllowedParticipantsReached",MICROPHONE_PERMISSION_DENIED:"MicrophonePermissionDenied",NO_ANSWER_TIMEOUT:"NoAnswerTimeout",NO_PERMISSION:"NoPermission",NO_UI_SHOWN:"NoUIShown",OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked",OTHER_INSTANCE_HANDLED:"OtherInstanceHandled",OTHER_NOT_CAPABLE:"OtherNotCapable",PRODUCT_SERVER_DEFINED_END_REASON:"ProductServerDefinedEndReason",REMOVED_BY_PARTICIPANT:"RemovedByParticipant",RING_MUTED:"RingMuted",SESSION_MIGRATED:"SessionMigrated",SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed",TX_ACK_TIMEOUT:"TxAckTimeout",UNEXPECTED_END_OF_CALL:"UnexpectedEndOfCall",UNKNOWN:"Unknown",VERSION_UNSUPPORTED:"VersionUnsupported",WEBRTC_ERROR:"WebRTCError"});c=a;f["default"]=c}),66);
__d("ZenonIncomingRingSDKTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Hangup","OtherDismiss"]);f.ZenonCancelReason=a}),66);
__d("fbwebrtc_ClientStack",[],(function(a,b,c,d,e,f){a=Object.freeze({OLD_CLIENT_PLATFORM_STACK:0,RSYS_X:1,IG_OLD_STACK:2,MLITE_OLD_STACK:3,SCOTCH:4,ZENON:5});f["default"]=a}),66);
__d("multiway_ApprovalStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({DENIED:0,APPROVED:1});f["default"]=a}),66);
__d("multiway_Capability",[],(function(a,b,c,d,e,f){a=Object.freeze({SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4,SUPPORT_MWPP:5,REQUIRE_FULL_SDP_IN_SMU:6,SUPPORT_PRECONNECT:7,SUPPORT_MWPP_DEESCALATION:8,SUPPORT_PARTICIPANT_STATE_UNCALLABLE:9,SUPPORT_MULTIPLE_VIDEO_STREAMS:10,REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED:11,SUPPORT_MULTISTREAM_FEC:12,SUPPORT_DELTA_SMU:13,REQUIRE_DEFAULT_CHANNEL_SCREENSHARE:14,SUPPORT_SCREENSHARE_FLAG_IN_JOIN_RESPONSE_AND_SMU:15,SUPPORT_TEMPORAL_LAYER_JBE:16,REQUIRES_P2P_RELAY_INFO_VIA_SIGNALING:17,SUPPORT_NUMERIC_TOPICS:18,SUPPORT_PSEUDO_QUIC_CONNECTION:19,SUPPORT_SDP_SENDRECV:20});f["default"]=a}),66);
__d("multiway_ClientEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,MEDIA_CONNECTED:1});f["default"]=a}),66);
__d("multiway_ConferenceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,IGVIDEOCALL:9,ROOM:15,CRUCIBLE:20,MBS_WA:21,BOT:22,HORIZON:23});f["default"]=a}),66);
__d("multiway_DeviceStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10});f["default"]=a}),66);
__d("multiway_DismissReason",[],(function(a,b,c,d,e,f){a=Object.freeze({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14,ANSWERED_BY_OTHER_USER:15,PARTICIPANT_SELF_TERMINATION:16,PARTICIPANT_REJOIN:17,LONG_LASTING_AUDIO_ISSUE:18,PRIMARY_ENDPOINT_HANGUP:19,RECONNECT_FAILED:20,E2EE_HARDENING_ERROR:21,CALL_ENDED_BY_EXTENSION:22});f["default"]=a}),66);
__d("multiway_E2eeMode",[],(function(a,b,c,d,e,f){a=Object.freeze({E2EE_NOT_MANDATED:0,DEPRECATED_NO_REQUIREMENT:1,E2EE_MANDATED:2});f["default"]=a}),66);
__d("multiway_EndpointServiceType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,COMPOSITING_SERVICE:1,MEDIA_SERVER:2,CATHODE_AMBISONIC:3,CATHODE_CAPTIONS:4,CATHODE_MEETING_SUMMARIZER:5,CATHODE_REALTIME_SHARED_STATE:6,RP_GENAI_SERVICE:7,SMART_GLASSES_ASSISTANT:8});f["default"]=a}),66);
__d("multiway_HangupReason",[],(function(a,b,c,d,e,f){a=Object.freeze({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_NEGOTIATE_E2EE:8,WEBRTC_ERROR:9,CONNECTION_DROPPED:10});f["default"]=a}),66);
__d("multiway_JoinMode",[],(function(a,b,c,d,e,f){a=Object.freeze({PRIMARY:0,SECONDARY:1});f["default"]=a}),66);
__d("multiway_MediaPath",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,SFU:1,P2P:2});f["default"]=a}),66);
__d("multiway_MediaPauseStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NotPaused:0,Paused:1});f["default"]=a}),66);
__d("multiway_MessageTag",[],(function(a,b,c,d,e,f){a=Object.freeze({PRANSWER:1001,INITIAL_ANSWER_TO_P2P_CALLER:1002,DEESCALATE_OFFER_TO_P2P_CALLEE:1003,DEESCALATE_ANSWER_TO_P2P_CALLER:1004,REQUEST_DEESCALATE_TO_P2P_CALLER:1005,REQUEST_ESCALATE:1006,REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:1007,REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:1008,PARTICIPANT_ADDED:1009,PARTICIPANT_REMOVED:1010,FIRST_REMOTE_ALERTED_FOR_INITIATOR:2001,FIRST_REMOTE_ANSWERED_FOR_INITIATOR:2002,CONTAIN_PENDING_APPROVAL_PARTICIPANTS:2003,KEEP_ALIVE_PING:3001,IS_INITIATOR:4001,PREGEN_SDP:4002});f["default"]=a}),66);
__d("multiway_MessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,PING:18,UPDATE:20,NOTIFY:21,CONNECT:22,CLIENT_EVENT:23,UNSUBSCRIBE:25,APPROVAL:26,TRANSFER:27,WAKEUP:28,PREFETCH:29});f["default"]=a}),66);
__d("multiway_ParticipantCallState",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17});f["default"]=a}),66);
__d("multiway_RingType",[],(function(a,b,c,d,e,f){a=Object.freeze({GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6,LIVE_AUDIO_ROOM:7,LIVE_WITH_ROOM:8});f["default"]=a}),66);
__d("multiway_RtcResponseStatusCode",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONFLICT:409,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503});f["default"]=a}),66);
__d("multiway_RtcResponseSubCode",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:1e3,EXCEEDED_MAX_ALLOWED_PARTICIPANTS:1001,MEMBERSHIP_CHECK_FAIL:1002,CONFERENCE_THROTTLED:1003,ENDPOINT_THROTTLED:1004,MWS_MESSAGE_SENT_TO_INCORRECT_REGION:1005,UNSUPPORTED_REQUEST_TYPE:2e3,CLIENT_REQUEST_UNACCEPTABLE:2001,CLIENT_RESPONSE_UNACCEPTABLE:2002,RING_RESPONSE_BODY_NOT_SET:2004,SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:2005,INVALID_SDP:2006,INVALID_CONFERENCE_NAME:2007,SERVER_INFO_CONFERENCE_NAME_MISMATCH:2008,INVALID_USER_ID:2009,INCORRECT_VERSION_RANGE:2010,SENDER_ID_MISMATCH:2011,RECIPIENT_NOT_SPECIFIED:2012,FIELD_NOT_ALLOWED:2013,USERS_NOT_SPECIFIED:2015,REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:2016,INVALID_CALL_ID:2017,SESSION_DESCRIPTION_ID_MISMATCH:2018,EMPTY_CLIENT_MEDIA_UPDATES:2019,INVALID_SERVER_INFO_DATA:2020,INCORRECT_STATE_VERSION:2021,MISMATCHED_STATE_FOR_VERSION:2022,INVALID_STATE_VERSION:2023,NO_RESOLVER_FOUND:2024,MISSING_APPROVERLIST:2025,FULL_SDP_REQUIRED_IN_APPROVED_STATE:2026,INVALID_BROADCAST_ID:2027,INVALID_ENDPOINT_CONFIG:2028,INVALID_E2EE_STATE:2029,SFU_MODE_PREVENTED:2030,INVALID_CONFERENCE_STATE:2031,JOIN_REQUEST_DENIED:2032,EMPTY_USER_IDS:2033,MISSING_SDP_CONNECT_REQUEST:2034,MISSING_BODY_ENDPOINT:2101,MISSING_BODY_HEADER:2102,MISSING_BODY_BODY:2103,MISSING_BODY_PARAMS:2104,MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:2105,MISSING_BODY_DATA_MESSAGE_REQUEST:2106,MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:2107,MISSING_BODY_ADD_PARTICIPANTS_REQUEST:2108,MISSING_BODY_SUBSCRIPTION_REQUEST:2110,MISSING_BODY_JOIN_REQUEST:2111,MISSING_BODY_HANGUP_REQUEST:2112,MISSING_BODY_ICE_CANDIDATE_REQUEST:2113,MISSING_BODY_P2P_MESSAGE_REQUEST:2114,MISSING_BODY_UPDATE_REQUEST:2115,MISSING_BODY_CLIENT_EVENT_REQUEST:2116,MISSING_BODY_CONNECT_REQUEST:2117,MISSING_BODY_UNSUBSCRIBE_REQUEST:2118,MISSING_BODY_APPROVAL_REQUEST:2119,MISSING_ENDPOINT_USER_ID:2120,EMPTY_ENDPOINT_USER_ID:2121,MISSING_BODY_TRANSFER_REQUEST:2122,MISSING_BODY_GENERIC:2199,REQUESTOR_NOT_MEMBER_CONFERENCE:3002,NOT_BROADCAST_OWNER:3003,GUEST_NOT_INVITED:3004,GUEST_DISCONNECTED:3005,GUEST_INVITATION_EXPIRED:3006,SHOULD_USE_NEW_SIGNALING_PATH:3007,PARTICIPANT_IN_PENDING_APPROVAL_STATE:3008,BROADCAST_ALREADY_STOPPED:4002,FAILED_TO_GENERATE_SDP_ANSWER:4003,FAILED_GENERATE_SESSION_DESCRIPTION:4004,SDP_SESSION_ID_MISMATCH:4005,MEDIA_ENDPOINT_GONE:4007,MEDIA_ENDPOINT_ALREADY_EXISTS:4008,MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:4009,LEGACY_MESSENGER_SENDER_UNSET:4010,FAILED_TO_SET_TRANSPORT_INFO:4011,NON_PRIMARY_MULTIWAY_SERVER:4012,FAILED_TO_GET_REMOTE_DESCRIPTION:4013,LOCAL_DESCRIPTION_NOT_SET:4014,INVALID_SDP_TYPE:4015,CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:4016,SDP_UNSET_ON_P2P_ANSWER:4017,MISSING_ICE_CANDIDATE_PAYLOAD:4018,P2P_PROTOCOL_UNSET:4019,CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:4020,LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:4021,CONNECT_UNSUPPORTED_IN_SFU_MODE:4022,CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:4023,RESOLVE_STATE_API_ERROR:4024,EXTERNAL_RESOLUTION_ERROR:4025,INTERNAL_RESOLUTION_ERROR:4026,RESOLUTION_DISABLED:4027,BROADCAST_ID_MISSING:4028,SDP_UNSET_ON_P2P_OFFER:4029,LEGACY_OFFER_MISSING_REQUIRED_VALUE:4031,MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:4032,CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:4033,OTHER_USER_ANSWERED_THE_CALL:4034,MEDIA_SERVER_DESERIALIZATION_ERROR:4035,REMOTE_SDP_TRACKID_MISMATCH:4036,SIGNALING_MESSAGE_TO_CLIENT_DROPPED:4037,DATA_CHANNEL_ENDPOINT_GONE:4038,DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:4039,CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:4040,P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:4041,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:4042,CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:4043,REQUEST_TIMEOUT:4044,CONFERENCE_NOT_FOUND:5001,CONFERENCE_IS_TERMINATING:5002,CONFERENCE_IS_TERMINATED:5003,CONFERENCE_NAME_EMPTY:5004,NONCE_EMPTY:5005,NONCE_MISMATCH:5006,CONFERENCE_HAS_GONE:5007,PARTICIPANT_HAS_GONE:5008,MEDIA_SERVER_NOT_FOUND:5009,CLIENT_TERMINATED:5010,MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:6001,CONFERENCE_INCAPABLE_RENEGOTIATION:6002,REJECTING_CMU_WHEN_SMU_PENDING:6003,PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:6004,PARTICIPANT_ALREADY_IN_WAITING_ROOM:6005,PARTICIPANT_NOT_IN_PENDING_APPROVAL:6006,USER_NOT_APPROVER_FOR_TARGET_USER:6007,UNSUPPORTED_CAPABILITIES:6008,PRODUCT_SERVER_DEFINED_END_REASON:6009,WWW_KILLSWITCHED_REQUEST:6010,CONFLICTING_MEDIA_PATH:6011,CONFLICTING_MEDIA_STATUS:6012,CONFLICTING_SESSION_DESCRIPTION:6013,OK:9e3});f["default"]=a}),66);
__d("multiway_SubscriptionType",[],(function(a,b,c,d,e,f){a=Object.freeze({CNAME:0,TRACK:1,DOMINANT_SPEAKER:2});f["default"]=a}),66);
__d("multiway_VideoQuality",[],(function(a,b,c,d,e,f){a=Object.freeze({LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4});f["default"]=a}),66);
__d("ZenonMWMessageTypes",["$InternalEnum","fbwebrtc_ClientStack","multiway_ApprovalStatus","multiway_Capability","multiway_ClientEventType","multiway_ConferenceType","multiway_DeviceStatus","multiway_DismissReason","multiway_E2eeMode","multiway_EndpointServiceType","multiway_HangupReason","multiway_JoinMode","multiway_MediaPath","multiway_MediaPauseStatus","multiway_MessageTag","multiway_MessageType","multiway_ParticipantCallState","multiway_RingType","multiway_RtcResponseStatusCode","multiway_RtcResponseSubCode","multiway_SubscriptionType","multiway_VideoQuality"],(function(a,b,c,d,e,f,g){"use strict";a=b("$InternalEnum")({DEFAULT_AUDIO:0,DEFAULT_VIDEO:1,SCREEN_AUDIO:2,SCREEN_VIDEO:3});g.ZenonMWClientStack=c("fbwebrtc_ClientStack");g.ZenonMWApprovalStatus=c("multiway_ApprovalStatus");g.ZenonMWCapability=c("multiway_Capability");g.ZenonMWClientEventType=c("multiway_ClientEventType");g.ZenonMWConferenceType=c("multiway_ConferenceType");g.ZenonMWDeviceStatus=c("multiway_DeviceStatus");g.ZenonMWDismissReason=c("multiway_DismissReason");g.ZenonMWE2eeMode=c("multiway_E2eeMode");g.ZenonMWEndpointServiceType=c("multiway_EndpointServiceType");g.ZenonMWHangupReason=c("multiway_HangupReason");g.ZenonMWMediaPath=c("multiway_MediaPath");g.ZenonMWJoinMode=c("multiway_JoinMode");g.ZenonMWMediaPauseStatus=c("multiway_MediaPauseStatus");g.ZenonMWMessageTag=c("multiway_MessageTag");g.ZenonMWSignalingPayloadType=c("multiway_MessageType");g.ZenonMWParticipantCallState=c("multiway_ParticipantCallState");g.ZenonMWRingType=c("multiway_RingType");g.ZenonMWResponseStatusCode=c("multiway_RtcResponseStatusCode");g.ZenonMWResponseSubCode=c("multiway_RtcResponseSubCode");g.ZenonMWSubscriptionType=c("multiway_SubscriptionType");g.ZenonMWVideoQuality=c("multiway_VideoQuality");g.ZenonMWTrackLabel=a}),98);
__d("ZenonMediaError",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ConnectionClosed","IceDisconnected","IceFailure","SetLocalSdpFailed","SetRemoteSdpFailed","RollbackSdpFailed","UnknownError"]);f.ZenonMediaError=a}),66);
__d("ZenonDismissReason",["$InternalEnum","FBLogger","ZenonIncomingRingSDKTypes","ZenonMWMessageTypes","ZenonMediaError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum")({IgnoreCall:0,HangupCall:1,InAnotherCall:2,AcceptAfterHangUp:3,NoAnswerTimeout:4,IncomingTimeout:5,OtherInstanceHandled:6,SignalingMessageFailed:7,ConnectionDropped:8,ClientInterrupted:9,WebRTCError:10,ClientError:11,NoPermission:12,OtherNotCapable:13,NoUIShown:14,VersionUnsupported:15,CallerNotVisible:16,CarrierBlocked:17,OtherCarrierBlocked:18,ClientEncryptionError:19,MicrophonePermissionDenied:20,CameraPermissionDenied:21,SessionMigrated:22,RingMuted:23,JoinApprovalDenied:24,RejectedByCallee:25,CallEndedByProduct:26,CallEnded:27,AnsweredOnAnotherDevice:28,RejectedOnAnotherDevice:29,CallCollision:30,MaxAllowedParticipantsReached:31,UnexpectedEndOfCall:32,TxAckTimeout:33,EndToEndEncryptionInvariantViolated:34,ProductServerDefinedEndReason:35,RemovedByParticipant:39,AnsweredByOtherUser:40});function a(a){switch(a){case"BreakoutSessionSwitchRoom":return i.HangupCall;case"CallEndAcceptAfterHangUp":return i.AcceptAfterHangUp;case"CallerNotVisible":return i.CallerNotVisible;case"CarrierBlocked":return i.CarrierBlocked;case"ClientEncryptionError":return i.ClientEncryptionError;case"ClientError":return i.ClientError;case"ClientInterrupted":return i.ClientInterrupted;case"ConnectionDropped":return i.ConnectionDropped;case"HangupCall":return i.HangupCall;case"IgnoreCall":return i.IgnoreCall;case"InAnotherCall":return i.InAnotherCall;case"EndToEndEncryptionInvariantViolated":return i.EndToEndEncryptionInvariantViolated;case"InactiveTimeout":return i.CallEnded;case"IncomingTimeout":return i.IncomingTimeout;case"MaxAllowedParticipantsReached":return i.MaxAllowedParticipantsReached;case"NoAnswerTimeout":return i.NoAnswerTimeout;case"NoPermission":return i.NoPermission;case"NoUIShown":return i.NoUIShown;case"OtherCarrierBlocked":return i.OtherCarrierBlocked;case"OtherInstanceHandled":return i.OtherInstanceHandled;case"OtherNotCapable":return i.OtherNotCapable;case"SignalingMessageFailed":return i.SignalingMessageFailed;case"UnexpectedEndOfCall":return i.UnexpectedEndOfCall;case"Unknown":return i.CallEnded;case"VersionUnsupported":return i.VersionUnsupported;case"WebRTCError":return i.WebRTCError;case"MicrophonePermissionDenied":return i.MicrophonePermissionDenied;case"CameraPermissionDenied":return i.CameraPermissionDenied;case"SessionMigrated":return i.SessionMigrated;case"RingMuted":return i.RingMuted;case"TxAckTimeout":return i.TxAckTimeout;case"ProductServerDefinedEndReason":return i.ProductServerDefinedEndReason;case"RemovedByParticipant":return i.RemovedByParticipant}}function e(a){switch(a){case i.CallEnded:case i.CallEndedByProduct:case i.HangupCall:return"HangupCall";case i.IgnoreCall:case i.JoinApprovalDenied:case i.RejectedByCallee:return"IgnoreCall";case i.InAnotherCall:return"InAnotherCall";case i.AcceptAfterHangUp:return"CallEndAcceptAfterHangUp";case i.NoAnswerTimeout:return"NoAnswerTimeout";case i.IncomingTimeout:return"IncomingTimeout";case i.AnsweredOnAnotherDevice:case i.CallCollision:case i.RejectedOnAnotherDevice:case i.OtherInstanceHandled:case i.AnsweredByOtherUser:return"OtherInstanceHandled";case i.SignalingMessageFailed:return"SignalingMessageFailed";case i.ConnectionDropped:return"ConnectionDropped";case i.ClientInterrupted:return"ClientInterrupted";case i.WebRTCError:return"WebRTCError";case i.ClientError:return"ClientError";case i.NoPermission:return"NoPermission";case i.OtherNotCapable:return"OtherNotCapable";case i.NoUIShown:return"NoUIShown";case i.VersionUnsupported:return"VersionUnsupported";case i.CallerNotVisible:return"CallerNotVisible";case i.CarrierBlocked:return"CarrierBlocked";case i.OtherCarrierBlocked:return"OtherCarrierBlocked";case i.ClientEncryptionError:return"ClientEncryptionError";case i.UnexpectedEndOfCall:return"UnexpectedEndOfCall";case i.MaxAllowedParticipantsReached:return"MaxAllowedParticipantsReached";case i.MicrophonePermissionDenied:return"MicrophonePermissionDenied";case i.CameraPermissionDenied:return"CameraPermissionDenied";case i.SessionMigrated:return"SessionMigrated";case i.RingMuted:return"RingMuted";case i.TxAckTimeout:return"TxAckTimeout";case i.EndToEndEncryptionInvariantViolated:return"EndToEndEncryptionInvariantViolated";case i.ProductServerDefinedEndReason:return"ProductServerDefinedEndReason";case i.RemovedByParticipant:return"RemovedByParticipant"}c("FBLogger")("rtc_www").mustfix("Unknown dismiss reason: %s",a);return"Unknown"}function f(a){switch(a){case i.OtherInstanceHandled:case i.AnsweredOnAnotherDevice:case i.AnsweredByOtherUser:case i.RejectedOnAnotherDevice:return d("ZenonIncomingRingSDKTypes").ZenonCancelReason.OtherDismiss;default:return d("ZenonIncomingRingSDKTypes").ZenonCancelReason.Hangup}}function j(a){switch(a){case d("ZenonMediaError").ZenonMediaError.IceDisconnected:return i.ConnectionDropped;case d("ZenonMediaError").ZenonMediaError.ConnectionClosed:return i.HangupCall;case d("ZenonMediaError").ZenonMediaError.IceFailure:case d("ZenonMediaError").ZenonMediaError.SetLocalSdpFailed:case d("ZenonMediaError").ZenonMediaError.SetRemoteSdpFailed:case d("ZenonMediaError").ZenonMediaError.RollbackSdpFailed:return i.WebRTCError;case d("ZenonMediaError").ZenonMediaError.UnknownError:return i.UnexpectedEndOfCall}}function k(a){return l[a]}var l=Object.freeze((b={},b[(h=d("ZenonMWMessageTypes")).ZenonMWDismissReason.CALL_ENDED]=i.CallEnded,b[h.ZenonMWDismissReason.ANSWERED_ON_ANOTHER_DEVICE]=i.AnsweredOnAnotherDevice,b[h.ZenonMWDismissReason.ANSWERED_BY_OTHER_USER]=i.AnsweredByOtherUser,b[h.ZenonMWDismissReason.IN_ANOTHER_CALL]=i.InAnotherCall,b[h.ZenonMWDismissReason.CONNECTION_DROPPED]=i.ConnectionDropped,b[h.ZenonMWDismissReason.REJECTED_ON_ANOTHER_DEVICE]=i.RejectedOnAnotherDevice,b[h.ZenonMWDismissReason.REJECTED_BY_CALLEE]=i.RejectedByCallee,b[h.ZenonMWDismissReason.CALL_ENDED_BY_PRODUCT]=i.CallEndedByProduct,b[h.ZenonMWDismissReason.INTERNAL_ERROR]=i.SignalingMessageFailed,b[h.ZenonMWDismissReason.REMOVED_BY_PARTICIPANT]=i.RemovedByParticipant,b[h.ZenonMWDismissReason.TX_ACK_TIMEDOUT]=i.TxAckTimeout,b));g.ZenonDismissReason=i;g.endCallToDismissReason=a;g.dismissToEndCallReason=e;g.dismissReasonToCancelReason=f;g.mediaErrorToDismissReason=j;g.mwDismissToDmissReason=k}),98);
__d("ZenonIceStatsParser",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];a=a.split("\r\n");a.forEach(function(a){g(a)&&b.push({gen:h(a),type:i(a)})});return b}function g(a){return a.indexOf("candidate:")>-1}function h(a){var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b}function i(a){a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"}f.extractIceInfo=a}),66);
__d("ZenonJoiningContext",[],(function(a,b,c,d,e,f){"use strict";b="joining_context";function a(a){var b=a.callablePostID,c=a.callingTags,d=a.callTrigger,e=a.conferenceName,f=a.groupThreadID,g=a.igThreadID,h=a.immersiveModeDoorID,i=a.isMetaAiCall,j=a.linkUrl,k=a.liveBroadcastID,l=a.meetingID,m=a.peerID,n=a.rtcDoorID;a=a.serverInfoData;return{call_trigger:d,callable_post_id:b,calling_tags:c,conference_name:e,group_thread_id:f,ig_thread_id:g,immersive_mode_door_id:h,is_meta_ai_call:i,link_url:j,live_broadcast_id:k,meeting_id:l,peer_id:m,rtc_door_id:n,server_info_data:a}}f.JOINING_CONTEXT_TOPIC=b;f.convertCollisionToJoiningContext=a}),66);
__d("ZenonLoggingEventTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Send","Receive"]);c=b("$InternalEnum")({Primary:"primary",Secondary:"secondary"});d="rtc_www";f.ZenonUpdateIceInfoDirection=a;f.ZenonJoinMode=c;f.tslogSource=d}),66);
__d("ZenonMWCommonUtils",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.split("\n");if(a.length<2)throw c("unrecoverableViolation")("Expected SDP string with two or more lines, but got "+a.length,"rtc_www");a=a[1].trim();a=a.split(" ");if(a.length<3)throw c("unrecoverableViolation")("Session line should have at least 3 tokens, but got "+a.length,"rtc_www");a=parseInt(a[2],10);if(isNaN(a))throw c("unrecoverableViolation")("SDP version could not be parsed as number.","rtc_www");return a}function b(a){return a.includes("BUNDLE 0")}g.getSdpVersion=a;g.isUnifiedPlan=b}),98);
__d("ZenonMWJoinUtils",["ZenonBrowsers","ZenonIGMediaUtil","gkx","shouldUseSFUMediaPath"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("ZenonBrowsers").isFirefox()&&a!=="answer"?!1:!c("ZenonIGMediaUtil").shouldUseSFUOnly()}function b(){return c("shouldUseSFUMediaPath")(!1)?!1:c("gkx")("25223")}g.canUseMwpp=a;g.canDeescalate=b}),98);
__d("ZenonMWMessageReliabilityLogTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["RECEIVED_REQUEST","RECEIVED_RESPONSE","PROCESSING_REQUEST","START_PROCESSING_RESPONSE","PROCESSING_RESPONSE","PROCESSED_REQUEST","PROCESSED_RESPONSE","SENDING_REQUEST","SENDING_RESPONSE","SENT_REQUEST","SENT_REQUEST_FROM_HANDLER","SENT_RESPONSE","SEND_REQUEST_FAILED","SEND_REQUEST_FAILED_FROM_HANDLER","SEND_RESPONSE_FAILED","SENT_SM_EVENT","PROCESSED_SM_EVENT","REQUEST_AFTER_NULL_CHECK","REQUEST_AFTER_TRANSLATION"]);f.ZenonMWMessageReliabilityEvent=a}),66);
__d("ZenonMWThriftMessageTagUtils",["MultiwayCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case d("MultiwayCommonTypes").MessageTag.PRANSWER:return 1001;case d("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER:return 1002;case d("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE:return 1003;case d("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER:return 1004;case d("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER:return 1005;case d("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE:return 1006;case d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM:return 1007;case d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS:return 1008;case d("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED:return 1009;case d("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED:return 1010;case d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR:return 2001;case d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR:return 2002;case d("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS:return 2003;case d("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING:return 3001;case d("MultiwayCommonTypes").MessageTag.IS_INITIATOR:return 4001;case d("MultiwayCommonTypes").MessageTag.PREGEN_SDP:return 4002}}function a(a){switch(a){case 1001:return d("MultiwayCommonTypes").MessageTag.PRANSWER;case 1002:return d("MultiwayCommonTypes").MessageTag.INITIAL_ANSWER_TO_P2P_CALLER;case 1003:return d("MultiwayCommonTypes").MessageTag.DEESCALATE_OFFER_TO_P2P_CALLEE;case 1004:return d("MultiwayCommonTypes").MessageTag.DEESCALATE_ANSWER_TO_P2P_CALLER;case 1005:return d("MultiwayCommonTypes").MessageTag.REQUEST_DEESCALATE_TO_P2P_CALLER;case 1006:return d("MultiwayCommonTypes").MessageTag.REQUEST_ESCALATE;case 1007:return d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_TO_ADMIT_FROM_WAITINGROOM;case 1008:return d("MultiwayCommonTypes").MessageTag.REQUEST_CLIENT_FULL_RENEGOTIATION_AGAINST_MWS;case 1009:return d("MultiwayCommonTypes").MessageTag.PARTICIPANT_ADDED;case 1010:return d("MultiwayCommonTypes").MessageTag.PARTICIPANT_REMOVED;case 2001:return d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ALERTED_FOR_INITIATOR;case 2002:return d("MultiwayCommonTypes").MessageTag.FIRST_REMOTE_ANSWERED_FOR_INITIATOR;case 2003:return d("MultiwayCommonTypes").MessageTag.CONTAIN_PENDING_APPROVAL_PARTICIPANTS;case 3001:return d("MultiwayCommonTypes").MessageTag.KEEP_ALIVE_PING;case 4001:return d("MultiwayCommonTypes").MessageTag.IS_INITIATOR;case 4002:return d("MultiwayCommonTypes").MessageTag.PREGEN_SDP}}function b(a){var b=[];a==null?void 0:a.forEach(function(a){a&&b.push(h(a))});return b}g.toThriftMessageTag=a;g.fromThriftMessageTags=b}),98);
__d("ZenonParticipantState",["$InternalEnum","ZenonCallsModelTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({UNKNOWN:0,ADDING:1,CONTACTING:2,RINGING:3,ACCEPTING:4,PRECONNECTING:5,CONNECTING:6,CONNECTED:7,REMOVING:8,DISCONNECTED:9,NO_ANSWER:10,REJECTED:11,UNREACHABLE:12,CONNECTION_DROPPED:13,PARTICIPANT_LIMIT_REACHED:14,IN_ANOTHER_CALL:15,RING_TYPE_UNSUPPORTED:16,PENDING_APPROVAL:17,APPROVING:18,DENYING:19,APPROVED:20,FAILED_APPROVAL:21,HANGUP_IN_WAITING_ROOM:22,RECONNECTING:23});function a(a){if(a==null)return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected;switch(a){case h.CONTACTING:case h.PRECONNECTING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Contacting;case h.RINGING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Ringing;case h.CONNECTING:case h.RECONNECTING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Connecting;case h.CONNECTED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Connected;case h.PENDING_APPROVAL:case h.APPROVING:case h.DENYING:case h.ACCEPTING:case h.ADDING:case h.REMOVING:return d("ZenonCallsModelTypes").ZenonCallParticipantState.PendingApproval;case h.APPROVED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Approved;case h.FAILED_APPROVAL:return d("ZenonCallsModelTypes").ZenonCallParticipantState.FailedApproval;case h.HANGUP_IN_WAITING_ROOM:case h.UNKNOWN:case h.DISCONNECTED:case h.NO_ANSWER:case h.REJECTED:case h.UNREACHABLE:case h.CONNECTION_DROPPED:case h.PARTICIPANT_LIMIT_REACHED:case h.IN_ANOTHER_CALL:case h.RING_TYPE_UNSUPPORTED:return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}return d("ZenonCallsModelTypes").ZenonCallParticipantState.Disconnected}g.ZenonParticipantState=h;g.toCallParticipantState=a}),98);
__d("ZenonScreenShare",["UserAgent","ZenonAppProvider","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.length===1&&((a=a[0])==null?void 0:a.contentType)==="screen"}function h(){return!c("UserAgent").isBrowser("Safari")}function i(){return d("ZenonAppProvider").isOculusCastingSite()&&c("justknobx")._("1977")?!1:!0}function b(){return!h()||!i()}g.isScreenSharingTrack=a;g.screenShareWithReplaceTrack=b}),98);
__d("addDevTierOverridesToHeaderExtensions",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={multiwayCoreTier:"",multiwayWwwTier:""};if(!c("gkx")("25224"))return b;b.multiwayWwwTier=h(a,"multiway_www_tier");b.multiwayCoreTier=h(a,"multiway_core_tier");return b}function h(a,b){b=b+"=";a=a.split(b);return a[1]?a.pop().split("&").shift():""}g["default"]=a}),98);
__d("ZenonMWThriftTranslatorUtils",["MultiwayCommonTypes","MultiwaySharedTypes","OverlayConfigServerLayer","RequestStreamBodyUtils","WebrtcSignalingCommonTypes","ZenonDismissReason","ZenonMWMessageTypes","ZenonMWThriftMessageTagUtils","ZenonParticipantState","ZenonScreenShare","ZenonSignalingProtocol","ZenonSignalingTypes","addDevTierOverridesToHeaderExtensions","err","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k="signalingDominantSpeakerUpdate",l="signalingVideoUploadUpdate",m="E2eeState",n=new Map(Array.from(d("MultiwaySharedTypes").ConferenceType.members(),function(a){return[d("MultiwaySharedTypes").ConferenceType.getName(a),a]}));function a(a,b,d,e){d===void 0&&(d=!1),a&&Object.keys(a).forEach(function(f){if(f===m&&e&&c("justknobx")._("1893"))return;var g=a[f],h=g.data;g=g.version;if(h!=null){h={data:h,eventName:"stateSyncNotifyRequest",responseRequired:d,topic:f,version:g};b.push(h)}})}function b(a){if(a){a=a[m];return a==null?void 0:a.data}}function e(a){if(a==null)return d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN;switch(a){case d("MultiwaySharedTypes").MediaPath.SFU:return d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU;case d("MultiwaySharedTypes").MediaPath.P2P:return d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P;default:return d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN}}function f(a){if(a==null)return d("ZenonParticipantState").ZenonParticipantState.UNKNOWN;switch(a){case d("MultiwayCommonTypes").ParticipantCallState.DISCONNECTED:return d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED;case d("MultiwayCommonTypes").ParticipantCallState.NO_ANSWER:return d("ZenonParticipantState").ZenonParticipantState.NO_ANSWER;case d("MultiwayCommonTypes").ParticipantCallState.REJECTED:return d("ZenonParticipantState").ZenonParticipantState.REJECTED;case d("MultiwayCommonTypes").ParticipantCallState.UNREACHABLE:case d("MultiwayCommonTypes").ParticipantCallState.UNCALLABLE:return d("ZenonParticipantState").ZenonParticipantState.UNREACHABLE;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTION_DROPPED:return d("ZenonParticipantState").ZenonParticipantState.CONNECTION_DROPPED;case d("MultiwayCommonTypes").ParticipantCallState.CONTACTING:return d("ZenonParticipantState").ZenonParticipantState.CONTACTING;case d("MultiwayCommonTypes").ParticipantCallState.RINGING:return d("ZenonParticipantState").ZenonParticipantState.RINGING;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTING:return d("ZenonParticipantState").ZenonParticipantState.CONNECTING;case d("MultiwayCommonTypes").ParticipantCallState.CONNECTED:return d("ZenonParticipantState").ZenonParticipantState.CONNECTED;case d("MultiwayCommonTypes").ParticipantCallState.PARTICIPANT_LIMIT_REACHED:return d("ZenonParticipantState").ZenonParticipantState.PARTICIPANT_LIMIT_REACHED;case d("MultiwayCommonTypes").ParticipantCallState.IN_ANOTHER_CALL:return d("ZenonParticipantState").ZenonParticipantState.IN_ANOTHER_CALL;case d("MultiwayCommonTypes").ParticipantCallState.RING_TYPE_UNSUPPORTED:return d("ZenonParticipantState").ZenonParticipantState.RING_TYPE_UNSUPPORTED;case d("MultiwayCommonTypes").ParticipantCallState.PENDING_APPROVAL:return d("ZenonParticipantState").ZenonParticipantState.PENDING_APPROVAL;case d("MultiwayCommonTypes").ParticipantCallState.APPROVED:return d("ZenonParticipantState").ZenonParticipantState.APPROVED;case d("MultiwayCommonTypes").ParticipantCallState.FAILED_APPROVAL:return d("ZenonParticipantState").ZenonParticipantState.FAILED_APPROVAL;case d("MultiwayCommonTypes").ParticipantCallState.HANGUP_IN_WAITING_ROOM:return d("ZenonParticipantState").ZenonParticipantState.HANGUP_IN_WAITING_ROOM;default:return d("ZenonParticipantState").ZenonParticipantState.UNKNOWN}}function o(a){var b=null;a!=null&&a.forEach(function(a){a=(a=a.body)==null?void 0:a.genericMessage;if(a!=null&&a.topic==="collision_context_payload"){a=a.data;if(a!=null){var c;a=JSON.parse(d("RequestStreamBodyUtils").uint8ArrayToString(a));b={groupThreadID:(c=a.group_thread_id)!=null?c:null,peerID:(c=a.peer_id)!=null?c:null,serverInfoData:(c=a.server_info_data)!=null?c:null}}}});return b}function p(a){a=a&&a.length>0?a.find(function(a){return((a=a.body)==null?void 0:(a=a.genericMessage)==null?void 0:a.topic)==="room_metadata"}):null;if(a){var b;b=(b=a.body)==null?void 0:(b=b.genericMessage)==null?void 0:b.data;if(b!=null){b=JSON.parse(d("RequestStreamBodyUtils").uint8ArrayToString(b));a=(a=a.header)==null?void 0:a.sender;if(b.link_hash!=null&&b.room_name!=null&&a!=null)return{linkHash:b.link_hash,profileURL:b.profile_url,ringSubtitle:b.ring_subtitle,roomName:b.room_name,sender:a}}}return null}function q(a){return a.reduce(function(a,b){var c;c=(c=b.body)==null?void 0:(c=c.genericMessage)==null?void 0:c.topic;b=(b=b.body)==null?void 0:(b=b.genericMessage)==null?void 0:b.data;c!=null&&b!=null&&(a[c]=d("RequestStreamBodyUtils").uint8ArrayToString(b));return a},{})}function r(a){switch(a){case d("ZenonMWMessageTypes").ZenonMWMediaPath.SFU:return d("MultiwaySharedTypes").MediaPath.SFU;case d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P:return d("MultiwaySharedTypes").MediaPath.P2P;default:return d("MultiwaySharedTypes").MediaPath.UNKNOWN}}function s(a,b,c){c===void 0&&(c=0);var d={fromVersion:b,tracks:[],version:c};a!=null&&Object.keys(a.tracks).forEach(function(b){var c,e=a.tracks[b];c={enabled:e.enabled,name:(c=e.name)!=null?c:"",participantID:(c=e.owner)!=null?c:"0",trackID:b,type:t(e.label)};d.tracks.push(c)});return d}function t(a){if(a==null)return null;switch(a){case d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO:return"audio";case d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO:return"video";case d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO:return"screen_audio";case d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO:return"screen";default:return null}}function u(a,b){b=c("OverlayConfigServerLayer").createFromHeader(b);if(b){b={eventName:"overlayConfigServerUpdateRequest",serverLayer:b};a.push(b)}}function v(a){var b=a.header,c=a.rtcMessageBody;a=a.type;b=A(b,a);a={messageBody:c,messageHeader:b};return a}function w(a){var b=a.header,c=a.rtcMessageBody,d=a.statusCode,e=a.subCode;a=a.type;b=H(b,a,d,e);a={messageBody:c,messageHeader:b};return a}var x={IN_ANOTHER_CALL:(i=d("MultiwayCommonTypes")).DeviceStatus.IN_ANOTHER_CALL,NO_OP:null,NOT_SUPPORTED:i.DeviceStatus.NOT_SUPPORTED,OK:i.DeviceStatus.OK};function y(a,b){return Object.keys(a).map(function(c){var e=a[c];return{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(e),topic:c}},header:{recipients:new Set(b),topic_DEPRECATED:c}}})}function z(a){var b=a.clientSessionId,e=a.conferenceName,f=a.receiver,g=a.receiverUserId,h=a.sequenceNumber,i=a.serverInfoData,j=a.transactionId;if(g==null)throw c("err")("Incoming Thrift MW messages should have receiverUserId populated.");b=b;var k={userID:"2"};j={actorID:(f=f==null?void 0:f.actorId)!=null?f:null,messageID:j,messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(a.messageTags),protocol:c("ZenonSignalingProtocol").MW,remoteInfo:k,retryCount:a.retryCount,roomInfo:{name:e},sequenceNumber:Number(h),signalingID:b,userInfo:{userID:(f=g)!=null?f:"1"}};i!=null&&(j.remoteSignalingID=i);return j}function A(a,b){var e,f=a.messageID,g=a.messageTags,h=a.remoteSignalingID,i=a.roomInfo,j=a.signalingID,k=c("addDevTierOverridesToHeaderExtensions")(window.location.href);e={clientStack:d("WebrtcSignalingCommonTypes").ClientStack.ZENON,conferenceName:(e=i.name)!=null?e:"",conferenceType:I((e=i.name)!=null?e:""),messageTags:new Set(g==null?void 0:g.map(function(a){return d("ZenonMWThriftMessageTagUtils").toThriftMessageTag(a)})),retryCount:a.retryCount,sequenceNumber:(i=a.sequenceNumber)==null?void 0:i.toString(),transactionId:f,type:b};(k.multiwayCoreTier!==""||k.multiwayWwwTier!=="")&&(e.extensions=k);j!=null&&(e.clientSessionId=j);h!=null&&(e.serverInfoData=h);a.actorID!=null&&(e.sender={id:a.actorID});return e}function B(a){switch(a){case d("ZenonDismissReason").ZenonDismissReason.IgnoreCall:return d("MultiwayCommonTypes").HangupReason.IGNORE_CALL;case d("ZenonDismissReason").ZenonDismissReason.HangupCall:return d("MultiwayCommonTypes").HangupReason.HANGUP_CALL;case d("ZenonDismissReason").ZenonDismissReason.NoAnswerTimeout:return d("MultiwayCommonTypes").HangupReason.NO_ANSWER_TIMEOUT;case d("ZenonDismissReason").ZenonDismissReason.ClientError:return d("MultiwayCommonTypes").HangupReason.CLIENT_ERROR;case d("ZenonDismissReason").ZenonDismissReason.InAnotherCall:return d("MultiwayCommonTypes").HangupReason.IN_ANOTHER_CALL;case d("ZenonDismissReason").ZenonDismissReason.ClientInterrupted:return d("MultiwayCommonTypes").HangupReason.CLIENT_INTERRUPTED;case d("ZenonDismissReason").ZenonDismissReason.SessionMigrated:return d("MultiwayCommonTypes").HangupReason.SESSION_MIGRATED;default:return d("MultiwayCommonTypes").HangupReason.HANGUP_CALL}}function C(a){a=(a=a.message.body)!=null?a:{};var b=a.dominantSpeakerSignalingInfo,c=a.genericMessage;a=a.videoUploadSignalingInfo;if(c)return d("RequestStreamBodyUtils").uint8ArrayToString(c.data);else if(b)return JSON.stringify(b);else if(a)return JSON.stringify(a);return null}function D(a){a=(a=a.message.body)!=null?a:{};var b=a.dominantSpeakerSignalingInfo,c=a.genericMessage;a=a.videoUploadSignalingInfo;if(c)return c.topic;else if(b)return k;else if(a)return l;return null}function E(a){if(a==null)return null;if(a===1)return d("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE;else return d("MultiwaySharedTypes").EndpointServiceType.UNKNOWN}function F(a){a=G(a);return(a=a)!=null?a:d("ZenonDismissReason").ZenonDismissReason.CallEnded}function G(a){if(a==null)return null;switch(a){case d("MultiwayCommonTypes").DismissReason.CALL_ENDED:return d("ZenonDismissReason").ZenonDismissReason.CallEnded;case d("MultiwayCommonTypes").DismissReason.ANSWERED_ON_ANOTHER_DEVICE:return d("ZenonDismissReason").ZenonDismissReason.AnsweredOnAnotherDevice;case d("MultiwayCommonTypes").DismissReason.ANSWERED_BY_OTHER_USER:return d("ZenonDismissReason").ZenonDismissReason.AnsweredByOtherUser;case d("MultiwayCommonTypes").DismissReason.IN_ANOTHER_CALL:return d("ZenonDismissReason").ZenonDismissReason.InAnotherCall;case d("MultiwayCommonTypes").DismissReason.CONNECTION_DROPPED:return d("ZenonDismissReason").ZenonDismissReason.ConnectionDropped;case d("MultiwayCommonTypes").DismissReason.PRIMARY_ENDPOINT_HANGUP:return d("ZenonDismissReason").ZenonDismissReason.HangupCall;case d("MultiwayCommonTypes").DismissReason.REJECTED_ON_ANOTHER_DEVICE:return d("ZenonDismissReason").ZenonDismissReason.RejectedOnAnotherDevice;case d("MultiwayCommonTypes").DismissReason.REMOVED_BY_PARTICIPANT:return d("ZenonDismissReason").ZenonDismissReason.RemovedByParticipant;case d("MultiwayCommonTypes").DismissReason.REJECTED_BY_CALLEE:return d("ZenonDismissReason").ZenonDismissReason.RejectedByCallee;case d("MultiwayCommonTypes").DismissReason.INTERNAL_ERROR:return d("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case d("MultiwayCommonTypes").DismissReason.CALL_ENDED_BY_PRODUCT:return d("ZenonDismissReason").ZenonDismissReason.CallEndedByProduct;case d("MultiwayCommonTypes").DismissReason.TX_ACK_TIMEDOUT:return d("ZenonDismissReason").ZenonDismissReason.TxAckTimeout;default:return null}}function H(a,b,c,e){a=A(a,b);a.responseStatusCode=(b=c)!=null?b:d("MultiwayCommonTypes").RtcResponseStatusCode.OK;a.responseSubCode=e;return a}function I(a){if(c("justknobx")._("3404"))return null;var b=a.indexOf(":");if(b===-1)return null;a=a.slice(0,b);return(b=n.get(a))!=null?b:null}function J(a){var b={},c=!d("ZenonScreenShare").screenShareWithReplaceTrack();a.tracks.forEach(function(a){var e={customAudioContentType:d("WebrtcSignalingCommonTypes").CustomAudioContentType.NONE,customVideoContentType:d("WebrtcSignalingCommonTypes").CustomVideoContentType.NONE,enabled:a.enabled},f=c?P(a.type):null;f!=null&&(e.label=f);b[a.trackID]=e});return{tracks:b}}function K(a){a=x[a];return(a=a)!=null?a:d("MultiwayCommonTypes").DeviceStatus.OK}function L(a){var b={};a.tracks.forEach(function(a){b[a.trackID]=a.enabled});return b}function M(a){return R[a]}function N(a){return a==null?null:S[a]}function O(a){var b={};a.forEach(function(a,c){b[c]={data:a.data,version:a.version}});return b}function P(a){switch(a){case"audio":return d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_AUDIO;case"video":return d("WebrtcSignalingCommonTypes").TrackLabel.DEFAULT_VIDEO;case"screen":return d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_VIDEO;case"screen_audio":return d("WebrtcSignalingCommonTypes").TrackLabel.SCREEN_AUDIO;default:return null}}function Q(a){if(a===d("MultiwaySharedTypes").EndpointServiceType.COMPOSITING_SERVICE)return 1;else return 0}var R=Object.freeze((h={},h[(j=d("ZenonSignalingTypes")).ZenonSignalingStatusCode.OK]=i.RtcResponseStatusCode.OK,h[j.ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH]=i.RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED,h[j.ZenonSignalingStatusCode.METHOD_NOT_ALLOWED]=i.RtcResponseStatusCode.METHOD_NOT_ALLOWED,h)),S=Object.freeze((h={},h[j.ZenonSignalingStatusSubCode.CLIENT_TERMINATED]=i.RtcResponseSubCode.CLIENT_TERMINATED,h));g.addThriftStateStoreSignalingEvents=a;g.fetchE2eeServerState=b;g.fromThriftMediaPath=e;g.fromThriftParticipantState=f;g.getCollisionContextFromThriftAppMessages=o;g.getRoomMetadataFromThriftAppMessages=p;g.mwThriftAppMessagesToSignalingAppMessages=q;g.toThriftMediaPath=r;g.toZenonMediaStatesFromThrift=s;g.toMWClientTrackContentTypeFromThrift=t;g.maybeAddOverlayConfigServerUpdateRequestFromThrift=u;g.createMWThriftRequest=v;g.createMWThriftResponse=w;g.signalingMessageAppMessagesToThriftMWAppMessages=y;g.mwThriftMessageHeaderToSignalingMessageHeader=z;g.toMWThriftHangupReason=B;g.getGenericMWThriftDataMessageData=C;g.getGenericMWThriftDataMessageTopic=D;g.toThriftServiceRecipient=E;g.fromMWThriftDismissReason=F;g.getConferenceTypeFromName=I;g.toThriftMWMediaStatusEx=J;g.toMWThriftDeviceStatus=K;g.toMWThriftMediaStatus=L;g.toMWThriftResponseStatusCode=M;g.toMWThriftResponseStatusSubCode=N;g.toThriftMWSyncStateStore=O;g.toMWThriftTrackLabel=P;g.toServiceRecipientType=Q}),98);
__d("ZenonMWThriftAddParticipantsTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h="new_room_context";function a(a,b){var c={usersToInvite:new Set(b.participants)};if(b.groupThreadId!=null){b={calling_tags:2,group_thread_id:b.groupThreadId};if(b){b=[{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(JSON.stringify(b)),topic:h}},header:{topic_DEPRECATED:h}}];c.appMessages=b}}return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{addParticipantsRequest:c},type:d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS})}g.NEW_ROOM_CONTEXT=h;g.toThriftAddParticipantsRequest=a}),98);
__d("ZenonMWThriftApprovalTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=b.approvalStatus;b=b.targetUsers;c={approvalStatus:c===0?d("MultiwayCommonTypes").ApprovalStatus.DENIED:d("MultiwayCommonTypes").ApprovalStatus.APPROVED,targetUsers:new Set(b)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{approvalRequest:c},type:d("MultiwayCommonTypes").MessageType.APPROVAL})}g.toThriftApprovalRequest=a}),98);
__d("ZenonMWThriftClientEventTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={clientEvents:[{type:b.clientEventType===0?d("MultiwayCommonTypes").ClientEventType.UNKNOWN:d("MultiwayCommonTypes").ClientEventType.MEDIA_CONNECTED}]};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{clientEventRequest:b},type:d("MultiwayCommonTypes").MessageType.CLIENT_EVENT})}g.toThriftClientEventRequest=a}),98);
__d("ZenonMWThriftResponseStatusCodeUtils",["MultiwayCommonTypes","ZenonMWMessageTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("MultiwayCommonTypes").RtcResponseStatusCode.OK:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK;case d("MultiwayCommonTypes").RtcResponseStatusCode.BAD_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.BAD_REQUEST;case d("MultiwayCommonTypes").RtcResponseStatusCode.UNAUTHORIZED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.UNAUTHORIZED;case d("MultiwayCommonTypes").RtcResponseStatusCode.NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseStatusCode.METHOD_NOT_ALLOWED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.METHOD_NOT_ALLOWED;case d("MultiwayCommonTypes").RtcResponseStatusCode.CONFLICT:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONFLICT;case d("MultiwayCommonTypes").RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONDITIONAL_REQUEST_FAILED;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVER_INTERNAL_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVER_INTERNAL_ERROR;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVICE_UNAVAILABLE:return d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVICE_UNAVAILABLE}}function b(a){switch(a){case d("MultiwayCommonTypes").RtcResponseSubCode.UNKNOWN:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNKNOWN;case d("MultiwayCommonTypes").RtcResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS;case d("MultiwayCommonTypes").RtcResponseSubCode.MEMBERSHIP_CHECK_FAIL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEMBERSHIP_CHECK_FAIL;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_THROTTLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_THROTTLED;case d("MultiwayCommonTypes").RtcResponseSubCode.ENDPOINT_THROTTLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.ENDPOINT_THROTTLED;case d("MultiwayCommonTypes").RtcResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MWS_MESSAGE_SENT_TO_INCORRECT_REGION;case d("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_REQUEST_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_REQUEST_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_REQUEST_UNACCEPTABLE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_RESPONSE_UNACCEPTABLE;case d("MultiwayCommonTypes").RtcResponseSubCode.RING_RESPONSE_BODY_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RING_RESPONSE_BODY_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_MEDIA_UPDATE_RESPONSE_BODY_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_NAME:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_NAME;case d("MultiwayCommonTypes").RtcResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SERVER_INFO_CONFERENCE_NAME_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_VERSION_RANGE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_VERSION_RANGE;case d("MultiwayCommonTypes").RtcResponseSubCode.SENDER_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SENDER_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.RECIPIENT_NOT_SPECIFIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RECIPIENT_NOT_SPECIFIED;case d("MultiwayCommonTypes").RtcResponseSubCode.FIELD_NOT_ALLOWED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FIELD_NOT_ALLOWED;case d("MultiwayCommonTypes").RtcResponseSubCode.USERS_NOT_SPECIFIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.USERS_NOT_SPECIFIED;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_UNACCEPTABLE_FOR_ENDPOINT_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CALL_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CALL_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SESSION_DESCRIPTION_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_CLIENT_MEDIA_UPDATES;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SERVER_INFO_DATA:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SERVER_INFO_DATA;case d("MultiwayCommonTypes").RtcResponseSubCode.INCORRECT_STATE_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INCORRECT_STATE_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.MISMATCHED_STATE_FOR_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISMATCHED_STATE_FOR_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_STATE_VERSION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_STATE_VERSION;case d("MultiwayCommonTypes").RtcResponseSubCode.NO_RESOLVER_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NO_RESOLVER_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_APPROVERLIST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_APPROVERLIST;case d("MultiwayCommonTypes").RtcResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FULL_SDP_REQUIRED_IN_APPROVED_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_BROADCAST_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_BROADCAST_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_ENDPOINT_CONFIG:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_ENDPOINT_CONFIG;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_E2EE_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_E2EE_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.SFU_MODE_PREVENTED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SFU_MODE_PREVENTED;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_CONFERENCE_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_CONFERENCE_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.JOIN_REQUEST_DENIED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.JOIN_REQUEST_DENIED;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ENDPOINT:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ENDPOINT;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HEADER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HEADER;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_BODY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_BODY;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_PARAMS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_PARAMS;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_REMOVE_PARTICIPANTS_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_DATA_MESSAGE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_MEDIA_UPDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ADD_PARTICIPANTS_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_SUBSCRIPTION_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_JOIN_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_JOIN_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_HANGUP_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_HANGUP_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_ICE_CANDIDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_P2P_MESSAGE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UPDATE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UPDATE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CLIENT_EVENT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_CONNECT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_CONNECT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_UNSUBSCRIBE_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_APPROVAL_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_APPROVAL_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ENDPOINT_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ENDPOINT_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_ENDPOINT_USER_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_ENDPOINT_USER_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_TRANSFER_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_TRANSFER_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_BODY_GENERIC:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_BODY_GENERIC;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUESTOR_NOT_MEMBER_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.NOT_BROADCAST_OWNER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NOT_BROADCAST_OWNER;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_NOT_INVITED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_NOT_INVITED;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_DISCONNECTED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_DISCONNECTED;case d("MultiwayCommonTypes").RtcResponseSubCode.GUEST_INVITATION_EXPIRED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.GUEST_INVITATION_EXPIRED;case d("MultiwayCommonTypes").RtcResponseSubCode.SHOULD_USE_NEW_SIGNALING_PATH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SHOULD_USE_NEW_SIGNALING_PATH;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_IN_PENDING_APPROVAL_STATE;case d("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ALREADY_STOPPED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ALREADY_STOPPED;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GENERATE_SDP_ANSWER;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_GENERATE_SESSION_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_SESSION_ID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_SESSION_ID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_ALREADY_EXISTS;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_ENDPOINT_EXISTS_DIFFERENT_SESSION_ID;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_MESSENGER_SENDER_UNSET;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_SET_TRANSPORT_INFO;case d("MultiwayCommonTypes").RtcResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NON_PRIMARY_MULTIWAY_SERVER;case d("MultiwayCommonTypes").RtcResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.FAILED_TO_GET_REMOTE_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.LOCAL_DESCRIPTION_NOT_SET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LOCAL_DESCRIPTION_NOT_SET;case d("MultiwayCommonTypes").RtcResponseSubCode.INVALID_SDP_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INVALID_SDP_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_MEDIA_UPDATE_WITHOUT_REMOTE_SDP_INFO;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_ANSWER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_ANSWER;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_ICE_CANDIDATE_PAYLOAD;case d("MultiwayCommonTypes").RtcResponseSubCode.P2P_PROTOCOL_UNSET:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_PROTOCOL_UNSET;case d("MultiwayCommonTypes").RtcResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CREATE_ACK_FOR_INVALID_MESSAGE_TYPE;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_CLIENT_CANNOT_JOIN_SFU_MODE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_IN_SFU_MODE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_DURING_P2P_TO_SFU_ESCALATION;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_JOINED_ENDPOINTS;case d("MultiwayCommonTypes").RtcResponseSubCode.RESOLVE_STATE_API_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLVE_STATE_API_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.EXTERNAL_RESOLUTION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXTERNAL_RESOLUTION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.INTERNAL_RESOLUTION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.INTERNAL_RESOLUTION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.RESOLUTION_DISABLED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.RESOLUTION_DISABLED;case d("MultiwayCommonTypes").RtcResponseSubCode.BROADCAST_ID_MISSING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.BROADCAST_ID_MISSING;case d("MultiwayCommonTypes").RtcResponseSubCode.SDP_UNSET_ON_P2P_OFFER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SDP_UNSET_ON_P2P_OFFER;case d("MultiwayCommonTypes").RtcResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.LEGACY_OFFER_MISSING_REQUIRED_VALUE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_STATE_SYNC_DESERIALIZATION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_UNSUPPORTED_FOR_PRECONNECTED_USERS;case d("MultiwayCommonTypes").RtcResponseSubCode.OTHER_USER_ANSWERED_THE_CALL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.OTHER_USER_ANSWERED_THE_CALL;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_DESERIALIZATION_ERROR;case d("MultiwayCommonTypes").RtcResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REMOTE_SDP_TRACKID_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.SIGNALING_MESSAGE_TO_CLIENT_DROPPED;case d("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.DATA_CHANNEL_ENDPOINT_ALREADY_EXISTS;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATING;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_IS_TERMINATED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_IS_TERMINATED;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_NAME_EMPTY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_NAME_EMPTY;case d("MultiwayCommonTypes").RtcResponseSubCode.NONCE_EMPTY:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_EMPTY;case d("MultiwayCommonTypes").RtcResponseSubCode.NONCE_MISMATCH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.NONCE_MISMATCH;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_HAS_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_HAS_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_HAS_GONE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_HAS_GONE;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_SERVER_NOT_FOUND:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_SERVER_NOT_FOUND;case d("MultiwayCommonTypes").RtcResponseSubCode.CLIENT_TERMINATED:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_TERMINATED;case d("MultiwayCommonTypes").RtcResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MEDIA_CODECS_UNSUPPORTED_BY_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFERENCE_INCAPABLE_RENEGOTIATION;case d("MultiwayCommonTypes").RtcResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_SUBSCRIBED_TO_TOPIC;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_ALREADY_IN_WAITING_ROOM;case d("MultiwayCommonTypes").RtcResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PARTICIPANT_NOT_IN_PENDING_APPROVAL;case d("MultiwayCommonTypes").RtcResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.USER_NOT_APPROVER_FOR_TARGET_USER;case d("MultiwayCommonTypes").RtcResponseSubCode.UNSUPPORTED_CAPABILITIES:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNSUPPORTED_CAPABILITIES;case d("MultiwayCommonTypes").RtcResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON;case d("MultiwayCommonTypes").RtcResponseSubCode.WWW_KILLSWITCHED_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.WWW_KILLSWITCHED_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_PATH:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_PATH;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_MEDIA_STATUS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_STATUS;case d("MultiwayCommonTypes").RtcResponseSubCode.CONFLICTING_SESSION_DESCRIPTION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_SESSION_DESCRIPTION;case d("MultiwayCommonTypes").RtcResponseSubCode.EMPTY_USER_IDS:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.EMPTY_USER_IDS;case d("MultiwayCommonTypes").RtcResponseSubCode.MISSING_SDP_CONNECT_REQUEST:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.MISSING_SDP_CONNECT_REQUEST;case d("MultiwayCommonTypes").RtcResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.P2P_CONNECT_UNSUPPORTED_AFTER_SFU_ESCALATION;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_CONFERENCE;case d("MultiwayCommonTypes").RtcResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONNECT_EXCEEDED_MAX_ALLOWED_ENDPOINTS_PER_USER;case d("MultiwayCommonTypes").RtcResponseSubCode.REQUEST_TIMEOUT:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REQUEST_TIMEOUT;case d("MultiwayCommonTypes").RtcResponseSubCode.OK:return d("ZenonMWMessageTypes").ZenonMWResponseSubCode.OK}}g.getResponseStatusCodeFromThrift=a;g.getResponseSubCodeFromThrift=b}),98);
__d("ZenonMWThriftClientMediaUpdateTranslator",["MultiwayCommonTypes","ZenonMWCommonUtils","ZenonMWThriftResponseStatusCodeUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=a.messageBody;a=a.messageHeader;c=c.clientMediaUpdateResponse;var e=a.responseStatusCode,f=a.responseSubCode,g=a.retryAfterMsec;if(c){var h=c.answer,i=c.mediaStatus,j=h!=null&&i!=null;d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(c.stateStore,b,!1,j);var k=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(c.stateStore);if(j){h=(j=h==null?void 0:h.sdpString)!=null?j:"";j=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(i);i={ackMessageId:a.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:!1,source:"clientMediaUpdate"};var l=c.renegotiationOffer,m=null;l!=null&&l.sdpString!=null&&(m={sdp:l.sdpString,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(l.sdpString)});l={e2eeServerState:k,eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(c.mediaPath),mediaStates:j,negotiateType:!1,renegotiationOffer:m,sdp:{sdp:h,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(h)},sdpOriginLocalId:c.sdpOriginLocalId,source:"clientMediaUpdateResponse"};b.push(i);b.push(l)}j={ackMessageId:a.transactionId,acknowledgedVersion:Number(c.currentVersion),eventName:"mediaUpdateResponse",retryAfter:(k=g)!=null?k:0};e!=null&&(j.responseStatusCode=d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e));f!=null&&(j.responseSubCode=d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(f));b.push(j)}return b}function b(a,b,c){b={fromVersion:String(b.version),mediaUpdates:[{mediaStatus:d("ZenonMWThriftTranslatorUtils").toMWThriftMediaStatus(b),mediaStatusEx:d("ZenonMWThriftTranslatorUtils").toThriftMWMediaStatusEx(b)}],toVersion:String(b.version)};c!==void 0&&(b.offer={sdpString:c.sdp});return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{clientMediaUpdateRequest:b},type:d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE})}g.fromThriftClientMediaUpdateResponse=a;g.toThriftClientMediaUpdateRequest=b}),98);
__d("ZenonMWThriftConferenceStateTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonMWMessageTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],c=a.messageBody.conferenceStateRequest;if(c){var e=c.appMessages,f=c.participantStates,g={eventName:"participantUpdateRequest",participantStates:new Map(),sctpUserIdNodeIdMap:new Map(),versionId:+c.version},h={actorRepresentatives:new Map(),eventName:"clientInfoRequest",mediaPath:d("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN,userCapabilities:new Map()};Object.keys(f).forEach(function(a){var b=f[a],c=b.sctpNodeId,e=b.state;b=b.userCapabilities;g.participantStates.set(a,d("ZenonMWThriftTranslatorUtils").fromThriftParticipantState(e));c!=null&&g.sctpUserIdNodeIdMap.set(a,+c);h.userCapabilities.set(a,b?d("RequestStreamBodyUtils").uint8ArrayToString(b):"")});b.push(g);b.push(h);c=d("ZenonMWThriftTranslatorUtils").getCollisionContextFromThriftAppMessages(e);if(c){c.serverInfoData=a.messageHeader.serverInfoData;e={context:c,eventName:"roomContextUpdateRequest"};b.push(e)}}return b}function b(a,b){b={currentVersion:String(b.requestVersionId)};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{conferenceStateResponse:b},type:d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE})}g.fromThriftConferenceStateRequest=a;g.toThriftConferenceStateResponse=b}),98);
__d("ZenonMWThriftDataMessageTranslator",["MultiwayCommonTypes","RequestStreamBodyUtils","ZenonActorHooks","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.dataMessageRequest;if(a){var c=a.message.header,e=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageData(a);a=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageTopic(a);var f=h(c.serviceRecipients);if(e!=null&&a!=null){c={data:e,eventName:"genericDataMessageRequest",recipientIDs:Array.from((e=c.recipients)!=null?e:[]),serviceRecipients:f,topic:a};b.push(c)}}return b}function b(a,b){var c={data:d("RequestStreamBodyUtils").stringToUint8Array(b.data),topic:b.topic},e=new Set(b.serviceRecipients.map(d("ZenonMWThriftTranslatorUtils").toThriftServiceRecipient));return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{dataMessageRequest:{message:{body:{genericMessage:c},header:{recipients:new Set(b.recipientIDs),sender:d("ZenonActorHooks").ZenonActor.getID(),serviceRecipients:e,topic_DEPRECATED:""}}}},type:d("MultiwayCommonTypes").MessageType.DATA_MESSAGE})}function c(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{dataMessageResponse:{deliveryResult:{}}},type:d("MultiwayCommonTypes").MessageType.DATA_MESSAGE})}function h(a){var b=[];a==null?void 0:a.forEach(function(a){return b.push(d("ZenonMWThriftTranslatorUtils").toServiceRecipientType(a))});return b}g.fromThriftDataMessageRequest=a;g.toThriftDataMessageRequest=b;g.toThriftDataMessageResponse=c}),98);
__d("ZenonMWThriftDismissTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.dismissRequest;if(a){var c=a.detailedReasonString;a=a.reason;a={eventName:"terminateRequest",fromJoinResponse:!1,reason:d("ZenonMWThriftTranslatorUtils").fromMWThriftDismissReason(a),shouldInformPeer:!0,subreason:c};b.push(a)}return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.DISMISS})}g.fromThriftDismissRequest=a;g.toThriftDismissResponse=b}),98);
__d("ZenonMWThriftHangupTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"hangupResponse"};b.push(a);return b}function b(a,b){b=b.reason;b={detailedReasonString:"",reason:d("ZenonMWThriftTranslatorUtils").toMWThriftHangupReason(b)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{hangupRequest:b},type:d("MultiwayCommonTypes").MessageType.HANGUP})}g.fromThriftHangupResponse=a;g.toThriftHangupRequest=b}),98);
__d("ZenonMWThriftIceCandidateTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageBody.iceCandidateRequest;if(a){a={eventName:"iceCandidateRequest",iceCandidates:a.iceCandidateSdps.map(function(a){var b;return{candidateSdpString:(b=a.candidateSdpString)!=null?b:"",sdpMid:a.sdpMid,sdpMLineIndex:parseInt(a.sdpMLineIndex,10)}})};b.push(a)}return b}function b(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"iceCandidateResponse"};b.push(a);return b}function c(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE})}function e(a,b){b=b.iceCandidates;b=b.map(function(a){return{candidateSdpString:a.candidateSdpString,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex.toString()}});b={iceCandidateSdps:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{iceCandidateRequest:b},type:d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE})}g.fromThriftIceCandidateRequest=a;g.fromThriftIceCandidateResponse=b;g.toThriftIceCandidateResponse=c;g.toThriftIceCandidateRequest=e}),98);
__d("ZenonMWThriftJoinTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","RequestStreamBodyUtils","RoboticsPermission","ZenonAuditedCheckpointLogId","ZenonDismissReason","ZenonInfraActionsLogger","ZenonJoiningContext","ZenonMWCommonUtils","ZenonMWJoinUtils","ZenonMWThriftTranslatorUtils","ZenonScreenShare","gkx","justknobx","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],e=a.messageHeader,f=e.responseStatusCode,g=e.responseSubCode;if(f&&f!==d("MultiwayCommonTypes").RtcResponseStatusCode.OK){var i;g="JOIN response status code: "+String(f)+" subcode "+String((g=g)!=null?g:"[undefined]");c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",checkpoint:"[ZP] Got non-OK "+g,errorDomain:"ZenonMWThriftMessageTranslator.fromThriftJoinResponse"});i={detailedReasonFromMW:(i=e.responseStatusMessage)!=null?i:"",eventName:"terminateRequest",fromJoinResponse:!0,reason:h(f,e.responseSubCode),shouldInformPeer:!1,subreason:g};b.push(i);return b}f=a.messageBody.joinResponse;if(!f)return b;a=(i=(g=f.answer)==null?void 0:g.sdpString)!=null?i:"";g=a!=="";d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(f.stateStore,b,!1,g);d("ZenonMWThriftTranslatorUtils").maybeAddOverlayConfigServerUpdateRequestFromThrift(b,e);i=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(f.stateStore);e={ackMessageId:e.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:g,source:"joinResponse"};b.push(e);if(g){e={sdp:a,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(a)};g=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(f.mediaStatusEx);a=f.renegotiationOffer;var j=null;a!=null&&a.sdpString!=null&&(j={sdp:a.sdpString,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(a.sdpString)});a={e2eeServerState:i,eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(f.mediaPath),mediaStates:g,negotiateType:!1,renegotiationOffer:j,sdp:e,sdpOriginLocalId:f.sdpOriginLocalId,source:"joinResponse"};b.push(a)}i={capabilities:{addParticipantEnabled:!0,cowatchEnabled:!0,cowatchGroupEnabled:!0,multipleVideoStreamsAllowed:f.multipleVideoStreamsAllowed},eventName:"capabilitiesRequest"};b.push(i);if(f.isPendingApproval){g={eventName:"pendingApprovalRequest"};b.push(g)}j=f.groupsOfUsers;var k=new Map();j.forEach(function(a){var b=a.aliasId;a=a.users;b!=null&&a.forEach(function(a){k.set(a,b)})});e={actorRepresentatives:k,eventName:"clientInfoRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(f.mediaPath),userCapabilities:new Map()};b.push(e);return b}function b(a,b,e,f){var g=b.initialSyncStates,h=b.isSecondaryJoinRole,j=b.userCapabilities;j={clientMediaMode:e.mediaMode==="p2p"?d("MultiwaySharedTypes").MediaPath.P2P:d("MultiwaySharedTypes").MediaPath.SFU,deviceCapabilities:new Set([d("MultiwayCommonTypes").Capability.SUPPORT_NEW_PARTICIPANT_STATES,d("MultiwayCommonTypes").Capability.REQUIRE_FULL_SDP_IN_SMU,d("MultiwayCommonTypes").Capability.SUPPORT_SDP_RENEGOTIATION,d("MultiwayCommonTypes").Capability.REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED].concat(c("justknobx")._("1853")?[d("MultiwayCommonTypes").Capability.SUPPORT_DELTA_SMU]:[],c("gkx")("25225")?[d("MultiwayCommonTypes").Capability.SUPPORT_PRECONNECT]:[])),mediaStatus:d("ZenonMWThriftTranslatorUtils").toMWThriftMediaStatus(e.mediaStates),mediaStatusEx:d("ZenonMWThriftTranslatorUtils").toThriftMWMediaStatusEx(e.mediaStates),offer:{},syncPayload:g?{stateStore:d("ZenonMWThriftTranslatorUtils").toThriftMWSyncStateStore(g),stateStoreV2:{}}:void 0,userCapabilities:d("RequestStreamBodyUtils").stringToUint8Array((g=j.get(a.userInfo.userID))!=null?g:"")};h!=null&&(j.endpointSettings={joinMode:h?d("MultiwayCommonTypes").JoinMode.SECONDARY:d("MultiwayCommonTypes").JoinMode.PRIMARY});g=b.isE2eeMandated===!0;j.e2eeEnforcement={infraMandatedExpStatus:b.e2eeInfraMandatedExpStatus,mode:g?d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED:d("MultiwaySharedTypes").E2eeMode.E2EE_NOT_MANDATED,preventSfuMode:!1};e.sdp.type==="offer"&&(j.offer={sdpString:e.sdp.sdp});d("ZenonMWJoinUtils").canUseMwpp(e.sdp.type)&&(j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MWPP),e.sdp.type==="answer"&&(j.answer={sdpString:e.sdp.sdp}),d("ZenonMWJoinUtils").canDeescalate()&&j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MWPP_DEESCALATION));(!d("ZenonScreenShare").screenShareWithReplaceTrack()||c("RoboticsPermission").is_authorized_robot)&&j.deviceCapabilities.add(d("MultiwayCommonTypes").Capability.SUPPORT_MULTIPLE_VIDEO_STREAMS);h=f==null?void 0:f.otherParticipants;h&&(j.usersToCall=new Set(h));b=[];e=(e=f==null?void 0:f.roomInfo.context)!=null?e:a.roomInfo.context;if(e!=null){var k=d("ZenonJoiningContext").convertCollisionToJoiningContext(e);g&&(k.calling_tags=2);b=[].concat(b,[{body:{genericMessage:{data:d("RequestStreamBodyUtils").stringToUint8Array(JSON.stringify(k)),topic:d("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}},header:{topic_DEPRECATED:d("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}}])}(f==null?void 0:f.appMessages)!=null&&(b=[].concat(b,d("ZenonMWThriftTranslatorUtils").signalingMessageAppMessagesToThriftMWAppMessages(f.appMessages,h)));j.appMessages=b;g=d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{joinRequest:j},type:d("MultiwayCommonTypes").MessageType.JOIN});e&&e.serverInfoData!=null&&(g.messageHeader.serverInfoData=e.serverInfoData);i(e,g.messageHeader)&&(g.messageHeader.conferenceType=d("MultiwaySharedTypes").ConferenceType.ROOM);return g}function h(a,b){if(b===d("MultiwayCommonTypes").RtcResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS)return d("ZenonDismissReason").ZenonDismissReason.MaxAllowedParticipantsReached;if(b===d("MultiwayCommonTypes").RtcResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON)return d("ZenonDismissReason").ZenonDismissReason.ProductServerDefinedEndReason;switch(a){case d("MultiwayCommonTypes").RtcResponseStatusCode.METHOD_NOT_ALLOWED:case d("MultiwayCommonTypes").RtcResponseStatusCode.UNAUTHORIZED:return d("ZenonDismissReason").ZenonDismissReason.NoPermission;case d("MultiwayCommonTypes").RtcResponseStatusCode.SERVICE_UNAVAILABLE:return d("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case d("MultiwayCommonTypes").RtcResponseStatusCode.OK:throw c("unrecoverableViolation")("Response status code is OK; should not return a dismiss reason","rtc_www");default:c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",error:"[ZP] Got unexpected JOIN response status: "+String(a)+" subcode "+String((a=b)!=null?a:"[undefined]"),errorDomain:"fromMWThriftJoinResponseStatusToDismissReason"});return d("ZenonDismissReason").ZenonDismissReason.UnexpectedEndOfCall}}function i(a,b){return((a==null?void 0:a.peerID)!=null||(a==null?void 0:a.groupThreadID)!=null)&&b.conferenceName===""}g.fromThriftJoinResponse=a;g.toThriftJoinRequest=b}),98);
__d("ZenonMWThriftMessageMap",["MultiwayCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return"UNKNOWN";switch(a){case d("MultiwayCommonTypes").MessageType.JOIN:return"JOIN";case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return"ICE_CANDIDATE";case d("MultiwayCommonTypes").MessageType.HANGUP:return"HANGUP";case d("MultiwayCommonTypes").MessageType.RING:return"RING";case d("MultiwayCommonTypes").MessageType.DISMISS:return"DISMISS";case d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE:return"CONFERENCE_STATE";case d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case d("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return"SUBSCRIPTION";case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:return"DATA_MESSAGE";case d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case d("MultiwayCommonTypes").MessageType.PING:return"PING";case d("MultiwayCommonTypes").MessageType.NOTIFY:return"NOTIFY";case d("MultiwayCommonTypes").MessageType.CONNECT:return"CONNECT";case d("MultiwayCommonTypes").MessageType.CLIENT_EVENT:return"CLIENT_EVENT";case d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE:return"UNSUBSCRIBE";case d("MultiwayCommonTypes").MessageType.UPDATE:return"UPDATE";case d("MultiwayCommonTypes").MessageType.APPROVAL:return"APPROVAL";case d("MultiwayCommonTypes").MessageType.WAKEUP:return"WAKEUP";default:return"UNKNOWN"}}function b(a){switch(a.toLowerCase()){case"join":return d("MultiwayCommonTypes").MessageType.JOIN;case"server_media_update":return d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE;case"ice_candidate":return d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE;case"hangup":return d("MultiwayCommonTypes").MessageType.HANGUP;case"ring":return d("MultiwayCommonTypes").MessageType.RING;case"dismiss":return d("MultiwayCommonTypes").MessageType.DISMISS;case"conference_state":return d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE;case"add_participants":return d("MultiwayCommonTypes").MessageType.ADD_PARTICIPANTS;case"subscription":return d("MultiwayCommonTypes").MessageType.SUBSCRIPTION;case"client_media_update":return d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE;case"data_message":return d("MultiwayCommonTypes").MessageType.DATA_MESSAGE;case"remove_participants":return d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS;case"ping":return d("MultiwayCommonTypes").MessageType.PING;case"notify":return d("MultiwayCommonTypes").MessageType.NOTIFY;case"connect":return d("MultiwayCommonTypes").MessageType.CONNECT;case"client_event":return d("MultiwayCommonTypes").MessageType.CLIENT_EVENT;case"unsubscribe":return d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE;case"update":return d("MultiwayCommonTypes").MessageType.UPDATE;case"approval":return d("MultiwayCommonTypes").MessageType.APPROVAL;case"wakeup":return d("MultiwayCommonTypes").MessageType.WAKEUP;default:return null}}g.messageTypeToString=a;g.messageTypeFromString=b}),98);
__d("ZenonMWThriftMessageDebugLogger",["Log","LogHistory","MultiwayCommonTypes","ODS","RequestStreamBodyUtils","RpWebStateMachineLoggingBlocklist","ZenonAuditedCheckpointLogId","ZenonIceStatsParser","ZenonInfraActionsLogger","ZenonMWThriftMessageMap","ZenonMWThriftTranslatorUtils","formatDate","isEmployeeTestUserZenonLogging"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){this.$1=d("LogHistory").getInstance("webrtc"),this.$2=new Set(c("RpWebStateMachineLoggingBlocklist").MESSAGE_TYPES)}var b=a.prototype;b.$3=function(a,b,d){b===void 0&&(b=!0);var e=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+a);b&&c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] "+a,messageID:d})};b.$4=function(a){a=a.messageHeader.responseStatusCode;return a!=null};b.logMWThriftMessage=function(a,b,e){this.$5(a,b,e);if(!c("isEmployeeTestUserZenonLogging")())return;var f=e.messageHeader,g=d("ZenonMWThriftMessageMap").messageTypeToString(e.messageHeader.type),h=this.$4(e)?"RESPONSE":"REQUEST";e=this.$6(e);a="[ms] "+a+" ["+b+"] "+g+" "+h+" [retryCount: "+f.retryCount+(e!=null?" details: "+e:"")+"]";this.$2.has(g)||this.$3(a,!0,f.transactionId)};b.$5=function(a,b,c){a=this.$7(a,b,c);a!==null&&(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_signaling",a)};b.$7=function(a,b,c){var e=c.messageBody,f=c.messageHeader,g="";if(f.type!=null)switch(f.type){case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:if(e.dataMessageRequest){g=(e=d("ZenonMWThriftTranslatorUtils").getGenericMWThriftDataMessageTopic(e.dataMessageRequest))!=null?e:"undefined"}break;default:break}e=this.$4(c)?"RESPONSE":"REQUEST";c=d("ZenonMWThriftMessageMap").messageTypeToString(f.type);if(g==="")return a+"-"+b+"-"+c+"-"+e;else return a+"-"+b+"-"+c+"-"+e+"-"+g};b.$6=function(a){var b=a.messageHeader;if(d("MultiwayCommonTypes").MessageType==null||b.type==null)return null;switch(b.type){case d("MultiwayCommonTypes").MessageType.JOIN:return this.$8(a);case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:return this.$9(a);case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:return this.$10(a);case d("MultiwayCommonTypes").MessageType.SUBSCRIPTION:return this.$11(a);case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:return this.$12(a);default:return null}};b.$8=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({hasAnswer:((a=b.joinResponse)==null?void 0:a.answer)!=null,hasRenegotiationOffer:((a=b.joinResponse)==null?void 0:a.renegotiationOffer)!=null,isPendingApproval:(a=b.joinResponse)==null?void 0:a.isPendingApproval,multipleVideoStreamsAllowed:(a=b.joinResponse)==null?void 0:a.multipleVideoStreamsAllowed,statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({deviceCapabilities:(a=b.joinRequest)==null?void 0:a.deviceCapabilities,sdpType:((c=b.joinRequest)==null?void 0:c.offer)!=null?"offer":((a=b.joinRequest)==null?void 0:a.answer)!=null?"answer":"null",userCapabilities:((c=b.joinRequest)==null?void 0:c.userCapabilities)?d("RequestStreamBodyUtils").uint8ArrayToString(b.joinRequest.userCapabilities):""})};b.$9=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({currentVersion:(a=b.serverMediaUpdateResponse)==null?void 0:a.currentVersion,hasAnswer:((a=b.serverMediaUpdateResponse)==null?void 0:a.answer)!=null,statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({fromVersion:(a=b.serverMediaUpdateRequest)==null?void 0:a.fromVersion,messageTags:c.messageTags,renegotiationRequested:(c=(a=b.serverMediaUpdateRequest)==null?void 0:a.renegotiationRequested)!=null?c:!1,sdpType:((a=b.serverMediaUpdateRequest)==null?void 0:a.offer)?"offer":((c=b.serverMediaUpdateRequest)==null?void 0:c.answer)?"answer":((a=b.serverMediaUpdateRequest)==null?void 0:a.update)?"delta":"empty",toVersion:(a=(c=b.serverMediaUpdateRequest)==null?void 0:c.toVersion)!=null?a:""})};b.$10=function(a){var b=a.messageBody,c=a.messageHeader;if(this.$4(a)){return JSON.stringify({currentVersion:(a=(a=b.clientMediaUpdateResponse)==null?void 0:a.currentVersion)!=null?a:"",statusCode:c.responseStatusCode,subCode:c.responseSubCode})}return JSON.stringify({fromVersion:(c=(a=b.clientMediaUpdateRequest)==null?void 0:a.fromVersion)!=null?c:"",toVersion:(c=(a=b.clientMediaUpdateRequest)==null?void 0:a.toVersion)!=null?c:""})};b.$11=function(a){var b=a.messageBody;return this.$4(a)?null:JSON.stringify({subscriptions:(b=(a=b.subscriptionRequest)==null?void 0:a.subscriptions)!=null?b:""})};b.$12=function(a){var b=a.messageBody;if(this.$4(a))return null;b=(a=b.iceCandidateRequest)==null?void 0:a.iceCandidateSdps.map(function(a){a=a.candidateSdpString;if(a!=null)return d("ZenonIceStatsParser").extractIceInfo(a)});return JSON.stringify({iceCandidates:b})};b.logSendMultiwayThriftMessageFailure=function(a,b,e){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","send_message_failure");h.flush();e=e?"Stack Trace: "+e.stack+".":"Error msg: "+a;c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to send MW Thrift message of type "+b+". "+e})};return a}();b=new a();g["default"]=b}),98);
__d("ZenonMWThriftMessageLogger",["MultiwayCommonTypes","ZenonLoggingEventTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(),i=new Set();function a(a,b){var c=a.messageHeader;a=a.messageBody;if(h.has(c.transactionId)||c.type==null)return;switch(c.type){case d("MultiwayCommonTypes").MessageType.JOIN:a.joinRequest&&j(a.joinRequest,b);break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&l(a.iceCandidateRequest,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateRequest&&m(a.clientMediaUpdateRequest,b);break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateResponse&&p(a.serverMediaUpdateResponse,b);break;default:break}h.add(c.transactionId)}function b(a,b){var c=a.messageHeader;a=a.messageBody;if(i.has(c.transactionId)||c.type==null)return;switch(c.type){case d("MultiwayCommonTypes").MessageType.JOIN:a.joinResponse&&k(a.joinResponse,b);break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&l(a.iceCandidateRequest,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateResponse&&n(a.clientMediaUpdateResponse,b);break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateRequest&&o(a.serverMediaUpdateRequest,b);break;default:break}i.add(c.transactionId)}function j(a,b){var c=a.answer;a=a.offer;b({name:"inviteSent"});q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);c&&q(c,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function k(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function l(a,b,c){a=a.iceCandidateSdps;a.forEach(function(a){a.candidateSdpString!=null&&b({direction:c,name:"updateIceInfo",sdpString:a.candidateSdpString})})}function m(a,b){a=a.offer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function n(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function o(a,b){var c=a.answer;a=a.offer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);c&&q(c,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function p(a,b){a=a.answer;a&&q(a,b,d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function q(a,b,c){a.sdpString!=null&&b({direction:c,name:"updateIceInfo",sdpString:a.sdpString})}g.logSentMessage=a;g.logReceivedMessage=b}),98);
__d("ZenonMqttChannel",["CurrentUser","FBLogger","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=-1;try{var b;c("MqttEnvInitializer").initialize();d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);a=Number((b=c("CurrentUser").getAppID())!=null?b:c("MqttWebConfig").appID);return new(c("MqttChannel"))({appId:a,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!1,clientCapabilities:c("MqttWebConfig").clientCapabilities,endpoint:c("MqttWebConfig").endpoint,initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:c("MqttWebConfig").pollingEndpoint,userFbid:c("MqttWebConfig").fbid})}catch(b){c("FBLogger")("rtc_www").catching(b).warn("[ZenonMqttChannel][%d] failed to create MqttChannel",a);throw b}}b=a();e=b;g["default"]=e}),98);
__d("getZenonMqttChannel",["CurrentUser","FBMqttChannel","HorizonWebMqttChannel","IGDOverLSMqttChannel","OculusMqttChannel","RpWebMqttEnabledAppIds","ZenonAppProvider","ZenonMqttChannel"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(c("RpWebMqttEnabledAppIds").APP_IDS);function a(){if(d("ZenonAppProvider").isInstagramApp())return d("IGDOverLSMqttChannel").getInstance();else if(d("ZenonAppProvider").isOculusCastingSite())return d("OculusMqttChannel").getOculusMqttChannelInstance();else if(d("ZenonAppProvider").isHorizonApp())return d("HorizonWebMqttChannel").getHorizonWebMqttChannelInstance();else return h.has(Number(c("CurrentUser").getAppID()))?c("ZenonMqttChannel"):c("FBMqttChannel")}g["default"]=a}),98);
__d("ZenonMWThriftMessageQPLLogger",["DateConsts","QPLMsgTypesSitevarConfig","QPLUserFlow","ZenonLoggingUtils","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageTagUtils","ZenonMWThriftResponseStatusCodeUtils","getZenonMqttChannel","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=30*d("DateConsts").MS_PER_SEC,i=c("getZenonMqttChannel")(),j=new Map();function a(a,b,e){if(!d("ZenonLoggingUtils").shouldAllowLogging())return;var f=a.messageHeader,g=d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type).toLowerCase();if(!c("QPLMsgTypesSitevarConfig").QPL_MSG_TYPES.includes(g))return;f=k(f.transactionId);switch(b){case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:l(f,g,{connectionState:(b=e==null?void 0:e.connectionState)!=null?b:"",peerConnectionState:(b=e==null?void 0:e.peerConnectionState)!=null?b:"",signalingState:(b=e==null?void 0:e.signalingState)!=null?b:""},a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:m(f);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:n(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:o(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:p(f,a,e==null?void 0:e.errorMessage);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:q(f,g,{connectionState:(b=e==null?void 0:e.connectionState)!=null?b:"",peerConnectionState:(g=e==null?void 0:e.peerConnectionState)!=null?g:"",signalingState:(b=e==null?void 0:e.signalingState)!=null?b:""},a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST:r(f);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED:s(f,e==null?void 0:e.errorMessage);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:t(f,a);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT:u(f,e==null?void 0:e.smEvent);return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT:v(f,e==null?void 0:e.smEvent);return;default:return}}function b(a,b){if(!d("ZenonLoggingUtils").shouldAllowLogging())return;c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{string:babelHelpers["extends"]({},b)},{instanceKey:+a})}function k(a){a=isNaN(+a)?0:+a;var b=9223372036854776e3;return Math.round(a%b)}function l(a,b,e,f){c("QPLUserFlow").start(c("qpl")._(398988976,"737"),{annotations:{"int":{retryCount:f.messageHeader.retryCount},int_array:{messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(f.messageHeader.messageTags)},string:babelHelpers["extends"]({},e,{messageType:b,mqttState:i.getConnectionState()})},instanceKey:a,timeoutInMs:h});if(f.messageBody.serverMediaUpdateRequest){e=f.messageBody.serverMediaUpdateRequest;b=e.answer;f=e.offer;e=e.update;c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{string:{sdpType:f?"offer":b?"answer":e?"delta":"empty"}},{instanceKey:a})}f={onMQTTStateChanged:function(b){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"mqtt_"+b,{instanceKey:a})}};i.subscribeChannelEvents(f);j.set(a,f)}function m(a){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"processed_request",{instanceKey:a})}function n(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sending_response",{instanceKey:a});c("QPLUserFlow").addAnnotations(c("qpl")._(398988976,"737"),{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},{instanceKey:a})}function o(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endSuccess(c("qpl")._(398988976,"737"),{annotations:{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},instanceKey:a});e=j.get(a);e&&(i.unsubscribeChannelEvents(e),j["delete"](a))}function p(a,b,e){b=b.messageHeader;var f=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endFailure(c("qpl")._(398988976,"737"),"send_response_failed",{annotations:{"int":{responseStatusCode:f?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(f):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3},string:{errorMessage:e}},instanceKey:a});f=j.get(a);f&&(i.unsubscribeChannelEvents(f),j["delete"](a))}function q(a,b,e,f){c("QPLUserFlow").start(c("qpl")._(398988976,"737"),{annotations:{"int":{retryCount:f.messageHeader.retryCount},int_array:{messageTags:d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(f.messageHeader.messageTags)},string:babelHelpers["extends"]({},e,{messageType:b,mqttState:i.getConnectionState()})},instanceKey:a,timeoutInMs:h})}function r(a){c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sending_request",{instanceKey:a})}function s(a,b){c("QPLUserFlow").endFailure(c("qpl")._(398988976,"737"),"send_request_failed",{annotations:{string:{errorMessage:b}},instanceKey:a})}function t(a,b){b=b.messageHeader;var e=b.responseStatusCode;b=b.responseSubCode;c("QPLUserFlow").endSuccess(c("qpl")._(398988976,"737"),{annotations:{"int":{responseStatusCode:e?d("ZenonMWThriftResponseStatusCodeUtils").getResponseStatusCodeFromThrift(e):200,responseSubCode:b?d("ZenonMWThriftResponseStatusCodeUtils").getResponseSubCodeFromThrift(b):9e3}},instanceKey:a})}function u(a,b){b!=null&&c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"sent_sm_event:"+b,{instanceKey:a})}function v(a,b){b!=null&&c("QPLUserFlow").addPoint(c("qpl")._(398988976,"737"),"processed_sm_event:"+b,{instanceKey:a})}g.log=a;g.updateState=b}),98);
__d("ZenonMWThriftMessageReliabilityLogger",["ODS","ZenonArmadilloLoggingChecks","ZenonMWMessageReliabilityLogTypes","ZenonMWThriftMessageMap","ZenonMWThriftMessageQPLLogger","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=new Map(),k=new Map();function a(a){k.set(a,!0)}function b(a,b,c){a=j.get(a);if(!a)return;v(a,b,c)}function e(a){r(a)?v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE):v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST)}function f(a){r(a)?v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_RESPONSE):v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST)}function l(a){r(a)||v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK)}function m(a){r(a)||v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION)}function n(a){r(a)?v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_RESPONSE):v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST)}function o(a){r(a)?v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE):v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST)}function p(a){r(a)?v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE):v(a,d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST)}function q(a,b){var c=r(a)?d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED;v(a,c,{errorMessage:b})}function r(a){a=a.messageHeader.responseStatusCode;return a!=null}function s(a,b){var c=d("ZenonMWThriftMessageMap").messageTypeToString(a.messageHeader.type).toLowerCase();a=r(a)?"response":"request";switch(b){case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","receive_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","processing_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","processed_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","sending_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_translation_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_null_check_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:case d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway","sent_"+a+"_"+c);(h||(h=d("ODS"))).flush();return;default:return}}var t={connectionState:"",peerConnectionState:"",signalingState:""};function u(a){var b=babelHelpers["extends"]({},t,a);if(t.connectionState!==b.connectionState||t.peerConnectionState!==b.peerConnectionState||t.signalingState!==b.signalingState){t=b;for(var b=i.keys(),c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;d("ZenonMWThriftMessageQPLLogger").updateState(f,a)}}}function v(a,b,e){var f;if(c("justknobx")._("855"))return;var g=a.messageHeader;f=(f=i.get(g.transactionId))!=null?f:new Set();i.set(g.transactionId,f);if(b!==d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT&&b!==d("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT&&f.has(b))return;f.add(b);j.set(g.transactionId,a);s(a,b);f=(g=k.get((f=g.clientSessionId)!=null?f:""))!=null?g:!1;(!f||d("ZenonArmadilloLoggingChecks").isArmadilloQPLLoggingEnabled())&&d("ZenonMWThriftMessageQPLLogger").log(a,b,babelHelpers["extends"]({},e,t))}g.setE2eeIsMandatedForCall=a;g.logEventForTxid=b;g.logReceivedMessage=e;g.logProcessingMessage=f;g.logMessageAfterNullCheck=l;g.logMessageAfterTranslation=m;g.logProcessedMessage=n;g.logSendingMessage=o;g.logSentMessage=p;g.logSendMessageFailed=q;g.updateState=u}),98);
__d("ZenonMWThriftMessageSerializer",["CompactSerializer","MqttThriftHeaderSerializers","MultiwayCommonSerializers","TCompactProtocol","TReadBuffer"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);var c=d("CompactSerializer").serialize(a.messageHeader,d("MultiwayCommonSerializers").serializeRtcMessageHeader);a=d("CompactSerializer").serialize(a.messageBody,d("MultiwayCommonSerializers").serializeRtcMessageBody);if(b){b=new Uint8Array(c.length+a.length);b.set(c);b.set(a,c.length);return b}b={};b=d("CompactSerializer").serialize(b,d("MqttThriftHeaderSerializers").serializeMqttThriftHeader);var e=new Uint8Array(b.length+c.length+a.length);e.set(b);e.set(c,b.length);e.set(a,b.length+c.length);return e}function b(a,b){b===void 0&&(b=!1);a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);b||d("MqttThriftHeaderSerializers").deserializeMqttThriftHeader(a);b=d("MultiwayCommonSerializers").deserializeRtcMessageHeader(a);a=d("MultiwayCommonSerializers").deserializeRtcMessageBody(a);return{messageBody:a,messageHeader:b}}g.serializeMWThriftMessage=a;g.deserializeMWThriftMessage=b}),98);
__d("ZenonMWThriftPingTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"pingResponse"};b.push(a);return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.PING})}g.fromThriftPingResponse=a;g.toThriftPingRequest=b}),98);
__d("ZenonMWThriftRemoveParticipantsTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b={usersToRemove:new Set(b.participants)};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{removeParticipantsRequest:b},type:d("MultiwayCommonTypes").MessageType.REMOVE_PARTICIPANTS})}g.toThriftRemoveParticipantsRequest=a}),98);
__d("ZenonMWThriftRingTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","ZenonMWCommonUtils","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){if(b)return{groupThreadID:b.groupThreadId,peerID:b.peerId,serverInfoData:c};b=d("ZenonMWThriftTranslatorUtils").getCollisionContextFromThriftAppMessages(a);b&&(b.serverInfoData=c);return(a=b)!=null?a:{groupThreadID:null,peerID:null,serverInfoData:c}}function a(a,b){var c=[],e=a.messageBody;a=a.messageHeader;e=e.ringRequest;if(e){var f=e.appMessages,g=e.caller,i=e.e2eeEnforcement,j=e.otherParticipants,k=e.ringType,l=e.sdpOriginLocalId,m=e.threadIdInfo;g=g;k=k===d("MultiwayCommonTypes").RingType.PEER_VIDEO_CALL||k===d("MultiwayCommonTypes").RingType.GROUP_VIDEO_CALL||k===d("MultiwayCommonTypes").RingType.LIVE_STREAM||k===d("MultiwayCommonTypes").RingType.PEER_ESCALATED_AUDIO_CALL;var n=a.conferenceName;a=a.serverInfoData;m=h(f,m,a);var o=d("ZenonMWThriftTranslatorUtils").getRoomMetadataFromThriftAppMessages(f);g={actorID:b.actorID,e2eeInfraMandatedExpStatus:i==null?void 0:i.infraMandatedExpStatus,eventName:"inviteRequest",inviterID:g,isE2eeMandated:(i==null?void 0:i.mode)===d("MultiwaySharedTypes").E2eeMode.E2EE_MANDATED,isRemoteOfferer:!1,otherParticipants:Array.from(j),requestingVideo:k,roomInfo:babelHelpers["extends"]({context:m,name:n},o==null?{}:{room:o,sender:o.sender}),userID:b.userInfo.userID};a!=null&&(g.serverInfoData=a);f!=null&&(g.appMessages=d("ZenonMWThriftTranslatorUtils").mwThriftAppMessagesToSignalingAppMessages(f));c.push(g);k=(j=(i=e.offer)==null?void 0:i.sdpString)!=null?j:"";n=(m=e.mediaStatusEx)!=null?m:null;if(k!==""&&n!=null){o={sdp:k,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(k)};b=d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(n);a={eventName:"remoteSdpRequest",mediaPath:d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(e.mediaPath),mediaStates:b,negotiateType:!1,sdp:o,sdpOriginLocalId:l,source:"ringRequest"};c.push(a)}}return c}function b(a,b){b=b.status;b==="IN_ANOTHER_CALL"&&(a.signalingID=null);b=d("ZenonMWThriftTranslatorUtils").toMWThriftDeviceStatus(b);b={deviceStatus:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{ringResponse:b},type:d("MultiwayCommonTypes").MessageType.RING})}g.fromThriftRingRequest=a;g.toThriftRingResponse=b}),98);
__d("ZenonMWThriftServerMediaUpdateTranslator",["FBLogger","MultiwayCommonTypes","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMWCommonUtils","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageTagUtils","ZenonMWThriftTranslatorUtils","ZenonScreenShare","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[],e=a.messageBody.serverMediaUpdateRequest,f=a.messageHeader,g=f.messageTags,i=f.transactionId;if(!e)return b;var j=e.answer,k=e.fromVersion,l=e.mediaPath,m=e.mediaStatus,n=e.multipleVideoStreamsAllowed,o=e.offer,p=e.prAnswer,q=e.renegotiationRequested,r=e.sdpOriginLocalId,s=e.stateStore,t=e.toVersion;e=e.update;o=(o=o==null?void 0:o.sdpString)!=null?o:"";j=(j=j==null?void 0:j.sdpString)!=null?j:"";p=(p=p==null?void 0:p.sdpString)!=null?p:"";k=+k;t=+t;l=d("ZenonMWThriftTranslatorUtils").fromThriftMediaPath(l);g=d("ZenonMWThriftMessageTagUtils").fromThriftMessageTags(g);var u=function(){d("ZenonMWThriftMessageReliabilityLogger").logProcessedMessage(a)},v=o!=="",w=j!=="",x=c("gkx")("25225")&&p!=="",y=e!==null;y=v||w||x||y;d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(s,b,!1,y);y=d("ZenonMWThriftTranslatorUtils").fetchE2eeServerState(s);if(q){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 1: renegotationRequested"});q={ackMessageId:i,eventName:"initiateRenegotiationRequest",fromVersion:k,hasRemoteOffer:o!=="",mediaPath:l,messageTags:(s=g)!=null?s:[],onProcessed:u,version:t};b.push(q);if(v){s=h(i,k,l,m,{sdp:o,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(o)},r,u,g,y);b.push(s)}}else if(w){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 2: answer SDP"});q=h(i,k,l,m,{sdp:j,type:"answer",version:d("ZenonMWCommonUtils").getSdpVersion(j)},r,u,g,y);if(q.sdp.sdp!=null&&d("ZenonMWCommonUtils").isUnifiedPlan(q.sdp.sdp)){s={sdp:j,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(j)};q.renegotiationOffer=s}b.push(q)}else if(v){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 3: offer SDP"});w=h(i,k,l,m,{sdp:o,type:"offer",version:d("ZenonMWCommonUtils").getSdpVersion(o)},r,u,g,y);b.push(w)}else if(e){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 4: delta SDP"});j=h(i,k,l,m,{type:"offer",update:e,version:t},r,u,g,y);b.push(j)}else if(x){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 5: prAnswer SDP"});s=h(i,k,l,m,{sdp:p,type:"pranswer",version:d("ZenonMWCommonUtils").getSdpVersion(p)},r,u,g,y);b.push(s)}else if(m){c("ZenonInfraActionsLogger").logCheckpoint({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 6: media update"});v={ackMessageId:i,eventName:"mediaUpdateRequest",mediaStates:d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(m,k,t),messageTags:(q=g)!=null?q:[],onProcessed:u};b.push(v)}else{o="Warning: unsupported SMU type. TXID: "+i;c("FBLogger")("rpweb").warn(o);c("ZenonInfraActionsLogger").logError({auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:o,errorDomain:"ZenonMWThriftServerMediaUpdateTranslator"})}d("ZenonMWThriftTranslatorUtils").maybeAddOverlayConfigServerUpdateRequestFromThrift(b,f);e={capabilities:{multipleVideoStreamsAllowed:n},eventName:"capabilitiesRequest",messageTags:(w=g)!=null?w:[]};b.push(e);return b}function h(a,b,c,e,f,g,h,i,j){return{ackMessageId:a,e2eeServerState:j,eventName:"remoteSdpRequest",fromVersion:b,mediaPath:c,mediaStates:d("ZenonMWThriftTranslatorUtils").toZenonMediaStatesFromThrift(e),messageTags:(a=i)!=null?a:[],negotiateType:!1,onProcessed:h,sdp:f,sdpOriginLocalId:g,source:"serverMediaUpdateRequest"}}function b(a,b,c,e){return i({acknowledgedVersion:b.acknowledgedVersion,answer:e,header:a,mediaStates:c,statusCode:d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusCode(b.statusCode),subCode:(e=d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusSubCode(b.subCode))!=null?e:void 0})}function e(a,b){return i({acknowledgedVersion:b.acknowledgedVersion,header:a,statusCode:d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusCode(b.statusCode),subCode:(a=d("ZenonMWThriftTranslatorUtils").toMWThriftResponseStatusSubCode(b.subCode))!=null?a:void 0})}function f(a,b){return i({acknowledgedVersion:b.acknowledgedVersion,header:a,statusCode:(a=d("MultiwayCommonTypes").RtcResponseStatusCode.cast(b.responseStatusCode))!=null?a:d("MultiwayCommonTypes").RtcResponseStatusCode.CONDITIONAL_REQUEST_FAILED,subCode:d("MultiwayCommonTypes").RtcResponseSubCode.cast(b.responseSubCode)})}function i(a){var b=a.acknowledgedVersion,c=a.answer,e=a.header,f=a.mediaStates,g=a.statusCode;a=a.subCode;b={currentVersion:String(b)};f&&(b.mediaStatus=j(f));c&&(b.answer={sdpString:c.sdp});return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:e,rtcMessageBody:{serverMediaUpdateResponse:b},statusCode:g,subCode:a,type:d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE})}function j(a){var b={tracks:{}},c=!d("ZenonScreenShare").screenShareWithReplaceTrack();a.tracks.forEach(function(a){var e={customAudioContentType:void 0,customVideoContentType:void 0,enabled:a.enabled,name:a.name,owner:a.participantID},f=c?d("ZenonMWThriftTranslatorUtils").toMWThriftTrackLabel(a.type):null;f!=null&&(e.label=f);b.tracks[a.trackID]=e});return b}g.fromThriftServerMediaUpdateRequest=a;g.toThriftServerMediaUpdateResponse=b;g.toThriftServerMediaUpdateRenegotiationResponse=e;g.toThriftServerMediaUpdateNoSdpResponse=f}),98);
__d("ZenonMWThriftStateSyncTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.messageBody.updateResponse;a=a.messageHeader.transactionId;if(!b)return[];var c=b.topic;b=b.version;a={ackMessageId:a,eventName:"stateSyncUpdateResponse",topic:c,version:b};return[a]}function b(a){a=a.messageBody.notifyRequest;if(!a)return[];var b=[];if(a.syncPayload!=null)d("ZenonMWThriftTranslatorUtils").addThriftStateStoreSignalingEvents(a.syncPayload.stateStore,b,!0,!1);else{var c=a.data,e=a.topic;a=a.version;c={data:c,eventName:"stateSyncNotifyRequest",responseRequired:!0,topic:e,version:a};b.push(c)}return b}function c(a){var b=a.messageBody.unsubscribeResponse;a=a.messageHeader.transactionId;if(!b)return[];var c=b.topic;b=b.version;a={ackMessageId:a,eventName:"stateSyncUnsubscribeResponse",topic:c,version:b};return[a]}function e(a,b){var c=b.data,e=b.topic;b=b.version;c={data:c,syncPayload:{stateStore:{},stateStoreV2:{}},topic:e,topicId:null,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{updateRequest:c},type:d("MultiwayCommonTypes").MessageType.UPDATE})}function f(a,b){var c=b.topic;b=b.version;c={topic:c,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{notifyResponse:c},type:d("MultiwayCommonTypes").MessageType.NOTIFY})}function h(a,b){var c=b.topic;b=b.version;c={topic:c,topicId:null,version:b};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{unsubscribeRequest:c},type:d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE})}g.fromThriftUpdateResponse=a;g.fromThriftNotifyRequest=b;g.fromThriftUnsubscribeResponse=c;g.toThriftUpdateRequest=e;g.toThriftNotifyResponse=f;g.toThriftUnsubscribeRequest=h}),98);
__d("ZenonMWThriftSubscriptionTranslator",["MultiwayCommonTypes","MultiwaySharedTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=b.subscriptions;b={subscriptions:b.map(function(a){var b;return{cname:"",options:{videoQuality:d("MultiwaySharedTypes").VideoQuality.cast((b=a.options)==null?void 0:b.videoQuality)},trackId:a.trackId,type:d("MultiwaySharedTypes").SubscriptionType.cast(a.type)}})};return d("ZenonMWThriftTranslatorUtils").createMWThriftRequest({header:a,rtcMessageBody:{subscriptionRequest:b},type:d("MultiwayCommonTypes").MessageType.SUBSCRIPTION})}g.toThriftSubscriptionRequest=a}),98);
__d("ZenonMWThriftWakeupTranslator",["MultiwayCommonTypes","ZenonMWThriftTranslatorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=[];a=a.messageHeader;a={ackMessageId:a.transactionId,eventName:"wakeupRequest"};b.push(a);return b}function b(a){return d("ZenonMWThriftTranslatorUtils").createMWThriftResponse({header:a,rtcMessageBody:{},type:d("MultiwayCommonTypes").MessageType.WAKEUP})}g.fromThriftWakeupRequest=a;g.toThriftWakeupResponse=b}),98);
__d("ZenonMWThriftMessageTranslator",["FBLogger","MultiwayCommonTypes","ZenonActorHooks","ZenonMWThriftAddParticipantsTranslator","ZenonMWThriftApprovalTranslator","ZenonMWThriftClientEventTranslator","ZenonMWThriftClientMediaUpdateTranslator","ZenonMWThriftConferenceStateTranslator","ZenonMWThriftDataMessageTranslator","ZenonMWThriftDismissTranslator","ZenonMWThriftHangupTranslator","ZenonMWThriftIceCandidateTranslator","ZenonMWThriftJoinTranslator","ZenonMWThriftPingTranslator","ZenonMWThriftRemoveParticipantsTranslator","ZenonMWThriftRingTranslator","ZenonMWThriftServerMediaUpdateTranslator","ZenonMWThriftStateSyncTranslator","ZenonMWThriftSubscriptionTranslator","ZenonMWThriftTranslatorUtils","ZenonMWThriftWakeupTranslator","ZenonSignalingMessage","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.getHeader();a=a.getEvents();if(a.length===0)throw c("unrecoverableViolation")("Unexpected Translation: called toMWThriftMessage with empty signaling events","rtc_www");else{var e=a[0];switch(e.eventName){case"addParticipantsRequest":return d("ZenonMWThriftAddParticipantsTranslator").toThriftAddParticipantsRequest(b,e);case"clientEventRequest":return d("ZenonMWThriftClientEventTranslator").toThriftClientEventRequest(b,e);case"clientInfoRequest":if(a.length>=2&&a[1].eventName==="localSdpRequest"&&(a[1].sdp.type==="offer"||a[1].sdp.type==="answer"))return d("ZenonMWThriftJoinTranslator").toThriftJoinRequest(b,e,a[1]);break;case"dismissResponse":return d("ZenonMWThriftDismissTranslator").toThriftDismissResponse(b);case"genericDataMessageRequest":return d("ZenonMWThriftDataMessageTranslator").toThriftDataMessageRequest(b,e);case"genericDataMessageResponse":return d("ZenonMWThriftDataMessageTranslator").toThriftDataMessageResponse(b);case"terminateRequest":return d("ZenonMWThriftHangupTranslator").toThriftHangupRequest(b,e);case"initiateRenegotiationResponse":if(a.length>=3&&a[1].eventName==="remoteSdpResponse"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="answer")return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,a[1],a[2].mediaStates,a[2].sdp);else return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateRenegotiationResponse(b,e);case"inviteRequest":if(a.length>=3&&a[1].eventName==="clientInfoRequest"&&a[2].eventName==="localSdpRequest"&&a[2].sdp.type==="offer")return d("ZenonMWThriftJoinTranslator").toThriftJoinRequest(b,a[1],a[2],e);break;case"inviteResponse":return d("ZenonMWThriftRingTranslator").toThriftRingResponse(b,e);case"iceCandidateRequest":return d("ZenonMWThriftIceCandidateTranslator").toThriftIceCandidateRequest(b,e);case"iceCandidateResponse":return d("ZenonMWThriftIceCandidateTranslator").toThriftIceCandidateResponse(b);case"participantUpdateResponse":return d("ZenonMWThriftConferenceStateTranslator").toThriftConferenceStateResponse(b,e);case"localSdpRequest":return d("ZenonMWThriftClientMediaUpdateTranslator").toThriftClientMediaUpdateRequest(b,e.mediaStates,e.sdp);case"mediaUpdateRequest":return d("ZenonMWThriftClientMediaUpdateTranslator").toThriftClientMediaUpdateRequest(b,e.mediaStates);case"mediaUpdateResponse":return d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateNoSdpResponse(b,e);case"pingRequest":return d("ZenonMWThriftPingTranslator").toThriftPingRequest(b);case"remoteSdpResponse":return e.type==="offer"&&(a.length>=2&&a[1].eventName==="localSdpRequest"&&a[1].sdp.type==="answer")?a[1].mediaMode!=="p2p"?d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e,a[1].mediaStates):d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e,a[1].mediaStates,a[1].sdp):d("ZenonMWThriftServerMediaUpdateTranslator").toThriftServerMediaUpdateResponse(b,e);case"removeParticipantsRequest":return d("ZenonMWThriftRemoveParticipantsTranslator").toThriftRemoveParticipantsRequest(b,e);case"subscriptionRequest":return d("ZenonMWThriftSubscriptionTranslator").toThriftSubscriptionRequest(b,e);case"stateSyncNotifyResponse":return d("ZenonMWThriftStateSyncTranslator").toThriftNotifyResponse(b,e);case"stateSyncUpdateRequest":return d("ZenonMWThriftStateSyncTranslator").toThriftUpdateRequest(b,e);case"stateSyncUnsubscribeRequest":return d("ZenonMWThriftStateSyncTranslator").toThriftUnsubscribeRequest(b,e);case"usersApprovalRequest":return d("ZenonMWThriftApprovalTranslator").toThriftApprovalRequest(b,e);case"wakeupResponse":return d("ZenonMWThriftWakeupTranslator").toThriftWakeupResponse(b)}}return null}function b(a){var b=a.messageHeader;if(!h(b)){c("FBLogger")("rtc_www").info("Ignoring Thrift MW message; receiver does not match self ID","rtc_www");return null}var e=b.type,f=b.responseStatusCode==null;b=d("ZenonMWThriftTranslatorUtils").mwThriftMessageHeaderToSignalingMessageHeader(b);var g=[];if(e==null)return new(c("ZenonSignalingMessage"))(b,g);switch(e){case d("MultiwayCommonTypes").MessageType.RING:f&&(g=d("ZenonMWThriftRingTranslator").fromThriftRingRequest(a,b));break;case d("MultiwayCommonTypes").MessageType.JOIN:f||(g=d("ZenonMWThriftJoinTranslator").fromThriftJoinResponse(a));break;case d("MultiwayCommonTypes").MessageType.CONFERENCE_STATE:f&&(g=d("ZenonMWThriftConferenceStateTranslator").fromThriftConferenceStateRequest(a));break;case d("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:f||(g=d("ZenonMWThriftClientMediaUpdateTranslator").fromThriftClientMediaUpdateResponse(a));break;case d("MultiwayCommonTypes").MessageType.HANGUP:f||(g=d("ZenonMWThriftHangupTranslator").fromThriftHangupResponse(a));break;case d("MultiwayCommonTypes").MessageType.PING:f||(g=d("ZenonMWThriftPingTranslator").fromThriftPingResponse(a));break;case d("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:!f?g=d("ZenonMWThriftIceCandidateTranslator").fromThriftIceCandidateResponse(a):g=d("ZenonMWThriftIceCandidateTranslator").fromThriftIceCandidateRequest(a);break;case d("MultiwayCommonTypes").MessageType.DATA_MESSAGE:f&&(g=d("ZenonMWThriftDataMessageTranslator").fromThriftDataMessageRequest(a));break;case d("MultiwayCommonTypes").MessageType.DISMISS:f&&(g=d("ZenonMWThriftDismissTranslator").fromThriftDismissRequest(a));break;case d("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:f&&(g=d("ZenonMWThriftServerMediaUpdateTranslator").fromThriftServerMediaUpdateRequest(a));break;case d("MultiwayCommonTypes").MessageType.NOTIFY:f&&(g=d("ZenonMWThriftStateSyncTranslator").fromThriftNotifyRequest(a));break;case d("MultiwayCommonTypes").MessageType.UPDATE:f||(g=d("ZenonMWThriftStateSyncTranslator").fromThriftUpdateResponse(a));break;case d("MultiwayCommonTypes").MessageType.UNSUBSCRIBE:f||(g=d("ZenonMWThriftStateSyncTranslator").fromThriftUnsubscribeResponse(a));break;case d("MultiwayCommonTypes").MessageType.WAKEUP:f&&(g=d("ZenonMWThriftWakeupTranslator").fromThriftWakeupRequest(a));break;default:break}return new(c("ZenonSignalingMessage"))(b,g)}function h(a){return d("ZenonActorHooks").ZenonActor.isInstagramUser()||d("ZenonActorHooks").ZenonActor.isOculusUser()||d("ZenonActorHooks").ZenonActor.isManagedMetaAccount()||a.receiverUserId==null||a.receiverUserId===d("ZenonActorHooks").ZenonActor.getID()||((a=a.receiver)==null?void 0:a.baseId)===d("ZenonActorHooks").ZenonActor.getAccountID()}g.toMWThriftMessage=a;g.toSignalingMessage=b}),98);
__d("ZenonValidateMWThriftMessage",["FBLogger","MultiwayCommonTypes","ZenonInfraActionsLogger","ZenonMWThriftMessageMap"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.messageHeader.type,e=d("ZenonMWThriftMessageMap").messageTypeToString(b);if(a.messageHeader.serverInfoData==null&&b!=null&&b!==d("MultiwayCommonTypes").MessageType.JOIN){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP][DROP] No remoteSignalingID in message: "+e});c("FBLogger")("rtc_www").warn("[ZP][DROP] No remoteSignalingID in message: "+e);return!1}return!0}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("oz-player/shims/ozReportUnexpectedError",["oz-player/shims/www/ozReportUnexpectedErrorWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozReportUnexpectedErrorWWW")}),98);
__d("oz-player/loggings/OzLoggingUtils",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){a=a.getOperationLogger(b).start();try{return c(a)}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,d,e,f){e===void 0&&(e=function(){});f===void 0&&(f=function(){});var g=b.getOperationLogger(d).start();e(g);a.then(function(a){f(g),g.log()},function(a){f(g),g.setError(a),g.log()})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,d+" logger")})}g.executeOperationAndLog=a;g.monitorPromiseAndLogOperation=b}),98);
__d("oz-player/loggings/OzOperationLoggerBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$52=new Map(),this.$1=a}var b=a.prototype;b.start=function(){var a=Date.now();this.setClientTimeBegin(a);this.setClientTimeEnd(null);this.setClientTimeDuration(null);return this};b.log=function(){var a=Date.now(),b=this.getClientTimeBegin(),c=this.getClientTimeEnd();(b==null||b===0)&&(b=a,this.setClientTimeBegin(b));(c==null||c===0)&&(c=a,this.setClientTimeEnd(c));this.setClientTimeDuration(c-b)};b.setError=function(a){this.$2=a;return this};b.setPerSessionSampleRate=function(a){this.$3=a;return this};b.setAppendTarget=function(a){this.$47=a;return this};b.setOneObserved=function(a){this.$44=a;return this};b.setOneReqWave=function(a){this.$45=a;return this};b.setOneResWave=function(a){this.$46=a;return this};b.setIsP2pPlayback=function(a){this.$43=a;return this};b.setResult=function(a){this.$4=a;return this};b.setType=function(a){this.$5=a;return this};b.setClientTimeBegin=function(a){this.$6=a;return this};b.setClientTimeDuration=function(a){this.$7=a;return this};b.setClientTimeEnd=function(a){this.$8=a;return this};b.setSegmentCount=function(a){this.$15=a;return this};b.setTimeToFirstByte=function(a){this.$9=a;return this};b.setTimeToLastByte=function(a){this.$10=a;return this};b.setTimeToRequestStart=function(a){this.$11=a;return this};b.setTimeToRequestSent=function(a){this.$12=a;return this};b.setReason=function(a){this.$13=a;return this};b.setResource=function(a){this.$14=a;return this};b.setSegmentStartTime=function(a){this.$16=a;return this};b.setSegmentEndTime=function(a){this.$17=a;return this};b.setLength=function(a){this.$18=a;return this};b.setLiveheadPosition=function(a){this.$19=a;return this};b.setLiveheadSeqNumHeader=function(a){this.$20=a;return this};b.setLiveheadSeqNumMpd=function(a){this.$21=a;return this};b.setManifestType=function(a){this.$22=a;return this};b.setMediaSourceNewDuration=function(a){this.$23=a;return this};b.setMediaSourcePreviousDuration=function(a){this.$24=a;return this};b.setPriorityFloat=function(a){this.$25=a;return this};b.setAppendedBufferMs=function(a){this.$26=a;return this};b.setInitiator=function(a){this.$27=a;return this};b.setPreloadTime=function(a){this.$28=a;return this};b.setConcluder=function(a){this.$29=a;return this};b.setPreviousRepresentationID=function(a){this.$30=a;return this};b.setRepresentationID=function(a){this.$31=a;return this};b.setStreamSwitchReason=function(a){this.$32=a;return this};b.setState=function(a){this.$33=a;return this};b.setContentLengthHeader=function(a){this.$34=a;return this};b.setOriginHitHeader=function(a){this.$36=a;return this};b.setEdgeHitHeader=function(a){this.$37=a;return this};b.setFNAHitHeader=function(a){this.$38=a;return this};b.setCode=function(a){this.$35=a;return this};b.setResponseTimeMsHeader=function(a){this.$39=a;return this};b.setIsTemplatedManifest=function(a){this.$40=a;return this};b.setIsLatencyCachupEnabled=function(a){this.$41=a;return this};b.setPlayerFormat=function(a){this.$42=a;return this};b.setIsRingBufferSample=function(a){this.$48=a;return this};b.setIsOnline=function(a){this.$49=a;return this};b.setProxyStatusHeader=function(a){this.$50=a;return this};b.setPlaybackFbmsParam=function(a){return this};b.setPreferredEdgeLatency=function(a){this.$51=a;return this};b.setUserInfo=function(a){return this};b.setDynamicStatusHeader=function(a){return this};b.setIsMixedCodecManifest=function(a){this.$53=a;return this};b.getPerSessionSampleRate=function(){return this.$3};b.setMediaSourceSourceBuffer=function(a,b){this.$52.set(a,b);return this};b.unsetMediaSourceSourceBuffers=function(){this.$52.clear();return this};b.getError=function(){return this.$2};b.getResult=function(){return this.$4};b.getType=function(){return this.$5};b.getClientTimeBegin=function(){return this.$6};b.getClientTimeEnd=function(){return this.$7!=null?this.$6!=null?this.$6+this.$7:null:this.$8};b.getTimeToRequestStart=function(){return this.$11};b.getTimeToRequestSent=function(){return this.$12};b.getReason=function(){return this.$13};b.getResource=function(){return this.$14};b.getOperationName=function(){return this.$1};b.getSegmentStartTime=function(){return this.$16};b.getSegmentEndTime=function(){return this.$17};b.getLength=function(){return this.$18};b.getLiveheadPosition=function(){return this.$19};b.getManifestType=function(){return this.$22};b.getIsMixedCodecManifest=function(){return this.$53};b.getPriorityFloat=function(){return this.$25};b.getAppendedBufferMs=function(){return this.$26};b.getInitiator=function(){return this.$27};b.getPreloadTime=function(){return this.$28};b.getConcluder=function(){return this.$29};b.getContentLengthHeader=function(){return this.$34};b.getOriginHitHeader=function(){return this.$36};b.getEdgeHitHeader=function(){return this.$37};b.getFNAHitHeader=function(){return this.$38};b.getCode=function(){return this.$35};b.getResponseTimeMsHeader=function(){return this.$39};b.getIsTemplatedManifest=function(){return this.$40};b.getOneObserved=function(){return this.$44};b.getOneReqWave=function(){return this.$45};b.getOneResWave=function(){return this.$46};b.getAppendTarget=function(){return this.$47};b.getIsRingBufferSample=function(){return this.$48};b.getIsOnline=function(){return this.$49};b.getProxyStatusHeader=function(){return this.$50};b.getMediaSourceSourceBuffers=function(){return this.$52};return a}();f["default"]=a}),66);
__d("oz-player/shims/www/OzMaybeNativePromiseWWW",["cr:3014"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:3014")}),98);
__d("oz-player/shims/OzMaybeNativePromise",["oz-player/shims/www/OzMaybeNativePromiseWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzMaybeNativePromiseWWW")}),98);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;b===void 0&&(b=!1);d=a.call(this)||this;d.$OzErrorEmitter$p_1=!1;d.$OzErrorEmitter$p_2=!1;d.$OzErrorEmitter$p_3=[];d.emitError=function(a){!d.$OzErrorEmitter$p_1?d.$OzErrorEmitter$p_2?d.$OzErrorEmitter$p_3.push(a):d.$OzErrorEmitter$p_1||c("oz-player/shims/ozvariant")(0,14038):d.emit("error",a)};d.$OzErrorEmitter$p_2=b;return d}var d=b.prototype;d.onError=function(a){this.$OzErrorEmitter$p_1=!0;a=this.addListener("error",a);this.$OzErrorEmitter$p_2&&this.$OzErrorEmitter$p_3.length>0&&this.$OzErrorEmitter$p_3.forEach(this.emitError);return a};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/drm/OzDrmManager",["oz-player/drm/OzDrmUtils","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzOperationLoggerBase","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=null);this.$1=null;this.$2=new Map();this.$4=!1;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=new(c("oz-player/utils/OzErrorEmitter"))();this.$8=!1;this.$9=null;this.$10=0;this.$11=[];this.$12=[];this.$22=function(a,b){a instanceof c("oz-player/loggings/OzOperationLoggerBase")&&a.getError()&&a.setResult("failed"),b!=null&&a.setReason(b)};this.$19=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to mediaKeySystemAccess.createMediaKeys()."}));var b=f.$5.mediaKeys!=null?c("oz-player/shims/OzMaybeNativePromise").resolve(f.$5.mediaKeys):a.createMediaKeys();b=b.then(function(b){return{mediaKeySystemAccess:a,mediaKeys:b}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,f.$3,"drm_create_media_keys",function(){},f.$22);return b};this.$20=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to setMediaKeys()"}));var b=a.mediaKeySystemAccess,e=a.mediaKeys;if(!e)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});a=f.$5.setMediaKeys(e).then(function(){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed after setMediaKeys() called."}));var a=Array.from(f.$2.values()).find(function(a){return a.getKeySystem()===b.keySystem});if(!a)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+b.keySystem});var g=a.getServerCertificate();return g?e.setServerCertificate(g).then(function(){return{mediaKeys:e,provider:a}}):{mediaKeys:e,provider:a}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_set_media_keys",function(){},f.$22);return a};this.$21=function(a){var b=a.mediaKeys,e=a.provider;a=e.getInitDatas();if(a.length===0){f.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(f.$5,"encrypted",function(a){f.$23(b,e,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM encrypted rejection"}))})}));return c("oz-player/shims/OzMaybeNativePromise").resolve([])}a=a.map(function(a){return f.$23(b,e,{initData:a.data,initDataType:a.type})});a=c("oz-player/shims/OzMaybeNativePromise").all(a);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_request_license",function(){},f.$22);return a};this.$5=b;this.$1=e;this.$3=a.cloneContext().setType("drm_manager")}var b=a.prototype;b.hasContentProtections=function(){return this.$9};b.onError=function(a){return this.$7.onError(a)};b.$13=function(a){this.$7.emitError(a)};b.$14=function(a){var b;b=(b=(b=this.$1)==null?void 0:b.maxStartEMEAttempts)!=null?b:-1;this.$10<b?this.$15():this.$13(a)};b.addProvider=function(a){this.$2.set(a.getSchemeId(),a)};b.getProviderForSchemeId=function(a){return this.$2.get(a)};b.$16=function(a){if(!a)return null;var b=[];for(var c=0;c<a.length;c++){var e=a[c],f=e.$.schemeIdUri;f=this.getProviderForSchemeId(f);if(f){var g=f.getInitDatas();if(g.length==0&&e["cenc:pssh"]&&e["cenc:pssh"].length===1){e=(e=e["cenc:pssh"][0]._)!=null?e:"";e=d("oz-player/drm/OzDrmUtils").base64ToUint8Array(e.replace(/-/g,"+").replace(/_/g,"/"));g=[{data:e,type:"cenc"}];f.setInitDatas(g)}b.push({provider:f,initDatas:g})}}return b};b.$15=function(){try{this.$8=!1,this.startEME(this.$11,this.$12)}catch(b){var a=b;this.$13(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Restart EME failed with: "+String(a),extra:{}}))}};b.startEME=function(a,b){var c=this;if(this.$8)return;this.$8=!0;this.$10+=1;this.$11=a;this.$12=b;var e=new Map();this.$17(b,e,"audio");this.$17(a,e,"video");var f;e.forEach(function(a,b){!f?f=c.$18(b,a):f=f["catch"](function(){return c.$18(b,a)})});if(!f){this.$9=!1;return}this.$9=!0;var g=this.$3.getOperationLogger("drm_setup").start();f.then(this.$19).then(this.$20).then(this.$21).then(function(){return g.log()},function(a){a=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keyPromiseChain rejection"});c.$13(a);g.setResult("failed").setError(a).log()})};b.$17=function(a,b,c){var d=this;a.forEach(function(a){var e=d.$16(a.getContentProtectionXml()),f=a.getMimeCodecs();e!=null&&e.forEach(function(a){a=a.provider;var d=a.getKeySystem(),e=b.get(d);e||(e={audioCapabilities:new Map(),videoCapabilities:new Map(),distinctiveIdentifier:a.getRequireDistinctiveIdentifier(),persistentState:a.getRequirePersistentState(),sessionTypes:a.getDrmSessionTypes(),initDataTypes:a.getInitDataTypes()},b.set(d,e));c==="audio"&&!e.audioCapabilities.has(f)&&e.audioCapabilities.set(f,{contentType:f,robustness:a.getAudioRobustness()});c==="video"&&!e.videoCapabilities.has(f)&&e.videoCapabilities.set(f,{contentType:f,robustness:a.getVideoRobustness()})})})};b.destroy=function(){this.$6.release(),this.$4=!0};b.$18=function(a,b){var e=this,f={audioCapabilities:Array.from(b.audioCapabilities.values()),videoCapabilities:Array.from(b.videoCapabilities.values()),distinctiveIdentifier:b.distinctiveIdentifier,persistentState:b.persistentState,sessionTypes:b.sessionTypes,initDataTypes:b.initDataTypes};b=window.navigator.requestMediaKeySystemAccess(a,[f]);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$3,"drm_request_media_key_system_access",function(){},function(b){var d=null;b instanceof c("oz-player/loggings/OzOperationLoggerBase")&&b.getError()&&(d="keySystem: "+a+";domConfig: "+JSON.stringify(f));return e.$22(b,d)});return b};b.$23=function(a,b,e){var f=this,g=a.createSession();this.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"message",function(a){f.$24(g,b,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM message rejection"}))})}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"keystatuseschange",function(a){f.$25(g)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keystatuseschange rejection"}))})}));return g.generateRequest(e.initDataType,e.initData)};b.$24=function(a,b,c){var e=this;c=b.getLicenseRequestInfo(c.message.slice(0));var f=this.$3.getOperationLogger("drm_fetch_license").setResource(c.url).start();return window.fetch(c.url,c).then(function(c){c.ok?f.setResult("success").setCode(c.status).log():f.setResult("failed").setCode(c.status).setError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"DRM license fetch HTTP status not OK ("+c.status+")",extra:{code:c.status.toString()}})).log();return c.arrayBuffer().then(function(f){var g=new Uint8Array(f);g=b.parseLicenseResponse(g);if(g==null||g.byteLength===0){var h=g==null?"License is null or undefined.":"License is 0 bytes.";!c.ok?h+=" HTTP status not OK ("+c.status+")":f.byteLength===0&&(h+=" HTTP status OK ("+c.status+"), but response body is 0 bytes");f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No license for "+b.getKeySystem()+" - "+h,extra:{code:c.status.toString(),headers:c.headers,url:c.url}});h=(h=(h=e.$1)==null?void 0:h.throwNoLicenseError)!=null?h:!1;if(h)throw f;else e.$13(f)}else a.update(g)})})};b.$25=function(a){return a.expiration<Date.now()?a.close():c("oz-player/shims/OzMaybeNativePromise").resolve()};return a}();g.OzDrmManager=a}),98);
__d("oz-player/loggings/OzPerfLoggerProviderBase",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.cloneContext=function(){var a=this.createLoggerProvider();this.$11(a);return a};b.setType=function(a){this.$1=a;return this};b.setInitiator=function(a){this.$2=a;return this};b.setResource=function(a){this.$4=a;return this};b.setRepresentationID=function(a){this.$3=a;return this};b.setSegmentStartTime=function(a){this.$5=a;return this};b.setSegmentEndTime=function(a){this.$6=a;return this};b.setStreamSwitchReason=function(a){this.$7=a;return this};b.setIsP2pPlayback=function(a){this.$8=a;return this};b.setIsRingBufferSample=function(a){this.$9=a;return this};b.setPerSessionSampleRate=function(a){this.$10=a;return this};b.getType=function(){return this.$1};b.getInitiator=function(){return this.$2};b.getRepresentationID=function(){return this.$3};b.getStreamSwitchReason=function(){return this.$7};b.getResource=function(){return this.$4};b.getSegmentStartTime=function(){return this.$5};b.getSegmentEndTime=function(){return this.$6};b.getIsP2pPlayback=function(){return this.$8};b.getIsRingBufferSample=function(){return this.$9};b.getOperationLogger=function(a){a=this.createOperationLogger(a);return this.setOperationContext(a)};b.setOperationContext=function(a){this.$11(a);return a};b.createOperationLogger=function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: createOperationLogger"})};b.createLoggerProvider=function(){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: createLoggerProvider"})};b.$11=function(a){this.getType()&&a.setType(this.getType()),this.getInitiator()&&a.setInitiator(this.getInitiator()),this.getResource()&&a.setResource(this.getResource()),this.getRepresentationID()&&a.setRepresentationID(this.getRepresentationID()),this.getStreamSwitchReason()&&a.setStreamSwitchReason(this.getStreamSwitchReason()),typeof this.getSegmentStartTime()==="number"&&a.setSegmentStartTime(this.getSegmentStartTime()),typeof this.getSegmentEndTime()==="number"&&a.setSegmentEndTime(this.getSegmentEndTime()),typeof this.getIsP2pPlayback()==="boolean"&&a.setIsP2pPlayback(this.getIsP2pPlayback()),typeof this.getIsRingBufferSample()==="boolean"&&a.setIsRingBufferSample(this.getIsRingBufferSample())};return a}();g["default"]=a}),98);
__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).debug.apply(a,["[oz]"].concat(c))}function i(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).error.apply(a,["[oz]"].concat(c))}function j(a,b){return Math.floor(a).toString().padStart(b,"0")}function k(a,b){b===void 0&&(b=null);var c=function(a){return j(a.getHours(),2)+":"+j(a.getMinutes(),2)+":"+j(a.getSeconds(),2)+" "+j(a.getMilliseconds(),3)},d=b?b.getTime()-a.getTime():0;return"["+c(a)+(b?" - "+c(b):"")+" ("+d+" ms)]"}function l(a){return a==="failed"?i:h}function m(a){return a==null||a===0?null:a.toFixed(2)}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.createOperationLogger=function(a){return new n(a)};c.createLoggerProvider=function(){return new b()};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.log=function(){b.prototype.log.call(this);var a=this.getClientTimeBegin()||0,c=this.getClientTimeEnd();c=c!=null&&c!==0?new Date(c):null;var d=this.getResult()||"success",e=this.getType(),f=this.getInitiator(),g=this.getResource(),h=m(this.getSegmentStartTime()),i=m(this.getSegmentEndTime());l(d)("["+d+"]",this.getOperationName()+": "+k(new Date(a),c),e!=null&&e!==""?"["+e+"]":"",h!=null&&h!==""&&i!=null&&i!==""?"[segment time range: "+h+" - "+i+"]":"",f||"",g||"")};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzDevConsolePerfLoggerProvider=a;g.OzDevConsoleOperationLogger=n}),98);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzMultiDestinationPerfLoggerProvider$p_1=b;return c}var c=b.prototype;c.createOperationLogger=function(a){return new h(a,this.$OzMultiDestinationPerfLoggerProvider$p_1.map(function(b){return b.getOperationLogger(a)}))};c.createLoggerProvider=function(){return new b(this.$OzMultiDestinationPerfLoggerProvider$p_1)};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzMultiDestinationOperationLogger$p_1=c;return a}var c=a.prototype;c.start=function(){b.prototype.start.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.start()});return this};c.setPerSessionSampleRate=function(a){b.prototype.setPerSessionSampleRate.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPerSessionSampleRate(a)});return this};c.setResult=function(a){b.prototype.setResult.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResult(a)});return this};c.setError=function(a){b.prototype.setError.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setError(a)});return this};c.setType=function(a){b.prototype.setType.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setType(a)});return this};c.setMediaSourcePreviousDuration=function(a){b.prototype.setMediaSourcePreviousDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourcePreviousDuration(a)});return this};c.setMediaSourceNewDuration=function(a){b.prototype.setMediaSourceNewDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourceNewDuration(a)});return this};c.setClientTimeBegin=function(a){b.prototype.setClientTimeBegin.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeBegin(a)});return this};c.setClientTimeDuration=function(a){b.prototype.setClientTimeDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeDuration(a)});return this};c.setClientTimeEnd=function(a){b.prototype.setClientTimeEnd.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeEnd(a)});return this};c.setSegmentCount=function(a){b.prototype.setSegmentCount.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentCount(a)});return this};c.setTimeToFirstByte=function(a){b.prototype.setTimeToFirstByte.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToFirstByte(a)});return this};c.setTimeToLastByte=function(a){b.prototype.setTimeToLastByte.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToLastByte(a)});return this};c.setTimeToRequestStart=function(a){b.prototype.setTimeToRequestStart.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToRequestStart(a)});return this};c.setTimeToRequestSent=function(a){b.prototype.setTimeToRequestSent.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToRequestSent(a)});return this};c.setReason=function(a){b.prototype.setReason.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setReason(a)});return this};c.setResource=function(a){b.prototype.setResource.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResource(a)});return this};c.setSegmentStartTime=function(a){b.prototype.setSegmentStartTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentStartTime(a)});return this};c.setSegmentEndTime=function(a){b.prototype.setSegmentEndTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentEndTime(a)});return this};c.setAppendedBufferMs=function(a){b.prototype.setAppendedBufferMs.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setAppendedBufferMs(a)});return this};c.setLength=function(a){b.prototype.setLength.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLength(a)});return this};c.setLiveheadPosition=function(a){b.prototype.setLiveheadPosition.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadPosition(a)});return this};c.setLiveheadSeqNumHeader=function(a){b.prototype.setLiveheadSeqNumHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadSeqNumHeader(a)});return this};c.setLiveheadSeqNumMpd=function(a){b.prototype.setLiveheadSeqNumMpd.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadSeqNumMpd(a)});return this};c.setManifestType=function(a){b.prototype.setManifestType.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setManifestType(a)});return this};c.setPriorityFloat=function(a){b.prototype.setPriorityFloat.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPriorityFloat(a)});return this};c.setInitiator=function(a){b.prototype.setInitiator.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setInitiator(a)});return this};c.setPreloadTime=function(a){b.prototype.setPreloadTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreloadTime(a)});return this};c.setConcluder=function(a){b.prototype.setConcluder.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setConcluder(a)});return this};c.setPreviousRepresentationID=function(a){b.prototype.setPreviousRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreviousRepresentationID(a)});return this};c.setRepresentationID=function(a){b.prototype.setRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setRepresentationID(a)});return this};c.setState=function(a){b.prototype.setState.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setState(a)});return this};c.setContentLengthHeader=function(a){b.prototype.setContentLengthHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setContentLengthHeader(a)});return this};c.setEdgeHitHeader=function(a){b.prototype.setEdgeHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setEdgeHitHeader(a)});return this};c.setFNAHitHeader=function(a){b.prototype.setFNAHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setFNAHitHeader(a)});return this};c.setOriginHitHeader=function(a){b.prototype.setOriginHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOriginHitHeader(a)});return this};c.setCode=function(a){b.prototype.setCode.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setCode(a)});return this};c.setResponseTimeMsHeader=function(a){b.prototype.setResponseTimeMsHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResponseTimeMsHeader(a)});return this};c.setIsTemplatedManifest=function(a){b.prototype.setIsTemplatedManifest.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsTemplatedManifest(a)});return this};c.setIsLatencyCachupEnabled=function(a){b.prototype.setIsLatencyCachupEnabled.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsLatencyCachupEnabled(a)});return this};c.setPlayerFormat=function(a){b.prototype.setPlayerFormat.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPlayerFormat(a)});return this};c.setIsP2pPlayback=function(a){b.prototype.setIsP2pPlayback.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsP2pPlayback(a)});return this};c.setOneObserved=function(a){b.prototype.setOneObserved.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneObserved(a)});return this};c.setOneReqWave=function(a){b.prototype.setOneReqWave.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneReqWave(a)});return this};c.setOneResWave=function(a){b.prototype.setOneResWave.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneResWave(a)});return this};c.setAppendTarget=function(a){b.prototype.setAppendTarget.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setAppendTarget(a)});return this};c.setIsRingBufferSample=function(a){b.prototype.setIsRingBufferSample.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsRingBufferSample(a)});return this};c.setIsOnline=function(a){b.prototype.setIsOnline.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsOnline(a)});return this};c.setIsMixedCodecManifest=function(a){b.prototype.setIsMixedCodecManifest.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsMixedCodecManifest(a)});return this};c.setProxyStatusHeader=function(a){b.prototype.setProxyStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setProxyStatusHeader(a)});return this};c.setPlaybackFbmsParam=function(a){b.prototype.setPlaybackFbmsParam.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPlaybackFbmsParam(a)});return this};c.setPreferredEdgeLatency=function(a){b.prototype.setPreferredEdgeLatency.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreferredEdgeLatency(a)});return this};c.setUserInfo=function(a){b.prototype.setUserInfo.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setUserInfo(a)});return this};c.setDynamicStatusHeader=function(a){b.prototype.setDynamicStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setDynamicStatusHeader(a)});return this};c.setMediaSourceSourceBuffer=function(a,c){b.prototype.setMediaSourceSourceBuffer.call(this,a,c);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourceSourceBuffer(a,c)});return this};c.unsetMediaSourceSourceBuffers=function(){b.prototype.unsetMediaSourceSourceBuffers.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.unsetMediaSourceSourceBuffers()});return this};c.log=function(){b.prototype.log.call(this),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.log()})};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzMultiDestinationPerfLoggerProvider=a}),98);
__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new(c("oz-player/shims/OzSubscriptionsHandler"))()}var b=a.prototype;b.observe=function(a,b){var c;a=a.map(function(a){var c=a.setOperationLoggedListener(function(a){var c=a.getClientTimeBegin()||0,d=a.getClientTimeEnd()||0;b.getOperationLogger(a.getOperationName()).setClientTimeBegin(c).setClientTimeDuration(d-c).setClientTimeEnd(d).setLength(a.getLength()).setResult(a.getResult()||"success").setInitiator(a.getInitiator()).setType(a.getType()).log()});a.activate();return c});(c=this.$1).addSubscriptions.apply(c,a)};b.destroy=function(){this.$1.release()};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzNetworkDiagnosticsWWW",["VideoPlayerOzWWWGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(!a)return null;a=parseInt(a.get(b),10);return!isNaN(a)&&isFinite(a)?a:null}function i(a,b,c){if(!a||b===""||c==="")return null;b=(a=a.get(b))!=null?a:"";a=b.split(";");for(b=0;b<a.length;b++){var d=a[b].split(":");if(d.length===2&&d[0]===c){d=parseInt(d[1],10);return isFinite(d)?d:null}}return null}a={getNextValidSegmentId:function(a){return h(a,"x-fb-next-valid-segment-id")},getResponseTimeMs:function(a){return h(a,"x-fb-response-time-ms")},getDvlSegmentPTS:function(a){return h(a,"x-fb-segment-pts-start")},getDvlStatus:function(a){return a==null?void 0:a.get("x-fb-dynamic-status")},getUsableResponseSizeForBandwidthEstimation:function(a){return h(a,"x-fb-dynamic-predictive-response-chunk-size")},getBandwidthMeanEstimate:function(a){var b=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_header_key",""),d=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_key","");return i(a,b,d)},getBandwidthStandardDeviationEstimate:function(a){return h(a,"x-bwe-std-dev")},getTimeToFirstByteMsEstimate:function(a){return h(a,"x-mrtt-ms")}};b=a;g["default"]=b}),98);
__d("oz-player/shims/OzNetworkDiagnostics",["oz-player/shims/www/OzNetworkDiagnosticsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzNetworkDiagnosticsWWW")}),98);
__d("oz-player/manifests/OzDynamicVideoLibrary",["oz-player/shims/OzNetworkDiagnostics"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$4=null;this.$5=null;this.$6=new RegExp(/(.*)\.(m4v|m4a)(\?|$)/);this.$7={m4a:{time:0},m4v:{time:0}};this.$8={audio:"m4a",video:"m4v"};this.$9={};a=a.config;this.$3=a}var b=a.prototype;b.getLastSegmentStartPTS=function(){return this.$1};b.getLast200RequestedTime=function(){return this.$5};b.getLast200RequestedUrlDecisionMinTime=function(){var a=[];for(var b in this.$7)a.push(this.$7[b].time);return Math.min.apply(Math,a)};b.getLast200RequestedUrlDecisionTimeByMimeType=function(a){return(a=this.$7[this.$8[a]])==null?void 0:a.time};b.updateWithResponse=function(a,b,d,e){var f;if(!e.headers||e.status!=200)return;this.$5=b;this.$1=(f=c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(e.headers))!=null?f:this.$1;this.$2=c("oz-player/shims/OzNetworkDiagnostics").getDvlStatus(e.headers);this.$10(a,d);(this.$2!=null||this.$2==="200")&&(this.$4=b)};b.$10=function(a,b){a=this.$6.exec(a);if(a!=null){a=a[2];b!=null&&(this.$7[a]={time:b})}};b.shouldRequestDynamicInfo=function(a){if(a!=="video")return!1;this.$11(a);a=this.$12(a);return a!=null&&a<=this.$3.getNumber("dvl_initial_segment_ignore_count")?!1:this.$3.getNumber("dvl_update_interval_ms")==0||this.$4==null||this.$4+this.$3.getNumber("dvl_update_interval_ms")<=Date.now()};b.$11=function(a){this.$9[a]==null&&(this.$9[a]={segmentCount:0});return this.$9[a].segmentCount=this.$9[a].segmentCount!=null?this.$9[a].segmentCount+1:0};b.$12=function(a){return this.$9[a].segmentCount};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzRepresentationBase",["oz-player/parsers/getMIMECodecs","oz-player/shims/ozvariant","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.$1=a,this.$2=b,this.$11=c,this.$6=g,this.$3=d,this.$4=e,this.$5=f,this.$7=h,this.$8=i,this.$9=j,this.$10=k,this.$12=l,this.$13=m}var b=a.prototype;b.getContentProtectionXml=function(){return this.$2};b.getID=function(){return this.$11};b.getBandwidth=function(){return this.$10};b.getMimeCodecs=function(){return c("oz-player/parsers/getMIMECodecs")(this.$3,this.$4)};b.getMimeType=function(){return this.$3};b.getCodecs=function(){return this.$4};b.getVariantKey=function(){return this.$5};b.getLang=function(){return this.$6};b.getRole=function(){return this.$7};b.getDisplayLabel=function(){return this.$11};b.getInitSegment=function(){return this.$8};b.getCustomFieldFirstSegment=function(){return this.$12};b.getCustomField=function(a){if(this.$13==null||!this.$13[a])throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+a+" is not specified by caller",extra:{code:"OZ_RP-8"}});a=this.$13[a];try{return a(this.$1)}catch(a){return null}};b.updateWith=function(b){b instanceof a||c("oz-player/shims/ozvariant")(0,229),this.$9.updateWith(b.$9)};b.getSegmentByTime=function(a){return this.$9.getSegmentByTime(a)};b.getSegment=function(a){return this.$9.getSegment(a)};b.getPredictedSegmentAfter=function(a){return this.$9.getPredictedSegmentAfter(a)};b.canPredict=function(){return this.$9.canPredict()};b.canApproximateId=function(){return this.$9.canApproximateId()};b.getSegmentAfter=function(a){return this.$9.getSegmentAfter(a)};b.isEndingSegment=function(a){return this.$9.isEndingSegment(a)};b.addUpdateListener=function(a){return this.$9.addUpdateListener(a)};b.getTimeRanges=function(){return this.$9.getTimeRanges()};b.blockTimeRange=function(a){this.$9.blockTimeRange(a)};b.getEndingSegment=function(){return this.$9.getEndingSegment()};b.getMaxGopSec=function(){return this.$9.getMaxGopSec()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){c=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;c.$OzVideoRepresentation$p_5=null;c.$OzVideoRepresentation$p_6=null;c.$OzVideoRepresentation$p_7=null;c.$OzVideoRepresentation$p_1=o;c.$OzVideoRepresentation$p_2=p;c.$OzVideoRepresentation$p_4=n;c.$OzVideoRepresentation$p_3=b;if(n!=null){if(n.playbackResolutionMos!=null){d=c.getCustomField("playbackResolutionMos");c.$OzVideoRepresentation$p_7=d!=null?String(d):null}if(n.playbackResolutionCsvqm!=null){e=c.getCustomField("playbackResolutionCsvqm");c.$OzVideoRepresentation$p_6=e!=null?String(e):null}}return c}var c=b.prototype;c.getQualityScoreCurveString=function(a){if(a==="csvqm")return this.$OzVideoRepresentation$p_6;else return this.$OzVideoRepresentation$p_7};c.getWidth=function(){return this.$OzVideoRepresentation$p_1};c.getHeight=function(){return this.$OzVideoRepresentation$p_2};c.getDisplayLabel=function(){if(this.$OzVideoRepresentation$p_5!=null)return this.$OzVideoRepresentation$p_5;var a=this.$OzVideoRepresentation$p_4?this.$OzVideoRepresentation$p_4.qualityLabel:null;a&&(this.$OzVideoRepresentation$p_5=a(this.$OzVideoRepresentation$p_3));(this.$OzVideoRepresentation$p_5==null||this.$OzVideoRepresentation$p_5=="")&&(this.$OzVideoRepresentation$p_5=this.getHeight().toString()+"p");return this.$OzVideoRepresentation$p_5||""};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/utils/OzMimeUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[0]||"").trim()}function b(a){a=(a.split(";")[0]||"").trim();a=(a.split("/")[1]||"").trim();return a}function c(a){a=a.split('codecs="').pop();return a.split(".")[0].trim()}f.getMimeType=a;f.getContainerType=b;f.getParsedCodecFamily=c}),66);
__d("oz-player/media_source/OzMSESourceBufferImpl",["oz-player/shims/OzDOMEventListener","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d){this.$1=a,this.$2=c,this.$3=b,this.$4=d}var b=a.prototype;b.registerOnUpdateStartListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updatestart",a)};b.registerOnUpdateEndListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",a)};b.registerOnUpdateListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"update",a)};b.registerOnErrorListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",a)};b.getIsUpdating=function(){return this.$1.updating};b.getBuffered=function(){return this.$1.buffered};b.setAppendWindowEnd=function(a){this.$1.appendWindowEnd=a};b.appendBuffer=function(a,b){var c,e=(c=d("oz-player/utils/OzMimeUtil")).getMimeType(b)!==c.getMimeType(this.$3),f=c.getContainerType(b)!==c.getContainerType(this.$3);c=c.getParsedCodecFamily(b)!==c.getParsedCodecFamily(this.$3);if(e||f||c)if(this.$4){try{this.$1.changeType(b)}catch(a){throw d("oz-player/utils/OzErrorUtils").createOzError({description:'SourceBufferChangeTypeError: Failed to changeType("'+b+'"): '+String(a)+" current MIME Codecs: "+this.$3,type:"OZ_SOURCE_BUFFER_CHANGE_TYPE"})}this.$3=b}else throw d("oz-player/utils/OzErrorUtils").createOzError({description:"SourceBufferChangeTypeError: attempted to call changeType() on a SourceBuffer that does not support it.",type:"OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE"});this.$1.appendBuffer(a)};b.abort=function(){this.$1.abort()};b.remove=function(a,b){this.$1.remove(a,b)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.hasError=function(){return this.$1.error!==null};b.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};b.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};b.getVideoNode=function(){return this.$1};b.$2=function(a){return a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b})};return a}();f["default"]=a}),66);
__d("oz-player/utils/OzSourceBufferUtil",["oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=0;for(var c=0;c<a.getBuffered().length;c++)b+=a.getBuffered().end(c)-a.getBuffered().start(c);return b}function b(a){return a.reduce(function(a,b){return a+(b.endTime-b.startTime)},0)}function c(a){return a.getBuffered().length==0?0:a.getBuffered().start(0)}function e(a){var b=null;try{b=a.getBuffered()}catch(a){return 0}return b.length==0?0:b.end(b.length-1)}function f(a){var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});return b}function h(a,b,c){c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));b=c>=0?parseFloat((a[c].endTime-b).toFixed(3)):0;a=c>=0?a.length-1-c:-1;return{bufferAheadSec:b,bufferedOffset:a}}function i(a,b,c){var e=a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,e);e=parseFloat(e.reduce(function(a,c){var e=c.rangeEnd;return e==null?a:a+(d("oz-player/utils/OzNumericalRangeUtil").isWithin(b,c)?e-b:d("oz-player/utils/OzNumericalRangeUtil").isLargerThan(c.rangeStart,b)?e-c.rangeStart:0)},0).toFixed(3));a=c>=0?a.length-1-c:-1;return{bufferAheadSec:e,bufferedOffset:a}}g.getTotalBufferedTime=a;g.getTotalInBufferedRanges=b;g.getStartBufferedTime=c;g.getEndBufferedTime=e;g.convertToBufferedTimeRangeArray=f;g.getBufferAheadInBufferedRanges=h;g.getTotalBufferAheadOfPosition=i}),98);
__d("oz-player/media_source/SourceBufferManagerUtils",["oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return function(){var a=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return{startTime:e,endTime:a}}}g.startMeasuringAppendedBuffer=a}),98);
__d("oz-player/shims/www/OzDeferredWWW",["Deferred"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("Deferred")}),98);
__d("oz-player/shims/OzDeferred",["oz-player/shims/www/OzDeferredWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDeferredWWW")}),98);
__d("oz-player/utils/OzFakeEventTarget",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.dispatchEvent=function(a){if(this.$1[a]==null)return;this.$1[a].forEach(function(a){return a()})};b.addEventListener=function(a,b){var c=this;this.$1[a]===void 0&&(this.$1[a]=new Set());this.$1[a].add(b);return{remove:function(){c.removeEventListener(a,b)}}};b.removeEventListener=function(a,b){if(!this.$1[a])return;this.$1[a]["delete"](b)};b.destroy=function(){this.$1={}};return a}();f["default"]=a}),66);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzFakeEventTarget"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzObservedSourceBufferState$p_3=[];e.$OzObservedSourceBufferState$p_6=function(){var a;try{a=e.$OzObservedSourceBufferState$p_1.getBuffered()}catch(a){if(a.name==="InvalidStateError"){e.$OzObservedSourceBufferState$p_3=[];return}else throw a}var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});e.$OzObservedSourceBufferState$p_3=b};e.$OzObservedSourceBufferState$p_1=b;e.$OzObservedSourceBufferState$p_4=d;e.$OzObservedSourceBufferState$p_5();return e}var d=b.prototype;d.$OzObservedSourceBufferState$p_5=function(){var a=this;this.$OzObservedSourceBufferState$p_2.release();this.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$OzObservedSourceBufferState$p_2.addSubscriptions(this.$OzObservedSourceBufferState$p_1.registerOnUpdateEndListener(function(){a.$OzObservedSourceBufferState$p_6(),a.dispatchEvent("buffer_updated")}),this.$OzObservedSourceBufferState$p_1.registerOnErrorListener(this.$OzObservedSourceBufferState$p_6))};d.setSourceBuffer=function(a){this.$OzObservedSourceBufferState$p_1=a,this.$OzObservedSourceBufferState$p_5(),this.$OzObservedSourceBufferState$p_6()};d.getBufferedRanges=function(){return this.$OzObservedSourceBufferState$p_3};d.destroy=function(){a.prototype.destroy.call(this),this.$OzObservedSourceBufferState$p_2.release(),this.$OzObservedSourceBufferState$p_2.engage()};return b}(c("oz-player/utils/OzFakeEventTarget"));g["default"]=a}),98);
__d("oz-player/utils/OzCustomErrorCode",[],(function(a,b,c,d,e,f){"use strict";a={APPEND_BUFFER_UNKNOWN_ERROR:"21539",APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:"21541",APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542",SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR:"21543",SOURCE_BUFFER_MANAGER_CREATE_ERROR:"21544",SETUP_STREAMS_PROMISE_REJECTION:"21545",APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:"21546",APPEND_BUFFER_INVALID_STATE_ERROR:"21547",SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR:"21548",NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR:"21549",STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR:"21550",SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED:"21551",WEBVTT_CAPTION_PARSE_ERROR:"21552"};b=a;f["default"]=b}),66);
__d("oz-player/media_source/SourceBufferManager",["Promise","oz-player/loggings/OzLoggingUtils","oz-player/media_source/SourceBufferManagerUtils","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzStreams","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,e,f,g,h){var i=this;h===void 0&&(h=null);this.$4=null;this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=!1;this.$8=[];this.$12=!1;this.$13=!1;this.$14=0;this.$26=function(){if(i.$10.hasError()){i.$13=!1;i.$12=!1;var a=i.$10.getMediaErrorName();a=a!=null?a:"An unknown source buffer error occurred.";var b=i.$10.getErrorCode();b=b!=null?String(b):c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR;a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a,extra:{code:b}});i.$4&&i.$4.reject(a);i.$4=null;i.cancelOperationAndCleanQueue()}else if(!i.$13){i.$13=!0;b=i.$10.getVideoNode();a=i.$26;b=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b,"error",a);i.$5.addSubscriptions(b)}};this.$17=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_updateend").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult(i.$12?"failed":"success").log()}a=i.$4;a&&(i.$12?i.$26():(a.resolve(),i.$4&&(i.$4=null)))};this.$18=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_error").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult("failed").log()}i.$12=!0};this.$1=a;this.$2=h;this.$3=b;this.$11=e;this.$16();this.$9=new(c("oz-player/states/OzObservedSourceBufferState"))(this.$3,this.$11);this.$10=f;this.$15=g}var e=a.prototype;e.$16=function(){this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))(),this.$5.addSubscriptions(this.$3.registerOnUpdateEndListener(this.$17),this.$3.registerOnErrorListener(this.$18))};e.setSourceBuffer=function(a){if(a==null)return;this.cancelOperationAndCleanQueue();this.$3=a;this.$16();this.$9.setSourceBuffer(a)};e.queueData=function(a,b,d,e,f){e===void 0&&(e=null);f===void 0&&(f=0);var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$8.push({data:a,deferred:g,loggerProvider:e,appendTarget:f,mimeCodecs:b,clearSourceBufferRange:d});a=g.getPromise();this.$7||this.$19()["catch"](function(a){});return a};e.cancelOperationAndCleanQueue=function(a){a===void 0&&(a=null);a&&a.cloneContext().getOperationLogger("source_buffer_cancel_and_clean").log();var b=d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM cancel and clean");this.$8.forEach(function(a){a=a.deferred;a.reject(b)});this.$8=[];try{this.$11.getBool("enable_alternative_audio_tracks")?this.$15()==="open"&&(this.$10.hasError()||this.$3.abort()):this.$15()!=="closed"&&!0&&(this.$10.hasError()||this.$3.abort())}catch(b){var c=b;a&&a.cloneContext().getOperationLogger("cancel_operation_abort_failed").setError(c).setReason(this.$15?this.$15():null).log()}a=this.$4;a&&a.reject(b);this.$6&&(this.$6.reject(b),this.$6=null)};e.getSourceBufferState=function(){return this.$9};e.$20=function(a,b){a=Math.max(a,0);b>0&&b>a&&this.$3.remove(a,b)};e.$21=function(a,b){a=Math.max(a,0);if(b>0&&b>a){var d=this.$22();this.$20(a,b);return d}return c("oz-player/shims/OzMaybeNativePromise").resolve()};e.clearRangeWithWait=function(a){var c=this;this.cancelOperationAndCleanQueue();return a.reduce(function(a,b){var d=b.fromTime,e=b.toTime;return a.then(function(){return c.$21(d,e)})},(h||(h=b("Promise"))).resolve())};e.$22=function(a){var b=this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));b=b.getPromise();a&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,a,"wait_for_source_buffer");return b};e.$23=function(a,b,e,f){var g=this,h=function(){var h=g.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),i=!1,j=!0;try{j=!!g.$3.getBuffered()}catch(a){j=!1}try{i=g.$3.getIsUpdating();if(j)g.$3.appendBuffer(a,b);else{h.resolve();return h.getPromise()}}catch(a){j=a;var k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_UNKNOWN_ERROR,l=j.name,m=j.message;l==="QuotaExceededError"?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:g.$10.hasError()?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:i?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:l==="InvalidStateError"&&typeof m==="string"&&/SourceBuffer has been removed/.test(m)?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:l==="InvalidStateError"&&(k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR);i=d("oz-player/utils/OzErrorUtils").createOzError({type:d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getType():l==="QuotaExceededError"?"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":l==="OZ_SOURCE_BUFFER_CHANGE_TYPE"?"OZ_SOURCE_BUFFER_CHANGE_TYPE":"OZ_SOURCE_BUFFER",description:"SBM#"+g.$1+" appendBuffer("+b+") failed: "+String(m),extra:d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getExtra():{originalError:j,code:k}});g.$4=null;h.reject(i)}l=h.getPromise();e&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(l,e,"append",function(b){var c;b.setLength(a.byteLength);c=(c=f==null?void 0:f.appendTarget)!=null?c:null;b.setAppendTarget(c)});return l};if(this.$3.getIsUpdating())return this.$22(e).then(h)["catch"](function(a){throw a});this.$14+=a.byteLength;return h()};e.$19=function(){var a=this;if(this.$7)return c("oz-player/shims/OzMaybeNativePromise").reject(this.$24("Another unit of queued data is being appended."));var b=this.$8.shift();if(!b){this.$7=!1;return c("oz-player/shims/OzMaybeNativePromise").resolve()}var e=b.data,f=b.mimeCodecs,g=b.deferred,h=b.loggerProvider,i=b.appendTarget,j=b.clearSourceBufferRange;this.$7=!0;var k;b=function(){return e instanceof d("oz-player/shims/OzStreams").OzReadableStream?a.$25(e,f,h,i):a.$23(e,f,h,{appendTarget:i})};j?(k=this.$3.getIsUpdating()?this.$22(h):c("oz-player/shims/OzMaybeNativePromise").resolve(),k=k.then(function(){return a.clearRangeWithWait([{fromTime:j[0],toTime:j[1]}])}).then(b)):k=b();var l=d("oz-player/media_source/SourceBufferManagerUtils").startMeasuringAppendedBuffer(this.$11,this.$3,this.$9);return k["catch"](function(a){g.reject(a)}).then(function(){var b=l(),c=b.startTime;b=b.endTime;g.resolve({startTime_UNSAFE:c,endTime_UNSAFE:b,appendedSec:b-c});a.$7=!1;a.$19()["catch"](function(a){})})};e.$25=function(a,b,e,f){var g=this,h=[],i=0,j=a.getReader();a=function a(){var k=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));g.$6=k;j.read().then(function(a){k.resolve(a),g.$6=null})["catch"](function(a){k.reject(a),g.$6=null});return k.getPromise().then(function(d){if(d.done){var j=c("oz-player/utils/ozConcatUint8Arrays")(h);j=j.buffer;h.length=0;i=0;return j.byteLength>0?g.$23(j,b,e,{appendTarget:f}):c("oz-player/shims/OzMaybeNativePromise").resolve()}j=d.value;d=j;if(f>0){j=j instanceof Uint8Array?j:new Uint8Array(j);h.push(j);i+=j.byteLength;if(i>=f){j=c("oz-player/utils/ozConcatUint8Arrays")(h);j=j.buffer;h.length=0;i=0;d=j}}return d&&d.byteLength>=f?g.$23(d,b,e,{appendTarget:f}).then(function(){return a()}):a()},function(a){if(g.$11.getBool("enable_alternative_audio_tracks"))try{g.$15()==="open"&&(g.$10.hasError()||g.$3.abort())}catch(a){a}else try{g.$3.abort()}catch(a){a}if(typeof a==="object"&&d("oz-player/utils/OzErrorUtils").isOzError(a))return c("oz-player/shims/OzMaybeNativePromise").reject(a);if(typeof a==="object"&&a!=null&&typeof a.name==="string"&&a.name==="TypeError"&&typeof a.message==="string"&&a.message.includes("network error")){var e=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{description:"SBM#"+g.$1+" appendReadableStream("+b+") failed: Stream read is interrupted (previously TypeError network error)}",extra:{originalError:a},type:"OZ_NETWORK"});return c("oz-player/shims/OzMaybeNativePromise").reject(e)}e=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{description:"SBM#"+g.$1+" appendReadableStream("+b+") failed: Unexpected error while reading from stream: "+String(a),extra:{originalError:a},type:"OZ_NETWORK"});return c("oz-player/shims/OzMaybeNativePromise").reject(e)})};return a()};e.$24=function(a){var b=this.$2;b!=null&&b.getOperationLogger("source_buffer_invariant").setError(a).setResult("failed").log();return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"SBM invariant: "+a})};e.destroy=function(){var a=this,b=this.$2;b&&b.cloneContext().getOperationLogger("source_buffer_destroy").log();b=this.$4;b&&(!this.$13?(b.reject(d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM destroyed")),this.$4=null,this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()):b.getPromise()["catch"](function(){a.$4=null,a.$5.release(),a.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()}));this.$9.destroy()};e.getDebug=function(){return{SourceBuffer:this.$3}};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("OzVTTSourceBufferImpl").__setRef("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW");function a(){return h.load()}g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplWWW",["oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW")}),98);
__d("oz-player/shims/getOzVTTSourceBufferImpl",["oz-player/shims/www/getOzVTTSourceBufferImplWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplWWW")}),98);
__d("oz-player/shims/www/ozClearTimeoutWWW",["clearTimeout"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("clearTimeout")}),98);
__d("oz-player/shims/ozClearTimeout",["oz-player/shims/www/ozClearTimeoutWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozClearTimeoutWWW")}),98);
__d("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("setTimeoutAcrossTransitions")}),98);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW")}),98);
__d("oz-player/utils/ozGetErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:}return"MEDIA_ERR_UNKNOWN"}f["default"]=a}),66);
__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/media_source/OzMSESourceBufferImpl","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/getOzVTTSourceBufferImpl","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozThrottle","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/ozGetErrorNameFromMediaErrorCode"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this,e=a.videoNode,f=a.config,g=a.perfLoggerProvider;g=g===void 0?new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]):g;var h=a.isChangeTypeSupported,i=a.handleVttCaptionsUpdated,j=a.onClearVideoNodeError;a=a.onRetryVideoElementError;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$6=[];this.$7=new Map();this.$8=[];this.$10=!1;this.$12=!1;this.$13=!1;this.$14=!1;this.$15=!1;this.$18=null;this.$19=null;this.$20=new(c("oz-player/utils/OzErrorEmitter"))();this.$22="undetected";this.$23=!1;this.$29=function(){b.$32()||(b.$10=!1);if(!b.$33())return;var a=b.$8.shift();a&&(a(b.$2),b.$10=!0)};this.$5=g;this.$11=f;this.$1=e;this.$21=i;this.$16=j;this.$17=a;this.$23=h;this.$9=new(c("oz-player/media_source/OzMediaErrorProvider"))(this.$1);this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",function(){var a;b.$5.getOperationLogger("media_element_error").setError((a=b.$9.getMediaErrorName())!=null?a:void 0).setCode(b.$9.getErrorCode()).setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$8=[];b.$6=[];b.$4.release();b.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();b.$15=b.$15||b.$14||b.$13;a=b.$1.error;var e=(a==null?void 0:a.code)||0,f=!a&&b.$1.poster!=null&&b.$1.poster!=="",g=d("oz-player/utils/OzErrorUtils").createOzError({type:f?"OZ_POSSIBLE_POSTER_LOAD_FAILURE":c("oz-player/utils/ozGetErrorNameFromMediaErrorCode")(e),description:(a==null?void 0:a.message)!=null?a.message:"",extra:{originalError:a,code:String(e)}});if(b.$19!=null){b.$5.getOperationLogger("media_element_error").setError(a).setCode(e).setReason("mitigation_failed").setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$20.emitError(g);return}b.$19=b.$1.currentTime;b.$18==null&&(b.$18=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){b.$18=null,b.$11.getBool("retry_video_element_error")&&(b.$17!=null&&b.$17(g),b.$24())},0))}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"play",function(){b.$14=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",function(){b.$14=!1,b.$15=!1,b.$19=null,b.$13=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",function(){b.$14=!1,b.$13=!1,b.$15=!!b.$1.error}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"ended",function(){b.$14=!1,b.$13=!1}));this.$2=new MediaSource();this.$5.getOperationLogger("media_source_new").log();this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){b.$5.getOperationLogger("media_source_open").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){b.$5.getOperationLogger("media_source_ended").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceclose",function(){b.$5.getOperationLogger("media_source_close").log()}));this.$25(this.$2)}var b=a.prototype;b.$25=function(a){var b=this.$1,c=b.src;c!==""&&URL.revokeObjectURL(c);a?b.src=URL.createObjectURL(a):(b.removeAttribute("src"),b.removeAttribute("srcObject"))};b.$24=function(){var a=this;this.$7.forEach(function(a){a.cancelOperationAndCleanQueue()});this.$2=new MediaSource();this.$25(this.$2);this.$7.forEach(function(a,b){a.setSourceBuffer(null)});var b=this.$26().then(function(){var b=[];a.$7.forEach(function(c,d){var e=a.$27(d).then(function(b){c.setSourceBuffer(b),a.$28(b,d)});b.push(e)});return c("oz-player/shims/OzMaybeNativePromise").all(b)});b.then(function(){a.$16&&a.$16();a.$19!=null&&(a.$1.currentTime=a.$19);if(a.$15){var b=a.$1.play();return b==null?void 0:b["catch"](function(){})}})["catch"](function(b){a.$20.emitError(b)})};b.$26=function(){var a=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen")){if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),d=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){d.remove(),b.resolve(),a.$29()});this.$3.addSubscriptions(d);return b.getPromise()}else{if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){e.resolve(),a.$29()}));return e.getPromise()}};b.$27=function(a){var b=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen"))return c("oz-player/shims/OzMaybeNativePromise").resolve().then(function(){return b.$30(a)})["catch"](function(b){b=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+String(b),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw b});else try{return this.$30(a)}catch(b){var e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+(b.message||String(b)),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw e}};b.$30=function(a){var b=this,e;a.includes("vtt")?e=this.$31(a):e=this.$26().then(function(){return new(c("oz-player/media_source/OzMSESourceBufferImpl"))(b.$2.addSourceBuffer(a),a,b.$11,b.$23)});return e.then(function(c){b.$6.push(c);c.registerOnUpdateListener(function(){b.$5.cloneContext().getOperationLogger("source_buffer_update_start").setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).log()});b.$5.getOperationLogger("add_source_buffer").setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).log();return c})};b.$28=function(a,b){var c=this;this.$4.addSubscriptions(a.registerOnUpdateEndListener(function(){c.$29()}))};b.$31=function(a){var b=this;return c("oz-player/shims/getOzVTTSourceBufferImpl")().then(function(e){if(b.$21!=null){var f=new e({onCaptionsChanged:b.$21,config:b.$11}),g=c("oz-player/shims/ozThrottle")(function(){f.setCurrentVideoTime(b.$1.currentTime)},200);b.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b.$1,"timeupdate",function(){g()}),{remove:function(){g=function(){}}});return f}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): No handleVttCaptionsUpdated callback provided',extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}})})};b.createSourceBufferManager=function(a,b,e,f){var g=this;return(this.$11.getBool("msm_refactor_wait_for_sourceopen")?this.$27(b).then(function(a){return[void 0,a]}):c("oz-player/shims/OzMaybeNativePromise").all([this.$26(),this.$27(b)])).then(function(e){e[0];e=e[1];var f=new(c("oz-player/media_source/SourceBufferManager"))(a,e,g.$11,g.$9,function(){return g.$2.readyState},g.$5.cloneContext().setType(d("oz-player/utils/OzMimeUtil").getMimeType(b)));g.$28(e,b);g.$7.set(b,f);return f})["catch"](function(b){var e=d("oz-player/utils/OzErrorUtils").isOzError(b)?b.getExtra():void 0,f=e==null?void 0:e.code;f=d("oz-player/utils/OzErrorUtils").isOzError(b)?""+b.getType()+(f!=null?"#"+f:"")+": "+b.getDescription():String(b);f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"Failed to create SBM#"+a+": "+f+", support AAC-LC="+(MediaSource.isTypeSupported("audio/mp4; codecs=mp4a.40.2")?"true":"false")+", readyState="+g.$2.readyState,extra:babelHelpers["extends"]({},e,{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CREATE_ERROR.toString()})});throw f})};b.getReadyState=function(){return this.$2.readyState};b.getMediaSource=function(){return this.$2};b.notifyEndOfStream=function(a,b){var d=this,e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){e.resolve()}));this.$8.push(function(c){if(c.readyState==="open"){var e=d.$5.getOperationLogger("end_of_stream");e.setInitiator(a).setReason(b);e.log();c.endOfStream()}});this.$29();return e.getPromise()};b.updateDuration=function(a,b){var e=this,f=this.$2.duration;if(Number.isFinite(f)&&(!b||f>=a))return;this.$8.push(function(b){b.duration!==f&&!(isNaN(b.duration)&&isNaN(f))&&c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"mediaSource duration discrepancy: "+b.duration+" != "+f}),"MediaSourceManager updateDuration","warn");var g=e.$11.getBool("msm_refactor_wait_for_sourceopen")?b.duration!==Infinity&&a<b.duration:a<b.duration;if(g){e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(b.duration).setMediaSourceNewDuration(a).setResult("failed").log();return}e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(b.duration).setMediaSourceNewDuration(a).log();b.duration=a});this.$29();return};b.detach=function(){this.$18&&(c("oz-player/shims/ozClearTimeout")(this.$18),this.$18=null);this.$5.getOperationLogger("source_buffer_detach").unsetMediaSourceSourceBuffers();this.$25(null);for(var a=0;a<this.$2.sourceBuffers.length;a++){var b=this.$2.sourceBuffers[a];this.$2.removeSourceBuffer(b)}this.$3.release();this.$3.engage();this.$4.release();this.$4.engage();this.$8=[];this.$10=!1;this.$12=!0};b.$33=function(){return!this.$32()&&this.$2.readyState==="open"&&!this.$10&&!this.$12};b.$32=function(){return this.$6.some(function(a){return a.getIsUpdating()})};b.onError=function(a){return this.$20.onError(a)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$5=function(a){a===void 0&&(a=!0);var b=d.$2;if(!b)return;b=b.getTimeRanges();if(!b.length)return;b=b[b.length-1];d.$1.updateDuration(b.endTime,a)};this.$1=a;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=b}var b=a.prototype;b.setTimeRangeProvider=function(a){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(a.addUpdateListener(this.$5)),this.$2=a};b.listenToMediaStreamInitAppended=function(a){var b=this;return a.addListener("initAppended",function(){b.$5(!1)})};b.destroy=function(){this.$3.release()};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzCreateErrorStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({pull:function(b){b.error(a)}})}g["default"]=a}),98);
__d("oz-player/shims/OzFetchAPI",[],(function(a,b,c,d,e,f){"use strict";b=function(b,c){return a.fetch(b,c)};c=function(b,c){return new a.Response(b,c)};f.fetch=b;f.Response=c}),66);
__d("oz-player/networks/FetchWithTimeout",["oz-player/shims/OzFetchAPI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function b(b,e,f,g){if(!d("oz-player/shims/OzFetchAPI").fetch)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"fetch api is missing"});var h=null;if("AbortController"in a&&f!=null&&f!=0){var i=new AbortController();h=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return i.abort()},f);f={credentials:e,signal:i.signal}}else f={credentials:e};g!=null&&(f=babelHelpers["extends"]({},f,{referrer:g}));return d("oz-player/shims/OzFetchAPI").fetch(b,f).then(function(a){c("oz-player/shims/ozClearTimeout")(h);return a})}g["default"]=b}),98);
__d("oz-player/networks/OzHTTPHeaders",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";d=function(){function a(){this.$1=new Map()}var b=a.prototype;b.append=function(a,b){a=a.toLowerCase();var c=this.$1.get(a);c!=null?this.$1.set(a,c+", "+b):this.$1.set(a,b)};b.get=function(a){a=a.toLowerCase();a=this.$1.get(a);return(a=a)!=null?a:null};b.entries=function(){return this.$1.entries()};b.has=function(a){return this.get(a)!==null};return a}();e=a.Headers;f=e&&e.prototype;var h=e&&f&&typeof f.append==="function"&&typeof f.entries==="function"&&typeof f.get==="function"&&typeof f.has==="function"?e:d;function b(a){if(a==null)return null;if(typeof a==="object"&&typeof a.append==="function"&&typeof a.get==="function"&&typeof a.has==="function")if(typeof a.entries==="function")return a;else if(typeof a.forEach==="function"){var b=new h();a.forEach(function(a,c){b.append(c,a)});return b}c("oz-player/shims/ozvariant")(!1,"Malformed Headers object: %s %s",typeof a,String(a));return null}g.OzHTTPHeaders=h;g.maybeConvertHeadersToOzHTTPHeaders=b}),98);
__d("oz-player/utils/arrayBuffer2OzReadableStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(b){var c=new Uint8Array(a);b.enqueue(c);b.close()}})}g["default"]=a}),98);
__d("oz-player/utils/maybeConvertReadableStreamToOzReadableStream",["asyncToGeneratorRuntime","oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!d("oz-player/shims/OzStreams").OzReadableStreamIsPolyfilled)return a;var c=a.getReader();return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){while(!0){var b=(yield c.read());if(b.done)break;a.enqueue(b.value)}a.close()});function d(b){return a.apply(this,arguments)}return d}()})}g["default"]=a}),98);
__d("oz-player/utils/processFetchResponse",["oz-player/networks/OzHTTPHeaders","oz-player/shims/OzMaybeNativePromise","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/maybeConvertReadableStreamToOzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.body,e=a.ok,f=a.status,g=a.headers;return b!=null?c("oz-player/shims/OzMaybeNativePromise").resolve({ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/maybeConvertReadableStreamToOzReadableStream")(b),arrayBuffer:function(){return a.arrayBuffer()}}):a.arrayBuffer().then(function(a){return{ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/arrayBuffer2OzReadableStream")(a),arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a)}}})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchRequestImplementation",["oz-player/networks/FetchWithTimeout","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h,i){f=d?d.networkTimeoutMs:null;g=c("oz-player/networks/FetchWithTimeout")(a,b.credentials,f);return g.then(function(a){var b=a.ok,d=a.status,f=a.headers;return e!=null&&!b&&typeof a.text==="function"?a.text().then(function(c){return{ok:b,status:d,headers:f,body:c,arrayBuffer:function(){return a.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a)})}b=a;d=b;g["default"]=d}),98);
__d("oz-player/networks/withRetries",["Promise","asyncToGeneratorRuntime","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d,e){return new(h||(h=b("Promise")))(function(f,g){function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){try{f(yield a())}catch(a){if(b>0){var i=typeof e==="function"?e(d-b):e;c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){h(b-1)},i)}else g(a)}});return i.apply(this,arguments)}h(d)})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchWithCache",["oz-player/networks/OzFetchRequestImplementation","oz-player/networks/withRetries","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.config,e=a.url,f=a.http,g=a.overrideOzRequestImplementation,h=a.options,i=a.prefetchCache,j=a.mediaStreamType,k=a.onPerfEntryAvailable,l=a.dataAppendedCallback,m=a.dataAppendedErrorCallback,n=g!=null?function(){return g.apply(void 0,arguments)}:c("oz-player/networks/OzFetchRequestImplementation");a=i?i.getCacheValue(e):null;i=a;a=!1;if(i)a=!0,i=i.then(function(a){if(a.initiator==="FETCH"){var b=a.response,e=b.ok,f=b.status,g=b.headers;return!e&&typeof a.response.text==="function"?a.response.text().then(function(b){return{ok:!1,status:f,headers:g,body:b,arrayBuffer:function(){return a.response.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a.response)}else if(a.initiator==="XHR_REQUEST"){b=c("oz-player/utils/arrayBuffer2OzReadableStream")(a.response);return{body:b,status:200,headers:null,ok:!0,arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a.response)}}}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+a.initiator})})["catch"](function(a){return n(e,f,null,null,j,k,l,m)});else{var o;o=(o=h==null?void 0:h.retryAttempts_SIDX_USE_ONLY)!=null?o:0;if(o>0){var p;p=(p=h==null?void 0:h.retryTimeoutMs_SIDX_USE_ONLY)!=null?p:100;i=c("oz-player/networks/withRetries")(function(){return n(e,f,h,b,j,k,l,m)},o,p)}else i=n(e,f,h,b,j,k,l,m)}return{promise:i,retrievedFromCache:a}}g["default"]=a}),98);
__d("oz-player/utils/OzVideoUrlUtils",[],(function(a,b,c,d,e,f){"use strict";c=1<<31;var g=~c,h=c+1;function i(a){a=a|0;return Math.max(h,Math.min(a,g))}function j(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(i(a)*1e3):null}function k(){return i(Date.now()/1e3)}var l={OE:"oe",OE2:"oe2",ODM:"odm",USS:"uss"};function m(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;a=a.get(l.OE);a=a==null?void 0:j(a);return{expirationDate:a}}function a(a){a=a instanceof URL?a.searchParams:new URL(a).searchParams;return a.get(l.OE2)!==null||a.get(l.ODM)!==null||a.get(l.USS)!==null}function b(a){a=m(a);a=a.expirationDate;return a!=null&&a<=new Date(k()*1e3)}f.DEFAULT_UNIXTIME=c;f.MAX_INT=g;f.parseCdnUrlParams=m;f.isShortenedExpiryTimestampCdnUrl=a;f.isCdnUrlExpired=b}),66);
__d("oz-player/networks/OzNetworkRequestStream",["Promise","oz-player/networks/OzCreateErrorStream","oz-player/networks/OzFetchWithCache","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/OzResourceTimingUtils","oz-player/utils/OzVideoUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$8=!1;var b=a.debugName,c=a.config,d=a.baseUri,e=a.baseUriDecisionTime,f=a.options,g=a.requestParamCreator,h=a.networkRequestStreamHandlers,i=a.overrideOzRequestImplementation,j=a.prefetchCache,k=a.networkRequestStreamRetryHandler,l=a.networkRequestUrlRefreshHandler,m=a.dynamicVideoLibrary,n=a.mediaStreamType,o=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;this.$1=b;this.$2=d;this.$3=f;this.$4=g;this.$10=(b=h)!=null?b:[];this.$11=k;this.$12=l;this.$9=i;this.$13=j;this.$14=c;this.$15=m;this.$16=e;this.$17=n;this.$18=o;this.$19=a}var e=a.prototype;e.$20=function(a){var b=this;a=this.$4.createRequestParam(this.$2,a);var d=a.uri;a=a.http;d=d.toString();this.$5=d;a=c("oz-player/networks/OzFetchWithCache")({config:this.$14,url:d,http:a,overrideOzRequestImplementation:this.$9,options:this.$3,prefetchCache:this.$13,mediaStreamType:this.$17,onPerfEntryAvailable:function(a){b.$21(a)},dataAppendedCallback:this.$18,dataAppendedErrorCallback:this.$19});var e=a.promise;a=a.retrievedFromCache;this.$8=a;return{requestPromise:e,requestUrl:d}};e.startStream=function(a){var b=this;return this.$22().then(function(){if(b.$14.getBool("video_cdn_url_refresh")&&!d("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(b.$2.toString())&&d("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(b.$2.toString()))return c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") CDN URL expired.",responseStatus:0,responseHeaders:null,requestUrl:b.$2.toString()}));var e=b.$20(a),f=e.requestPromise,g=e.requestUrl,h=g,i=Date.now();return f.then(function(e){var f;(f=b.$15)==null?void 0:f.updateWithResponse(g,i,b.$16,e);b.$7=e;if(b.$11!=null&&e.ok===!1)return b.$11(e,function(){var d=b.$20(a),c=d.requestPromise;d=d.requestUrl;h=d;return c},h)["catch"](function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR",description:String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR,url:h}})});else return e}).then(function(a){var e=[];for(var f=0;f<b.$10.length;f++)try{var g=b.$10[f].onResponse(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}g=a.body;f=a.headers;var i=a.ok;a=a.status;if(!i)return c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") HTTP status not OK",responseStatus:a,responseHeaders:f,requestUrl:h,responseBody:typeof g==="string"?g:void 0}));typeof g!=="string"&&typeof g.getReader==="function"||c("oz-player/shims/ozvariant")(0,3287);i=g;for(a=0;a<e.length;a++)i=i.pipeThrough(e[a]);return i},function(a){var e=[];for(var f=0;f<b.$10.length;f++)try{var g=b.$10[f].onError(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}if(a instanceof TypeError){g=c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") TypeError: "+a.message,responseStatus:0,responseHeaders:null,requestUrl:h}));for(f=0;f<e.length;f++)g=g.pipeThrough(e[f]);return g}throw a})["catch"](function(a){if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR")throw a;if(a.name==="AbortError"){var b=a.message;return c("oz-player/networks/OzCreateErrorStream")({type:a.name,status:a.code,url:h,message:b})}return c("oz-player/networks/OzCreateErrorStream")({type:"stream_processing",status:0,url:h,message:"Stream processing error. "+a})})})};e.$21=function(a){this.$6=a};e.getLastPerformanceEntry=function(){if(this.$6!=null)return this.$6;return this.$5==null?null:d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(this.$5)};e.getLastRequestUrl=function(){return this.$5};e.getLastResponse=function(){return this.$7};e.retrievedFromCache=function(){return this.$8};e.$22=function(){var a=this;if(this.$14.getBool("video_cdn_url_refresh")&&!d("oz-player/utils/OzVideoUrlUtils").isShortenedExpiryTimestampCdnUrl(this.$2.toString())&&d("oz-player/utils/OzVideoUrlUtils").isCdnUrlExpired(this.$2.toString())&&this.$12)return this.$12(this.$2.toString()).then(function(b){b.refreshedUrl!=null&&b.reason==="OK"&&(a.$2=new(c("oz-player/shims/OzURI"))(b.refreshedUrl));return});else return(h||(h=b("Promise"))).resolve()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzByteRange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.startByte===b.startByte}function b(a,b){return b.endByte===null?!1:a.startByte===b.endByte+1}function c(a,b){return a.startByte<b.startByte?!1:b.endByte==null||b.endByte>=a.startByte}function d(a,b){a=a;b=b;if(b.startByte<a.startByte){var c=a;a=b;b=c}if(a.endByte==null)return{startByte:a.startByte,endByte:null};if(b.startByte>a.endByte+1)return null;c=b.endByte==null||b.endByte>a.endByte?b.endByte:a.endByte;return{startByte:a.startByte,endByte:c}}function e(a,b){if(b.endByte==null)return null;if(a.startByte>b.endByte)return{startByte:a.startByte,endByte:a.endByte};return a.endByte!=null&&a.endByte<=b.endByte?null:{startByte:b.endByte+1,endByte:a.endByte}}function g(a){return a.endByte==null?null:a.endByte-a.startByte+1}f.startsAtSame=a;f.startsImmediateAfter=b;f.startsDuring=c;f.union=d;f.disjoinAfter=e;f.getLength=g}),66);
__d("oz-player/networks/OzProducerInterruptedError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("oz-player/networks/OzDeferredBuffer",["oz-player/networks/OzProducerInterruptedError","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={});this.$2=[];this.$3=!1;this.$5=0;a=a;a=a.disableArrayShift;this.$1=!!a}var b=a.prototype;b.produce=function(a){this.$6(a)};b.signalProducerInterruption=function(){this.$6(new(c("oz-player/networks/OzProducerInterruptedError"))("producer interrupted"))};b.consume=function(a){var b=this;if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"A buffer can only be consumed by one client at a time"});this.$3=!0;var e=c("oz-player/shims/OzMaybeNativePromise").resolve();this.isEmpty()&&(this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=this.$4.getPromise());return e.then(function(){if(b.$1){if(b.$2[b.$5]===void 0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer has no value at position "+b.$5})}else if(b.$2.length===0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer length must not be 0"});b.$4=null;b.$3=!1;var c=b.$1?b.$7(a):b.$8(a);if(c instanceof Uint8Array)return c;throw c})};b.$6=function(a){this.$2.push(a),this.$4&&this.$4.resolve()};b.$7=function(a){var b=this.$2[this.$5];if(b===void 0)return new Uint8Array([]);b=b;if(!(b instanceof Uint8Array)){this.$2[this.$5]=void 0;this.$5++;return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[this.$5]=c}else this.$2[this.$5]=void 0,this.$5++;return b};b.$8=function(a){if(this.$2.length===0)return new Uint8Array([]);var b=this.$2[0];if(!(b instanceof Uint8Array)){this.$2.shift();return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[0]=c}else this.$2.shift();return b};b.isEmpty=function(){return this.$1?this.$2[this.$5]===void 0:this.$2.length===0};return a}();g["default"]=a}),98);
__d("oz-player/utils/ozPipeErrorTo",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){try{a==null?void 0:a.error(b)}catch(a){}}f["default"]=a}),66);
__d("oz-player/networks/OzPausableRangeStream",["oz-player/manifests/OzByteRange","oz-player/networks/OzDeferredBuffer","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/ozPipeErrorTo"],(function(a,b,c,d,e,f,g){"use strict";function h(){return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Upstream has an inconsistent range"})}var i=function(){function a(){this.$1=0}var b=a.prototype;b.setBytesToSkip=function(a){this.$1=a};b.setBytesSkipped=function(a){this.$1-=a};b.getBytesToSkip=function(){return this.$1};b.hasMoreBytesToSkip=function(){return this.$1>0};return a}();a=function(){function a(b,d,e,f,g){var j=this;this.$5=!1;this.$7=0;this.$8=0;this.$13=!1;this.$14=new i();this.$15=!1;this.$16=!1;this.$17=!1;this.startStream=function(){j.$13=!0;var b={startByte:j.$1.startByte,endByte:j.$1.endByte};!j.$15?b.startByte+=j.$8:j.$8&&(j.$3.produce("skip_buffered_bytes"),j.$8=0);var d=j.$4;return j.$2.startStream(b).then(function(b){b.pipeTo(j.$16?d:j.$4).then(function(){j.$12&&j.$12.resolve("stream_done")})["catch"](function(b){j.$12&&!j.$12.isSettled()&&(j.$16&&b===a.STREAM_PAUSED?j.$12.resolve("stream_paused"):j.$12.reject(b))});j.$12=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));return{statusPromise:j.$12.getPromise()}})};this.$18=b;this.$19=d;this.$1=e;this.$2=f;b=g||{};d=b.fixStreamingUndefinedEndByte;e=b.disableDeferredBufferArrayShift;f=b.enablePausableStreamResumeFromStartDangerously;g=b.fixPausePreReadableStream;b=b.throwErrorWhenAborted;this.$11=!!d;this.$15=!!f;this.$16=!!g;this.$17=!!b;this.$3=new(c("oz-player/networks/OzDeferredBuffer"))({disableArrayShift:!!e});this.$6=new this.$18({start:function(a){j.$10=a},pull:function(a){if((j.$11&&j.$1.endByte===null&&j.$5||j.$7===j.$20())&&j.$3.isEmpty()){a.close();return c("oz-player/shims/OzMaybeNativePromise").resolve()}var b=function b(){var d=j.$14.hasMoreBytesToSkip()?j.$14.getBytesToSkip():void 0;return j.$3.consume(d).then(function(d){if(j.$14.hasMoreBytesToSkip()){j.$14.setBytesSkipped(d.length);return b()}j.$7+=d.length;var e=j.$20();e!==null&&j.$7>(e||0)&&c("oz-player/utils/ozPipeErrorTo")(j.$10,h());a.enqueue(d)})["catch"](function(a){if(a==="skip_buffered_bytes"){j.$14.setBytesToSkip(j.$7);return b()}throw a})};return b()},cancel:function(a){j.$12&&j.$12.resolve("stream_cancelled"),c("oz-player/utils/ozPipeErrorTo")(j.$9,a)}});this.$4=this.$21()}var b=a.prototype;b.$20=function(){var a=this.$1,b=a.startByte;a=a.endByte;return a!=null?a-b+1:null};b.$21=function(){var a=this;return new this.$19({start:function(b){a.$9=b},write:function(b){a.$3.produce(b),a.$8+=b.length},close:function(){a.$5=!0;var b=a.$1,d=b.endByte;b=b.startByte;a.$11&&d===null&&a.$3.produce(new Uint8Array([]));d!==null&&a.$8!==(d||0)-b+1&&c("oz-player/utils/ozPipeErrorTo")(a.$10,h())},abort:function(b){a.$12&&(a.$17?a.$12.reject(b):a.$12.resolve("stream_aborted")),c("oz-player/utils/ozPipeErrorTo")(a.$10,b)}})};b.getStream=function(){return this.$6};b.pauseStream=function(){c("oz-player/utils/ozPipeErrorTo")(this.$9,a.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$4=this.$21()};b.getByteRange=function(){return this.$1};b.getBytesStreamed=function(){return this.$7};b.tryConcatByteRange=function(a){if(this.$13||!d("oz-player/manifests/OzByteRange").startsImmediateAfter(a,this.$1))return!1;this.$1={startByte:this.$1.startByte,endByte:a.endByte};return!0};return a}();a.STREAM_PAUSED="streamPaused";g["default"]=a}),98);
__d("oz-player/networks/RequestParamCreator",["oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){var d=this;this.createRequestParam=function(a,b){var e=new(c("oz-player/shims/OzURI"))(a.toString());if(b){a=b.startByte;var f=b.endByte;a===0&&f==null||(e.addQueryData({bytestart:b.startByte}),f!=null&&e.addQueryData({byteend:f}))}if(d.$2){var g=d.$2(e);g&&Object.keys(g).forEach(function(a){var b=g[a];e.addQueryData(a,b)})}a=d.$1&&d.$1(e)?"include":"same-origin";return{uri:e,http:{credentials:a}}};this.$1=a;this.$2=b};g["default"]=a}),98);
__d("oz-player/networks/getOzSegmentStreamableRange",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(!a.length)return null;var b=a[0].getURI().toString(),c=a[0].getByteRange();if(!c)return null;var d=c;for(var e=1;e<a.length;e++){var f=a[e];if(f.getURI().toString()!==b)return null;f=f.getByteRange();if(!d||!f)return null;if(d.endByte===null||f.startByte!==d.endByte+1)return null;d=f}return{startByte:c.startByte,endByte:d.endByte}}f["default"]=a}),66);
__d("oz-player/utils/OzNetworkRequestLoggingUtils",["oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a?parseInt(a.get("content-length"),10):null},i=function(a){return a?a.get("x-fb-fna-hit"):null},j=function(a){return a?a.get("x-fb-edge-hit"):null},k=function(a){return a?a.get("x-fb-origin-hit"):null},l=function(a){return a?parseInt(a.get("x-fb-dynamic-latest-segment-id"),10):null},m=function(a,b){b=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);b&&a.setTimeToFirstByte(Math.round(b.responseStart-b.startTime)).setTimeToLastByte(Math.round(b.responseEnd-b.startTime)).setTimeToRequestStart(Math.round(b.requestStart-b.startTime))};a=function(a,b,d,e,f,g){d.length&&a.setSegmentCount(d.length),b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setInitiator("fetch").setTimeToRequestSent(Math.round(Math.floor(e))).setLiveheadSeqNumHeader(l(g==null?void 0:g.headers)).setContentLengthHeader(h(g==null?void 0:g.headers)).setEdgeHitHeader(j(g==null?void 0:g.headers)).setOriginHitHeader(k(g==null?void 0:g.headers)).setFNAHitHeader(i(g==null?void 0:g.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(g==null?void 0:g.headers)).setUserInfo({segmentPTSHeader:String(c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(g==null?void 0:g.headers))}).setCode(g==null?void 0:g.status).setLength(f)};b=function(a,b,d,e,f,g,i){b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setLiveheadSeqNumHeader(l(e==null?void 0:e.headers)).setContentLengthHeader(h(e==null?void 0:e.headers)).setEdgeHitHeader(j(e==null?void 0:e.headers)).setOriginHitHeader(k(e==null?void 0:e.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(e==null?void 0:e.headers)).setCode(e==null?void 0:e.status).setLength(d).setClientTimeBegin(f).setClientTimeDuration(g-f).setClientTimeEnd(g).setUserInfo(i!=null&&i>0?{chunkSize:String(i)}:null)};g.setPerformanceLoggingAttributes=m;g.setFetchStreamLoggingAttributes=a;g.setBandwidthSampledLoggingAttributes=b}),98);
__d("oz-player/networks/OzNetworkManager",["oz-player/loggings/OzLoggingUtils","oz-player/networks/OzNetworkRequestStream","oz-player/networks/OzPausableRangeStream","oz-player/networks/RequestParamCreator","oz-player/networks/getOzSegmentStreamableRange","oz-player/shims/OzStreams","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$10=null;var b=a.config,d=a.prefetchCache,e=a.networkRequestStreamHandlers,f=a.getOverrideOzRequestImplementation,g=a.getShouldIncludeCredentials,h=a.getCustomRequestParametersForURI,i=a.networkRequestStreamRetryHandler,j=a.networkRequestUrlRefreshHandler,k=a.setCustomFetchStreamLoggingAttributes,l=a.dynamicVideoLibrary,m=a.configureCustomRequestParametersForSegment,n=a.onResourceTimingBufferFull;a=a.bandwidthEstimator;this.$2=b;this.$8=g;this.$9=h;this.$1=new(c("oz-player/networks/RequestParamCreator"))(this.$8,this.$9);this.$3=d;this.$4=e;this.$5=i;this.$6=j;this.$7=f;this.$10=k;this.$11=l;this.$12=m;this.$13=n;this.$14=a}var b=a.prototype;b.destroy=function(){};b.request=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.requestOptions,h=a.mediaStreamType,i=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var j=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},k=this.$7?this.$7():null,l=this.$15(d[0]);b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:l,baseUriDecisionTime:null,options:g,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,mediaStreamType:h,dataAppendedCallback:i,dataAppendedErrorCallback:a});return this.$16(j,b,e,f,d)};b.createPausableStream=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.mediaStreamType,h=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var i=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},j=null,k=this.$2.getNumber("network_seg_timeout_ms");k>0&&(j={networkTimeoutMs:k});k=this.$7?this.$7():null;var l=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:this.$15(d[0]),baseUriDecisionTime:d[0].getOptions().getSegmentNumDecisionTime(),options:j,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:g,dataAppendedCallback:h,dataAppendedErrorCallback:a});return{pausableStream:this.$17(i,l,e||null,f),loggingPayloads:{getRequestUrl:function(){return l.getLastRequestUrl()||null},segments:d,getResponse:function(){return l.getLastResponse()}}}};b.requestRawUrl=function(a){var b=a.debugName,d=a.url,e=a.options;a=a.loggerProvider;var f=this.$7?this.$7():null;b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:new(c("oz-player/shims/OzURI"))(d),baseUriDecisionTime:null,options:e,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,networkRequestUrlRefreshHandler:this.$6,overrideOzRequestImplementation:f,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$11,mediaStreamType:null,dataAppendedCallback:null,dataAppendedErrorCallback:null});d={startByte:0,endByte:null};return this.$16(d,b,[],a)};b.$17=function(a,b,e,f){b=b;if(e!=null)for(var g=0;g<e.length;g++){var h=e[g];b=h(this.$2,b,f,this.$13)}return new(c("oz-player/networks/OzPausableRangeStream"))(d("oz-player/shims/OzStreams").OzReadableStream,d("oz-player/shims/OzStreams").OzWritableStream,a,b,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,throwErrorWhenAborted:!0})};b.$16=function(a,b,c,e,f){var g=this;f===void 0&&(f=[]);var h=this.$17(a,b,c,e);a=h.startStream();var i=this.$18(a);if(e){c=function(a){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(a,b.getLastRequestUrl(),f,0,h.getBytesStreamed(),b.getLastResponse());var c=g.$10;c&&c(a,b.getLastRequestUrl(),b.getLastResponse())};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,e,"fetch_stream",c,c)}return{getStream:function(){return h.getStream()},cancel:function(){return h.pauseStream()},getStatusChangePromise:function(){return i}}};b.$18=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return"done"})})};b.$15=function(a){var b=this.$12,d=new(c("oz-player/shims/OzURI"))(a.getURI().toString());if(b){var e=b(a);e&&Object.keys(e).forEach(function(a){var b=e[a];d.addQueryData(a,b)})}return d};b.getBandwidthEstimator=function(){return this.$14};a.getStreamableSegmentsRange=function(a){if(!a.length)return[];return!c("oz-player/networks/getOzSegmentStreamableRange")(a)?[a[0]]:a.slice(0)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/Mpd",["oz-player/shims/OzEventEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i){var j;j=a.call(this)||this;j.$Mpd$p_9=!1;j.$Mpd$p_1=b;j.$Mpd$p_5=g;j.$Mpd$p_2=c;j.$Mpd$p_3=d;j.$Mpd$p_4=e;j.$Mpd$p_6=f;j.$Mpd$p_7=h;j.$Mpd$p_8=i;return j}var c=b.prototype;c.markRefreshed=function(){this.$Mpd$p_10=Date.now()};c.getRefreshDate=function(){return this.$Mpd$p_10};c.updateLocation=function(a){this.$Mpd$p_6=a,this.$Mpd$p_9=!0,this.emit("locationUpdated")};c.getLocation=function(){return this.$Mpd$p_6};c.getMinimumUpdatePeriod=function(){return this.$Mpd$p_5};c.getVideoRepresentations=function(){return this.$Mpd$p_2};c.getVideoRepresentationsByVariant=function(a){return a.lang===null?this.$Mpd$p_2.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role}):this.$Mpd$p_2.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role})};c.getAudioRepresentationsByVariant=function(a){return a.lang===null?this.$Mpd$p_3.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role}):this.$Mpd$p_3.filter(function(b){return b.getLang()===a.lang&&b.getRole()===a.role})};c.getAudioRepresentations=function(){return this.$Mpd$p_3};c.getApplicationRepresentations=function(){return this.$Mpd$p_4};c.getCustomField=function(a){var b=this.$Mpd$p_7.get(a);if(!b)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"Custom parser not specified for field "+a});try{return b(this.$Mpd$p_1)}catch(a){return null}};c.isStaticMpd=function(){return this.$Mpd$p_8};c.updateWith=function(a){this.$Mpd$p_9&&(this.$Mpd$p_9=!1,this.$Mpd$p_2.splice(0,this.$Mpd$p_2.length),this.$Mpd$p_3.splice(0,this.$Mpd$p_3.length),this.$Mpd$p_4.splice(0,this.$Mpd$p_4.length)),this.$Mpd$p_1=a.$Mpd$p_1,this.$Mpd$p_11(this.$Mpd$p_2,a.getVideoRepresentations()),this.$Mpd$p_11(this.$Mpd$p_3,a.getAudioRepresentations()),this.$Mpd$p_11(this.$Mpd$p_4,a.getApplicationRepresentations()),this.$Mpd$p_8=a.isStaticMpd(),this.$Mpd$p_5=a.getMinimumUpdatePeriod(),this.emit("updated")};c.blockTimeRange=function(a){this.$Mpd$p_2.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_3.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_4.forEach(function(b){return b.blockTimeRange(a)})};c.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})};c.$Mpd$p_11=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(d.getID()===g.getID()){g.updateWith(d);e=!0;break}}e||a.push(d)}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/manifests/OzApplicationRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/manifests/OzSegmentOptions","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$3=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$2=a,this.$1=b}var b=a.prototype;b.getData=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return null};b.getURI=function(){return this.$2};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$3};return a}();a=function(){function a(a,b,d,e,f){this.$2=d,this.$1=b,this.$3=a,e?this.$4=e:this.$4=new(c("oz-player/parsers/OzDefaultSegmentTimelineParser"))(),this.$5=f}var b=a.prototype;b.parseInitializationSegment=function(){var a=d("oz-player/utils/OzUrlHelper").joinUrlPaths(this.$2.baseUrl,this.$1.$.initialization);return new h(new(c("oz-player/shims/OzURI"))(a),this.$5)};b.parseSegmentsContainer=function(){return this.$4.parseSegmentsContainer(this.$3,this.$2,this.$1)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzZeroTimeRangeSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$4=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$4};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/networks/OzTransformStream","oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";b=function(){function b(b){var d=this;this.$8=Date.now();this.$9=Date.now();this.$10=0;this.$11=0;this.$12=function(){};this.$13=function(){};this.$14=function(){};this.$16=new(c("oz-player/networks/OzTransformStream"))();this.$19=!1;this.$20=!1;this.$21=null;this.$22=function(a){d.$25();a.length!=null&&(d.$11+=a.length);d.$26();if(d.$18)return;d.$27()};this.$23=function(){if(d.$21!=null&&d.$21>0)return;var b=Date.now()-d.$8,c=d.$1.getLastPerformanceEntry();c&&d.$13(c.responseStart-c.requestStart,c.responseEnd-c.requestStart,d.$11);!c&&a.__isresourcetimingbufferfull&&d.$15&&d.$15();d.$3>0&&b>0&&d.$10===0&&d.$11>=d.$3&&d.$28(d.$11,b)};var e=b.stream,f=b.loggerProvider,g=b.byteCountPerSample,h=b.minimumBytesToSampleOnClose,i=b.minimumSampleDuration,j=b.maximumSampleBandwidth,k=b.useResponseTimeMs,l=b.responseTimeHandicapMs,m=b.ignoreOnStreamWriteSamples;b=b.onResourceTimingBufferFull;this.$1=e;this.$17=f;this.$2=g;this.$3=h;this.$4=i;this.$5=j;this.$6=k;this.$7=l;this.$18=m;this.$16.addListener("writableWrite",this.$22);this.$16.addListener("writableClose",this.$23);this.$15=b}var e=b.prototype;e.getTransformStream=function(){return this.$16};e.onBandwidthSample=function(a){this.$12=a};e.onNavigationTimingSample=function(a){this.$13=a};e.onEstimateFromHeaders=function(a){this.$14=a};e.$24=function(a,b,c){b=b-c;c=this.$17?this.$17.getOperationLogger("bandwidth_sampled"):null;if(c){var e=Date.now(),f=e-b;d("oz-player/utils/OzNetworkRequestLoggingUtils").setBandwidthSampledLoggingAttributes(c,this.$1.getLastRequestUrl(),a,this.$1.getLastResponse(),f,e,this.$21);c.log()}this.$12(a,b)};e.$29=function(a,b,c){if(b-c<=0)return!0;c=a*8/(b/1e3);return b<this.$4&&c>this.$5};e.$28=function(a,b){var d=this.$1.getLastResponse();d=this.$6?c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(d==null?void 0:d.headers)||0:0;this.$29(a,b,d)||this.$24(a,b,Math.max(d-this.$7,0))};e.$25=function(){var a;a=(a=this.$1.getLastResponse())==null?void 0:a.headers;if(this.$20||a==null)return;this.$20=!0;a=c("oz-player/shims/OzNetworkDiagnostics").getBandwidthMeanEstimate(a);a!=null&&this.$14(a)};e.$26=function(){if(this.$19)return;if(this.$21==null){var a=this.$1.getLastResponse();this.$21=c("oz-player/shims/OzNetworkDiagnostics").getUsableResponseSizeForBandwidthEstimation(a==null?void 0:a.headers)||0}this.$21!=null&&this.$21>0&&this.$11>=this.$21&&(this.$19=!0,this.$28(this.$11,Date.now()-this.$9))};e.$27=function(){var a=Date.now(),b=a-this.$8;this.$2>0&&this.$11>=this.$10+this.$2&&!this.$29(this.$11,b,0)&&(this.$24(this.$11-this.$10,b,0),this.$8=a,this.$10=this.$11)};return b}();g["default"]=b}),98);
__d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator",["oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(a,b,c,d,e,f,g){"use strict";var h=2e5;function a(a,b,d,e,f){return{startStream:function(g){var i=new(c("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:b,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",h),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",25e3),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",10),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",1e8),useResponseTimeMs:a.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:a.getNumber("bandwidth_response_time_handicap",0),ignoreOnStreamWriteSamples:a.getBool("bandwidth_ignore_on_stream_write_samples",!1),onResourceTimingBufferFull:f});i.onBandwidthSample(function(a,b){e.addBandwidthSample(a,b)});i.onNavigationTimingSample(function(b,c,d){var f=a.getNumber("time_to_first_byte_ignore_above_threshold_ms",0);(f===0||b<=f)&&e.addNavigationTimingSample(b,c,d)});i.onEstimateFromHeaders(function(a){e.setBandwidthEstimateFromHeaders({meanEstimate:a})});return b.startStream(g).then(function(a){return b.retrievedFromCache()?a:a.pipeThrough(i.getTransformStream())})}}}g.pipeStreamThroughBandwidthEstimator=a}),98);
__d("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter",["oz-player/networks/OzNetworkRequestStream","oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return function(e,f,g,h){var i=a==="video";return f instanceof c("oz-player/networks/OzNetworkRequestStream")&&i?d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator").pipeStreamThroughBandwidthEstimator(e.getLegacyConfig(),f,g,b,h):f}}g["default"]=a}),98);
__d("oz-player/manifests/OzDataSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f){this.$6=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d,this.$4=e,this.$5=f}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}};b.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$6};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzDataViewReaderWWW",["DataViewReader"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("DataViewReader")}),98);
__d("oz-player/shims/OzDataViewReader",["oz-player/shims/www/OzDataViewReaderWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDataViewReaderWWW")}),98);
/**
 * License: https://www.facebook.com/legal/license/Vkd8AdLnKqZ/
 */
__d("oz-player/parsers/OzMp4SidxParser",["oz-player/manifests/OzDataSegment","oz-player/manifests/OzSegmentOptions","oz-player/shims/OzDataViewReader","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=1936286840;function a(a,b,e,f){var g=new(c("oz-player/shims/OzDataViewReader"))(new DataView(f.buffer));f=g.readUint32();var i=g.readUint32();if(i!==h)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:'Invalid box type, expected "sidx".'});f==1&&(f=g.readUint64());i=g.readUint8();g.skip(3);g.skip(4);var j=g.readUint32();if(!j)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Invalid timescale."});var k;i==0?(i=g.readUint32(),k=g.readUint32()):(i=g.readUint64(),k=g.readUint64());g.skip(2);var l=g.readUint16(),m=i,n=e+f+k,o=0,p=a.getBool("sidx_parser_memory_optimization"),q=[];i=function(a){var e=g.readUint32(),f=(e&2147483648)>>>31;e=e&2147483647;var h=g.readUint32();g.readUint32();if(f==1)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Heirarchical SIDXs are not supported."});var i=m/j,k=(m+h)/j;a===0&&(o=i);var l=n,r=l+e-1,s=new(c("oz-player/manifests/OzSegmentOptions"))();q.push(p?new(c("oz-player/manifests/OzDataSegment"))(b,i-o,k-o,l,r):{getData:function(){return null},getURI:function(){return b},getTimeRange:function(){return{startTime:i-o,endTime:k-o}},getByteRange:function(){return{startByte:l,endByte:r}},getSequenceNumber:function(){return null},getOptions:function(){return s}});m+=h;n+=e};for(e=0;e<l;e++)i(e);return q}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsContainer",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getSegmentByTime=function(a){var b=this.$1();for(var c=0;c<b.length;c++){var d=b[c],e=d.getTimeRange();if(e.startTime<=a&&e.endTime>a)return d}return null};b.getSegmentAfter=function(a){var b=this.$1(),c=b.findIndex(function(b){return b.getTimeRange().startTime===a.getTimeRange().startTime&&b.getTimeRange().endTime===a.getTimeRange().endTime});return c>=0&&c+1<b.length?b[c+1]:null};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.canApproximateId=function(){return!1};b.isEndingSegment=function(a){var b=this.$1();if(!b||!b.length)return!1;b=b[b.length-1].getTimeRange();a=a.getTimeRange();return b.startTime===a.startTime&&b.endTime===a.endTime};b.getSegment=function(a){return this.$1()[a]||null};b.updateWith=function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: updatedWith"})};b.addUpdateListener=function(a){return this.$2.addListener("segment_updated",a)};b.getTimeRanges=function(){var a=this.$1();if(a.length===0)return[];else{var b=a[0];a=a[a.length-1];return[{startTime:b.getTimeRange().startTime,endTime:a.getTimeRange().endTime}]}};b.blockTimeRange=function(){};b.getEndingSegment=function(){var a=this.$1();return a.length>0?a[a.length-1]:null};b.getMaxGopSec=function(){return null};return a}();g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/Vkd8AdLnKqZ/
 */
__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";var h=440786851,i=408125543,j=357149030,k=2807729,l=17545,m=475249515,n=187,o=179,p=183,q=241,r=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function s(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}var t=function(){function a(a,b){this.id=a,this.$1=b}var b=a.prototype;b.getOffset=function(){return this.$1.byteOffset};b.createParser=function(){return new u(this.$1)};b.getUint=function(){if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};b.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};return a}(),u=function(){function a(a){this.$1=a,this.$2=new(c("oz-player/shims/OzDataViewReader"))(this.$1)}var b=a.prototype;b.hasMoreData=function(){return this.$2.hasMoreData()};b.parseElement=function(){var b=this.$3(),c=this.$4(),d;a.$5(c)?d=this.$1.byteLength-this.$2.getCursor():d=a.$6(c);c=this.$2.getCursor()+d<=this.$1.byteLength?d:this.$1.byteLength-this.$2.getCursor();d=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),c);this.$2.skip(c);return new t(b,d)};b.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};b.$4=function(){var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");c=new Uint8Array(b);c[0]=a;for(a=1;a<b;a++)c[a]=this.$2.readUint8();return c};a.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};a.$5=function(a){for(var b=0;b<r.length;b++)if(s(a,r[b]))return!0;return!1};return a}();function v(a){a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==k?b=d.getUint():d.id==l&&(c=d.getFloat())}if(c==null)return null;d=b/1e9;a=c*d;return{timecodeScale:d,duration:a}}function w(a,b,d,e,f,g){a=[];b=b.createParser();var h=-1,i=-1;while(b.hasMoreData()){var j=b.parseElement();if(j.id!=n)continue;j=x(j);if(!j)continue;var k=e*j.unscaledTime;j=d+j.relativeOffset;h>=0&&(i>=0||c("oz-player/shims/ozvariant")(0,4010),a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,j-1)));h=k;i=j}if(h>=0){i>=0||c("oz-player/shims/ozvariant")(0,4010);k=f;a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,null))}return a}function x(a){a=a.createParser();var b=a.parseElement();if(b.id!=o)return null;b=b.getUint();a=a.parseElement();if(a.id!=p)return null;a=a.createParser();var c=0;while(a.hasMoreData()){var d=a.parseElement();if(d.id!=q)continue;c=d.getUint();break}return{unscaledTime:b,relativeOffset:c}}function y(a){a=a.createParser();var b=null;while(a.hasMoreData()){var c=a.parseElement();if(c.id!=j)continue;b=c;break}return!b?null:v(b)}function z(a){a=new u(a);var b=a.parseElement();if(b.id!=h)return null;b=a.parseElement();if(b.id!=i)return null;a=b.getOffset();b=y(b);return!b?null:{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}}function a(a,b,c,d){d=new DataView(d.buffer);c=new DataView(c.buffer);d=z(d);if(!d)return[];c=new u(c);c=c.parseElement();return c.id!=m?[]:w(a,c,d.segmentOffset,d.timecodeScale,d.duration,b)}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzSegmentOptions","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzSidxSegmentsContainer","oz-player/parsers/OzWebmSidxParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.split("-");return{startByte:Number.parseInt(a[0],10),endByte:Number.parseInt(a[1],10)}}a=function(){function a(a,b,d,e,f,g,h){this.$6=new(c("oz-player/utils/OzErrorEmitter"))(),this.$7=[],this.$9=new(c("oz-player/shims/OzEventEmitter"))(),this.$1=b,this.$2=new(c("oz-player/shims/OzURI"))(d),this.$3=e,this.$5=f,this.$4=g,this.$8=h.cloneContext().setType(f==="video"||f==="audio"?f+";sidx":"sidx"),this.$10=a}var b=a.prototype;b.onError=function(a){return this.$6.onError(a)};b.parseInitializationSegment=function(){var a=this,b=this.$1.Initialization[0].$.range,d=h(b),e=new(c("oz-player/manifests/OzSegmentOptions"))();return this.$10.getBool("sidx_parser_memory_optimization")?new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(this.$2,d.startByte,d.endByte):{getData:function(){return null},getURI:function(){return a.$2},getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return d},getSequenceNumber:function(){return null},getOptions:function(){return e}}};b.parseSegmentsContainer=function(){var a=this,b=this.$11();d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$8,"process_sidx");b["catch"](function(b){a.$6.emitError(b)});return new(c("oz-player/parsers/OzSidxSegmentsContainer"))(function(){return a.$7},this.$9)};b.$12=function(a,b,e){a=new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(a,b.startByte,b.endByte);b=this.$5+";sidx";a=this.$4.request({debugName:"OzSidxSegmentsParser/sidx/"+this.$5,segments:[a],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(b,this.$4.getBandwidthEstimator())],loggerProvider:this.$8,requestOptions:{networkTimeoutMs:null,retryAttempts_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_attempts"),retryTimeoutMs_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_interval_ms")},mediaStreamType:e});b=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpAllData(b)};b.$11=function(){var a=this,b=this.$1.$.indexRange,e=h(b);b=[this.$12(this.$2,e,null)];if(this.$3==="webm"){var f=h(this.$1.Initialization[0].$.range);b.push(this.$12(this.$2,f,null));f=c("oz-player/shims/OzMaybeNativePromise").all(b).then(function(b){var c=b[0];b=b[1];a.$7=d("oz-player/parsers/OzWebmSidxParser").parse(a.$10,a.$2,c,b)})}else f=b[0].then(function(b){a.$7=d("oz-player/parsers/OzMp4SidxParser").parse(a.$10,a.$2,e.startByte,b)});return f.then(function(){a.$9.emit("segment_updated")})};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzVideoContainerType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[1]||"").trim()}f.parse=a}),66);
__d("oz-player/parsers/OzRepresentationParserBase",["oz-player/manifests/OzRepresentationBase","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h,i,j,k,l,m,n,o,p){this.$9=new(c("oz-player/utils/OzErrorEmitter"))();this.$1=b;this.$2=d;this.$10=f;this.$11=g;this.$13=e;this.$14=a;this.$15=h;this.$3=i;this.$4=j;this.$5=k;this.$6=(b=l)!=null?b:null;this.$7=(d=m)!=null?d:null;this.$8=(f=n)!=null?f:null;this.$16=o;this.$17=p;try{this.$11=this.$11.cloneContext().setRepresentationID(this.parseID())}catch(a){}}var b=a.prototype;b.$18=function(){var a=this,b=this.$12;if(b)return b;if(this.$1.SegmentBase){var e=this.$1.SegmentBase[0],f=this.$1.BaseURL[0]._;if(typeof f!=="string")throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing representation BaseURL",extra:{code:"OZ_RP-9"}});b=new(c("oz-player/parsers/OzSidxSegmentsParser"))(this.$14,e,f,d("oz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),d("oz-player/utils/OzMimeUtil").getMimeType(this.$1.$.mimeType),this.$10,this.$11);b.onError(function(b){var c;if((c=a.$17)==null?void 0:c.handleError(a.parseID(),b))return;return a.$9.emitError(b)})}else if(this.$1.SegmentTemplate)b=this.$19(this.$1.SegmentTemplate[0],{isShared:!1});else if(this.$3)b=this.$19(this.$3[0],{isShared:!0});else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type",extra:{code:"OZ_RP-7"}});this.$12=b;return b};b.$19=function(a,b){var e;a=a;b.isShared&&(a=babelHelpers["extends"]({},a,{$:babelHelpers["extends"]({},a.$,{initialization:a.$.initialization.replace("$RepresentationID$",this.$1.$.id),media:a.$.media.replace("$RepresentationID$",this.$1.$.id)})}));b=this.$13.mpdUrl;var f=this.$1.BaseURL&&this.$1.BaseURL[0]?this.$1.BaseURL[0]._:null;f=f!=null?f:b;if(f==null)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest",extra:{code:"OZ_RP-6"}});var g=this.$13.customSegmentTimelineParser;e=(e=this.$13.customRepresentationParsers)==null?void 0:e.initializationBinary;e=e?e(this.$1):null;return new(c("oz-player/parsers/OzSegmentTemplateParser"))(this.$14,a,{baseUrl:f,mpdUrl:b,isStaticMpd:this.$15.manifestType==="static",isTemplatedMpd:this.$15.manifestIsTemplated},g,e)};b.onError=function(a){return this.$9.onError(a)};b.parseInitSegment=function(){return this.$18().parseInitializationSegment()};b.parseBandwidth=function(){return Number(this.$1.$.bandwidth)};b.parseMimeType=function(){var a;return(a=(a=this.$1.$.mimeType)!=null?a:this.$4)!=null?a:""};b.parseCodecs=function(){var a;return(a=(a=this.$1.$.codecs)!=null?a:this.$5)!=null?a:""};b.parseVariantKey=function(){return this.$6};b.parseLang=function(){return this.$7};b.parseRole=function(){return this.$8};b.parseSegmentsContainer=function(){return this.$18().parseSegmentsContainer()};b.parseID=function(){return""+this.$1.$.id};b.parseCustomFieldFirstSegment=function(){var a=this.$13.customRepresentationParsers?this.$13.customRepresentationParsers.firstSegmentParser:null;return a?a(this.$1):null};b.parse=function(){return new(c("oz-player/manifests/OzRepresentationBase"))(this.$1,this.$2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$13.customRepresentationParsers)};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzApplicationRepresentationParser",["oz-player/manifests/OzApplicationRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o)||this;b.$OzApplicationRepresentationParser$p_1=c;b.$OzApplicationRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=this.$OzApplicationRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzApplicationRepresentation"))(this.$OzApplicationRepresentationParser$p_1,this.$OzApplicationRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/manifests/OzAudioRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;b.$OzAudioRepresentation$p_1=d;b.$OzAudioRepresentation$p_2=l;b.$OzAudioRepresentation$p_3={id:d,displayLabel:b.getDisplayLabel(),mimeCodecs:b.getMimeCodecs(),variantKey:g,lang:h,role:i};return b}var c=b.prototype;c.getBitrateKbps=function(){var a=1024;return(this.$OzAudioRepresentation$p_2/a).toFixed(1)+"Kbps"};c.getDisplayLabel=function(){var b=a.prototype.getLang.call(this),c=a.prototype.getRole.call(this);b=b==null?"Default":b;return c==null?b:b+" - "+c};c.getAudioTrack=function(){return this.$OzAudioRepresentation$p_3};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzAudioRepresentationParser",["oz-player/manifests/OzAudioRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o)||this;b.$OzAudioRepresentationParser$p_1=c;b.$OzAudioRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=this.$OzAudioRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzAudioRepresentation"))(this.$OzAudioRepresentationParser$p_1,this.$OzAudioRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p)||this;b.$OzVideoRepresentationParser$p_1=c;b.$OzVideoRepresentationParser$p_2=d;b.$OzVideoRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.height,10),b=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.width,10),d=this.$OzVideoRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser$p_1,this.$OzVideoRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseVariantKey(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),d,b,a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/utils/OzIbrUtils",["oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(b.getLegacyConfig());a=a.slice(0);a.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});b=b.getNumber("live_audio_ibr_bandwidth_percentage");b=e*b;for(var f=a.length-1;f>=0;f--)if(a[f].getBandwidth()<=b){d.getOperationLogger("audio_ibr_success").setRepresentationID(a[f].getID()).setReason(e.toString()).log();return a[f]}d.getOperationLogger("audio_ibr_no_op").setReason(e.toString()).log();return null};g.getInitialAudioRepresentation=a}),98);
__d("oz-player/parsers/OzMpdParser",["oz-player/manifests/Mpd","oz-player/parsers/OzApplicationRepresentationParser","oz-player/parsers/OzAudioRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.blockedRepresentationsManager,d=a.config,e=a.drmManager,f=a.enableAlternativeAudioTracks,g=a.initialRepresentationIDs,h=a.networkManager,i=a.ozParserContext;a=a.perfLoggerProvider;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=d;this.$1=h;this.$3=a;this.$4=i;this.$6=e;this.$7=(d=g)!=null?d:[];this.$8=(h=b)!=null?h:null;this.$9=f;this.$10=!0}var b=a.prototype;b.onError=function(a){return this.$2.onError(a)};b.parse=function(a){var b=this,e=[];a=a;var f=this.$4.createXmlParser().parse(a);f=f.MPD&&f.MPD.length>0?f.MPD[0]:null;if(!f){var g=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing MPD node; truncated xml ("+Math.min(g,a.length)+"/"+a.length+"): "+a.substring(0,g)})}g=f.Period&&f.Period.length>0?f.Period[0]:null;if(!g){var h=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing Period node; truncated xml ("+Math.min(h,a.length)+"/"+a.length+"): "+a.substring(0,h)})}a=g.AdaptationSet||[];h=this.$11(f);this.$10=h==="static";g=this.$12(f);var i=this.$13(this.$14(a,"video"),{manifestType:h,manifestIsTemplated:g},e),j;this.$9?j=this.$15(this.$14(a,"audio"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}):j=this.$16(this.$17(a,"audio"),c("oz-player/parsers/OzAudioRepresentationParser"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});var k=[];if(this.$5.getBool("vtt_caption_representation")){a=this.$14(a,"application");k=this.$16(a[0],c("oz-player/parsers/OzApplicationRepresentationParser"),{manifestType:h,manifestIsTemplated:g},e)}a=this.$4.mpdUrl;h=new(c("oz-player/manifests/Mpd"))(f,i,j,k,a,this.$18(f),this.$4.customParsers||new Map(),this.$10);if(this.$6){g=this.$6;g.startEME(i,j)}e.forEach(function(a){a.onError(b.$2.emitError)});return h};b.$18=function(a){a=a.$.minimumUpdatePeriod||"";a=/\d+/g.exec(a);if(a&&a.length){a=a[0];return a?Number.parseInt(a,10):null}return null};b.$11=function(a){return a.$.type||"static"};b.$12=function(a){var b;b=(b=this.$4.customParsers)==null?void 0:b.get("isLiveTemplated");if(!b)return!1;b=b(a);return typeof b==="boolean"&&b};b.$17=function(a,b){return a.find(this.$19(b))};b.$14=function(a,b){return a.filter(this.$19(b))};b.$19=function(a){return function(b){if(b.$.mimeType!=null)return b.$.mimeType.indexOf(a)!==-1;b=b.Representation;return b&&b.length>0&&b[0].$.mimeType.indexOf(a)!==-1}};b.$16=function(a,b,c,d){var e=this;if(!a)return[];var f=a.Role;f=(f=f)!=null?f:[];f=f[0];var g=f?f.$.value:null;f=a.$.lang;var h=f==="und"?null:f;f=a.$.FBVariantKey;var i=f==="und"?null:(f=f)!=null?f:null;return a.Representation.map(function(f){f=new b(e.$5,f,(f=f.ContentProtection)!=null?f:a.ContentProtection,e.$4,e.$1,e.$3,c,a.SegmentTemplate,a.$.mimeType,a.$.codecs,i,h,g,e.$7,e.$8);var j=f.parse();d.push(f);return j})};b.$13=function(a,b,d){var e=this,f=[],g=new Set();a.filter(Boolean).forEach(function(a,h,i){h=h===i.length-1;for(var i=a.Representation,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l,m;if(j){if(k>=i.length)break;m=i[k++]}else{k=i.next();if(k.done)break;m=k.value}m=m;if(((l=m.$.FBAbrPolicyTags)==null?void 0:l.includes("avoid_on_abr"))&&!h)continue;l=a.Role;l=(l=l)!=null?l:[];l=l[0];l=l?l.$.value:null;var n=a.$.lang;n=n==="und"?null:n;var o=a.$.FBVariantKey;o=o==="und"?null:(o=o)!=null?o:null;m=new(c("oz-player/parsers/OzVideoRepresentationParser"))(e.$5,m,(m=m.ContentProtection)!=null?m:a.ContentProtection,e.$4,e.$1,e.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,o,n,l,e.$7,e.$8);o=m.parse();d.push(m);if(!MediaSource.isTypeSupported(o.getMimeCodecs())){g.add(o.getMimeCodecs());continue}f.push(o)}});return f.filter(Boolean)};b.$15=function(a,b,e){var f=this,g=[],h=new Set();a=a.filter(Boolean).map(function(a){var d=a.Role;d=(d=d)!=null?d:[];d=d[0];d=d?d.$.value:null;var g=a.$.lang;g=g==="und"?null:g;var i=a.$.FBVariantKey;i=i==="und"?null:(i=i)!=null?i:null;var j=[];for(var k=a.Representation,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=k.length)break;n=k[m++]}else{m=k.next();if(m.done)break;n=m.value}n=n;n=new(c("oz-player/parsers/OzAudioRepresentationParser"))(f.$5,n,(n=n.ContentProtection)!=null?n:a.ContentProtection,f.$4,f.$1,f.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,i,g,d,f.$7);var o=n.parse();e.push(n);if(!MediaSource.isTypeSupported(o.getMimeCodecs())){h.add(o.getMimeCodecs());continue}j.push(o)}return j});a.forEach(function(a){if(a.length>1){var b=d("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(a,f.$5,f.$3);g.push((b=b)!=null?b:a[0])}else g.push.apply(g,a)});return g.filter(Boolean)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzMpdUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=null;a.forEach(function(a){if(a){var c=a.endTime;c<((c=(c=b)==null?void 0:c.endTime)!=null?c:Infinity)&&(b=a)}});return b}function a(a,b){b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b.map(function(a){a=a.getEndingSegment();return a?a.getTimeRange():null});return g(a)}return null}function b(a){var b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b[0].getEndingSegment();if(a)return a.getSequenceNumber()}return null}f.getLeastEndTimeTimeRange=g;f.getMpdLastTimeRange=a;f.getMpdLastSequenceNumber=b}),66);
__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzMpdUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzStreamInterruptChecker$p_4=0;d.$OzStreamInterruptChecker$p_5=null;d.$OzStreamInterruptChecker$p_6=!1;d.$OzStreamInterruptChecker$p_2=b;d.$OzStreamInterruptChecker$p_3=c;d.$OzStreamInterruptChecker$p_1=d.$OzStreamInterruptChecker$p_3.getNumber("live_numerical_error_epsilon");return d}var c=b.prototype;c.notifyMpdUpdated=function(){var a=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(this.$OzStreamInterruptChecker$p_2,this.$OzStreamInterruptChecker$p_3),b=a?a.endTime:null,c=!1;b!==null&&(c=b===this.$OzStreamInterruptChecker$p_5);c?this.$OzStreamInterruptChecker$p_4++:(this.$OzStreamInterruptChecker$p_4=0,this.$OzStreamInterruptChecker$p_6&&this.$OzStreamInterruptChecker$p_5!==null&&this.$OzStreamInterruptChecker$p_5!==void 0&&a!==null&&a!==void 0&&this.emit("streamResumedAt",a.startTime),this.$OzStreamInterruptChecker$p_6=!1);c=this.$OzStreamInterruptChecker$p_3.getNumber("stream_interrupt_check_mpd_stale_count_threshold");!this.$OzStreamInterruptChecker$p_6&&c>0&&this.$OzStreamInterruptChecker$p_4>=c&&b!==null&&b!==void 0&&(this.emit("streamInterruptAt",b),this.$OzStreamInterruptChecker$p_6=!0);this.$OzStreamInterruptChecker$p_5=b};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/parsers/OzMpdUpdater",["oz-player/parsers/OzMpdParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzURI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMpdUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/OzStreamInterruptChecker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,i,j,k){var l;l=a.call(this)||this;l.$OzMpdUpdater$p_8=new(c("oz-player/utils/OzErrorEmitter"))();l.$OzMpdUpdater$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();l.$OzMpdUpdater$p_11=!1;l.$OzMpdUpdater$p_16=0;l.$OzMpdUpdater$p_18=0;l.$OzMpdUpdater$p_19=null;l.$OzMpdUpdater$p_21=!0;l.$OzMpdUpdater$p_22=0;l.$OzMpdUpdater$p_25=function(){var a,b=l.$OzMpdUpdater$p_2.getLocation();l.$OzMpdUpdater$p_21=!1;if(b==null||b==="")return;var e=new(c("oz-player/shims/OzURI"))(b),f=String((a=(a=e.getQueryData().ms)!=null?a:e.getQueryData().msdev)!=null?a:e.getQueryData().mstest);if(!l.$OzMpdUpdater$p_12.isPlaying()){l.setupUpdateLoop();return}var g=l.$OzMpdUpdater$p_5.getOperationLogger("update_manifest").start();l.$OzMpdUpdater$p_27(b).then(function(a){var e,h;l.$OzMpdUpdater$p_18=0;l.$OzMpdUpdater$p_28();l.$OzMpdUpdater$p_7=0;if(l.$OzMpdUpdater$p_21)return;var i=babelHelpers["extends"]({},l.$OzMpdUpdater$p_13,{mpdUrl:b});i=new(c("oz-player/parsers/OzMpdParser"))({config:l.$OzMpdUpdater$p_6,ozParserContext:i,networkManager:l.$OzMpdUpdater$p_1,perfLoggerProvider:l.$OzMpdUpdater$p_5,drmManager:l.$OzMpdUpdater$p_14,initialRepresentationIDs:[],blockedRepresentationsManager:null,enableAlternativeAudioTracks:!1});i.onError(function(a){l.$OzMpdUpdater$p_8.emitError(a),g.setError(a).log()});i=i.parse(a);a=l.$OzMpdUpdater$p_2.isStaticMpd();l.$OzMpdUpdater$p_2.updateWith(i);l.$OzMpdUpdater$p_2.markRefreshed();i.isStaticMpd()&&!a&&l.emit("streamTransitionToStatic");i=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(l.$OzMpdUpdater$p_2,l.$OzMpdUpdater$p_6);a=i&&i.endTime!=0?i.endTime:null;i=String((i=(i=l.$OzMpdUpdater$p_2)==null?void 0:i.getCustomField("currentServerTimeMs"))!=null?i:"");e=String((e=(e=l.$OzMpdUpdater$p_2)==null?void 0:e.getCustomField("lastVideoFrameTs"))!=null?e:"");i={currentServerTimeMs:i,ingestLastVideoFrameTs:e,nowMs:String(Date.now())};e=new Set(((e=(e=l.$OzMpdUpdater$p_2)==null?void 0:e.getVideoRepresentations())!=null?e:[]).map(function(a){return a.getCodecs()})).size>1;h=new Set(((h=(h=l.$OzMpdUpdater$p_2)==null?void 0:h.getAudioRepresentations())!=null?h:[]).map(function(a){return a.getCodecs()})).size>1;g.setLiveheadPosition(a).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(l.$OzMpdUpdater$p_2)).setManifestType(l.$OzMpdUpdater$p_2.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(e||h).setIsTemplatedManifest(Boolean(l.$OzMpdUpdater$p_2.getCustomField("isLiveTemplated"))).setPlaybackFbmsParam(f).setUserInfo(i).log();l.$OzMpdUpdater$p_9.notifyMpdUpdated();l.setupUpdateLoop()})["catch"](function(a){l.$OzMpdUpdater$p_28();g.setError(a).log();var c=null;if(d("oz-player/utils/OzErrorUtils").isOzError(a))c=a;else{var e,f=null,h="Caught an unknown error when fetching the manifest.";if(a!=null)if(l.$OzMpdUpdater$p_6.getBool("normalize_mpd_fetch_errors")){var i=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),j=i[0];i[1];c=j}else e=a,f=e.code!=null?String(e.code):null,h=e.name+"; "+e.message+"; "+e.description+";";if(c==null){i={originalError:e,url:b};f!==null&&(i.code=f);c=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK",description:h,extra:i})}}l.$OzMpdUpdater$p_26(c,b)})};var m=e.getMinimumUpdatePeriod();l.$OzMpdUpdater$p_7=0;l.$OzMpdUpdater$p_1=f;l.$OzMpdUpdater$p_2=e;l.$OzMpdUpdater$p_12=g;l.$OzMpdUpdater$p_3=m;l.$OzMpdUpdater$p_5=h.cloneContext().setType("manifest");l.$OzMpdUpdater$p_6=b;l.$OzMpdUpdater$p_13=i;l.$OzMpdUpdater$p_14=j;l.$OzMpdUpdater$p_15=k;l.$OzMpdUpdater$p_2.addListener("locationUpdated",function(){l.$OzMpdUpdater$p_23(),l.setupUpdateLoop()});l.$OzMpdUpdater$p_9=new(c("oz-player/utils/OzStreamInterruptChecker"))(l.$OzMpdUpdater$p_2,l.$OzMpdUpdater$p_6);l.$OzMpdUpdater$p_10.addSubscriptions(l.$OzMpdUpdater$p_9.addListener("streamResumedAt",function(a){l.emit("streamResumedAt",a)}),l.$OzMpdUpdater$p_9.addListener("streamInterruptAt",function(a){l.emit("streamInterruptAt",a)}));return l}var e=b.prototype;e.$OzMpdUpdater$p_23=function(){c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_4=null,this.$OzMpdUpdater$p_24(),this.$OzMpdUpdater$p_21=!0};e.setupUpdateLoop=function(){var a,b=!this.$OzMpdUpdater$p_11;b&&(b=!this.$OzMpdUpdater$p_2.isStaticMpd(),this.$OzMpdUpdater$p_3=this.$OzMpdUpdater$p_2.getMinimumUpdatePeriod());a=this.$OzMpdUpdater$p_17==null&&this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms")>0?this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms"):this.$OzMpdUpdater$p_6.getNumber("manifest_update_frequency_ms")||((a=this.$OzMpdUpdater$p_3)!=null?a:0)*1e3;b&&a&&this.$OzMpdUpdater$p_2.getLocation()&&(this.$OzMpdUpdater$p_4=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater$p_25,a))};e.onError=function(a){return this.$OzMpdUpdater$p_8.onError(a)};e.$OzMpdUpdater$p_26=function(a,b){var c=this;b=!0;var d=this.$OzMpdUpdater$p_18-1,e=a.getExtra().code;this.$OzMpdUpdater$p_19!==e?(this.$OzMpdUpdater$p_19=e,this.$OzMpdUpdater$p_16=1):this.$OzMpdUpdater$p_16++;var f=function(){b=!1};e={endStream:function(){f(),c.$OzMpdUpdater$p_11=!0,c.emit("streamGone")},consecutiveFailuresForErrorCode:this.$OzMpdUpdater$p_16,error:a,isInitialRequest:!1,retry:function(b){c.emit("manifestFetchErrorRetry",a),f(),c.setupUpdateLoop()},retryAttemptCount:d};this.emit("manifestFetchError",e);b&&this.$OzMpdUpdater$p_8.emitError(a)};e.$OzMpdUpdater$p_29=function(a,b){a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_expid",b);return a.toString()};e.$OzMpdUpdater$p_30=function(a){if(!this.$OzMpdUpdater$p_15)return a;a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_tsid","mpd-"+this.$OzMpdUpdater$p_22++);return a.toString()};e.$OzMpdUpdater$p_27=function(a){this.$OzMpdUpdater$p_24();this.$OzMpdUpdater$p_18++;var b=this.$OzMpdUpdater$p_6.getString("cdn_experiment_id");a=b.length===0?a:this.$OzMpdUpdater$p_29(a,b);a=this.$OzMpdUpdater$p_30(a);b=this.$OzMpdUpdater$p_1.requestRawUrl({debugName:"OzMpdUpdater/requestMpd/mpd",url:a,options:{networkTimeoutMs:this.$OzMpdUpdater$p_6.getNumber("mpd_updater_network_request_timeout_ms")},loggerProvider:this.$OzMpdUpdater$p_5});this.$OzMpdUpdater$p_17=Date.now();this.$OzMpdUpdater$p_20=b;a=b.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};e.$OzMpdUpdater$p_24=function(){this.$OzMpdUpdater$p_20&&(this.$OzMpdUpdater$p_20.cancel(),this.$OzMpdUpdater$p_18=0),this.$OzMpdUpdater$p_28()};e.$OzMpdUpdater$p_28=function(){this.$OzMpdUpdater$p_20=null};e.destroy=function(){this.$OzMpdUpdater$p_4&&c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_10.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW",["TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";b={createHTML:function(a){if(a.startsWith('<?xml version="1.0"?>\n<')||a.startsWith('<?xml version="1.0" encoding="UTF-8"?>\n<')||a.startsWith('\n<MPD xmlns="urn:mpeg:dash:schema:mpd:2011"'))return a;throw c("err")("Violating Trusted Type policies. Only works for XML.")}};var h=c("TrustedTypes").createPolicy("oz-player-xml",b);function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.createHTML.apply(h,[a].concat(c))}g.createTrustedHTMLForDOMParser=a}),98);
__d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy",["oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW"],(function(a,b,c,d,e,f,g){"use strict";g.createTrustedHTMLForDOMParser=d("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW").createTrustedHTMLForDOMParser}),98);
__d("oz-player/parsers/OzXmlParserImplDOMParser",["oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){function h(){return{$:{}}}function i(a){var b=h();for(var c=a.attributes,d=0;d<c.length;++d){var e=c[d];b.$[e.name]=e.value}for(e=a.childNodes,c=0;c<e.length;++c){d=e[c];if(d instanceof Element){a=d.nodeName;Object.prototype.hasOwnProperty.call(b,a)||(b[a]=[]);b[a].push(i(d))}else{a=d.nodeValue.trim();a&&(b._=a)}}return b}a=function(){function a(){this.$1=new DOMParser()}var b=a.prototype;b.parse=function(a){try{var b=h(),c=d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy").createTrustedHTMLForDOMParser(a);c=this.$1.parseFromString(c,"application/xml");var e=c.querySelector("parsererror");if(e){var f=e.querySelector("h3");f=f?f.nextElementSibling:null;f=f?f.innerHTML:e.innerHTML;e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"DOMParser parsererror: "+String(f).trim()+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{}})}f=c.documentElement;f!=null&&(b[f.nodeName]=[i(f)]);return b}catch(b){if(d("oz-player/utils/OzErrorUtils").isOzError(b))throw b;else{e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"XML parse exception: "+String(b)+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{originalError:b}})}}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzClearSourceBufferOnSeekManager",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e){e===void 0&&(e=null),this.$3=new(c("oz-player/utils/OzErrorEmitter"))(),this.$4=new Map(),this.$5=!1,this.$6=!1,this.$7=!1,this.$8=null,this.$9=[],this.$10=null,this.$11=null,this.$1=a,this.$2=b,this.$4=d,this.$11=e}var b=a.prototype;b.$12=function(a){var b;this.$5=!0;return(b=this.$8)!=null?b:a.call(this.$1)};b.$13=function(a,b){this.$6=!0,this.$9.push({t:b}),this.$8=b,this.$9.length===1&&this.$14(a)};b.$15=function(a){this.$7=!0;return this.$8!=null?!0:a.call(this.$1)};b.$16=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=[];this.$4.forEach(function(c,d){d=c.clearSourceBufferRange(a,b);e.push(d)});var f=c("oz-player/shims/OzMaybeNativePromise").all(e);f.then(function(){d.resolve()})["catch"](function(a){d.reject(a)});return d.getPromise()};b.$14=function(a){var b=this,e=this.$9.length>0?this.$9[0]:null,f=this.$2.getNumber("clear_buffer_on_seek_epsilon_s");if(e){var g=e.t;e=this.$1.buffered;var h=e.length,i=e.length<=0,j=-1,k=!1;for(var l=0;j<0&&l<h;++l)j=g-f>=e.start(l)&&g+f<e.end(l)?l:j,k=g<e.start(l)-f;l=j>-1;var m=this.$2.getNumber("clear_buffer_on_seek_nudge_s");l&&j>=0&&j<h&&m>0&&(g=Math.min(g,e.end(j)-m),g=Math.max(g,e.start(j)+m));if(i||l||!k)this.$11&&this.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("no_clear").log(),a.call(this.$1,g),this.$9.shift(),this.$14(a);else{var n=null;this.$11&&(n=this.$11.getOperationLogger("clear_buffer_before_seek").setLength(Math.round(g*1e3)).setUserInfo({bufferRangesLength:String(h),nudgeSec:String(m)}).start());j=this.$16(Math.max(g-f,0),e.end(h-1)+f);j.then(function(){n&&n.log(),b.$11&&b.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("after_clear").log(),a.call(b.$1,g),b.$9.shift(),b.$14(a)})["catch"](function(a){n&&n.setError(a).log(),b.$3.emitError(d("oz-player/utils/OzErrorUtils").isOzError(a)?a:d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a?a.name+": "+a.message:"Unknown error while clearing the buffer.",extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED,originalError:a}}))})}}else this.$8=null};b.maybeOverwriteVideoCurrentTimeProperty=function(){var a,b,c=this,d=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"currentTime");d=(a=d)!=null?a:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");a=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"seeking");a=(b=a)!=null?b:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"seeking");var e=d&&typeof d.get==="function"?d.get:null,f=d&&typeof d.set==="function"?d.set:null,g=a&&typeof a.get==="function"?a.get:null;if(e&&f&&g&&Object.defineProperty){try{Object.defineProperty(this.$1,"currentTime",{get:function(){return c.$12(e)},set:function(a){c.$13(f,a)},configurable:!0,enumerable:!0});Object.defineProperty(this.$1,"seeking",{get:function(){return c.$15(g)},configurable:!0,enumerable:!0});b=this.$1.currentTime;this.$1.currentTime=b;this.$1.seeking}catch(a){}this.$17(function(){c.getCurrentTimePropertyOverwriteSuccess()&&Object.defineProperty(c.$1,"currentTime",{get:e,set:f,configurable:!0,enumerable:!0}),c.getSeekingPropertyOverwriteSuccess()&&Object.defineProperty(c.$1,"seeking",{get:g,configurable:!0,enumerable:!0})})}};b.getCurrentTimePropertyOverwriteSuccess=function(){return this.$5&&this.$6};b.getSeekingPropertyOverwriteSuccess=function(){return this.$7};b.$17=function(a){this.$10=a};b.onError=function(a){return this.$3.onError(a)};b.destroy=function(){try{this.$10&&this.$10()}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzSteadyStateManager",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=[],this.$2=a,this.$3=b}var b=a.prototype;b.addSample=function(a){var b,c=Math.floor(Date.now()/(1e3*this.$3)),d=c%this.$2;((b=this.$1[d])==null?void 0:b.bucketNumber)!=c&&(this.$1[d]={bucketNumber:0,val:null});this.$1[d]={bucketNumber:c,val:Math.min(a,(b=this.$1[d].val)!=null?b:a)}};b.min=function(){var a=this,b=Date.now(),d=this.$1.filter(function(c){return c!=null&&c.val!=null&&b-a.$2*1e3*a.$3<c.bucketNumber*1e3*a.$3});if(d.length<this.$2)return null;d=d.reduce(function(a,b){if(a==null)return b;var d=b.val;d!=null||c("oz-player/shims/ozvariant")(0,56011);var e=a.val;e!=null||c("oz-player/shims/ozvariant")(0,56011);return d<e?b:a},null);return d==null?void 0:d.val};b.reset=function(){this.$1=[]};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzLiveLatencyManager",["oz-player/playback_controls/OzSteadyStateManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$8=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$9=null;this.$10=!1;this.$11=null;this.$12=null;this.$13=null;this.$14=!0;var d=a.config,e=a.mpd,f=a.playbackState,g=a.bufferingDetector,h=a.video,i=a.loggerProvider;a=a.getUserSelectedPlaybackRate;this.$1=d;this.$2=e;this.$3=f;this.$15=a;d.getNumber("steadystate_minbuffer_buckets")>0&&(this.$7=new(c("oz-player/playback_controls/OzSteadyStateManager"))(this.$1.getNumber("steadystate_minbuffer_buckets"),this.$1.getNumber("steadystate_minbuffer_buckets_sec")));g!=null&&(this.$8.addSubscriptions(g.addListener("enterBuffering",function(a){if(a==="in_play"){b.$9=0;(a=b.$7)==null?void 0:a.reset()}b.$10=!1;(a=b.$6)==null?void 0:a.log();b.$6=null})),this.$8.addSubscriptions(g.addListener("leaveBuffering",function(){b.$9===0&&(b.$9=Date.now()),b.$10=!1})));this.$4=h;this.$5=i;if(this.$16()){this.$8.addSubscriptions((e=c("oz-player/shims/OzDOMEventListener")).listenDOMEvent(this.$4,"timeupdate",c("oz-player/shims/ozThrottle")(function(){b.$17(),b.$18()},this.$1.getNumber("playhead_manager_timeupdate_throttle_ms"))),e.listenDOMEvent(this.$4,"waiting",function(){b.$17()}),e.listenDOMEvent(this.$4,"durationchange",function(){b.$17()}),e.listenDOMEvent(this.$4,"seeking",function(){var a;b.$13=Date.now();b.$11=null;(a=b.$7)==null?void 0:a.reset()}),e.listenDOMEvent(this.$4,"playing",function(){b.$13=Date.now(),b.$11=null}),e.listenDOMEvent(h,"pause",function(){var a;return(a=b.$7)==null?void 0:a.reset()}))}}var b=a.prototype;b.enabled=function(){var a=this.$1.getNumber("catchup_timeout_after_buffering_sec");return a===0||this.$9==null||this.$9!==0&&this.$9+a*1e3<=Date.now()};b.isBehindPreferredLiveHeadLatencyWithTolerance=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()-this.getPreferredLiveHeadLatencyToleranceSec()};b.$19=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()};b.$20=function(){var a;a=(a=this.$7)==null?void 0:a.min();return!this.$21()&&a!=null&&a>this.$1.getNumber("steadystate_minbuffer_sec")};b.getInitialPlayHeadPosition=function(){return this.getLiveHeadTimeSec()-this.getPreferredLiveHeadLatencySec()};b.getLiveHeadTimeSec=function(){var a=this.$22();return(a==null?void 0:(a=a.getEndingSegment())==null?void 0:a.getTimeRange().endTime)||0};b.$21=function(){return this.$9!=null&&this.$1.getBool("latencymanager_stalled_edgelatency_sec_on")};b.getPreferredLiveHeadLatencySec=function(){var a=this.$21()?this.$1.getNumber("latencymanager_stalled_edgelatency_sec"):this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec");a=this.$23(a);this.$5.getOperationLogger("latency_manager").setPreferredEdgeLatency(a*1e3);return a};b.getPreferredLiveHeadLatencyToleranceSec=function(){return this.$1.getNumber("pdash_download_cursor_catchup_tolerance_sec")};b.shouldEnableManifestTimeRangeCatchup=function(){return!this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")};b.shouldEnableCursorBasedCatchup=function(){var a=this.$2.getVideoRepresentations()[0];a=a&&a.canPredict();return a&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")>0};b.setEnableCatchup=function(a){var b=this.$14;!this.$14&&a===!0&&(this.$9=null);this.$14=a;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")&&a!==b&&this.$18()};b.$24=function(a,b,c){var d=this.$1.getNumber("playback_speed_min_sharpness_factor");c=a*2/(1+Math.pow(Math.E,-(c-b)*d));return 1-a+c};b.$16=function(){return!this.$1.getBool("playback_speed_latency_adjustment_disabled")&&(this.$1.getNumber("playback_speed_latency_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate")>0)};b.$17=function(){var a,b=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1).bufferAheadSec;(a=this.$7)==null?void 0:a.addSample(b)};b.$18=function(){var a=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1),b=a.bufferAheadSec;a=a.bufferedOffset;this.$25(b,a)};b.$25=function(a,b){var c=this.$1.getNumber("playback_speed_enabled_delay_sec"),d=this.$1.getNumber("playback_speed_min_buffer_sec");a>d&&(this.$10=!0);var e=this.$1.getNumber("playback_speed_min_duration_sec"),f=this.$1.getNumber("playback_speed_restore_min_duration_sec"),g=this.$1.getNumber("playback_speed_latency_adjustment_rate"),h=this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate"),i=this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate");if(this.$4.playbackRate===0){var j;(j=this.$6)==null?void 0:j.log();this.$6=null}else if(this.$14&&this.$10&&a<d&&(g>0||h>0)&&b===0&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){j=h>0?1-h:this.$24(g,d,a);this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("slow").setUserInfo({newPlaybackRate:String(j),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(j)}else if(this.$14&&this.$10&&(this.$19()||this.$20())&&i>0&&b===0&&(this.$12==null||this.$12+f*1e3<Date.now())&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){h=1+i;this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("fast").setUserInfo({newPlaybackRate:String(h),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(h)}else if(this.$14===!1||this.$11==null||this.$11+e*1e3<Date.now()){g=this.$4.playbackRate;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")?this.$4.playbackRate=this.$14===!1?this.$15():1:this.$4.playbackRate=1;(d=this.$6)==null?void 0:d.log();this.$6=null;g!==this.$4.playbackRate&&(this.$12=Date.now())}};b.$26=function(a){try{this.$4.playbackRate=a,this.$11=Date.now()}catch(b){(a=this.$6)==null?void 0:a.setError(b).setResult("failed").log();this.$6=null}};b.$22=function(){var a=this.$2.getVideoRepresentations().concat(this.$2.getAudioRepresentations());return a.length===0?null:a.reduce(function(a,b){var c;return(((c=a.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)>(((c=b.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)?a:b})};b.$23=function(a){var b;if(a<=0)return a;var c=this.$22();b=c==null?void 0:(b=c.getEndingSegment())==null?void 0:b.getTimeRange();if(!b)return a;c=c==null?void 0:(c=c.getSegmentByTime((b==null?void 0:b.endTime)-a))==null?void 0:c.getTimeRange();return!c?a:(b==null?void 0:b.endTime)-(c==null?void 0:c.startTime)};b.destroy=function(){this.$8.release()};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzPlaybackTimeRangeManager",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$4=null;this.$5=0;this.$6=0;this.$7=!0;this.$8=0;this.$9=0;this.$10=!1;this.$12=0;this.$13=0;this.$15=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$17=function(){b.$10!=b.$14.isPlaying()&&(b.$14.isPlaying()&&(b.$11=Date.now()),b.$10=b.$14.isPlaying())};var d=a.video,e=a.config,f=a.mpd,g=a.liveheadFallBehindBlockThreshold,h=a.liveheadFallBehindBlockMargin,i=a.playbackState;a=a.perfLoggerProvider;this.$1=e;this.$2=d;this.$3=f;this.$8=g;this.$9=h;this.$14=i;this.$16=a;this.$1.getNumber("catchup_timeout_after_play_sec")!==0&&this.$15.addSubscriptions(this.$14.addEventListener("play",this.$17),this.$14.addEventListener("pause",this.$17))}var b=a.prototype;b.setTimelineBlockingEnabled=function(a){this.$7=a,this.$7||this.$3.unblockTimeRange()};b.setTimeRangeProvider=function(a){var b=this;this.$4!=null&&this.$4.remove();this.$4=a.addUpdateListener(function(){var c=a.getTimeRanges(),d=0;if(c.length!==0){c=c[c.length-1];d=c.endTime}b.$18(d)})};b.$18=function(a){var b;if(!this.$7)return;if(this.$5===a)return;this.$5=a;if(this.$2.currentTime<=this.$6)return;a=this.$1.getBool("catchup_use_timeline_range_end_time_as_end")?a:this.$2.duration;var c=this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold")!==0?this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold"):this.$8,e=this.$1.getNumber("overwrite_live_time_range_block_margin")!==0?this.$1.getNumber("overwrite_live_time_range_block_margin"):this.$9;this.$17();this.$1.getBool("reset_catchup_timeout_after_play_sec_on_overwrite")&&(this.$13!=e||this.$12!=c)&&(this.$13=e,this.$12=c,this.$11=Date.now());b=this.$1.getNumber("catchup_timeout_after_play_sec")===0||Date.now()-((b=this.$11)!=null?b:0)<this.$1.getNumber("catchup_timeout_after_play_sec")*1e3;if(b&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")===0&&e!==0&&c!==0&&a-this.$2.currentTime>c){b=[];for(c=0;c<this.$2.buffered.length;c++)b.push({startTime:this.$2.buffered.start(c),endTime:this.$2.buffered.end(c)});c=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(this.$2.currentTime,b);this.$6=this.$2.currentTime+Math.min(c,e);b={startTime:this.$6,endTime:a-e};this.$16.getOperationLogger("latency_manager").setInitiator("time_range_manager").setReason("blocked_range").setLength(b.endTime-b.startTime).setUserInfo({blockedRangeStart:String(b.startTime),blockedRangeEnd:String(b.endTime)}).log();this.$3.blockTimeRange(b)}};b.destroy=function(){this.$4!=null&&(this.$4.remove(),this.$4=null),this.$15.release()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],(function(a,b,c,d,e,f){"use strict";var g=.05;function a(a,b){b=Math.max.apply(Math,b.map(function(a){return a.startTime}));return b-a>0?b-a+g:0}f.computeSeekAhead=a}),66);
__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1.5;function a(a,b,c,e){b=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});return d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,b,e)===-1}function b(a,b,c,e,f){f===void 0&&(f=h);var g=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,g,e);if(c!==-1){g=b[c];return d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(a,g.endTime)&&g.endTime-a<f}return!1}g.isInGap=a;g.isNearGap=b}),98);
__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil","oz-player/utils/OzTimelineGapUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=a.perfLoggerProvider,this.$2=a.video,this.$4=a.config}var b=a.prototype;b.markState=function(a,b){var c=d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$2.buffered),e=this.$3;if(e==null){this.$3=c;return}var f=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(c,b.getCurrentTime(),this.$4);e=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(e,b.getCurrentTime(),this.$4);e.bufferedOffset!==-1&&f.bufferedOffset===-1&&this.$1.getOperationLogger("playhead_adjustment").setError("buffer_deleted").setResult("failed").setUserInfo({vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null}).setInitiator(a).log();this.$3=c};return a}(),i=function(){function a(a){this.$5=!1,this.$6={},this.$1=a.perfLoggerProvider,this.$2=a.video}var b=a.prototype;b.markState=function(a,b){var c=this;if(this.$2.paused){this.$3=null;this.$4=null;this.$5=!1;this.$6={};return}(this.$3==null||this.$2.currentTime>this.$3)&&(this.$4=Date.now(),this.$3=this.$2.currentTime,this.$5=!1,this.$6={});this.$6[a]=this.$6[a]==null?1:this.$6[a]+1;var d=this.$4;if(!this.$5&&!this.$2.paused&&d!=null&&d+1e4<Date.now()){this.$5=!0;var e={};Object.keys(this.$6).forEach(function(a){e[a]=String(c.$6[a])});this.$1.getOperationLogger("playhead_adjustment").setError("not_advancing").setResult("failed").setLength(Date.now()-d).setUserInfo(babelHelpers["extends"]({},e,b,{lastCurrentTime:String(this.$3),lastCurrentTimeChanged:String(d-Date.now()),vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null})).setInitiator(a).log()}};return a}();a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzPlayheadManager$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_4=new Set();e.$OzPlayheadManager$p_10=new Set();e.$OzPlayheadManager$p_12=function(a){e.$OzPlayheadManager$p_1.currentTime=a};e.$OzPlayheadManager$p_14=!1;e.$OzPlayheadManager$p_15=!1;e.$OzPlayheadManager$p_16=!0;e.$OzPlayheadManager$p_17=!1;e.$OzPlayheadManager$p_23=function(a,b){b===void 0&&(b=null);if(e.$OzPlayheadManager$p_20!=null?!e.$OzPlayheadManager$p_20.shouldEnableManifestTimeRangeCatchup():!1)return;var c=e.$OzPlayheadManager$p_9;if(c&&c.isEnabled(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8)){c=c.computeNewPlayheadPosition(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8);if(typeof c==="number"){e.$OzPlayheadManager$p_27(c,"live_catch_up_strategy",a,b);return}}c=e.$OzPlayheadManager$p_6.getNumber("auto_seek_playhead_slack");if(c===0)return;var f=e.$OzPlayheadManager$p_5;if(!f)return;var g=e.$OzPlayheadManager$p_7.getCurrentTime(),h=f.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),i=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,h);if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6))&&i!==-1){g=h[i];e.$OzPlayheadManager$p_27(g.rangeStart+c,"jump_over_timeline_gap",a,b)}};var f=b.video,g=b.mpd,j=b.playheadCatchup,k=b.playbackState,l=b.config,m=b.perfLoggerProvider,n=b.seekHandler,o=b.initialPlaybackPosition,p=b.canSupportSkipVideobufferGaps,q=b.liveLatencyManager;b=b.dynamicVideoLibrary;e.$OzPlayheadManager$p_1=f;e.$OzPlayheadManager$p_6=l;e.$OzPlayheadManager$p_7=k;e.$OzPlayheadManager$p_8=g;e.$OzPlayheadManager$p_9=j;e.$OzPlayheadManager$p_11=m;n&&(e.$OzPlayheadManager$p_12=n);e.$OzPlayheadManager$p_17=p;e.$OzPlayheadManager$p_20=q;e.$OzPlayheadManager$p_13=o;e.$OzPlayheadManager$p_21=b;e.$OzPlayheadManager$p_18=new i({video:f,perfLoggerProvider:m});e.$OzPlayheadManager$p_19=new h({video:f,perfLoggerProvider:m,config:l});e.$OzPlayheadManager$p_2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"durationchange",function(){e.setPlaybackPositionOnFirstDurationChange("durationchange",e.$OzPlayheadManager$p_1.duration),e.$OzPlayheadManager$p_23("durationchange"),e.$OzPlayheadManager$p_24("durationchange")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"pause",function(){e.$OzPlayheadManager$p_23("pause")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"play",function(){e.$OzPlayheadManager$p_23("play")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"playing",function(){e.$OzPlayheadManager$p_23("playing")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"waiting",function(){e.$OzPlayheadManager$p_23.bind(babelHelpers.assertThisInitialized(e),"waiting"),e.$OzPlayheadManager$p_24("waiting")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"timeupdate",c("oz-player/shims/ozThrottle")(function(){e.$OzPlayheadManager$p_23("timeupdate"),e.$OzPlayheadManager$p_6.getBool("playhead_manager_buffered_timerange_update_on_timeupdate")&&e.$OzPlayheadManager$p_24("timeupdate")},e.$OzPlayheadManager$p_6.getNumber("playhead_manager_timeupdate_throttle_ms"))),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"seeking",function(){e.$OzPlayheadManager$p_22=Date.now()}));return e}var e=b.prototype;e.$OzPlayheadManager$p_25=function(){return this.$OzPlayheadManager$p_1.playbackRate===0};e.observeSourceBufferState=function(a,b){var d=this;this.$OzPlayheadManager$p_4.has(a)&&c("oz-player/shims/ozvariant")(0,4179);this.$OzPlayheadManager$p_4.add(a);this.$OzPlayheadManager$p_2.addSubscriptions(a.addEventListener("buffer_updated",function(){d.$OzPlayheadManager$p_26(a,b),d.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&d.$OzPlayheadManager$p_17&&d.$OzPlayheadManager$p_24("buffer_updated")}))};e.$OzPlayheadManager$p_26=function(a,b){var c=[];this.$OzPlayheadManager$p_4.forEach(function(a){a=a.getBufferedRanges();a.length&&c.push(a[0])});c.length>0&&this.$OzPlayheadManager$p_10.add(a);a=this.$OzPlayheadManager$p_1.currentTime;a=d("oz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead(a,c);var e=this.$OzPlayheadManager$p_6.getNumber("timeline_offset_threshold");a>0&&(e===0||a<e)&&this.$OzPlayheadManager$p_27(this.$OzPlayheadManager$p_1.currentTime+a,"first_available_buffer","source_buffer",b)};e.setTimeRangeProvider=function(a){var b=this;this.$OzPlayheadManager$p_3.release();this.$OzPlayheadManager$p_3.engage();this.$OzPlayheadManager$p_3.addSubscriptions(a.addUpdateListener(function(){b.$OzPlayheadManager$p_23("time_range_updated")}));this.$OzPlayheadManager$p_5=a;this.$OzPlayheadManager$p_23("time_range_set")};e.resetCurrentTime=function(){this.$OzPlayheadManager$p_15=!1,this.setPlaybackPositionOnFirstDurationChange("reset",this.$OzPlayheadManager$p_1.duration)};e.setPlaybackPositionOnFirstDurationChange=function(a,b){if(this.$OzPlayheadManager$p_13!==0&&!this.$OzPlayheadManager$p_15&&!isNaN(b)&&b!==Infinity){b=this.$OzPlayheadManager$p_13>0?this.$OzPlayheadManager$p_13:b+this.$OzPlayheadManager$p_13;if(this.$OzPlayheadManager$p_20!=null){var c;b=(c=this.$OzPlayheadManager$p_20)==null?void 0:c.getInitialPlayHeadPosition()}this.$OzPlayheadManager$p_15=!0;if(this.$OzPlayheadManager$p_6.getBool("playhead_manager_clamp_initial_playback_position")){c=(c=this.$OzPlayheadManager$p_5)==null?void 0:c.getTimeRanges();c!=null&&c.length>0&&c[0].startTime>b&&(b=c[0].startTime)}this.$OzPlayheadManager$p_27(b,"initial_playback_position",a);this.emit("initialPlaybackPositionSet",b)}};e.$OzPlayheadManager$p_24=function(a){var b,c,e=this;if(!this.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps"))return;if(!this.$OzPlayheadManager$p_17)return;var f=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_auto_seek_playhead_slack");if(f===0)return;var g=this.$OzPlayheadManager$p_7.getCurrentTime(),h=[];for(var i=0;i<this.$OzPlayheadManager$p_1.buffered.length;i++)h.push({startTime:this.$OzPlayheadManager$p_1.buffered.start(i),endTime:this.$OzPlayheadManager$p_1.buffered.end(i)});i=h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});this.$OzPlayheadManager$p_19&&this.$OzPlayheadManager$p_19.markState(a,this.$OzPlayheadManager$p_7);var j=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,i),k=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,g,i),l=this.$OzPlayheadManager$p_16?0:this.$OzPlayheadManager$p_6.getNumber("skip_videobuffer_gaps_max_gap_size_sec"),m=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_is_near_gap_threshold"),n=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_numerical_error");b=(b=this.$OzPlayheadManager$p_21)==null?void 0:b.getLastSegmentStartPTS();var o=b!=null?b/1e3:null,p=(c=this.$OzPlayheadManager$p_21)==null?void 0:c.getLast200RequestedUrlDecisionMinTime();c=o!=null?d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,o,i):-1;var q=c>=0?i[c]:null,r=function(b){var c=e.$OzPlayheadManager$p_22==null||p==null||e.$OzPlayheadManager$p_22<p;!c&&b!=null&&e.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setError("ignore_before_seek_main_"+b).setResult("failed").setInitiator(a).setUserInfo({last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(e.$OzPlayheadManager$p_22)}).log();return c};if(o!=null&&this.$OzPlayheadManager$p_25()&&this.$OzPlayheadManager$p_16==!1&&r("buf")){if(o<g&&q!=null&&q.rangeStart<=o&&q.rangeEnd!=null&&q.rangeEnd>o){this.$OzPlayheadManager$p_27(o,"reverse_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}if(q!=null&&c!=k){this.$OzPlayheadManager$p_27(q.rangeStart,"jump_over_buffer_gap_last_dl_range",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}}if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,h,this.$OzPlayheadManager$p_6,n,m)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,h,this.$OzPlayheadManager$p_6,n))&&j!==-1&&(l===0||i[j].rangeStart-g<l)&&(this.$OzPlayheadManager$p_16==!0||r("main"))){o=i[j];this.$OzPlayheadManager$p_6.getBool("enable_alternative_audio_tracks")&&this.$OzPlayheadManager$p_8.isStaticMpd()&&o.rangeStart!==0&&o.rangeEnd===this.$OzPlayheadManager$p_7.getDuration()?this.$OzPlayheadManager$p_27(0,"do_not_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)}):this.$OzPlayheadManager$p_27(o.rangeStart+f,"jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}this.$OzPlayheadManager$p_18&&this.$OzPlayheadManager$p_18.markState(a,{nextBufferedRangeIndex:String(j),limitMaxGapSize:String(l),rangeStart:j!==-1?String(i[j].rangeStart):null,isNearGapThreshold:String(m),numericalError:String(n)})};e.setEnableLiveheadCatchup=function(a){this.$OzPlayheadManager$p_16=a};e.destroy=function(){this.$OzPlayheadManager$p_2.release(),this.$OzPlayheadManager$p_3.release(),this.$OzPlayheadManager$p_4.clear()};e.$OzPlayheadManager$p_27=function(a,b,c,d,e){var f=a-this.$OzPlayheadManager$p_1.currentTime,g=this.$OzPlayheadManager$p_6.getNumber("seek_ahead_epsilon");if(g>0&&Math.abs(f)<=g)return;this.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setLength(Math.round(a*1e3)).setReason(b).setInitiator(c).setType(d).setUserInfo(babelHelpers["extends"]({},e,{seekAdjustment:String(Math.round(f*1e3))})).log();this.$OzPlayheadManager$p_12(a);b==="initial_playback_position"&&(this.$OzPlayheadManager$p_14=!0)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzUuidWWW",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("uuidv4")}),98);
__d("oz-player/shims/OzUuid",["oz-player/shims/www/OzUuidWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzUuidWWW")}),98);
__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=function(){f.$3.getOperationLogger("pause").setState("paused").log()};this.$5=function(){f.$3.getOperationLogger("playing").setState("playing").log()};this.$1=b;this.$3=e;this.$2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$4),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$5))}var b=a.prototype;b.isPlaying=function(){return!this.$1.paused};b.getCurrentTime=function(){return this.$1.currentTime};b.getCurrentTimeUpdateTime=function(){return Date.now()};b.getDuration=function(){return this.$1.duration};b.addEventListener=function(a,b){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,a,b)};b.destroy=function(){this.$2.release()};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzPositionToViewportUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b.filter(function(a){a=a.position;if(a==null)return!1;var b=a.y-window.scrollY;return b>=0||(a.height+b)/a.height>c}).sort(function(a,b){return a.position==null||b.position==null?0:a.position.y-b.position.y});return b.findIndex(function(b){return b.video===a})}function b(a){return a.isIntersecting!=null?a.isIntersecting:a.intersectionRatio>0||a.intersectionRect&&(a.intersectionRect.height>0||a.intersectionRect.width>0)}f.determinePositionIndexOfVideoFromViewportVertically=a;f.intersectionObserverEntryIsIntersecting=b}),66);
__d("oz-player/states/OzPositionToViewportTracker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzPositionToViewportUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=.5;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzPositionToViewportTracker$p_1=[];c.$OzPositionToViewportTracker$p_5=function(a){a.forEach(function(a){var b=c.$OzPositionToViewportTracker$p_1.find(function(b){return a.target===b.video});b!=null&&(d("oz-player/utils/OzPositionToViewportUtils").intersectionObserverEntryIsIntersecting(a)?b.position=c.$OzPositionToViewportTracker$p_7(a):c.$OzPositionToViewportTracker$p_1.map(function(b){a.target===b.video&&(b.position=null)}));c.$OzPositionToViewportTracker$p_1.forEach(function(a){a.positionIndexToViewportVertically=c.$OzPositionToViewportTracker$p_6(a.video)})}),c.emit("state_changed")};c.$OzPositionToViewportTracker$p_2=b;return c}var c=b.prototype;c.$OzPositionToViewportTracker$p_4=function(){if(this.$OzPositionToViewportTracker$p_3!=null)return;this.$OzPositionToViewportTracker$p_3=new IntersectionObserver(this.$OzPositionToViewportTracker$p_5,{rootMargin:this.$OzPositionToViewportTracker$p_2.getNumber("pixels_above_viewport_to_observe")+"px 0px "+this.$OzPositionToViewportTracker$p_2.getNumber("pixels_below_viewport_to_observe")+"px 0px",threshold:0})};c.registerVideo=function(a){this.$OzPositionToViewportTracker$p_1.push({video:a,position:null,positionIndexToViewportVertically:-1}),this.$OzPositionToViewportTracker$p_4(),this.$OzPositionToViewportTracker$p_3!=null&&this.$OzPositionToViewportTracker$p_3.observe(a)};c.getPositionIndexOfVideoFromViewportVertically=function(a){var b=this.$OzPositionToViewportTracker$p_1.find(function(b){return b.video===a});return b!=null?b.positionIndexToViewportVertically:-1};c.$OzPositionToViewportTracker$p_6=function(a){return d("oz-player/utils/OzPositionToViewportUtils").determinePositionIndexOfVideoFromViewportVertically(a,this.$OzPositionToViewportTracker$p_1,i)};c.$OzPositionToViewportTracker$p_7=function(a){a=a.boundingClientRect;return{x:a.x+window.scrollX,y:a.y+window.scrollY,width:a.width,height:a.height}};b.getInstance=function(a){h==null&&(h=new b(a));return h};c.unregisterVideo=function(a){var b=this,c=[];this.$OzPositionToViewportTracker$p_1.forEach(function(d){d.video===a&&b.$OzPositionToViewportTracker$p_3!=null?b.$OzPositionToViewportTracker$p_3.unobserve(a):c.push(d)});this.$OzPositionToViewportTracker$p_1=c;this.$OzPositionToViewportTracker$p_1.length===0&&this.$OzPositionToViewportTracker$p_3!=null&&(this.$OzPositionToViewportTracker$p_3.disconnect(),this.$OzPositionToViewportTracker$p_3=null)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/states/OzPositionToViewport",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzPositionToViewportTracker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewport$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewport$p_3=b;e.$OzPositionToViewport$p_2=c("oz-player/states/OzPositionToViewportTracker").getInstance(d);e.$OzPositionToViewport$p_2.registerVideo(b);e.$OzPositionToViewport$p_1.addSubscriptions(e.$OzPositionToViewport$p_2.addListener("state_changed",function(){e.emit("state_changed")}));return e}var d=b.prototype;d.getPositionIndexOfVideoFromViewportVertically=function(){return this.$OzPositionToViewport$p_3!=null?this.$OzPositionToViewport$p_2.getPositionIndexOfVideoFromViewportVertically(this.$OzPositionToViewport$p_3):-1};d.destroy=function(){this.$OzPositionToViewport$p_3!=null&&this.$OzPositionToViewport$p_2.unregisterVideo(this.$OzPositionToViewport$p_3),this.$OzPositionToViewport$p_3=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],(function(a,b,c,d,e,f){"use strict";var g=.8;function a(a,b,c,d,e,f){f=Math.min(1,c/d);c=1+(1-f)*e;d=a.getBandwidth()*c;return d>b?g*(b/d):1-(1-g)*d/b}f.getPlaybackConfidence=a}),66);
__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzPlaybackConfidenceUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$10=null,this.$1=a,this.$5=b,this.$6=this.$15(b,c),this.$7=d,this.$8=e,this.$11=f,this.$12=g,this.$13=h,this.$14=i,this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_initialized").setResult("success").setUserInfo({newRepresentationIds:c.map(function(a){return a.getID()}).join(","),newCodecs:c.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:c.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(b.getID()).setType("video").setInitiator("OzAbrManager").log()}var b=a.prototype;b.setSourceBuffer=function(a){this.$9=a};b.$15=function(a,b){var c=this.$1.getNumber("abr_restrict_from_index"),d=this.$1.getNumber("abr_restrict_to_index");if(d===0&&c===0)return b;var e=b.findIndex(function(b){return a.getID()===b.getID()});return e===-1?b:b.filter(function(a,b){return b-e>=c&&b-e<=d})};b.$16=function(a){a=d("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(a,this.$12(),this.$11,{resolutionConstraintFactor:this.$1.getNumber("resolution_constraint_factor")});a=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$7,this.$12(),a);return a};b.getBestRepresentation=function(a){var b;a=(a=a==null?void 0:a.length)!=null?a:null;b=(b=(b=this.$9)==null?void 0:b.getSourceBufferState().getBufferedRanges())!=null?b:null;var e=this.$8.getCurrentTime();e=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(e,b);b=d("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation(this.$1,this.$4,e,c("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(b!=null){this.$10=b;this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}b=Date.now();this.$2=b;var f=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig()),g=this.$16(this.$6);f=this.$17(g,f,e,a);a=g[0];f=f||a;if(this.$18(e,f)){this.$10="high_buffer";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setPreviousRepresentationID(this.$5.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}a=this.$5;a!==f&&(this.$4=!0,this.$3=b,this.$5=f);this.$10="bandwidth";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("success").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setRepresentationID(f.getID()).setPreviousRepresentationID(a==null?void 0:a.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return f};b.$17=function(a,b,c,e){e===void 0&&(e=null);var f=null;for(var g=0;g<a.length;g++){var h=d("oz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(a[g],b,c,this.$1.getNumber("low_buffer_bandwidth_target_threshold"),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor"),e);h>this.$1.getNumber("abr_confidence_threshold")&&(!f||f.getBandwidth()<a[g].getBandwidth())&&(f=a[g])}return f};b.$18=function(a,b){var c=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold");return c>0&&a>=c&&this.$5.getBandwidth()>b.getBandwidth()?!0:!1};b.getLastEvaluationReason=function(){return this.$10};b.updateRepresentations=function(a){var b=this,c=this.$6;this.$6=a;var d=this.$6.find(function(a){return a.getDisplayLabel()===b.$5.getDisplayLabel()}),e=this.$5;this.$5=(d=d)!=null?d:this.$6[0];this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_representations_updated").setResult("success").setUserInfo({previousRepresentationIds:c.map(function(a){return a.getID()}).join(","),newRepresentationIds:a.map(function(a){return a.getID()}).join(","),newCodecs:a.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:a.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(this.$5.getID()).setPreviousRepresentationID(e==null?void 0:e.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/getSegmentsCount",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){var e=0,f=a.getTimeRange().startTime;a=a;var g=a.getTimeRange().startTime;while(a!==null&&g<c+f){var h=g;e++;a=b.getSegmentAfter(a);if(a)g=a.getTimeRange().startTime;else break;if(g<=h)return d}return Math.max(e,1)}f["default"]=a}),66);
__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",["oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getSegmentsCount=function(a,b,d){a=this.$1.getNumber("seconds_to_stream");var e=this.$1.getNumber("segments_to_stream");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(a)}var b=a.prototype;b.isActive=function(a){return!0};b.getSegmentsCount=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1.getLegacyConfig()),f=c("oz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),g=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor"),h=this.$2.some(function(a){a=a.getBandwidth();return Math.abs(a-e)<f*g});h=h?this.$4(a,b,d):this.$3.getSegmentsCount(a,b,d);a=this.$5(b,e);return Math.min(h,a)};b.$4=function(a,b,d){a=this.$1.getNumber("seconds_to_stream_near_bandwidth_boundary");var e=this.$1.getNumber("segments_to_stream_near_bandwidth_boundary");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};b.$5=function(a,b){var c=Infinity;a=a.getByteRange();if(a){var d=a.endByte;if(d!=null){var e=this.$1.getNumber("per_stream_duration_target");d=d-a.startByte;e>1e-5&&d!==0&&(c=Math.ceil(e*b/(d*8)))}}return c};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBlockedRepresentationsManager",["oz-player/shims/OzEventEmitter","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=new Map(),this.$3=new Set(),this.$4=new Set(),this.$5=new(c("oz-player/shims/OzEventEmitter"))(),this.$6(a),this.$7(a)}var b=a.prototype;b.isBlocked=function(a){return this.$3.has(a)};b.handleError=function(a,b){if(this.$1!=null&&this.$3.size===this.$1-1)return!1;if(d("oz-player/utils/OzErrorUtils").isOzError(b)&&b.getType()==="OZ_NETWORK"){b=Number(b.getExtra().code);if(!isNaN(b)&&this.$2.has(b)){this.$3.has(a)||this.$8(a,b);return!0}}return!1};b.$8=function(a,b){var d,e=this;this.$3.add(a);(d=this.$5)==null?void 0:d.emit("representation_blocked",a);d=this.$2.get(b)||0;if(d>0){var f=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){e.$3["delete"](a),e.$4["delete"](f)},d);this.$4.add(f)}};b.applyRestriction=function(a){var b=this;return a.filter(function(a){return!b.$3.has(a.getID())})};b.onRepresentationBlocked=function(a){return this.$5?this.$5.addListener("representation_blocked",a):{remove:function(){}}};b.setAvailableRepresentationsCount=function(a){this.$1=a};b.destroy=function(){var a;(a=this.$5)==null?void 0:a.removeAllListeners();this.$5=null;for(var a=this.$4,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;c("oz-player/shims/ozClearTimeout")(e)}this.$4.clear()};b.$6=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_json"));Array.isArray(a)&&a.forEach(function(a){a=parseInt(a,10);isNaN(a)||b.$2.set(a,-1)})}catch(a){}};b.$7=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_temporarily_json"));Object.entries(a).forEach(function(a){var c=a[0];a=a[1];c=parseInt(c,10);a=parseInt(a,10);!isNaN(c)&&!isNaN(a)&&b.$2.set(c,a)})}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=6,i=1e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzBufferAheadPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzBufferAheadPriorityStrategy$p_5=function(){e.emit("state_changed")};e.$OzBufferAheadPriorityStrategy$p_4=b;e.$OzBufferAheadPriorityStrategy$p_1=d;e.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("progress",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)),e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("timeupdate",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)));return e}var e=b.prototype;e.getName=function(){return"buffer_ahead"};e.setSourceBufferState=function(a){if(this.$OzBufferAheadPriorityStrategy$p_2)return;this.$OzBufferAheadPriorityStrategy$p_2=a;this.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(a.addEventListener("buffer_updated",c("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy$p_5,i)))};e.isActive=function(){return!0};e.getPriority=function(){var a=this.$OzBufferAheadPriorityStrategy$p_2;if(!a)return 1;var b=this.$OzBufferAheadPriorityStrategy$p_1.getCurrentTime();a=a.getBufferedRanges();b=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(b,a);return b>=h?0:1};e.destroy=function(){this.$OzBufferAheadPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferEndLimitStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){var a=this.$3();return this.$2>=a?this.$2-a:0};b.$3=function(){return this.$1.buffered.length===0?0:this.$1.buffered.end(0)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(a){return!a.isPlaying()};b.getSegmentsCount=function(a,b,c){a=a.getCurrentTime();var d=this.$1.computeBufferTarget(),e=1,f=b;b=b.getTimeRange().startTime;while(f!==null&&b<d+a){f=c.getSegmentAfter(f);if(!f)break;b=f.getTimeRange().startTime;e++}return e};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculator",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=0,this.$2=a,this.$3=b}var b=a.prototype;b.computeBufferTarget=function(){var a=this.$1;for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(e.isActive()){a=e.getBufferTarget();break}}for(e=this.$3,d=Array.isArray(e),c=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(c>=e.length)break;b=e[c++]}else{c=e.next();if(c.done)break;b=c.value}b=b;a=b.adjustBufferTargetInSeconds(a)}this.$1=a;return a};b.handleEvent=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.handleEvent(a)}};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=a.config;a=a.minimumBufferTargetSec;this.$2=1;this.$1=b;this.$3=a}var b=a.prototype;b.adjustBufferTargetInSeconds=function(a){var b;return Math.max((b=this.$3)!=null?b:this.$1.getNumber("buffer_target_constraint_minimum_sec"),a*this.$2)};b.handleEvent=function(a){var b=this.$2;switch(a){case"append_succeeded":b=Math.max(0,Math.min(1,b+this.$1.getNumber("buffer_target_constraint_append_succeeded_reward")));break;case"append_quota_exceeded":b=Math.max(0,Math.min(1,b-this.$1.getNumber("buffer_target_constraint_quota_exceeded_penalty")));break;default:a}this.$2=b};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!this.$1.isPlaying()};b.getSegmentsCount=function(a,b,c){return this.$2.getNumber("paused_stream_segments_count")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPlayheadAtInterruptionDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPlayheadAtInterruptionDetector$p_2=null;e.$OzPlayheadAtInterruptionDetector$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadAtInterruptionDetector$p_4=null;e.$OzPlayheadAtInterruptionDetector$p_1=b;b=d?d.addListener("enterBuffering",function(){e.$OzPlayheadAtInterruptionDetector$p_5()}):c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadAtInterruptionDetector$p_1,"waiting",function(){e.$OzPlayheadAtInterruptionDetector$p_5()});e.$OzPlayheadAtInterruptionDetector$p_3.addSubscriptions(b);e.$OzPlayheadAtInterruptionDetector$p_4=d;return e}var d=b.prototype;d.notifyStreamInterrupted=function(a){this.$OzPlayheadAtInterruptionDetector$p_2=a,this.$OzPlayheadAtInterruptionDetector$p_5()};d.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector$p_2=null};d.$OzPlayheadAtInterruptionDetector$p_5=function(){if(this.$OzPlayheadAtInterruptionDetector$p_2!=null){var a=this.$OzPlayheadAtInterruptionDetector$p_2||0;Math.abs(this.$OzPlayheadAtInterruptionDetector$p_1.currentTime-a)<h&&this.emit("playheadAtInterruption",a)}};d.destroy=function(){this.$OzPlayheadAtInterruptionDetector$p_3.release(),this.$OzPlayheadAtInterruptionDetector$p_4=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPlayingStatePriorityStrategy$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayingStatePriorityStrategy$p_3=function(){d.emit("state_changed")};d.$OzPlayingStatePriorityStrategy$p_2=b;d.$OzPlayingStatePriorityStrategy$p_1.addSubscriptions(d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("playing",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("play",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("pause",d.$OzPlayingStatePriorityStrategy$p_3));return d}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"playing_state"};d.setSourceBufferState=function(a){};d.getPriority=function(){return this.$OzPlayingStatePriorityStrategy$p_2.isPlaying()?1:0};d.destroy=function(){this.$OzPlayingStatePriorityStrategy$p_1.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPositionToViewportPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewportPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewportPriorityStrategy$p_4=function(){e.emit("state_changed")};e.$OzPositionToViewportPriorityStrategy$p_2=b;e.$OzPositionToViewportPriorityStrategy$p_1=d;e.$OzPositionToViewportPriorityStrategy$p_3.addSubscriptions(b.addListener("state_changed",e.$OzPositionToViewportPriorityStrategy$p_4));return e}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"position_to_viewport"};d.setSourceBufferState=function(a){};d.getPriority=function(){var a=this.$OzPositionToViewportPriorityStrategy$p_1.getNumber("prioritize_by_viewport_static_penalty"),b=this.$OzPositionToViewportPriorityStrategy$p_2.getPositionIndexOfVideoFromViewportVertically();return a>0?b===-1?a*-1:0:b===-1?-Infinity:-1*b};d.destroy=function(){this.$OzPositionToViewportPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPriorityCalculator$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPriorityCalculator$p_1=b;(b=d.$OzPriorityCalculator$p_2).addSubscriptions.apply(b,d.$OzPriorityCalculator$p_1.map(function(a){return a.addListener("state_changed",function(){d.emit("state_changed",d.compute(),a.getName())})}));return d}var d=b.prototype;d.setSourceBufferState=function(a){this.$OzPriorityCalculator$p_1.forEach(function(b){return b.setSourceBufferState(a)}),this.emit("state_changed",this.compute(),"source_buffer")};d.compute=function(){var a=this.$OzPriorityCalculator$p_1.reduce(function(a,b){b=b.isActive()?b.getPriority():0;return a+b},0);return Math.max(a,0)};d.destroy=function(){this.$OzPriorityCalculator$p_2.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzSingleCodecRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a){if(a.length<=0)return a.slice();var b=new Set(a.map(function(a){return g(a)})),c="av01",d=b.has(c)?c:b.values().next().value;return d==null?a.slice():a.filter(function(a){return g(a)===d})};return a}();function g(a){return a.getMimeCodecs().replace(/\..*$/,"")}f["default"]=a}),66);
__d("oz-player/strategies/OzStaleManifestBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=b,this.$2=a}var b=a.prototype;b.isActive=function(){return this.$2.getRefreshDate()==null&&this.$1.getNumber("stale_mpd_buffer_ahead_target")>0};b.getBufferTarget=function(){return this.$1.getNumber("stale_mpd_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$3=b}var b=a.prototype;b.isActive=function(){var a=this.$1.isPlaying();a&&(this.$2=!0);return!this.$2};b.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(a,b,c,d,e,f){"use strict";var g=1;a=function(){function a(a){this.$1=a}var b=a.prototype;b.computeMin=function(a,b,c){var d=Number.MAX_VALUE;for(var e=this.$1,f=Array.isArray(e),h=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;i.isActive(a)&&(d=Math.min(d,i.getSegmentsCount(a,b,c)))}return d===Number.MAX_VALUE?g:Math.max(d,g)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzSupportedMimeCodecsRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a){return a.filter(function(a){a=MediaSource.isTypeSupported(a.getMimeCodecs());return!!a})};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzEndOfStreamWatcher$p_1=new Map();d.$OzEndOfStreamWatcher$p_4=!1;d.$OzEndOfStreamWatcher$p_2=b;d.$OzEndOfStreamWatcher$p_3=c;return d}var d=b.prototype;d.registerMediaStream=function(a){this.$OzEndOfStreamWatcher$p_1.has(a)&&c("oz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher$p_1.set(a,!1)};d.notifyRepresentationSwitched=function(a){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.get(a)===!0&&this.$OzEndOfStreamWatcher$p_1.set(a,!1),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","representation_switched")};d.notifyMediaStreamEnded=function(a,b){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.set(a,!0),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","media_stream_ended:"+b)};d.$OzEndOfStreamWatcher$p_5=function(a,b){var c=this;if(this.$OzEndOfStreamWatcher$p_3.getBool("do_not_end_stream")){!this.$OzEndOfStreamWatcher$p_4&&this.$OzEndOfStreamWatcher$p_6()&&(this.$OzEndOfStreamWatcher$p_4=!0,this.emit("streamEnd"));return}var d=this.$OzEndOfStreamWatcher$p_2.getReadyState();d==="open"&&this.$OzEndOfStreamWatcher$p_6()&&this.$OzEndOfStreamWatcher$p_2.notifyEndOfStream(a,b).then(function(){c.emit("streamEnd")})["catch"](function(){c.emit("streamEnd")})};d.$OzEndOfStreamWatcher$p_6=function(){if(this.$OzEndOfStreamWatcher$p_1.size===0)return!1;for(var a=this.$OzEndOfStreamWatcher$p_1.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(!d)return!1}return!0};d.destroy=function(){this.$OzEndOfStreamWatcher$p_1.clear()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozReportUnexpectedError","oz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g){var h=this;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=null;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$1=a;this.$3=b;this.$4=d;this.$7=e;this.$8=g;f.then(function(a){h.$5=a},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch SBM promise then - create")});this.$6.addSubscriptions(e.addListener("switchRepresentation",function(a,b){h.$9(a,b)}))}var b=a.prototype;b.destroy=function(){this.$6.release(),this.$6.engage()};b.onError=function(a){return this.$2.onError(a)};b.$9=function(a,b){if(a!=="user")return;a=this.$5;if(a==null)return;var d=this.$7.getRepresentationIDAtTime(this.$3.getCurrentTime()),e;for(var f=0;f<this.$4.length;f++)this.$4[f].getID()===d&&(e=this.$4[f]);if(e&&b&&(this.$8||e.getBandwidth()<b.getBandwidth())){d=e.getSegmentByTime(this.$3.getCurrentTime());d&&a.clearRangeWithWait([{fromTime:this.$3.getCurrentTime(),toTime:this.$3.getDuration()}])["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch clearRangeWithWait catch")})}};return a}();g["default"]=a}),98);
__d("oz-player/manifests/IOzSegment",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return((a==null?void 0:a.getSequenceNumber())||0)===((b==null?void 0:b.getSequenceNumber())||0)}function b(a,b){return((a==null?void 0:a.getSequenceNumber())||0)>=((b==null?void 0:b.getSequenceNumber())||0)}f.isSequenceNumberEqual=a;f.isSequenceNumberGreaterOrEqual=b}),66);
__d("oz-player/networks/OzReadableStreamDataReader",["oz-player/networks/OzTransformStream","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;c===void 0&&(c=null);d=a.call(this)||this;d.$OzReadableStreamDataReader$p_1=[];d.$OzReadableStreamDataReader$p_3=Infinity;d.$OzReadableStreamDataReader$p_4=0;d.$OzReadableStreamDataReader$p_2=b;if(c!=null){b=c.getNumber("stream_reader_max_buffer_len");d.$OzReadableStreamDataReader$p_3=b>0?b:Infinity}return d}var d=b.prototype;d.onDataWritten=function(a){if(this.$OzReadableStreamDataReader$p_4+a.byteLength>=this.$OzReadableStreamDataReader$p_3){var b=c("oz-player/utils/ozConcatUint8Arrays")(this.$OzReadableStreamDataReader$p_1);b=b.buffer;this.$OzReadableStreamDataReader$p_2(b);this.$OzReadableStreamDataReader$p_1.length=0;this.$OzReadableStreamDataReader$p_4=0}this.$OzReadableStreamDataReader$p_1.push(a);this.$OzReadableStreamDataReader$p_4+=a.byteLength};d.onClose=function(){var a=this.$OzReadableStreamDataReader$p_1,b=c("oz-player/utils/ozConcatUint8Arrays")(a);b=b.buffer;a.length=0;this.$OzReadableStreamDataReader$p_4=0;this.$OzReadableStreamDataReader$p_2(b)};return b}(c("oz-player/networks/OzTransformStream"));g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTask",["oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/utils/OzErrorUtils","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$3=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$9=null,this.$1=this.$2=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$6=c("oz-player/shims/OzPerformance").now(),this.$7=b,this.$8=a,this.$9=d}var b=a.prototype;b.run=function(){var a=this.$3.getPromise(),b=this.$7;if(b){var e=c("oz-player/shims/OzPerformance").now()-this.$6;d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,b,"streaming_task",function(){},function(a){a.setTimeToRequestSent(Math.floor(e))})}this.$2.resolve();return a};b.getPromise=function(){return this.$3.getPromise()};b.cancel=function(){this.$3.getPromise()["catch"](function(){}),this.$3.reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAMING_TASK",description:"task cancelled",extra:{code:"OZ_ST-1"}})),this.$5=!0};b.finish=function(){this.$3.resolve()};b.isCancelled=function(){return this.$5};b.addStreamDeferred=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$10({createStreamResult:a,changeStatusDeferred:d,createStreamDeferred:e,loggerProviderWithStreamContext:b});b=function(){return e.getPromise()};return{genStream:b,cancel:function(){if(a){var b=a.pausableStream;return b.pauseStream()}},getStatusChangePromise:function(){return d.getPromise()}}};b.$10=function(a){var b=this,e=a.createStreamResult,f=a.changeStatusDeferred,g=a.createStreamDeferred,h=a.loggerProviderWithStreamContext,i=a.loggingPayloads;a=this.$1.getPromise();var j=c("oz-player/shims/OzPerformance").now(),k=this.$1=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));k.getPromise()["catch"](function(){});a.then(function(){if(e){var a=e.pausableStream;e.loggingPayloads&&(i=e.loggingPayloads);g.resolve(a.getStream());b.$4=a;var f=c("oz-player/shims/OzPerformance").now(),k=b.$11(a.startStream());if(h){var l=function(c){var e=i;if(e){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(c,e.getRequestUrl(),e.segments,f-j,a.getBytesStreamed(),e.getResponse());var g=b.$9;g&&g(c,e.getRequestUrl(),e.getResponse())}};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(k,h,"fetch_stream",l,l)}return k}return null}).then(function(a){b.$4=null,k.resolve(),f.resolve(a||"cancelled")})["catch"](function(a){b.$4=null,b.$3.reject(a),k.reject(a),f.reject(a)})};b.$11=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return a==="stream_done"?"done":"error"})})};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzRoundRobinPriorityTaskQueue",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=-1),this.$3=function(){},this.$4=[],this.$5=new Map(),this.$1=a,this.$2=b}var b=a.prototype;b.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(a){return a.queue.length?a.priority:-Infinity}))};b.enqueue=function(a,b){var d=this;b=b;b=this.$6(b);var e=this.$5.get(a);if(e===b)return;this.$5.has(a)&&this.remove(a);e=this.$7(b);var f=this.$4[e];f&&f.priority===b||(f={priority:b,queue:[]},this.$4.splice(e,0,f));this.$5.set(a,b);f.queue.push(a);a.getPromise().then(function(){d.remove(a)},function(){d.remove(a)})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzRoundRobinPriorityTaskQueue remove after task run")});this.$3(a,b>=this.$1?"immediate":"normal")};b.updatePriority=function(a,b){if(!this.$5.has(a))return;this.enqueue(a,b)};b.dequeue=function(){for(var a=0;a<this.$4.length;a++){var b=this.$4[a];if(b.queue.length){b=b.queue.shift();this.$5["delete"](b);return b}}return null};b.remove=function(a){var b=this.$5.get(a);if(b!==void 0){b=this.$7(b);b=this.$4[b];if(b&&b.queue){var c=b.queue.findIndex(function(b){return b===a});c>-1&&b.queue.splice(c,1)}this.$5["delete"](a)}};b.setOnTaskUpdated=function(a){this.$3=a};b.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})};b.getLength=function(){return this.$5.size};b.test_isEmpty=function(){return this.$5.size===0&&this.$4.every(function(a){return a.queue.length===0})};b.$7=function(a){a=a;a=this.$6(a);var b;for(b=0;b<this.$4.length;b++)if(a>=this.$4[b].priority)return b;return b};b.$6=function(a){a=a;this.$2>=0&&(a=Number.parseFloat(a.toFixed(this.$2)));return a};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$3=0;this.$1=a;a=b||{};b=a.taskTimeout;this.$4=b||0}var b=a.prototype;b.start=function(){this.$1.setOnTaskUpdated(this.$5.bind(this));var a=this.$1.dequeue();a&&this.$6(a,"immediate")};b.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};b.$5=function(a,b){b=this.$6(a,b);b&&this.$1.remove(a)};b.$6=function(a,b){var d=this;if(this.$2&&b!=="immediate")return!1;this.$2&&this.$2.cancel();b=a.run()["catch"](function(a){});this.$4>0&&(b=c("oz-player/shims/OzMaybeNativePromise").race([b,new(c("oz-player/shims/OzMaybeNativePromise"))(function(a,b){c("oz-player/shims/ozSetTimeoutAcrossTransitions")(a,d.$4)})]));this.$3++;this.$2=a;b=b.then(function(){d.$3--;d.$2===a&&(d.$2=null);if(d.$3===0){var b=d.$1.dequeue();b&&d.$6(b,"immediate")}});b["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzSequentialTaskScheduler task complete")});return!0};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue","oz-player/scheduling/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map(),j=2,k=2,l=6e4;function a(a){var b=h.get(a);if(!b){b=new(c("oz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(j,k);var d=new(c("oz-player/scheduling/OzSequentialTaskScheduler"))(b,{taskTimeout:l});h.set(a,b);i.set(a,d);d.start()}return b}g.OZ_QUEUE_MAX_PRIORITY=j;g.getQueue=a}),98);
__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=this;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=0;this.$9=!1;this.$10=null;var e=a.mimeType,f=a.priorityCalculator,g=a.loggerProvider,h=a.setCustomFetchStreamLoggingAttributes,i=a.config;a=a.bandwidthEstimator;this.$5=e;this.$1=f;this.$6=d("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5);this.$7=g;this.$8=i;this.$11=(e=a)!=null?e:null;this.$10=h;this.$3.addSubscriptions(this.$1.addListener("state_changed",function(a,c){b.$12(a,c),b.$2&&b.$6.updatePriority(b.$2,b.$4)}))}var e=a.prototype;e.$13=function(){var a=[];a.push(c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$5,this.$11));return a};e.startStreamDeferred=function(a){var b=a.debugName,c=a.segments,d=a.networkManager,e=a.segmentsLoggerProvider,f=a.mediaStreamType,g=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;var h=this.$14(e),i=this.$13();c.length>0?d=d.createPausableStream({debugName:b,segments:c,pipeThroughRangeStreamProviders:i,loggerProvider:e,mediaStreamType:f,dataAppendedCallback:g,dataAppendedErrorCallback:a}):d=null;this.$9=!0;b=h.addStreamDeferred(d,e);return{genStream:b.genStream,cancel:b.cancel,getStatusChangePromise:this.$15(b.getStatusChangePromise)}};e.$14=function(a){var b=this.$2;this.$12(this.$1.compute(),"start_stream");!b||b.isCancelled()?(b=this.$2=new(c("oz-player/networks/OzStreamingTask"))(this.$8,a,this.$10),this.$6.enqueue(b,this.$4)):this.$6.updatePriority(b,this.$4);return b};e.$15=function(a){var c=this;return function(){return a().then(function(a){c.$16();return a})["catch"](function(a){c.$16();return(h||(h=b("Promise"))).reject(a)})}};e.finishTaskIfNoOngoingStream=function(){this.$9||this.$17()};e.destroy=function(){this.$3.release();var a=this.$2;this.$2=null;a&&this.$6.remove(a)};e.$16=function(){this.$9=!1,this.$12(this.$1.compute(),"end_stream"),this.$4<d("oz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$17()};e.$17=function(){this.$2&&(this.$2.finish(),this.$2=null)};e.$12=function(a,b){if(a===this.$4)return;this.$4=a;this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(b).log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzStreamLengthStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e){b=b;e=e;var f=a.getNumber("segments_to_stream_under_playhead_threshold");a=a.getNumber("low_segment_stream_playhead_threshold");f>0&&d.getCurrentTime()<a&&(b=f);d=[];d.push(e);for(a=1;a<b;a++){f=c.getSegmentAfter(e);if(!f)break;e=f;d.push(e)}return d}f.getStreamingSegments=a}),66);
__d("oz-player/streams/OzMediaStreamLoopDriver",["oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$2=null;this.$3=!1;this.$6=function(){var a;d.$7();if(d.$3)return;(a=d.$5)==null?void 0:a.start();a=d.$1.execute();var b=d.$1.getLoopInterval();b&&(d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$6()},b));a&&a.then(d.$6)["catch"](function(b){d.$7();var a=d.$1.handleError(b);if(a)d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(d.$6,a);else{(a=d.$5)==null?void 0:a.setError(b);(a=d.$5)==null?void 0:a.log();d.$5=null;d.$3=!0}})};this.$1=a;this.$4=b}var b=a.prototype;b.start=function(){if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"restart is not implemented"});this.$5=this.$4.getOperationLogger("media_stream").start();this.$6()};b.stop=function(){var a;this.$7();this.$3=!0;(a=this.$5)==null?void 0:a.log();this.$5=null};b.$7=function(){this.$2&&(c("oz-player/shims/ozClearTimeout")(this.$2),this.$2=null)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzRangeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b.filter(function(b){return b.startTime<=a&&b.endTime>=a});return b!=null&&b.length>0?b[0]:null}f.getRangeForTime=a}),66);
__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzRangeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.getEndingSegment();return a!=null&&a.getSequenceNumber()!=null?a.getSequenceNumber():0}var h=function(a,b){a=a.getCurrentTime();return b?d("oz-player/utils/OzRangeUtils").getRangeForTime(a,b.getBufferedRanges()):null},i=function(a,b,c){b=h(a,b);c=c?c.getTimeRange().endTime:0;a=a.getCurrentTime()||0;c?a=c:b&&(a=b.endTime);return a};b=function(a,b,c,e,f,g,h,j){h=a.getPredictedSegmentAfter(g);if(h&&b.isPlaying())return h;j=i(b,e,g);h=f.getTimeRanges();e=d("oz-player/utils/OzNumericalRangeUtil").findDiffCoveredByRanges(b.getCurrentTime(),j,h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(e>c)return null;g=a.getSegment(0);g&&g.getTimeRange().startTime>j&&(j=g.getTimeRange().startTime);return a.getSegmentByTime(j)};g.getEndingSequenceNumber=a;g.getTimeToQuery=i;g.getSegment=b}),98);
__d("oz-player/streams/OzSegmentUtils",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.reduce(function(a,b){var c;return((c=b==null?void 0:b.getSequenceNumber())!=null?c:0)>((c=a==null?void 0:a.getSequenceNumber())!=null?c:0)?b:a})}function b(a,b){var d=new(c("oz-player/manifests/OzSegmentOptions"))();return a.getPredictedSegmentAfter({getData:function(){return null},getByteRange:function(){return null},getSequenceNumber:function(){return b-1},getTimeRange:function(){return{endTime:0,startTime:0}},getURI:function(){return new(c("oz-player/shims/OzURI"))("")},getOptions:function(){return d}})}function d(a){a.getOptions().setSegmentNumDecisionTime(Date.now());return a}g.getMaxSegment=a;g.getSegmentForSequenceNumber=b;g.markSegmentCreateTime=d}),98);
__d("oz-player/utils/OzTaggedTimeRanges",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=a?a:function(a,b){return a===b}}var b=a.prototype;b.add=function(a,b,c){if(b<a)return;if(b===a)return;if(this.$1.length===0){this.$1.push({startTime:a,endTime:b,tag:c});return}var d=0,e=0;for(var f=0;f<this.$1.length;f++){if(a===this.$1[f].startTime&&b===this.$1[f].endTime){d=f;e=f+1;break}a>=this.$1[f].startTime&&(d=f+1);b<=this.$1[f].endTime&&(e=f);if(b<this.$1[f].startTime)break}this.$1.splice(d,e-d,{startTime:a,endTime:b,tag:c});this.$5(d)};b.$5=function(a){a=a;var b=this.$1[a],c=null;a!==0&&(c=this.$1[a-1]);c!==null&&(this.$4(c.tag,b.tag)?c.endTime>=b.startTime&&(this.$1.splice(a-1,2,{startTime:c.startTime,endTime:Math.max(b.endTime,c.endTime),tag:b.tag}),a--):(c.endTime>b.startTime&&c.startTime===b.startTime?(this.$1.splice(a-1,1),a--):c.endTime>b.startTime&&this.$1.splice(a-1,1,{startTime:c.startTime,endTime:b.startTime,tag:c.tag}),c.endTime>b.endTime&&this.$1.splice(a+1,0,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})));c=null;a!==this.$1.length-1&&(c=this.$1[a+1]);c&&(this.$4(c.tag,b.tag)?c.startTime<=b.endTime&&this.$1.splice(a,2,{startTime:b.startTime,endTime:Math.max(c.endTime,b.endTime),tag:b.tag}):c.startTime<=b.endTime&&(c.endTime<b.endTime?(this.$1.splice(a,1,{startTime:b.startTime,endTime:c.startTime,tag:b.tag}),this.$1.push({startTime:c.endTime,endTime:b.endTime,tag:b.tag})):this.$1.splice(a+1,1,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})))};b.get=function(a){var b=a>=this.$3?this.$2:0,c=null;for(b=b;b<this.$1.length;b++)if(this.$1[b].startTime<=a&&a<this.$1[b].endTime){c=b;break}this.$2=c===null?0:c;this.$3=a;return c===null?null:this.$1[c].tag};b.getLength=function(){return this.$1.length};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzMediaStream",["oz-player/manifests/IOzSegment","oz-player/networks/OzNetworkManager","oz-player/networks/OzReadableStreamDataReader","oz-player/networks/OzStreamingTaskStateManager","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzDeferred","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzNetworkDiagnostics","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzTaggedTimeRanges"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i=.2,j={AUDIO:1,CAPTION:3,VIDEO:0};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzMediaStream$p_2=0;e.$OzMediaStream$p_3=0;e.$OzMediaStream$p_4=null;e.$OzMediaStream$p_13=null;e.$OzMediaStream$p_15=!1;e.$OzMediaStream$p_16=null;e.$OzMediaStream$p_17=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzMediaStream$p_19=[];e.$OzMediaStream$p_22=0;e.$OzMediaStream$p_29=!0;e.$OzMediaStream$p_31=!1;e.$OzMediaStream$p_32=null;e.$OzMediaStream$p_33=new(c("oz-player/utils/OzErrorEmitter"))();e.$OzMediaStream$p_35=!0;e.$OzMediaStream$p_38=0;e.$OzMediaStream$p_39=null;e.$OzMediaStream$p_40=null;var f=b.config,g=b.sourceBufferManagerPromise,h=b.networkManager,i=b.playbackState,j=b.endOfStreamWatcher,k=b.bufferTargetCalculator,l=b.priorityCalculator,m=b.streamSegmentsCountCalculator,n=b.abrManager,o=b.representation,p=b.loggerProvider,q=b.segmentLocator,r=b.setCustomFetchStreamLoggingAttributes,s=b.blockedRepresentationsManager,t=b.dynamicVideoLibrary,u=b.shouldAppendOncePerStream,v=b.mediaStreamType,w=b.warningEmitter;b=b.mpd;e.$OzMediaStream$p_1=f;e.$OzMediaStream$p_5=g;e.$OzMediaStream$p_5.then(function(a){e.$OzMediaStream$p_6=a,e.$OzMediaStream$p_16&&e.$OzMediaStream$p_16.setSourceBuffer(a),e.$OzMediaStream$p_27.setSourceBufferState(a.getSourceBufferState()),e.$OzMediaStream$p_47()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - create")});e.$OzMediaStream$p_12=h;e.$OzMediaStream$p_7=i;e.$OzMediaStream$p_14=j;(f=e.$OzMediaStream$p_14)==null?void 0:f.registerMediaStream(babelHelpers.assertThisInitialized(e));e.$OzMediaStream$p_26=k;e.$OzMediaStream$p_27=l;e.$OzMediaStream$p_28=m;e.$OzMediaStream$p_16=n;e.$OzMediaStream$p_18=p.cloneContext();e.$OzMediaStream$p_36=q;e.$OzMediaStream$p_25=new(c("oz-player/utils/OzTaggedTimeRanges"))(function(a,b){return a.id===b.id});e.$OzMediaStream$p_39=r;e.$OzMediaStream$p_40=s;e.$OzMediaStream$p_42=t;e.$OzMediaStream$p_43=u;e.$OzMediaStream$p_44=v;e.$OzMediaStream$p_45=w;e.$OzMediaStream$p_46=b;e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_7.addEventListener("seeking",function(){var a=i.getCurrentTime(),b=null;e.$OzMediaStream$p_1.getBool("ignore_reset_after_seek_if_bufferahead")&&e.$OzMediaStream$p_8.canPredict()&&(e.$OzMediaStream$p_6?d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(a,e.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges())>0:!1)?b="no_reset_anchor":(b="reset_anchor",e.$OzMediaStream$p_41=Date.now(),e.$OzMediaStream$p_9!=null&&(e.$OzMediaStream$p_48(),e.$OzMediaStream$p_31=!1,e.$OzMediaStream$p_24&&e.$OzMediaStream$p_24.resolve()));e.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_element_event").setInitiator("seeking").setLength(a*1e3).setReason(b).setUserInfo({streamAnchorSegmentNumber:String((a=e.$OzMediaStream$p_9)==null?void 0:a.getSequenceNumber())}).log()}));e.$OzMediaStream$p_40!=null&&e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_40.onRepresentationBlocked(function(a){return e.$OzMediaStream$p_49(a)}));e.$OzMediaStream$p_21=d("oz-player/utils/OzMimeUtil").getMimeType(o.getMimeCodecs());e.$OzMediaStream$p_30=new(c("oz-player/networks/OzStreamingTaskStateManager"))({mimeType:e.$OzMediaStream$p_21,priorityCalculator:e.$OzMediaStream$p_27,loggerProvider:e.$OzMediaStream$p_18,setCustomFetchStreamLoggingAttributes:e.$OzMediaStream$p_39,config:e.$OzMediaStream$p_1,bandwidthEstimator:e.$OzMediaStream$p_12.getBandwidthEstimator()});e.$OzMediaStream$p_23=new(c("oz-player/streams/OzMediaStreamLoopDriver"))(babelHelpers.assertThisInitialized(e),e.$OzMediaStream$p_18);e.$OzMediaStream$p_50(o);return e}var e=b.prototype;e.start=function(){this.$OzMediaStream$p_23.start()};e.getCurrentRepresentation=function(){return this.$OzMediaStream$p_8};e.switchRepresentation=function(a,b){b===void 0&&(b=null),this.$OzMediaStream$p_50(a,"user",b)};e.onError=function(a){return this.$OzMediaStream$p_33.onError(a)};e.updateRunTimeConfigs=function(a){var b=a.streamDataHandler;a=a.resetStreamAnchor;b!==void 0&&(this.$OzMediaStream$p_34=b);a===!0&&this.$OzMediaStream$p_8.canApproximateId()&&(this.$OzMediaStream$p_48(),this.$OzMediaStream$p_10=null)};e.$OzMediaStream$p_50=function(a,b,d){var e,f=this;b===void 0&&(b="internal");d===void 0&&(d=null);b==="user"&&this.$OzMediaStream$p_48();(e=this.$OzMediaStream$p_20)==null?void 0:e.remove();this.$OzMediaStream$p_20=null;e=this.$OzMediaStream$p_18.cloneContext().setType(this.$OzMediaStream$p_21+";init");var g=e.cloneContext().setRepresentationID(a.getID()),h=a.getInitSegment(),i=h.getData(),j=e.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream$p_8?this.$OzMediaStream$p_8.getID():null).setInitiator(b).setRepresentationID(a.getID()).setReason(b==="internal"?this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason():b).start();this.$OzMediaStream$p_8=a;e=function(){var a;j.log();f.$OzMediaStream$p_26.handleEvent("append_succeeded");f.emit("initAppended");(a=f.$OzMediaStream$p_14)==null?void 0:a.notifyRepresentationSwitched(f)};var k=function(b){var c;j.setError(b).log();f.$OzMediaStream$p_51(b);(c=f.$OzMediaStream$p_40)==null?void 0:c.handleError(a.getID(),b);if(a.getID()!==f.$OzMediaStream$p_8.getID()){(c=f.$OzMediaStream$p_24)==null?void 0:c.resolve()}};if(i==null){h=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/init/"+this.$OzMediaStream$p_44,segments:[h],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:g,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:e,dataAppendedErrorCallback:k});i=h.getStream()}this.emit("switchRepresentation",b,a);this.$OzMediaStream$p_52({data:i,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:d,dataAppendedCallback:e,dataAppendedErrorCallback:k,loggerProvider:g.cloneContext(),appendTarget:0});if(d){h=a.getSegmentByTime(d[0]);if(h){b=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/startingSegment/"+this.$OzMediaStream$p_44,segments:[h],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:g,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:e,dataAppendedErrorCallback:k});i=b.getStream();this.$OzMediaStream$p_52({data:i,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:null,dataAppendedCallback:e,dataAppendedErrorCallback:k,loggerProvider:g.cloneContext(),appendTarget:1})}}};e.getLoopInterval=function(){return this.$OzMediaStream$p_22};e.execute=function(){var a=this.$OzMediaStream$p_53();if(a){var b=this.$OzMediaStream$p_24=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));a.then(function(){return b.resolve()})["catch"](function(a){return b.reject(a)});return b.getPromise()}return null};e.$OzMediaStream$p_54=function(a){if(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_29&&this.$OzMediaStream$p_15){a=this.$OzMediaStream$p_16.getBestRepresentation(a);if(this.$OzMediaStream$p_8!==a)return a}return null};e.$OzMediaStream$p_55=function(a){var b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null,c=this.$OzMediaStream$p_26.computeBufferTarget();if(c<=0)return null;var e=null;a&&(e=this.$OzMediaStream$p_8.getCustomFieldFirstSegment());if(!e&&this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_36!=null){a=this.$OzMediaStream$p_35&&this.$OzMediaStream$p_7.isPlaying();return this.$OzMediaStream$p_36.getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_9,this.$OzMediaStream$p_10,this.$OzMediaStream$p_1,a,this.$OzMediaStream$p_21)}else{e||(e=d("oz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_8,this.$OzMediaStream$p_9,this.$OzMediaStream$p_1,this.$OzMediaStream$p_32));if(this.$OzMediaStream$p_8.canPredict()){a=this.$OzMediaStream$p_10&&this.$OzMediaStream$p_10.getSequenceNumber()||0;c=e&&e.getSequenceNumber()||0;if(e&&this.$OzMediaStream$p_10&&a>=c){c=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(this.$OzMediaStream$p_8);return(c||0)>=a?this.$OzMediaStream$p_10:null}}}if(!e&&!this.$OzMediaStream$p_56()){c=this.$OzMediaStream$p_8.getEndingSegment();if(c&&this.$OzMediaStream$p_8.isEndingSegment(c)){a=c.getTimeRange().endTime;b=d("oz-player/streams/OzSegmentLocator").getTimeToQuery(this.$OzMediaStream$p_7,b,this.$OzMediaStream$p_9);b>=a&&!this.$OzMediaStream$p_56()&&(e=c)}}return e};e.$OzMediaStream$p_57=function(){return!this.$OzMediaStream$p_15};e.$OzMediaStream$p_58=function(a,b){var e;e=(e=b.fetchSingleSegment)!=null?e:!1;b=(b=b.preventRepresentationSwitch)!=null?b:!1;var f=[];if(e)f=[a];else{e=this.$OzMediaStream$p_28.computeMin(this.$OzMediaStream$p_7,a,this.$OzMediaStream$p_8);f=d("oz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream$p_1,e,this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,a);f=c("oz-player/networks/OzNetworkManager").getStreamableSegmentsRange(f);if(!b){e=this.$OzMediaStream$p_54(f);if(e){this.$OzMediaStream$p_50(e);a=this.$OzMediaStream$p_55(!1);if(!a)return[];else return this.$OzMediaStream$p_58(a,{fetchSingleSegment:!1,preventRepresentationSwitch:!0})}}}return f};e.$OzMediaStream$p_59=function(){var a=this,b=function(b){b==null?void 0:b.remove(),a.$OzMediaStream$p_20===b&&(a.$OzMediaStream$p_20=null)};b(this.$OzMediaStream$p_20);var d=null;return new(c("oz-player/shims/OzMaybeNativePromise"))(function(c,e){d=a.getCurrentRepresentation().addUpdateListener(function(){b(d),c()}),a.$OzMediaStream$p_20=d})["catch"](function(a){b(d);throw a})};e.$OzMediaStream$p_53=function(){var a=this,b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null;if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_10&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_10)){this.endStream("pdash_ending_segment_had_error");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end1").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_9&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_9)){this.endStream("pdash_anchor_segment_is_ending_segment");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end2").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}var e=this.$OzMediaStream$p_57(),f=this.$OzMediaStream$p_55(e);if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_11!=null&&d("oz-player/manifests/IOzSegment").isSequenceNumberGreaterOrEqual(f,this.$OzMediaStream$p_11)){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("segment_end").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}d("oz-player/manifests/IOzSegment").isSequenceNumberEqual(f,this.$OzMediaStream$p_37)?this.$OzMediaStream$p_38++:this.$OzMediaStream$p_38=0;this.$OzMediaStream$p_37=f;this.$OzMediaStream$p_7.isPlaying()&&this.$OzMediaStream$p_38>0&&this.$OzMediaStream$p_18.cloneContext().getOperationLogger("get_segment_to_stream_same_segment").setReason((f==null?void 0:f.getSequenceNumber())!=null?String(f==null?void 0:f.getSequenceNumber()):null).setLength(this.$OzMediaStream$p_38).setRepresentationID(this.$OzMediaStream$p_8.getID()).setSegmentStartTime(f==null?void 0:f.getTimeRange().startTime).setSegmentEndTime(f==null?void 0:f.getTimeRange().endTime).log();if(this.$OzMediaStream$p_31){var g;this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("ongoing_stream").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return null}if(!f||this.$OzMediaStream$p_31){if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_1.getBool("ms_promise_for_null")){var i=this.$OzMediaStream$p_1.getNumber("ms_promise_for_null_ms");return new(c("oz-player/shims/OzMaybeNativePromise"))(function(b,d){var e=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){c("oz-player/shims/ozClearTimeout")(e),b()},i?i:(a.$OzMediaStream$p_8.getMaxGopSec()||1)*1e3)})}this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_31||this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_22=0;var j=this.$OzMediaStream$p_58(f,{fetchSingleSegment:e});if(j.length===0){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("no_stream_segments").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((f=this.$OzMediaStream$p_9)==null?void 0:f.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_15=!0;var k=j[j.length-1]||null,l=this.$OzMediaStream$p_8,m=function(){return l.isEndingSegment(k)};j.length!==0||c("oz-player/shims/ozvariant")(0,23148);g=j[0];f=g.getTimeRange().startTime;var n=k.getTimeRange().endTime,o={startTime:f,endTime:n,tag:{id:this.$OzMediaStream$p_8.getID()}},p=function(b){v.setAppendedBufferMs(Math.round(b.appendedSec*1e3)),v.log(),a.$OzMediaStream$p_26.handleEvent("append_succeeded"),j.forEach(function(b){a.emit("SegmentAppended",a.$OzMediaStream$p_60(b,o))}),m()&&a.endStream("appended_ending_segment"),a.$OzMediaStream$p_61(o,b)},q=function(b){v.setError(b).log();var c=t||s;c&&c.cancel();a.$OzMediaStream$p_51(b)},r=this.$OzMediaStream$p_18.cloneContext();r.setRepresentationID(this.$OzMediaStream$p_8.getID());r.setSegmentStartTime(f).setSegmentEndTime(n);var s,t;!e?(t=this.$OzMediaStream$p_30.startStreamDeferred({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44,segments:j,networkManager:this.$OzMediaStream$p_12,sourceBufferState:b,playbackState:this.$OzMediaStream$p_7,segmentsLoggerProvider:r.cloneContext(),mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s):(s=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44+"/prefetch",segments:j,pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21,this.$OzMediaStream$p_12.getBandwidthEstimator())],loggerProvider:r.cloneContext(),requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s);this.$OzMediaStream$p_31=!0;var u=this.$OzMediaStream$p_62(g,k,j.length),v=r.getOperationLogger("queued_append");v.start().setReason(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason());var w=function(c,b){a.$OzMediaStream$p_52({data:c,mimeCodecs:b,clearSourceBufferRange:null,dataAppendedCallback:p,dataAppendedErrorCallback:q,loggerProvider:r.cloneContext(),appendTarget:u})},x;!!t||!!s||c("oz-player/shims/ozvariant")(0,23147);var y=this.$OzMediaStream$p_8.getMimeCodecs();t?(t.genStream().then(function(a){return w(a,y)})["catch"](function(b){return a.$OzMediaStream$p_33.emitError(b)}),x=t.getStatusChangePromise()):s&&(w(s.getStream(),y),x=s.getStatusChangePromise());!x&&c("oz-player/shims/ozvariant")(0,51928);f=x.then(function(b){a.$OzMediaStream$p_63(b,k);return a.$OzMediaStream$p_64()}).then(function(){a.$OzMediaStream$p_2=0});return f["catch"](function(b){var c,d=a.$OzMediaStream$p_9;a.$OzMediaStream$p_65(k);(c=a.$OzMediaStream$p_40)==null?void 0:c.handleError(l.getID(),b);return a.$OzMediaStream$p_66(b,k,d)})};e.handleError=function(a){var b=this.$OzMediaStream$p_18.getOperationLogger("media_stream_loop_error");b.setError(a).setResult("failed").log();return this.$OzMediaStream$p_1.getNumber("loop_body_handle_error_interval_ms")};e.$OzMediaStream$p_66=function(a,b,e){var f=this;this.$OzMediaStream$p_31=!1;var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),h=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),i=h[0],j=h[1],k=d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(i,this.$OzMediaStream$p_21),l=function(b){f.$OzMediaStream$p_2++;f.$OzMediaStream$p_18.getOperationLogger("media_stream").setInitiator("fetch_stream_"+(b.behavior!=null?b.behavior:"default")).setLength(b.timeoutMs).setReason(""+k.getDescription()).setError(k).setCode(j.length>0?Number.parseInt(j,10):null).setType(f.$OzMediaStream$p_21).log();if(b.behavior==="retry_failed_request")f.$OzMediaStream$p_9=e;else if(b.behavior==="recover_failed_request"&&d("oz-player/utils/OzErrorUtils").isOzError(a)){var h;h=(h=a.getExtra())==null?void 0:h.headers;h=c("oz-player/shims/OzNetworkDiagnostics").getNextValidSegmentId(h);h!=null&&(f.$OzMediaStream$p_9=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(f.$OzMediaStream$p_8,h-1))}c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){f.emit("streamErrorRetry",k);return g.resolve()},b.timeoutMs)};this.$OzMediaStream$p_4!==j?(this.$OzMediaStream$p_4=j,this.$OzMediaStream$p_3=1):this.$OzMediaStream$p_3++;h=!0;var m=function(){h=!1};i={consecutiveFailuresForErrorCode:this.$OzMediaStream$p_3,endStream:function(){m(),f.$OzMediaStream$p_10=b,f.$OzMediaStream$p_11=b,f.endStream("streamError_event_object"),g.resolve()},error:k,isInitialRequest:!1,retry:function(a){var b;m();l({timeoutMs:(b=a==null?void 0:a.waitMs)!=null?b:0,behavior:a==null?void 0:a.behavior})},retryAttemptCount:this.$OzMediaStream$p_2};this.emit("streamError",i);h&&(this.$OzMediaStream$p_33.emitError(k),this.$OzMediaStream$p_2=0,g.resolve());return g.getPromise()};e.$OzMediaStream$p_65=function(a){this.$OzMediaStream$p_48();this.$OzMediaStream$p_10=a;this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();a=this.$OzMediaStream$p_6;a&&a.cancelOperationAndCleanQueue(this.$OzMediaStream$p_18)};e.$OzMediaStream$p_63=function(a,b){a==="done"&&(this.$OzMediaStream$p_9=b)};e.$OzMediaStream$p_64=function(){this.$OzMediaStream$p_31=!1};e.$OzMediaStream$p_52=function(a){this.$OzMediaStream$p_19.push(a),this.$OzMediaStream$p_6&&this.$OzMediaStream$p_47()};e.$OzMediaStream$p_61=function(a,b){if(a==null)return;this.$OzMediaStream$p_8.canPredict()&&b.startTime_UNSAFE&&b.endTime_UNSAFE?this.$OzMediaStream$p_25.add(b.startTime_UNSAFE,b.endTime_UNSAFE,a.tag):this.$OzMediaStream$p_25.add(a.startTime,a.endTime,a.tag)};e.$OzMediaStream$p_47=function(){var a=this;this.$OzMediaStream$p_19.forEach(function(b){var d=b.data,e=b.mimeCodecs,f=b.clearSourceBufferRange,g=b.dataAppendedCallback,h=b.dataAppendedErrorCallback,i=b.loggerProvider;b=b.appendTarget;d=d instanceof Uint8Array||a.$OzMediaStream$p_34==null?d:d.pipeThrough(new(c("oz-player/networks/OzReadableStreamDataReader"))(a.$OzMediaStream$p_34.bind(a,a.$OzMediaStream$p_8),a.$OzMediaStream$p_1));a.$OzMediaStream$p_6&&a.$OzMediaStream$p_6.queueData(d,e,f,i,b).then(function(a){if(!a)return;g(a)})["catch"](function(a){h(a)})});this.$OzMediaStream$p_19=[]};e.$OzMediaStream$p_67=function(){var a=this.$OzMediaStream$p_6;if(!a)return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=this.$OzMediaStream$p_7.getCurrentTime(),d=[{fromTime:0,toTime:b}],e=this.$OzMediaStream$p_1.getNumber("clear_buffer_around_playhead_boundary_ms");if(e>0){e=e/1e3;var f=a.getSourceBufferState();f=f.getBufferedRanges();f=f.length>=1?f[f.length-1].endTime:b;d=[{fromTime:0,toTime:Math.max(0,b-e)}];b+e<f&&d.push({fromTime:b+e,toTime:f})}return a.clearRangeWithWait(d)};e.$OzMediaStream$p_68=function(a){return!1};e.$OzMediaStream$p_51=function(a){var b=this;if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_QUOTA_EXCEEDED"){this.emit("streamErrorRetry",d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(a,this.$OzMediaStream$p_21));this.$OzMediaStream$p_26.handleEvent("append_quota_exceeded");var e=this.$OzMediaStream$p_67();e.then(function(){b.restartLoopBody()})["catch"](function(a){a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR",description:"Stream append quota exceeded: "+String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR}});b.$OzMediaStream$p_33.emitError(a)})}else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_CANCELLED")return;else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE")this.$OzMediaStream$p_33.emitError(a);else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE_UNAVAILABLE")this.$OzMediaStream$p_33.emitError(a);else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_WEBVTT_CAPTION_PARSE_ERROR"){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback: OZ_WEBVTT_CAPTION_PARSE_ERROR branch","warn");(e=this.$OzMediaStream$p_45)==null?void 0:e.emitError(a)}else c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback","warn"),this.$OzMediaStream$p_68(a)&&this.$OzMediaStream$p_33.emitError(a)};e.$OzMediaStream$p_62=function(a,b,c){var d=0;if(this.$OzMediaStream$p_43)return Infinity;var e=this.$OzMediaStream$p_1.getNumber("appends_per_segment");if(e>0){a=a.getByteRange();b=b.getByteRange();a&&b&&b.endByte!=null&&(d=Math.ceil((b.endByte-a.startByte+1)/(c*e)))}d===0&&(d=this.$OzMediaStream$p_1.getNumber("append_byte_target_without_range"));return d};e.getIsAdaptationEnabled=function(){return this.$OzMediaStream$p_29};e.enableAdaptation=function(){this.$OzMediaStream$p_29=!0};e.disableAdaptation=function(){this.$OzMediaStream$p_29=!1};e.destroy=function(){this.$OzMediaStream$p_23.stop(),this.$OzMediaStream$p_5.then(function(a){a.destroy()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - destroy")}),this.$OzMediaStream$p_30.destroy(),this.$OzMediaStream$p_17.release(),this.$OzMediaStream$p_17.engage(),this.removeAllListeners(),this.$OzMediaStream$p_20&&(this.$OzMediaStream$p_20.remove(),this.$OzMediaStream$p_20=null)};e.getRepresentationIDAtTime=function(a){var b=this.$OzMediaStream$p_25.get(a);if(!b){var c=this.$OzMediaStream$p_8.getTimeRanges();c=c[c.length-1];var d=.001;c&&a>=c.endTime&&a<=this.$OzMediaStream$p_7.getDuration()+d&&(b=this.$OzMediaStream$p_25.get(c.endTime-d))}return b?b.id:null};e.endStream=function(a){var b;(b=this.$OzMediaStream$p_14)==null?void 0:b.notifyMediaStreamEnded(this,a);this.$OzMediaStream$p_69()};e.endStreamIfBufferedToEndTime=function(){var a=this.$OzMediaStream$p_8.getTimeRanges();if(a.length>0){a=a[a.length-1].endTime;if(this.$OzMediaStream$p_6){var b=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();b.length>0&&(Math.abs(b[b.length-1].endTime-a)<i&&this.endStream("buffered_to_end_time"))}}};e.$OzMediaStream$p_60=function(a,b){return{type:this.$OzMediaStream$p_21.indexOf("audio")===0?j.AUDIO:this.$OzMediaStream$p_21.indexOf("video")===0?j.VIDEO:j.CAPTION,segment:a,sourceBuffer:(a=(a=this.$OzMediaStream$p_6)==null?void 0:(a=a.getDebug())==null?void 0:a.SourceBuffer)!=null?a:null,timeRange:b}};e.$OzMediaStream$p_48=function(){this.$OzMediaStream$p_9=null};e.restartLoopBody=function(){this.$OzMediaStream$p_48(),this.$OzMediaStream$p_31=!1,this.$OzMediaStream$p_13&&this.$OzMediaStream$p_13.cancel(),this.$OzMediaStream$p_22!==0&&this.$OzMediaStream$p_24&&this.$OzMediaStream$p_24.resolve()};e.$OzMediaStream$p_69=function(){if(this.$OzMediaStream$p_6){var a=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();a.length>0&&(this.$OzMediaStream$p_32=a[a.length-1].endTime)}};e.$OzMediaStream$p_56=function(){return this.$OzMediaStream$p_32!==null};e.$OzMediaStream$p_49=function(a){this.$OzMediaStream$p_8.getID()===a&&this.$OzMediaStream$p_16!=null&&this.$OzMediaStream$p_50(this.$OzMediaStream$p_16.getBestRepresentation())};e.setEnableLiveheadCatchup=function(a){this.$OzMediaStream$p_35=a};e.clearSourceBufferRange=function(a,b){var d=this.$OzMediaStream$p_6;return d?d.clearRangeWithWait([{fromTime:a,toTime:b}]):c("oz-player/shims/OzMaybeNativePromise").resolve()};e.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream$p_6,MediaStreamAbrManager:this.$OzMediaStream$p_16}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzPredictedSegmentLocator",["oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=0;for(var d in a){var e;if(d===b)continue;c=Math.max(c,(e=a[d].lastSkippedToSegmentNumber)!=null?e:0)}return c}function i(a,b){var c=null;for(var d in a){if(d===b)continue;a[d].inBufferAheadTimeSince!=null&&(c=c!=null?Math.min(c,a[d].inBufferAheadTimeSince):a[d].inBufferAheadTimeSince)}return c}a=function(){function a(a){this.$5={};var b=a.videoNode,c=a.liveLatencyManager,d=a.loggerProvider;a=a.dynamicVideoLibrary;this.$1=b;this.$2=c;this.$3=d;this.$4=a}var b=a.prototype;b.getSegment=function(a,b,c,d,e,f,g,h,i){var j;this.$5[i]==null&&(this.$5[i]={lastSkippedToSegmentNumber:null,inBufferAheadTimeSince:null});(j=this.$2)==null?void 0:j.setEnableCatchup(h);j=this.$6(a,b,c,d,e,f,g,h,i);(a=j.segment)==null?void 0:a.getOptions().setSegmentNumDecisionTime(Date.now());j.segment===null&&this.$3.getOperationLogger("segment_locator").setInitiator(j.initiator).setReason(j.reason).setType(i).setUserInfo(j.userInfo).log();b=this.$4;if(j.segment&&b!=null){c=j.segment.getOptions();c.setIsDVLEnabled(b.shouldRequestDynamicInfo(i))}return j.segment};b.$6=function(a,b,c,e,f,g,j,k,l){var m,n=b.getCurrentTime(),o=this.$2==null?!1:this.$2.shouldEnableCursorBasedCatchup(),p=e!=null?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j):{bufferAheadSec:0,bufferedOffset:0},q=p.bufferAheadSec;p=p.bufferedOffset;var r=null,s=null,t=this.$2?this.$2.enabled():!0,u=a.getPredictedSegmentAfter(f),v=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(a,j.getNumber("pdash_download_cursor_between_catchups_seg")>0?h(this.$5):h(this.$5,l)),w=!0,x=null;if(o&&k&&((m=u)==null?void 0:m.getSequenceNumber())!=null&&((m=(m=u)==null?void 0:m.getSequenceNumber())!=null?m:0)<=((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)){u=v;r="paired_catchup";this.$3.getOperationLogger("segment_locator").setInitiator(r).setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p)}).setLength(((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)-((m=(m=u)==null?void 0:m.getSequenceNumber())!=null?m:0)).setType(l).log();w=!1;x=r}else if(o&&k&&t&&u!=null&&((m=this.$2)==null?void 0:m.isBehindPreferredLiveHeadLatencyWithTolerance())){if(this.$2&&q>this.$2.getPreferredLiveHeadLatencySec()&&p==0)return{segment:null,initiator:"catchup_pause",userInfo:{bufferAheadSec:String(q),bufferedOffset:String(p)}};o=a.getEndingSegment();k=d("oz-player/streams/OzSegmentUtils").getMaxSegment([o,u]);m=j.getNumber("pdash_download_cursor_between_catchups_seg")===0||((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)+j.getNumber("pdash_download_cursor_between_catchups_seg")<((v=o==null?void 0:o.getSequenceNumber())!=null?v:0);if(m){if(((o=k==null?void 0:k.getSequenceNumber())!=null?o:0)>((m=(v=u)==null?void 0:v.getSequenceNumber())!=null?m:0)){this.$5[l].lastSkippedToSegmentNumber=(o=k==null?void 0:k.getSequenceNumber())!=null?o:0;this.$3.getOperationLogger("segment_locator").setInitiator("catchup").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p)}).setLength(((v=k==null?void 0:k.getSequenceNumber())!=null?v:0)-((o=(m=u)==null?void 0:m.getSequenceNumber())!=null?o:0)).setType(l).log()}u=k;r="catchup";w=!1;x=r}}else if(f==null){u=a.getSegmentByTime(n);r="1st_run";v=a.getTimeRanges();s={approx:String(a.canApproximateId()),ranges:String(v.length),mpdStartTime:v.length>0?String(v[v.length-1].startTime):null,mpdEndTime:v.length>0?String(v[v.length-1].endTime):null};this.$5[l].lastSkippedToSegmentNumber=(o=(m=u)==null?void 0:m.getSequenceNumber())!=null?o:0}w&&(w=t,x="stream_state");if(w&&q>c){this.$5[l].inBufferAheadTimeSince==null&&(this.$5[l].inBufferAheadTimeSince=Date.now());return{segment:null,initiator:"buffer_ahead_rule",userInfo:{bufferAheadSec:String(q),bufferedOffset:String(p),lastMaxSegNum:String(h(this.$5,l)),segment:u?String(u.getSequenceNumber()):null,computedBufferAheadTarget:String(c)}}}else!w&&q>c&&this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p),computedBufferAheadTarget:String(c)}).setReason("disabled_buffer_ahead_rule:"+(x||"")).setType(l).log();k=g&&g.getSequenceNumber()||0;f=u&&u.getSequenceNumber()||0;if(u&&g&&k>=f){n=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(a);return(n||0)>=k?{segment:g}:{segment:null,initiator:"mpd_refresh",userInfo:{leSegNum:String(k)}}}v=e?d("oz-player/utils/OzSourceBufferUtil").getTotalInBufferedRanges(e.getBufferedRanges()):0;m=e?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j).bufferAheadSec:0;o=i(this.$5,l);t=Date.now();if(j.getNumber("download_cursor_total_buffer_max_sec")!=0&&j.getNumber("download_cursor_total_buffer_max_sec")<m||j.getNumber("download_cursor_buffer_ahead_time_max_sec")!=0&&o!=null&&j.getNumber("download_cursor_buffer_ahead_time_max_sec")<(t-o)/1e3){this.$5[l].lastSkippedToSegmentNumber=(x=(w=u)==null?void 0:w.getSequenceNumber())!=null?x:0;this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p),totalBufferedSec:String(v),computedBufferAheadTarget:String(c),inBufferAheadElapsedTime:String((t-((f=o)!=null?f:0))/1e3)}).setReason("force_paired_catchup").setType(l).log()}this.$5[l].inBufferAheadTimeSince=null;return{segment:u,initiator:r?r:void 0,userInfo:s?s:void 0}};return a}();g.OzPredictedSegmentLocator=a}),98);
__d("oz-player/utils/getRepresentationInCache",["oz-player/networks/RequestParamCreator"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("oz-player/networks/RequestParamCreator"))();function a(a,b){b===void 0&&(b=null);return a.find(function(a){a=a.getInitSegment();var c=a&&a.getByteRange();return a&&c&&b?b.hasCacheValue(h.createRequestParam(a.getURI(),c).uri.toString()):!1})||null}g["default"]=a}),98);
__d("oz-player/Player",["Promise","oz-player/configs/OzPlayerConfig","oz-player/drm/OzDrmManager","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzDynamicVideoLibrary","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzClientClock","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/parsers/OzXmlParserImplDOMParser","oz-player/playback_controls/OzClearSourceBufferOnSeekManager","oz-player/playback_controls/OzLiveLatencyManager","oz-player/playback_controls/OzPlaybackTimeRangeManager","oz-player/playback_controls/OzPlayheadManager","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzUuid","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPositionToViewport","oz-player/strategies/OzAbrManager","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzBlockedRepresentationsManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferEndLimitStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint","oz-player/strategies/OzBufferingDetector","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayheadAtInterruptionDetector","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPositionToViewportPriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzSingleCodecRestriction","oz-player/strategies/OzStaleManifestBufferTargetStrategy","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/strategies/OzSupportedMimeCodecsRestriction","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/streams/OzPredictedSegmentLocator","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzMpdUtils","oz-player/utils/OzPlaybackRestrictionsUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/getRepresentationInCache"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){a||c("oz-player/shims/ozvariant")(0,21876);return a}var j="av01",k="vp09",l="avc1";a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;e=a.call(this)||this;e.$Player$p_5=new Map();e.$Player$p_6=new Map();e.$Player$p_9=void 0;e.$Player$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$Player$p_11=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_12=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_19=void 0;e.$Player$p_25=[];e.$Player$p_26=void 0;e.$Player$p_27=void 0;e.$Player$p_32=null;e.$Player$p_33=null;e.$Player$p_43=null;e.$Player$p_51=!1;e.$Player$p_54=0;e.$Player$p_55=null;e.$Player$p_56=null;e.$Player$p_57=0;e.$Player$p_58=null;e.$Player$p_59=null;e.$Player$p_60=!1;e.$Player$p_63=null;e.$Player$p_64=null;e.$Player$p_70=!1;e.$Player$p_71=!1;e.$Player$p_76=!1;e.$Player$p_77=null;e.$Player$p_88=function(){var a=new(c("oz-player/parsers/OzXmlParserImplDOMParser"))();return a};e.$Player$p_90=function(){e.$Player$p_5.forEach(function(a){return a.endStreamIfBufferedToEndTime()})};e.$Player$p_91=function(){e.$Player$p_5.forEach(function(a){return a.endStream("streamGone")})};var f=b.audioOnly;f=f===void 0?!1:f;var g=b.bufferingDetector,h=b.videoNode,i=b.config,j=b.configMap,k=b.rawMpdXml,l=b.mpdUrl;l=l===void 0?null:l;var m=b.loggerConfig;m=m===void 0?{perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1}:m;var n=b.bandwidthEstimatorOverride;n=n===void 0?null:n;var o=b.customVTTBufferTargetStrategies;o=o===void 0?null:o;var p=b.prefetchCache;p=p===void 0?null:p;var q=b.getOverrideOzRequestImplementation;q=q===void 0?null:q;var r=b.getUserSelectedPlaybackRate,s=b.networkRequestStreamHandlers,t=b.networkRequestStreamRetryHandler,u=b.networkRequestUrlRefreshHandler,v=b.getShouldIncludeCredentials;v=v===void 0?null:v;var w=b.getCustomRequestParametersForURI;w=w===void 0?null:w;var x=b.initialRepresentationIDs;x=x===void 0?[]:x;var y=b.debugCreateInitiator;y=y===void 0?null:y;var z=b.customParsers;z=z===void 0?new Map():z;var A=b.videoPlaybackRestrictions;A=A===void 0?[]:A;var B=b.customSegmentTimelineParser;B=B===void 0?null:B;var C=b.customRepresentationParsers;C=C===void 0?{}:C;var D=b.videoAbrManagerFactory;D=D===void 0?null:D;var E=b.seekHandler;E=E===void 0?null:E;var F=b.initialPlaybackPositionForDynamicMpd;F=F===void 0?-20:F;var G=b.liveheadFallBehindBlockThreshold;G=G===void 0?30:G;var H=b.liveheadFallBehindBlockMargin;H=H===void 0?5.9:H;var I=b.startTimeStamp;I=I===void 0?0:I;var J=b.drmProviders;J=J===void 0?[]:J;var K=b.getVideoDimensions;K=K===void 0?null:K;var L=b.setCustomFetchStreamLoggingAttributes;L=L===void 0?null:L;var M=b.bufferEndLimit;M=M===void 0?null:M;var N=b.configureCustomRequestParametersForSegment;N=N===void 0?null:N;var O=b.isClientTriggeredTraceEnabled;O=O===void 0?!1:O;var P=b.enableImmediateQualityDownSwitch;P=P===void 0?!1:P;b=b.userPreferenceLang;b=b===void 0?null:b;e.$Player$p_75="changeType"in SourceBuffer.prototype;e.$Player$p_1=o;e.$Player$p_49=y;o=m.perfLoggerProviders;y=m.observedOperationLoggers;m=m.isOzDevConsoleEnabled;e.$Player$p_17=m||!1;e.$Player$p_16=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)(e.$Player$p_78().concat(o));e.$Player$p_2=f;e.$Player$p_4=(m=i)!=null?m:new(c("oz-player/configs/OzPlayerConfig"))((o=j)!=null?o:{});e.$Player$p_12.onError(function(){});e.$Player$p_22=new(c("oz-player/loggings/OzOperationLoggerObserver"))();e.$Player$p_22.observe(y,e.$Player$p_16);e.$Player$p_16.getOperationLogger("player_initialization").setInitiator("player-"+c("oz-player/shims/OzUuid")()).log();e.$Player$p_53=q;e.$Player$p_28=z;e.$Player$p_67=new(c("oz-player/strategies/OzBlockedRepresentationsManager"))(e.$Player$p_4);e.$Player$p_10.addSubscriptions(e.$Player$p_67.onRepresentationBlocked(function(a){e.emit("representationBlocked",a)}));e.$Player$p_31=[e.$Player$p_67,new(c("oz-player/strategies/OzSupportedMimeCodecsRestriction"))()].concat(A);e.$Player$p_75||e.$Player$p_31.push(new(c("oz-player/strategies/OzSingleCodecRestriction"))());e.$Player$p_29=C;e.$Player$p_30=B;e.$Player$p_35=D;e.$Player$p_36=E;e.$Player$p_37=I;e.$Player$p_38=F;e.$Player$p_41=(f=r)!=null?f:function(){return 1};e.$Player$p_39=G;e.$Player$p_42=H;e.$Player$p_66=M;e.$Player$p_69=O;e.$Player$p_71=P;e.$Player$p_47=J;e.$Player$p_63=L;e.$Player$p_3=h;e.$Player$p_7=new(c("oz-player/media_source/MediaSourceManager"))({videoNode:e.$Player$p_3,config:e.$Player$p_4,perfLoggerProvider:e.$Player$p_16,isChangeTypeSupported:e.$Player$p_75,handleVttCaptionsUpdated:function(a){var b;b=(b=e.$Player$p_5.get("caption"))==null?void 0:(b=b.getCurrentRepresentation())==null?void 0:b.getLang();e.emit("vttCaptionsUpdated",a,b)},onClearVideoNodeError:function(){e.$Player$p_79()},onRetryVideoElementError:function(a){e.emit("videoNodeErrorRetry",a)}});e.$Player$p_7.onError(function(a){e.$Player$p_11.emitError(a)});if(e.$Player$p_4.getBool("clear_on_seek")){i=new(c("oz-player/playback_controls/OzClearSourceBufferOnSeekManager"))(e.$Player$p_3,e.$Player$p_4,e.$Player$p_5,e.$Player$p_16);i.maybeOverwriteVideoCurrentTimeProperty();e.$Player$p_10.addSubscriptions(i.onError(e.$Player$p_11.emitError));e.$Player$p_64=i}e.$Player$p_24=p;m=e.$Player$p_24&&e.$Player$p_24.getCachedRepresentations();e.$Player$p_25=m||x;e.$Player$p_65=new(c("oz-player/manifests/OzDynamicVideoLibrary"))({config:e.$Player$p_4});e.$Player$p_44=s;e.$Player$p_45=v;e.$Player$p_46=w;e.$Player$p_68=N;e.$Player$p_77=(j=n)!=null?j:c("oz-player/networks/OzBandwidthEstimator");e.$Player$p_13=new(c("oz-player/networks/OzNetworkManager"))({config:e.$Player$p_4,prefetchCache:e.$Player$p_24,networkRequestStreamHandlers:e.$Player$p_44,getOverrideOzRequestImplementation:e.$Player$p_53,getShouldIncludeCredentials:e.$Player$p_45,getCustomRequestParametersForURI:e.$Player$p_46,networkRequestStreamRetryHandler:t,networkRequestUrlRefreshHandler:u,setCustomFetchStreamLoggingAttributes:e.$Player$p_63,dynamicVideoLibrary:e.$Player$p_65,configureCustomRequestParametersForSegment:e.$Player$p_68,onResourceTimingBufferFull:function(){e.$Player$p_80()},bandwidthEstimator:e.$Player$p_77});e.$Player$p_18=l;e.$Player$p_8=k;e.$Player$p_14=new(c("oz-player/states/OzObservedPlaybackState"))(e.$Player$p_4,e.$Player$p_3,e.$Player$p_16);e.$Player$p_52=K;e.$Player$p_15=new(c("oz-player/streams/OzEndOfStreamWatcher"))(e.$Player$p_7,e.$Player$p_4);e.$Player$p_10.addSubscriptions(e.$Player$p_15.addListener("streamEnd",function(){e.$Player$p_51=!0,e.emit("streamEnd")}));e.$Player$p_50=(o=g)!=null?o:e.$Player$p_81();e.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&(e.$Player$p_61=new(c("oz-player/states/OzPositionToViewport"))(e.$Player$p_3,e.$Player$p_4));e.$Player$p_72=b;e.$Player$p_73=null;e.$Player$p_74={lang:null,role:null};return e}var f=e.prototype;f.$Player$p_80=function(){if(this.$Player$p_70)return;c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_JAVASCRIPT_NATIVE",description:"ResourceTiming buffer is full"}),"ResourceTiming buffer is full","warn");this.$Player$p_70=!0};f.$Player$p_82=function(a){var b=this;this.$Player$p_83();var c=d("oz-player/loggings/OzLoggingUtils").executeOperationAndLog(this.$Player$p_16.cloneContext().setInitiator(this.$Player$p_49),"parse_manifest",function(e){var f,g,c=b.$Player$p_84(a);f=String((f=c.getCustomField("currentServerTimeMs"))!=null?f:"");g=String((g=c.getCustomField("lastVideoFrameTs"))!=null?g:"");f={currentServerTimeMs:f,ingestLastVideoFrameTs:g,nowMs:String(Date.now())};g=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(c,b.$Player$p_4);g=g&&g.endTime!=0?g.endTime:null;e.setLiveheadPosition(g).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(c)).setManifestType(c.isStaticMpd()?"static":"dynamic").setIsMixedCodecManifest(b.$Player$p_76).setIsTemplatedManifest(Boolean(c.getCustomField("isLiveTemplated"))).setUserInfo(f);return c});this.$Player$p_85(c)};f.$Player$p_85=function(a){var b=this;this.$Player$p_9=i(a);this.$Player$p_4.getBool("player_emit_mpdparsed_early")&&this.emit("mpdParsed",a);this.$Player$p_26=this.$Player$p_86();this.$Player$p_27=this.$Player$p_87();this.$Player$p_67.setAvailableRepresentationsCount(a.getVideoRepresentations().length);if(this.$Player$p_18!=null){var e=new(c("oz-player/parsers/OzMpdUpdater"))(this.$Player$p_4,a,this.$Player$p_13,this.$Player$p_14,this.$Player$p_16,{mpdUrl:null,createXmlParser:this.$Player$p_88,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},this.$Player$p_48,this.$Player$p_69);this.$Player$p_89(e);this.$Player$p_10.addSubscriptions(e.onError(this.$Player$p_11.emitError),e.addListener("manifestFetchError",function(a){return b.emit("manifestFetchError",a)}),e.addListener("manifestFetchErrorRetry",function(a){return b.emit("manifestFetchErrorRetry",a)}),e.addListener("streamTransitionToStatic",this.$Player$p_90),e.addListener("streamGone",this.$Player$p_91));e.setupUpdateLoop();this.$Player$p_21=e}this.$Player$p_4.getBool("use_live_latency_manager")?!a.isStaticMpd()?(this.$Player$p_40=new(c("oz-player/playback_controls/OzLiveLatencyManager"))({config:this.$Player$p_4,mpd:a,playbackState:this.$Player$p_14,bufferingDetector:this.$Player$p_50,video:this.$Player$p_3,loggerProvider:this.$Player$p_16,getUserSelectedPlaybackRate:this.$Player$p_41}),this.$Player$p_37=this.$Player$p_40.getPreferredLiveHeadLatencySec()*-1):this.$Player$p_37=this.$Player$p_37:this.$Player$p_37=a.isStaticMpd()?this.$Player$p_37:this.$Player$p_92(a);this.$Player$p_19=new(c("oz-player/playback_controls/OzPlayheadManager"))({video:this.$Player$p_3,mpd:a,dynamicVideoLibrary:this.$Player$p_65,playheadCatchup:this.$Player$p_34,playbackState:this.$Player$p_14,config:this.$Player$p_4,perfLoggerProvider:this.$Player$p_16,seekHandler:this.$Player$p_36,initialPlaybackPosition:this.$Player$p_37,canSupportSkipVideobufferGaps:(e=(e=this.$Player$p_64)==null?void 0:e.getCurrentTimePropertyOverwriteSuccess())!=null?e:!1,liveLatencyManager:this.$Player$p_40});this.$Player$p_20=new(c("oz-player/playback_controls/OzPlaybackTimeRangeManager"))({config:this.$Player$p_4,video:this.$Player$p_3,mpd:a,liveheadFallBehindBlockThreshold:this.$Player$p_39,liveheadFallBehindBlockMargin:this.$Player$p_42,playbackState:this.$Player$p_14,perfLoggerProvider:this.$Player$p_16});this.$Player$p_93()["catch"](function(a){var e=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;b.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup streams: "+String(a),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()})}))});this.emit("mpdReady",a)};f.load=function(a){var b=this;this.$Player$p_18=a;try{var c=this.$Player$p_8;c!=null?this.$Player$p_82(c):a!=null?this.$Player$p_94(a).then(function(a){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}b.$Player$p_8=a;b.$Player$p_54=0;b.$Player$p_82(a)})["catch"](function(c){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}var e=d("oz-player/utils/OzErrorUtils").isOzError(c)?c:null;e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player with fetched MPD: "+String(c),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:c,url:a})});b.$Player$p_95(e,a)}):this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Cannot start Oz without a raw mpd xml or mpd url"}))}catch(a){c=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player: "+String(a),extra:babelHelpers["extends"]({},c==null?void 0:c.getExtra(),{originalError:a})}))}};f.$Player$p_92=function(a){var b;b=(b=a.getVideoRepresentations()[0].getMaxGopSec())!=null?b:0;a=(a=a.getVideoRepresentations()[0].getEndingSegment())==null?void 0:a.getTimeRange();a=a!=null?a.endTime-a.startTime:0;a>0&&(b=a);return Math.min(this.$Player$p_38+this.$Player$p_4.getNumber("dynamic_mpd_initial_playback_position_offset_modifier"),-1*b*this.$Player$p_4.getNumber("pdash_download_cursor_catchup_threshold_gop_multiplier"))};f.$Player$p_94=function(a){this.$Player$p_54++;a=this.$Player$p_13.requestRawUrl({debugName:"OzPlayer/fetchMpdXml/mpd",url:a,options:null,loggerProvider:this.$Player$p_16});a=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};f.$Player$p_96=function(){this.$Player$p_55!=null&&(c("oz-player/shims/ozClearTimeout")(this.$Player$p_55),this.$Player$p_55=null)};f.$Player$p_95=function(a,b){var d=this,e=!0,f=this.$Player$p_54-1,g=a.getExtra().code;this.$Player$p_56!==g?(this.$Player$p_56=g,this.$Player$p_57=1):this.$Player$p_57++;var h=function(){e=!1};g={endStream:function(){h(),d.$Player$p_51=!0,d.emit("streamGoneBeforeStart")},consecutiveFailuresForErrorCode:this.$Player$p_57,error:a,isInitialRequest:!0,retry:function(a){h(),d.$Player$p_96(),d.$Player$p_55=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$Player$p_96(),d.load(b)},(a==null?void 0:a.waitMs)!=null?a==null?void 0:a.waitMs:1e3)},retryAttemptCount:f};this.$Player$p_4.getNumber("initial_manifest_request_retry_count")>0&&this.emit("manifestFetchError",g);e&&this.$Player$p_11.emitError(a)};f.updatePlayerRunTimeConfig=function(a){var b=a.manifestUrl,c=a.audioStreamDataHandler,d=a.videoStreamDataHandler,e=a.applicationStreamDataHandler;a=a.resetStreamAnchor;if(d!==void 0){var f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({streamDataHandler:d})}if(a!==void 0){f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({resetStreamAnchor:a});d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({resetStreamAnchor:a});(f=this.$Player$p_19)==null?void 0:f.resetCurrentTime()}if(c!==void 0){d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({streamDataHandler:c})}if(e!==void 0){f=this.$Player$p_5.get("caption");f&&f.updateRunTimeConfigs({streamDataHandler:e,resetStreamAnchor:a})}b!=null&&b!==""&&this.$Player$p_97(b)};f.$Player$p_98=function(a,b){var c=this,e=a.getMimeCodecs();e=this.$Player$p_7.createSourceBufferManager(b+"/"+a.getMimeType()+"/"+a.getCodecs(),e,b,a.getInitSegment().getData());this.$Player$p_99(e,b,a);a=e.then(function(a){c.$Player$p_50&&b!=="caption"&&c.$Player$p_50.setSourceBufferState(b,a.getSourceBufferState());return a});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,this.$Player$p_16,"source_attach",function(a){a.setType(b)});return a.then(function(a){if(b!=="caption"){var d;(d=c.$Player$p_19)==null?void 0:d.observeSourceBufferState(a.getSourceBufferState(),b)}})};f.isDrm=function(){var a=this.$Player$p_48;if(a!=null){a=a.hasContentProtections();return a!=null?a:!1}return!1};f.$Player$p_83=function(){var a=this.$Player$p_47;if(a.length>0){var b=this.$Player$p_48=new(d("oz-player/drm/OzDrmManager").OzDrmManager)(this.$Player$p_16,this.$Player$p_3,{maxStartEMEAttempts:this.$Player$p_4.getNumber("max_start_eme_attempts"),throwNoLicenseError:!0});a.forEach(function(a){b.addProvider(a)});this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError))}};f.$Player$p_100=function(a){var b=this,d=i(this.$Player$p_9);a=[this.$Player$p_4,a,this.$Player$p_101(),this.$Player$p_31,this.$Player$p_14,window.devicePixelRatio||1,function(){return b.$Player$p_102()},d.isStaticMpd()?"static":"dynamic",this.$Player$p_16];d=this.$Player$p_35&&this.$Player$p_35.apply(this,a);return(d=d)!=null?d:babelHelpers.construct(c("oz-player/strategies/OzAbrManager"),a)};f.$Player$p_103=function(a){return a==="caption"?!0:!1};f.$Player$p_99=function(a,b,e){var f=this,g=i(this.$Player$p_9),h=this.$Player$p_6.get(b),j=new(c("oz-player/streams/OzMediaStream"))({config:this.$Player$p_4,sourceBufferManagerPromise:a,networkManager:this.$Player$p_13,playbackState:this.$Player$p_14,endOfStreamWatcher:b!=="caption"?this.$Player$p_15:null,bufferTargetCalculator:this.$Player$p_104(b),priorityCalculator:this.$Player$p_105(),streamSegmentsCountCalculator:this.$Player$p_106(b),abrManager:h,representation:e,loggerProvider:this.$Player$p_16.cloneContext().setType(b),segmentLocator:this.$Player$p_62,setCustomFetchStreamLoggingAttributes:this.$Player$p_63,blockedRepresentationsManager:this.$Player$p_67,dynamicVideoLibrary:this.$Player$p_65,shouldAppendOncePerStream:this.$Player$p_103(b),mediaStreamType:b,warningEmitter:this.$Player$p_12,mpd:g});this.$Player$p_37===0?j.start():(i(this.$Player$p_9),this.$Player$p_19&&this.$Player$p_10.addSubscriptions(this.$Player$p_19.addListener("initialPlaybackPositionSet",function(){j.start()})));this.$Player$p_10.addSubscriptions(j.onError(this.$Player$p_11.emitError));this.$Player$p_23&&this.$Player$p_10.addSubscriptions(this.$Player$p_23.listenToMediaStreamInitAppended(j));b==="video"&&(this.$Player$p_33=new(c("oz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player$p_4,this.$Player$p_14,d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_102(),this.$Player$p_101()),j,a,this.$Player$p_71),this.$Player$p_10.addSubscriptions(this.$Player$p_33.onError(this.$Player$p_11.emitError)));this.$Player$p_5.set(b,j);this.$Player$p_10.addSubscriptions(j.addListener("switchRepresentation",function(){var c,a=j.getCurrentRepresentation();(c=f.$Player$p_23)==null?void 0:c.setTimeRangeProvider(a);(c=f.$Player$p_19)==null?void 0:c.setTimeRangeProvider(a);(c=f.$Player$p_20)==null?void 0:c.setTimeRangeProvider(a);b==="video"&&f.emit("switchVideoRepresentation")}),j.addListener("SegmentAppended",function(a){f.$Player$p_107("SegmentAppended",a)}),j.addListener("streamError",function(a){f.emit("streamError",a)}),j.addListener("streamErrorRetry",function(a){f.emit("streamErrorRetry",a)}))};f.$Player$p_108=function(){if(this.$Player$p_66!=null)return[new(c("oz-player/strategies/OzBufferEndLimitStrategy"))(this.$Player$p_3,this.$Player$p_66)];else return[new(c("oz-player/strategies/OzStaleManifestBufferTargetStrategy"))(i(this.$Player$p_9),this.$Player$p_4),new(c("oz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player$p_14,this.$Player$p_4),new(c("oz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player$p_4)]};f.$Player$p_109=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:this.$Player$p_4.getNumber("buffer_target_constraint_minimum_sec")})]:[]};f.$Player$p_110=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:0})]:[]};f.$Player$p_86=function(){return new(c("oz-player/strategies/OzBufferTargetCalculator"))(this.$Player$p_108(),this.$Player$p_109())};f.$Player$p_87=function(){return this.$Player$p_1!=null?new(c("oz-player/strategies/OzBufferTargetCalculator"))([].concat(this.$Player$p_1,this.$Player$p_108()),this.$Player$p_110()):this.$Player$p_86()};f.$Player$p_104=function(a){var b=a==="caption"?this.$Player$p_27:this.$Player$p_26;b||c("oz-player/shims/ozvariant")(0,76764,a);return b};f.$Player$p_89=function(a){var b=this;if(this.$Player$p_4.getNumber("stream_interrupt_check_mpd_stale_count_threshold")>0){var d=this.$Player$p_50,e=new(c("oz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player$p_3,d);this.$Player$p_10.addSubscriptions(e.addListener("playheadAtInterruption",function(a){b.$Player$p_16.getOperationLogger("stream_interrupted").log(),b.emit("streamInterruptAt",a)}),a.addListener("streamInterruptAt",function(a){var c;(c=b.$Player$p_50)==null?void 0:c.notifyStreamInterrupted();e.notifyStreamInterrupted(a)}),a.addListener("streamResumedAt",function(a){var c;b.$Player$p_16.getOperationLogger("stream_resumed").log();(c=b.$Player$p_50)==null?void 0:c.notifyStreamResumed();e.notifyStreamResumed();b.emit("streamResumedAt",a)}));this.$Player$p_32=e}};f.$Player$p_105=function(){var a=[new(c("oz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player$p_14),new(c("oz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player$p_4,this.$Player$p_14)].concat(this.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&this.$Player$p_61!=null?new(c("oz-player/strategies/OzPositionToViewportPriorityStrategy"))(this.$Player$p_61,this.$Player$p_4):[]);return new(c("oz-player/strategies/OzPriorityCalculator"))(a)};f.$Player$p_106=function(a){var b=[new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player$p_4),new(c("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player$p_104(a),this.$Player$p_4)];this.$Player$p_4.getNumber("paused_stream_segments_count")!==0&&b.push(new(c("oz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player$p_14,this.$Player$p_4));a==="video"&&b.push(new(c("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(this.$Player$p_4,this.$Player$p_101()));return new(c("oz-player/strategies/OzStreamSegmentsCountCalculator"))(b)};f.onError=function(a){return this.$Player$p_11.onError(a)};f.onWarning=function(a){return this.$Player$p_12.onError(a)};f.getSelectedVideoQuality=function(){var a=this.$Player$p_9;if(!a||this.$Player$p_2)return null;a=this.$Player$p_5.get("video");a=a&&a.getCurrentRepresentation();if(a instanceof c("oz-player/manifests/OzVideoRepresentation"))return a.getDisplayLabel();a=this.$Player$p_101();a=a[0];return a?a.getDisplayLabel():null};f.getTargetAudioTrack=function(){var a=this.$Player$p_9;if(!a)return null;a=this.$Player$p_5.get("audio");a=a&&a.getCurrentRepresentation();if(a){var b;return{id:a.getID(),displayLabel:a.getDisplayLabel(),lang:(b=a.getLang())!=null?b:null,role:a.getRole(),mimeCodecs:a.getMimeCodecs(),variantKey:a.getVariantKey()}}b=this.$Player$p_111();a=b[0];return a?a.getAudioTrack():null};f.getCurrentPlayingVideoVariant=function(){return this.$Player$p_73};f.getTargetVideoVariant=function(){return this.$Player$p_74};f.switchToVideoQuality=function(a){var b=this.$Player$p_101().find(function(b){return b.getDisplayLabel()===a});if(b){var c=this.$Player$p_5.get("video");c&&(c.switchRepresentation(b),c.disableAdaptation())}};f.switchToVideoVariant=function(a){this.$Player$p_74=a===null?{lang:null,role:null}:a;if(this.$Player$p_74.lang===((a=(a=this.$Player$p_73)==null?void 0:a.lang)!=null?a:null)&&this.$Player$p_74.role===((a=(a=this.$Player$p_73)==null?void 0:a.role)!=null?a:null)){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant switch to the same lang: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role")}),"switchToVideoVariant switch to the same lang: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role"),"warn");return}else if(!this.$Player$p_9){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant mpd is void"}),"switchToVideoVariant mpd is void","warn");return}else if(!this.$Player$p_112(this.$Player$p_74.lang)){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchToVideoVariant lang not exist in mpd: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role")}),"switchToVideoVariant lang not exist in mpd: "+((a=this.$Player$p_74.lang)!=null?a:"default lang")+", same role: "+((a=this.$Player$p_74.role)!=null?a:"default role"),"warn");return}this.$Player$p_113();this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75&&this.$Player$p_114();this.$Player$p_73=this.$Player$p_74};f.$Player$p_113=function(){var a=this.$Player$p_111()[0];if(a){var b=this.$Player$p_5.get("audio");b&&(b.switchRepresentation(a,[0,this.$Player$p_14.getDuration()]),b.disableAdaptation())}};f.$Player$p_114=function(){var a=this.$Player$p_5.get("video");if(!a)return;var b=a.getCurrentRepresentation();if(b.getLang()===this.$Player$p_74.lang&&b.getRole()===this.$Player$p_74.role)return;b=this.$Player$p_101();if(b.length===0){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant no representations with target variant: "+JSON.stringify(this.$Player$p_74),"warn");return}var e=this.$Player$p_6.get("video");e?(e.updateRepresentations(b),e=e.getBestRepresentation()):e=b[0];if(!e){c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SWITCH_VARIANT",description:"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74)}),"switchVideoByTargetVariant unable to update representations given target variant: "+JSON.stringify(this.$Player$p_74));return}a.switchRepresentation(e,[0,this.$Player$p_14.getDuration()]);return};f.getIsVideoQualityAdaptationEnabled=function(){var a=this.$Player$p_5.get("video");return a?a.getIsAdaptationEnabled():!1};f.enableVideoQualityAdaptation=function(){var a=this.$Player$p_5.get("video");a&&a.enableAdaptation()};f.getVideoQualities=function(){var a=this,b=this.$Player$p_9;if(!b)return[];b=this.$Player$p_101().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))});var c=b.some(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===j}),e=b.some(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===k});c=c?b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===j}):e?b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===k}):b.filter(function(a){return d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getCodecs())===l});return c.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}).map(function(a){return a.getDisplayLabel()})};f.getVideoTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:this.$Player$p_101().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return{mimeCodecs:a.getMimeCodecs(),codec:a.getCodecs(),codecFamily:d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getMimeCodecs()),displayLabel:a.getDisplayLabel(),qualityLabel:a.getDisplayLabel(),height:a.getHeight(),id:a.getID(),qualityScoreCurveString:a.getQualityScoreCurveString("csvqm"),width:a.getWidth(),lang:a.getLang(),role:a.getRole(),variantKey:a.getVariantKey()}})};f.getAudioTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:b.getAudioRepresentations().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return a.getAudioTrack()})};f.setEnableLiveheadCatchup=function(a){if(this.$Player$p_20){var b;a?this.$Player$p_16.getOperationLogger("live_catchup_enabled").setIsLatencyCachupEnabled(!0).log():this.$Player$p_16.getOperationLogger("live_catchup_disabled").setIsLatencyCachupEnabled(!1).log();(b=this.$Player$p_20)==null?void 0:b.setTimelineBlockingEnabled(a)}this.$Player$p_5.forEach(function(b){b.setEnableLiveheadCatchup(a)});(b=this.$Player$p_19)==null?void 0:b.setEnableLiveheadCatchup(a)};f.$Player$p_93=function(){var a=this;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_112(this.$Player$p_72)){var c;this.$Player$p_74=babelHelpers["extends"]({},this.$Player$p_74,{lang:(c=this.$Player$p_72)!=null?c:null,role:this.$Player$p_72!=null?"dub":null})}c=this.$Player$p_101()[0];this.$Player$p_62=c&&c.canPredict()&&this.$Player$p_4.getBool("pdash_use_pdash_segmentlocator")||c&&c.canApproximateId()?new(d("oz-player/streams/OzPredictedSegmentLocator").OzPredictedSegmentLocator)({videoNode:this.$Player$p_3,liveLatencyManager:this.$Player$p_40,loggerProvider:this.$Player$p_16,dynamicVideoLibrary:this.$Player$p_65}):null;c=this.$Player$p_2?[this.$Player$p_115({liveConfigsFromAudioStream:!0}),this.$Player$p_116()]:[this.$Player$p_117(),this.$Player$p_115({liveConfigsFromAudioStream:!1}),this.$Player$p_116()];var e=[];return(h||(h=b("Promise"))).all(c).then(function(){var b=a.$Player$p_5.get("video"),c=a.$Player$p_5.get("audio"),d=a.$Player$p_5.get("caption");b&&e.push(b.getCurrentRepresentation());c&&e.push(c.getCurrentRepresentation());d&&e.push(d.getCurrentRepresentation());e.forEach(function(b){a.$Player$p_10.addSubscriptions(b.addUpdateListener(function(){a.$Player$p_107("SegmentIndexesUpdated",e)}))});a.$Player$p_107("InitialSegmentIndexes",e);a.$Player$p_3&&a.$Player$p_3.style&&(a.$Player$p_3.style.display=a.$Player$p_2?"none":"block");a.$Player$p_73=a.$Player$p_74;a.emit("initialized")})};f.$Player$p_118=function(a){if(!a.getTimeRanges().length){this.$Player$p_16.getOperationLogger("playhead_adjustment").setInitiator("setup_initial_duration").setResult("failed").log();return}a=a.getTimeRanges()[a.getTimeRanges().length-1].endTime;this.$Player$p_7.updateDuration(a,!0)};f.$Player$p_119=function(a){var b;this.$Player$p_23=new(c("oz-player/media_source/OzMediaSeekableRangeManager"))(this.$Player$p_7,this.$Player$p_4);this.$Player$p_118(a);(b=this.$Player$p_23)==null?void 0:b.setTimeRangeProvider(a);(b=this.$Player$p_19)==null?void 0:b.setTimeRangeProvider(a);(b=this.$Player$p_20)==null?void 0:b.setTimeRangeProvider(a)};f.$Player$p_117=function(){var a=this.$Player$p_101();if(!a.length)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"No video representations in the manifest",extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}));var b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_102(),a);if(!b.length){a=a.map(function(a){return a.getDisplayLabel()+"@"+a.getWidth()+"x"+a.getHeight()+"("+a.getMimeCodecs()+")"});return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Restricted all video representations: "+a.join(", "),extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}))}this.$Player$p_119(b[0]);a=this.$Player$p_120(b);a&&this.$Player$p_4.getBool("enable_abr_logging")&&this.$Player$p_16.getOperationLogger("video_stream_setup_initial_representation_from_prefetch").setResult("success").setReason("player_initialized").setRepresentationID(a.getID()).setPreviousRepresentationID(null).setUserInfo({initialRepresentationIDs:JSON.stringify(this.$Player$p_25)}).setType("video").setInitiator("Player").log();var e=this.$Player$p_100(a||b[0]);this.$Player$p_6.set("video",e);a||(a=e.getBestRepresentation());return this.$Player$p_98(a||b[0],"video")};f.$Player$p_101=function(){var a=this.$Player$p_9;if(!a)return[];var b=a.getVideoRepresentations();if(this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_75){var c=a.getVideoRepresentationsByVariant(this.$Player$p_74);b=c.length>0?c:a.getVideoRepresentationsByVariant({lang:null,role:null})}var e=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_102(),b);return b.filter(function(a){return e.includes(a)})};f.$Player$p_111=function(){var a=this.$Player$p_9;if(!a)return[];return this.$Player$p_4.getBool("enable_alternative_audio_tracks")?a.getAudioRepresentationsByVariant(this.$Player$p_74):a.getAudioRepresentations()};f.$Player$p_112=function(a){var b=this.$Player$p_9;if(!b)return!1;var c=b.getAudioRepresentations();if(a==null)return!0;if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&b.isStaticMpd()){b=c.findIndex(function(b){return b.getLang()===a});return b>-1}return!1};f.$Player$p_115=function(a){var b=this;a=a.liveConfigsFromAudioStream;a=a===void 0?!1:a;var d=i(this.$Player$p_9),e=d.getAudioRepresentations();a&&this.$Player$p_119(e[0]);a=-1;this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&e.length>1&&d.isStaticMpd()&&(this.$Player$p_72!=null&&(a=e.findIndex(function(a){return a.getLang()===b.$Player$p_72})));if(e.length){d=a>-1?a:e.findIndex(function(a){return a.getLang()==null&&a.getRole()==null});d=d>-1?d:0;return this.$Player$p_98(a>=0&&a<e.length?e[a]:this.$Player$p_121(e)||e[d],"audio")}return c("oz-player/shims/OzMaybeNativePromise").resolve()};f.$Player$p_116=function(){var a=i(this.$Player$p_9);a=a.getApplicationRepresentations();return a.length?this.$Player$p_98(this.$Player$p_122(a)||a[0],"caption"):c("oz-player/shims/OzMaybeNativePromise").resolve()};f.getMpd=function(){return this.$Player$p_9};f.destroy=function(a){var c,d,e=this;a=this.$Player$p_16.getOperationLogger("unload").setInitiator(a).start();(c=this.$Player$p_64)==null?void 0:c.destroy();this.$Player$p_96();this.$Player$p_5.forEach(function(a){a.destroy()});this.$Player$p_33&&(this.$Player$p_33.destroy(),this.$Player$p_33=null);this.$Player$p_5=new Map();this.$Player$p_10.release();this.$Player$p_10.engage();this.$Player$p_14.destroy();this.$Player$p_19&&this.$Player$p_19.destroy();this.$Player$p_40&&(this.$Player$p_40.destroy(),this.$Player$p_40=null);this.$Player$p_20&&(this.$Player$p_20.destroy(),this.$Player$p_20=null);this.$Player$p_48&&this.$Player$p_48.destroy();this.$Player$p_61&&this.$Player$p_61.destroy();this.$Player$p_13&&this.$Player$p_13.destroy();this.$Player$p_52&&(this.$Player$p_52=null);this.$Player$p_7&&this.$Player$p_7.detach();c=(h||(h=b("Promise"))).resolve();this.$Player$p_3.pause();this.$Player$p_4.getBool("enable_revoke_object_url_on_destroy")&&URL.revokeObjectURL(this.$Player$p_3.src);this.$Player$p_3.removeAttribute("src");this.$Player$p_3.removeAttribute("srcObject");"function"===typeof this.$Player$p_3.setMediaKeys&&(c=this.$Player$p_3.setMediaKeys(null));this.$Player$p_21&&this.$Player$p_21.destroy();this.$Player$p_32&&this.$Player$p_32.destroy();this.$Player$p_22.destroy();(d=this.$Player$p_23)==null?void 0:d.destroy();this.$Player$p_50&&this.$Player$p_50.destroy();this.$Player$p_67&&this.$Player$p_67.destroy();a.log();this.emit("destroyed");d=[c];return h.all(d).then(function(){e.$Player$p_3.load()})};f.$Player$p_120=function(a){var b=this,d=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});d||(d=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));return d||null};f.$Player$p_121=function(a){var b=this,e,f=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});f||(f=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));!f&&!((e=this.$Player$p_9)==null?void 0:e.isStaticMpd())&&a.length>1&&(f=d("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(a,this.$Player$p_4,this.$Player$p_16));return f||null};f.$Player$p_122=function(a){return null};f.$Player$p_84=function(a){var b=new(c("oz-player/parsers/OzMpdParser"))({config:this.$Player$p_4,ozParserContext:{mpdUrl:this.$Player$p_18,createXmlParser:this.$Player$p_88,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},networkManager:this.$Player$p_13,perfLoggerProvider:this.$Player$p_16,drmManager:this.$Player$p_48,initialRepresentationIDs:this.$Player$p_25,blockedRepresentationsManager:this.$Player$p_67,enableAlternativeAudioTracks:this.$Player$p_4.getBool("enable_alternative_audio_tracks")});a=b.parse(a);this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError));b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_102(),a.getVideoRepresentations());if(b.length>1){var e=d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(b[0].getMimeCodecs());this.$Player$p_76=!b.reduce(function(a,b){return a&&d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(b.getMimeCodecs())===e},!0)}return a};f.$Player$p_78=function(){var a=[];this.$Player$p_17&&a.push(new(d("oz-player/loggings/OzDevConsolePerfLogger").OzDevConsolePerfLoggerProvider)());return a};f.$Player$p_123=function(a,b){b=this.$Player$p_5.get(b);return b?b.getRepresentationIDAtTime(a):null};f.getAudioRepresentationIDAtTime=function(a){return this.$Player$p_123(a,"audio")};f.getVideoRepresentationIDAtTime=function(a){return this.$Player$p_123(a,"video")};f.getCurrentVideoRepresentation=function(){return this.$Player$p_124("video")};f.getCurrentAudioRepresentation=function(){return this.$Player$p_124("audio")};f.getCurrentPlayingAudioTrackID=function(){var a=this.getCurrentAudioRepresentation();return a==null?void 0:a.getID()};f.$Player$p_124=function(a){var b=this.$Player$p_123(this.$Player$p_14.getCurrentTime(),a),c=this.$Player$p_9;if(!c)return null;c=[];a==="audio"?c=this.$Player$p_111():a==="video"&&(c=this.$Player$p_101());return(a=c.find(function(a){return a.getID()===b}))!=null?a:null};f.getSelectedVideoRepresentation=function(){var a=this.$Player$p_5.get("video");return a!=null?a.getCurrentRepresentation():null};f.getSelectedAudioRepresentation=function(){var a=this.$Player$p_5.get("audio");return a!=null?a.getCurrentRepresentation():null};f.getDebug=function(){var a=this,b=this.$Player$p_5.get("video"),c=this.$Player$p_5.get("audio"),d=this.$Player$p_5.get("caption"),e,f,g,h,j,k,l;if(b){var m;e=(m=b.getDebug())==null?void 0:m.MediaStreamAbrManager;f=(m=b.getDebug())==null?void 0:m.SourceBufferManager;if(f){g=(m=f.getDebug())==null?void 0:m.SourceBuffer}}if(c){h=(m=c.getDebug())==null?void 0:m.SourceBufferManager;if(h){j=(m=h.getDebug())==null?void 0:m.SourceBuffer}}if(d){k=(m=d.getDebug())==null?void 0:m.SourceBufferManager;if(k){l=(m=k.getDebug())==null?void 0:m.SourceBuffer}}return{getManifest:function(){return i(a.$Player$p_9)},DashManifestParsed:this.$Player$p_9,VideoSourceStream:b,VideoAbrManager:e,VideoBufferManager:f,VideoSourceBuffer:g,AudioSourceStream:c,AudioBufferManager:h,AudioSourceBuffer:j,CaptionSourceStream:d,CaptionBufferManager:k,CaptionSourceBuffer:l}};f.injectExternalDebugEvent=function(a,b){this.$Player$p_107(a,b)};f.$Player$p_107=function(a,b){this.emit("debug/dashPlayerEvent",{detail:{type:a,event:b}})};f.$Player$p_81=function(){var a=this,b=new(c("oz-player/strategies/OzBufferingDetector"))(this.$Player$p_3,this.$Player$p_4.getLegacyConfig(),function(){return a.$Player$p_51?a.$Player$p_3.duration:Infinity});b.attachPerfLoggerProvider(this.$Player$p_16);this.$Player$p_10.addSubscriptions(b.addListener("enterBuffering",function(b){a.emit("enterBuffering",b)}),b.addListener("leaveBuffering",function(b){a.emit("leaveBuffering",b)}));return b};f.$Player$p_102=function(){var a=this.$Player$p_52?this.$Player$p_52():{width:this.$Player$p_3.offsetWidth,height:this.$Player$p_3.offsetHeight};return a};f.getMpdUrl=function(){return this.$Player$p_18};f.$Player$p_97=function(a){var b=this;this.$Player$p_18=a;var c=this.$Player$p_9;if(!c){this.$Player$p_60=!0;return}else{c.updateLocation(a);this.$Player$p_43&&(this.$Player$p_10.releaseOne(this.$Player$p_43),this.$Player$p_43=null);a=function(){b.$Player$p_43&&(b.$Player$p_10.releaseOne(b.$Player$p_43),b.$Player$p_43=null),b.$Player$p_5.forEach(function(a,d){var e=a.getCurrentRepresentation(),f=e.getDisplayLabel();e=(d==="video"?b.$Player$p_101():c.getAudioRepresentations()).slice();if(d==="video"){d=b.$Player$p_6.get(d);d&&d.updateRepresentations(b.$Player$p_101())}d=e[0];e.forEach(function(a){var b=a.getDisplayLabel();b===f&&(d=a)});a.switchRepresentation(d);a.restartLoopBody()})};this.$Player$p_43=c.addListener("updated",a);this.$Player$p_10.addSubscriptions(this.$Player$p_43)}};f.getPerfLoggerProvider=function(){return this.$Player$p_16};f.getApproximateFBLSToPlayerDisplayLatency=function(){var a,b;a=Number((a=(a=this.$Player$p_9)==null?void 0:a.getCustomField("lastVideoFrameTs"))!=null?a:void 0);b=Number((b=(b=this.$Player$p_9)==null?void 0:b.getCustomField("currentServerTimeMs"))!=null?b:void 0);var c=this.$Player$p_125(a,b);a=this.$Player$p_126(a,b);return{latencyFromClockSync:a,latencyFromMpdUpdate:c}};f.$Player$p_125=function(a,b){if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b))return null;b=0;this.$Player$p_58===a?b=(c("oz-player/shims/OzPerformance").now()-Number(this.$Player$p_59))/1e3:(this.$Player$p_59=c("oz-player/shims/OzPerformance").now(),this.$Player$p_58=a);a=a/1e3+b-this.$Player$p_14.getCurrentTime();return a};f.$Player$p_126=function(a,b){var d;if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b)||c("oz-player/networks/OzClientClock").getClientClockOffsetMs()==null||!c("oz-player/networks/OzClientClock").getClientClockOffsetMs())return null;d=this.$Player$p_14.getCurrentTimeUpdateTime()+((d=c("oz-player/networks/OzClientClock").getClientClockOffsetMs())!=null?d:0);b=b;var e=this.$Player$p_14.getCurrentTime()*1e3;a=a;d=(d-b-(e-a))/1e3;return d};f.$Player$p_79=function(){this.$Player$p_5.forEach(function(a){a.restartLoopBody();var b=a.getCurrentRepresentation();a.switchRepresentation(b)})};return e}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player",["oz-player/Player"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/Player")}),98);/*FB_PKG_DELIM*/
__d("BaseToastContentWrapper.react",["BaseTheme.react","BaseView.react","react","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={dark:"__fb-dark-mode ",light:"__fb-light-mode ",type:"CLASSNAMES"};b=i.forwardRef(a);function a(a,b){var d=a.children,e=a.testid;e=a.useInvertedDisplayMode;a=a.xstyle;var f=c("useCurrentDisplayMode")();f=f==="dark"?"light":"dark";return e?i.jsx(c("BaseTheme.react"),{config:j,displayMode:f,ref:b,testid:void 0,xstyle:a,children:d}):i.jsx(c("BaseView.react"),{ref:b,testid:void 0,xstyle:a,children:d})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("BaseToast.react",["BaseInlinePressable.react","BaseToastContentWrapper.react","BaseView.react","XPlatReactFocusRegion.react","focusScopeQueries","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useId,k=b.useMemo,l={item:{display:"x78zum5",flexDirection:"xdt5ytf",paddingBottom:"x19yoh24",paddingStart:"xrxijuk",paddingEnd:"xpowjs8",paddingLeft:null,paddingRight:null,paddingTop:"x6enp1t",$$css:!0},itemText:{flexGrow:"x1iyjqo2",$$css:!0},link:{wordBreak:"xdnwjd9",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"x1wkzo03",borderTopColor:"xlnzwam",borderEndColor:"x12rs7x4",borderBottomColor:"xm9qwu6",borderStartColor:"xup3dfi",borderTopStartRadius:"x1192kqh",borderTopEndRadius:"xjfsc2c",borderBottomEndRadius:"xg8fqjl",borderBottomStartRadius:"x1kdh5me",borderTopStyle:"xhf2mca",borderEndStyle:"xrf2tuc",borderBottomStyle:"x13y0ya8",borderStartStyle:"x1pyzo2z",borderTopWidth:"xmqxc35",borderEndWidth:"x7gbks2",borderBottomWidth:"x21fg80",borderStartWidth:"x1q3d8fi",boxShadow:"xi1c1fh",display:"x78zum5",flexShrink:"x2lah0s",maxWidth:"x1cs6qxi",minWidth:"x1hqenl9",paddingTop:"x192rfv7",paddingBottom:"x13jxccy",paddingStart:"xuv3zuj",paddingEnd:"xd3owfx",paddingLeft:null,paddingRight:null,$$css:!0},rootFullWidth:{width:"xh8yej3",$$css:!0}};function a(a){var b=a.action,e=a.addOnStart,f=a.closeButton,g=a.linkWrapper,h=a.message,m=a.offsetStyles,n=a.onDismiss,o=a.size;o=o===void 0?"full-width":o;var p=a.testid;p=a.toastRef;a=a.useInvertedDisplayMode;a=a===void 0?!0:a;var q=j(),r=k(function(){return b!=null?{}:{"aria-atomic":!0,role:"alert"}},[b]);e=i.jsxs(i.Fragment,{children:[e!=null&&i.jsx(c("BaseView.react"),{xstyle:l.item,children:e}),i.jsx(c("BaseView.react"),babelHelpers["extends"]({xstyle:[l.item,l.itemText]},r,{children:h({toastMessageId:q})})),b!=null&&i.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:i.jsx(c("BaseView.react"),{xstyle:l.item,children:b.element!=null?b.element:b.labelRenderer&&i.jsx(c("BaseInlinePressable.react"),{onPress:function(a){n(),b.onPress(a)},testid:void 0,xstyle:l.link,children:b.labelRenderer(b.label)})})}),f!=null&&i.jsx(c("BaseView.react"),{xstyle:l.item,children:f})]});e=g!=null?g(e):e;return i.jsx(c("BaseToastContentWrapper.react"),{ref:p,testid:void 0,useInvertedDisplayMode:a,xstyle:[l.root,o==="full-width"&&l.rootFullWidth,m],children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","WebDriverConfig","cr:3024","gkx","isEmpty"],(function(a,b,c,d,e,f,g){var h,i="javascript-sandbox",j="OverrideServer",k="www_sandbox",l="www_tier";a=function(){function a(){}var d=a.prototype;d.patchRequestHeaders=function(a){var d={},e=c("RTISubscriptionManagerConfig").bladerunner_www_sandbox,f=c("RTISubscriptionManagerConfig").is_intern;if(!(h||(h=c("isEmpty")))(c("WebDriverConfig").auxiliaryServiceInfo)){var g;g=(g=c("WebDriverConfig").auxiliaryServiceInfo.BladeRunner)!=null?g:c("WebDriverConfig").auxiliaryServiceInfo["BladeRunner-sandcastle"];g!=null?(typeof g.ip_address==="string"?d[j]=g.ip_address+":18295":typeof g.hostname==="string"&&(d[j]=g.hostname+":18295"),typeof c("WebDriverConfig").originHost==="string"&&(d[k]="www."+c("WebDriverConfig").originHost)):e!=null&&(d[i]=e)}else e!=null&&(d[i]=e);f===!0&&(d[l]="intern");if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){g=b("cr:3024")==null?void 0:b("cr:3024").get();g!=null&&(d.is_test="true",d.original_request_id=g)}c("gkx")("20929")&&(d["Accept-Ack"]="RSAck");for(e in a)d[e]=a[e];d.http_referer=window.location.href;return d};return a}();d=new a();e=d;g["default"]=e}),98);
__d("BladeRunnerLogger",["FBLogger","ODS"],(function(a,b,c,d,e,f,g){var h,i="bladerunner_js_client",j={info:"info",warning:"warning",exception:"exception"};a=function(){function a(){this.setFBLoggerLevel(1)}var b=a.prototype;b.info=function(a){this.$2>=2&&c("FBLogger")(i).info("BladeRunner info: %s",a),this.$3(j.info,a)};b.warn=function(a){this.$2>=1&&c("FBLogger")(i).warn("BladeRunner warn: %s",a),this.$3(j.warning,a)};b.exception=function(a,b){b===void 0&&(b="");var d=b+" "+a.toString();this.$2>=0&&c("FBLogger")(i).warn("BladeRunner exception: %s, %s",b,a.toString());this.$3(j.exception,d)};b.trimForLogging=function(a){var b=1024;return typeof a==="string"&&a.length>b?"[trimmed]:"+a.substring(0,b)+"...":a};b.bumpCounter=function(a,b){b===void 0&&(b=1),(h||(h=d("ODS"))).bumpEntityKey(2966,"BladeRunnerClient",a,b)};b.setClientSessionId=function(a){this.$1=a};b.setFBLoggerLevel=function(a){this.$2=a};b.$3=function(a,b){};return a}();b=new a();e=b;g["default"]=e}),98);
__d("BladeRunnerTypes",[],(function(a,b,c,d,e,f,g){a={REQUEST:1,DATA:2,DATA_ACK:3,STATUS_UPDATE:4,REWRITE_REQUEST:5,LOG:6};b={BLADE_RUNNER:1,GATEWAY:2};g.StreamFrameType=a;g.StreamRequestType=b}),98);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){var h=function(){function a(){}var b=a.prototype;b.getHeaders=function(){if(this.headers!=null)return this.headers;throw new Error("Expected headers")};b.getInstrumentationData=function(){if(this.instrumentationData!=null&&this.instrumentationData.length>0)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.updateRetryRequestPayload=function(a){a!=null?this.payload=c("Base64").encode(a):this.payload=null};a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.requestType=o(b.requestType);c.payload=r(b.payload);c.headers=u(b.headers);c.extraHeader=r(b.extraHeader);c.requestTarget=r(b.requestTarget);c.instrumentationData=r(b.instrumentationData);return c};return a}(),i=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=p(b.dataId);c.data=r(b.data);c.shouldAck=w(b.shouldAck);return c};var b=a.prototype;b.rawData=function(){if(this.data==null)throw new Error("Expected data");return this.data};b.rawDataSize=function(){return this.data==null?0:this.data.length};b.decodeData=function(){if(this.data==null)throw new Error("Expected data");return c("Base64").decode(this.data)};b.setData=function(a){this.data=c("Base64").encode(a)};b.getInstrumentationData=function(){if(this.instrumentationData!=null)return JSON.parse(this.instrumentationData);else return null};return a}(),j=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.dataId=o(b.dataId);c.success=v(b.success);c.message=r(b.message);c.code=p(b.code);return c};return a}();j.ACK_CODE_LANDED_AND_ACCEPTED=20;j.ACK_CODE_LANDED_BUT_NOT_ACCEPTED=21;j.ACK_CODE_FAILED_TO_LAND=50;var k=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=p(b.streamId);c.message=r(b.message);return c};return a}(),l=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.status=o(b.status);c.message=r(b.message);c.code=p(b.code);c.shouldRetry=w(b.shouldRetry);c.retryDelayMs=p(b.retryDelayMs);return c};return a}(),m=function(){function a(){}a.readObject=function(b){var c=new a();c.streamId=o(b.streamId);c.newBody=r(b.newBody);c.newExtraHeader=r(b.newExtraHeader);c.patchExtraHeader=r(b.patchExtraHeader);c.killBody=w(b.killBody);c.temporary=w(b.temporary);return c};return a}(),n=function(){function a(){}var b=a.prototype;b.getRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};b.getData=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};b.getDataAck=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};b.getStatusUpdate=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};b.getLog=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};b.getRewriteRequest=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")};b.getStreamId=function(){if(this.type==d("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;if(this.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck.streamId;throw new Error("Frame with unexpected type")};b.isInstrumented=function(){if(this.type===d("BladeRunnerTypes").StreamFrameType.REQUEST)return this.getRequest().instrumentationData!=null;else if(this.type===d("BladeRunnerTypes").StreamFrameType.DATA)return this.getData().instrumentationData!=null;else return!1};a.readObject=function(b){var e=new a();e.type=o(b.type);switch(e.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:e.request=h.readObject(s(b.request));break;case d("BladeRunnerTypes").StreamFrameType.DATA:e.data=i.readObject(s(b.data));break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:e.dataAck=j.readObject(s(b.dataAck));break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:e.statusUpdate=l.readObject(s(b.statusUpdate));break;case d("BladeRunnerTypes").StreamFrameType.LOG:e.log=k.readObject(s(b.log));break;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:e.rewriteRequest=m.readObject(s(b.rewriteRequest));break;default:c("BladeRunnerLogger").warn("Frame with unexpected type: "+e.type);return null}return e};a.newRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REQUEST;c.request=b;return c};a.newDataFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA;c.data=b;return c};a.newDataAckFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.DATA_ACK;c.dataAck=b;return c};a.newStatusUpdateFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE;c.statusUpdate=b;return c};a.newLogFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.LOG;c.log=b;return c};a.newRewriteRequestFrame=function(b){var c=new a();c.type=d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST;c.rewriteRequest=b;return c};return a}();a=function(){function a(a,b,c){this.batchId=a,this.frames=b,this.instrumentationData=c}var b=a.prototype;b.getFrames=function(){if(this.frames!=null)return this.frames;throw new Error("Expected frames")};b.getInstrumentationData=function(){if(this.instrumentationData!=null)try{return JSON.parse(this.instrumentationData)}catch(a){return null}else return null};b.getInstrumentationDataDfTraceId=function(){if(this.instrumentationData!=null)try{var a=JSON.parse(this.instrumentationData);return(a=a.dataFlowTracingData)==null?void 0:a.traceId}catch(a){return null}else return null};b.write=function(){return JSON.stringify(this)};b.isInstrumented=function(){return this.getFrames().some(function(a){return a.isInstrumented()})};a.read=function(b){b=JSON.parse(b);var c=b.batchId||0,d=[];for(var e=b.frames,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h=n.readObject(h);h!=null&&d.push(h)}h=b.instrumentationData||null;return new a(c,d,h)};return a}();function o(a){if(typeof a==="number")return a;throw new Error("Expected number")}function p(a){return a==null?null:o(a)}function q(a){if(typeof a==="string")return a;throw new Error("Expected string")}function r(a){return a==null?null:q(a)}function s(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function t(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function u(a){return a==null?null:t(a)}function v(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function w(a){return a==null?null:v(a)}g.GatewayStreamRequest=h;g.GatewayStreamData=i;g.GatewayStreamDataAck=j;g.GatewayStreamLog=k;g.GatewayStreamStatusUpdate=l;g.GatewayStreamRewriteRequest=m;g.GatewayStreamFrame=n;g.GatewayStreamBatch=a}),98);
__d("RequestStreamE2EClientLoggerEvent",[],(function(a,b,c,d,e,f){a=Object.freeze({RECEIVED:"received",SENT:"sent",FAILURE:"failure",PUBACK:"puback"});f["default"]=a}),66);
__d("RequestStreamE2EClientLoggerMessageType",[],(function(a,b,c,d,e,f){a=Object.freeze({REQUEST_STREAM:"request_stream",AMENDMENT:"amendment",AMENDMENT_ACK:"amendment_ack",CANCEL:"cancel",RESPONSE:"response",RESPONSE_ACK:"response_ack",TIMED_REQUEST:"timed_request",INTERRUPT:"interrupt"});f["default"]=a}),66);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3;a=function(){function a(a,b,c){this.$2=a,this.$1=b,this.$3=c}var b=a.prototype;b.onProxyResponse=function(a){this.$4(a);var b=[];for(var e=a.getFrames(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;this.$2.witnessFrame(h)&&b.push(h)}h=this.$2.getRequest();(g=h.e2eLogger)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,{},(f=a.getInstrumentationData())==null?void 0:f.auxId,null,a.getInstrumentationDataDfTraceId());b.length>0&&this.$5(new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(a.batchId,b,a.instrumentationData))};b.onDisconnect=function(){this.$2.resetErrors();var a=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();a.streamId=this.$2.getRequest().streamId;a.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};b.$4=function(a){var b=this;a=a.getFrames().filter(function(a){return a.type==d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;g=g.getStatusUpdate();if(g.status==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||g.status==d("BladeRunnerStreamStatus").StreamStatus.REJECTED){this.$2.onError();var i=g.shouldRetry!=null&&g.shouldRetry,j=g.message!=null?g.message:"null";if(i&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){g.status=d("BladeRunnerStreamStatus").StreamStatus.STOPPED;var k=h;g.retryDelayMs!=null&&(k=g.retryDelayMs);c("BladeRunnerLogger").info("Can retry: stream "+g.streamId+" closed with status "+g.status+", message "+j+". Error count: "+this.$2.getErrorCount()+", retryDelay "+k+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?c("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(c("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),k>0?c("setTimeoutAcrossTransitions")(function(){return b.$6()},k):this.$6())}else c("BladeRunnerLogger").info("Will not retry: stream "+g.streamId+" closed with status "+g.status+", message "+j+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+i.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),i?c("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):c("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(g.streamId)}}};b.$6=function(){this.$2.setRetryRequestScheduled(!1);if(this.$2.isAlive()){var a=this.$1.getUpdatedRequestBody();a!=null&&this.$2.updateRetryRequestPayload(a);this.$3.sendRetryStreamRequest(this.$2)}};b.$5=function(a){c("BladeRunnerLogger").bumpCounter("send_to_handler");var b=[];this.$1.onBatch(a);for(var a=a.getFrames(),e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;try{switch(g.type){case d("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(g.getData());b.push(g.getData());break;case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(g.getStatusUpdate().status);break;case d("BladeRunnerTypes").StreamFrameType.LOG:g=g.getLog().message;g!=null&&this.$1.onLog(g);break;case d("BladeRunnerTypes").StreamFrameType.DATA_ACK:break;default:throw new Error("Frame with unexpected type")}}catch(a){c("BladeRunnerLogger").bumpCounter("send_to_handler_error"),c("BladeRunnerLogger").exception(a,"Failed sending frame to stream handler")}}this.$7(b)};b.$7=function(a){var b=[];for(var c=0;c<a.length;c++){var e=a[c];if(e.shouldAck===!0&&e.dataId!=null){var f=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();f.streamId=e.streamId;f.dataId=e.dataId;f.success=!0;b.push(f)}}this.$3.sendDataAcks(b)};return a}();g["default"]=a}),98);
__d("RtiRequestStreamE2eClientBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("819");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client_batch",a);e=b;g["default"]=e}),98);
__d("RtiRequestStreamE2eClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1857112");b=d("FalcoLoggerInternal").create("rti_request_stream_e2e_client",a);e=b;g["default"]=e}),98);
__d("RequestStreamE2ELogger",["ConstUriUtils","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RtiRequestStreamE2eClientBatchFalcoEvent","RtiRequestStreamE2eClientFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h=["FBGQLS:COMMENT_CREATE_SUBSCRIBE","FBGQLS:COMMENT_LIKE_SUBSCRIBE","FBGQLS:FEEDBACK_COMMENT_PERMISSION_TOGGLE_SUBSCRIBE","FBGQLS:FEEDBACK_TYPING_SUBSCRIBE","FBLQ:comet_notifications_live_query_experimental"],i=0;function j(){var a=Date.now();i>=a?i+=1:i=a;return i.toString()}var k=function(){function a(a,b,c,e,f,g,h,i,j,k){this.$10=[];this.$11=!1;this.$1=a;this.$2=b;this.$3=c;this.$4=e;this.$5=f;this.$6=g;this.$7=h;this.$8=i;this.$9=j;this.$12=(a=k)!=null?a:!1;b=d("ConstUriUtils").getUri(window.location.href);b&&(this.$13=b.getDomain())}var b=a.prototype;b.logE2EEvent=function(a,b,c,d,e,f){c===void 0&&(c=null);d===void 0&&(d=null);e===void 0&&(e=null);f===void 0&&(f=null);if(this.$3==="Falco")return;e={request_id:this.$1,resume_id:"0",retry_id:e,transport:this.$2,method:this.$3,use_case:this.$4,request_log_context:this.$5,force_log_context:this.$6,e2e_sample_rate:this.$7,message_type:a,event:b,timestamp_ms:j(),aux_id:d,additional_data:c,dgw_stream_group_logging_id:this.$8,dgw_count_prior_streams_in_group:this.$9,domain:this.$13,df_trace_id:f};this.$14(e)};b.$14=function(a){if(!this.$12){c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return a});return}this.$10.push(a);if(this.$11||a.event==c("RequestStreamE2EClientLoggerEvent").FAILURE||a.message_type==c("RequestStreamE2EClientLoggerMessageType").RESPONSE){var b={events:this.$10};c("RtiRequestStreamE2eClientBatchFalcoEvent").log(function(){return b});this.$10=[];this.$11=!0}};b.getRequestId=function(){return this.$1};return a}();function a(a,b,c){if(a==null||a.method==null)return null;var d=!1;h.includes(a.method)&&(d=!0);if(b==null||b.length==0)return null;b=JSON.parse(b);return b.requestId==null?null:new k(b.requestId,c,a.method,l(a.method,a),b.requestLogContext,b.forceLogContext,b.sampleRate,b.dgwStreamGroupLoggingId,b.dgwCountPriorStreamsInGroup,d)}function l(a,b){if(a==="FBLQ"&&b.config_id)return b.config_id;if(a==="SKY"){if(b.topic){var c=b.topic.lastIndexOf("/");return c>0?b.topic.substr(0,c):b.topic}return}return a}function b(a,b,d,e,f,g){f===void 0&&(f=null);g===void 0&&(g=null);if(a==null||a.requestId==null||a.clientLoggingDisabled!=null)return;var h={request_id:a.requestId,resume_id:"0",transport:b,e2e_sample_rate:a.sampleRate,message_type:d,event:e,timestamp_ms:j(),aux_id:a.auxId,additional_data:f,df_trace_id:g};c("RtiRequestStreamE2eClientFalcoEvent").log(function(){return h})}g.RequestStreamE2ELogger=k;g.createStreamLogger=a;g.logRequestStreamE2EEventStatic=b}),98);
__d("RequestStreamTransport",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["WEB_BR_MQTT","WEB_RS_MQTT","WEB_RS_STARGATE"]);f.RequestStreamTransport=a}),66);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes","BladeRunnerTypesInternal","CurrentUser","FBMqttChannel","MqttPublishListener","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamTransport","justknobx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Connected",j="Disconnected",k="/br_sr",l="/sr_res",m=null;function n(a){var b;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return(b=a.request)==null?void 0:b.getInstrumentationData();case d("BladeRunnerTypes").StreamFrameType.DATA:return(b=a.data)==null?void 0:b.getInstrumentationData()}return null}function o(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:return c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM;case d("BladeRunnerTypes").StreamFrameType.DATA:return c("RequestStreamE2EClientLoggerMessageType").AMENDMENT}return null}function p(a){if(a===null)return null;switch(a){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:return"Accepted";case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:return"Rejected";case d("BladeRunnerStreamStatus").StreamStatus.STARTED:return"Started";case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:return"Stopped";case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:return"Closed"}return null}function q(a){var b={};a==null?void 0:(a=a.frames)==null?void 0:a.forEach(function(a){if(a.type===d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE){a=(a=a.statusUpdate)==null?void 0:a.status;a=p(a);a!==null&&(b.flow_status=a)}});return b}function r(a,b){var c;switch(a.type){case d("BladeRunnerTypes").StreamFrameType.REQUEST:b.data_base64_size=(c=a.request)==null?void 0:(c=c.payload)==null?void 0:(c=c.length)==null?void 0:c.toString();break;case d("BladeRunnerTypes").StreamFrameType.DATA:b.data_base64_size=(c=a.data)==null?void 0:(b=c.rawDataSize())==null?void 0:b.toString();break}return null}function s(a,b,e){var f=n(a);if(f==null)return;var g=o(a);if(g==null)return;var h=null;switch(b){case d("MqttPublishListener").MqttPublishEvent.SENT:h=c("RequestStreamE2EClientLoggerEvent").SENT;break;case d("MqttPublishListener").MqttPublishEvent.ACKED:h=c("RequestStreamE2EClientLoggerEvent").PUBACK;break;case d("MqttPublishListener").MqttPublishEvent.NOT_ACKED:case d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED:case d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR:h=c("RequestStreamE2EClientLoggerEvent").FAILURE;e.reason==null&&(e.reason=b);break}if(h==null)return;r(a,e);if(((b=a.request)==null?void 0:b.e2eLogger)!=null&&f.clientLoggingDisabled==null){(b=a.request)==null?void 0:b.e2eLogger.logE2EEvent(g,h,e,f.auxId)}else d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(f,d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,g,h,e)}a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=null,this.$5=0,this.$6=new Map(),this.$7=a!=null?a:c("FBMqttChannel"),this.$8=new Map(),c("BladeRunnerLogger").setClientSessionId(c("uuidv4")()),this.$9()}a.get=function(){m==null&&(m=new a(c("FBMqttChannel")));return m};var e=a.prototype;e.sendNewStreamRequest=function(b,d){d=new(c("BladeRunnerEventHandler"))(b,d,this);var e=b.getRequest();this.$6.set(e.streamId,d);if(!this.$10()){this.$11(d,e.streamId);return}this.getStreamCount()<=a.maxStreamCount?this.$12(e):(c("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),c("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(b.getRequest().getHeaders())),this.$11(d,e.streamId))};e.sendRetryStreamRequest=function(a){this.$12(a.getRequest())};e.sendCancel=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_cancel");var b=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();b.streamId=a.streamId;b.status=d("BladeRunnerStreamStatus").StreamStatus.CLOSED;this.$13(b,a);this.removeStream(a.streamId)};e.sendAmendment=function(a,b,e){c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var f=new(d("BladeRunnerTypesInternal").GatewayStreamData)();f.streamId=a;f.setData(b);e!=null&&(f.instrumentationData=e);this.$14(f)};e.sendAmendmentWithAck=function(a,e,f){var g=this;c("BladeRunnerLogger").bumpCounter("socket_send_amendment");var i=this.$15(),j=new(d("BladeRunnerTypesInternal").GatewayStreamData)();j.streamId=a;j.setData(e);j.shouldAck=!0;j.dataId=i;f!=null&&(j.instrumentationData=f);a=new(h||(h=b("Promise")))(function(a,b){g.$8.set(i,{resolve:a,reject:b})});this.$14(j);return a};e.$14=function(a){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataFrame(a)),this.$16()};e.sendDataAcks=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_data_ack",a.length),this.$17(a)};e.removeStream=function(a){this.$6["delete"](a)};e.getStreamCount=function(){return this.$6.size};e.getNextStreamId=function(){this.$5++;return this.$5};e.onMQTTStateChanged=function(a){this.$16();if(a!=j&&a!=i||this.$4==a)return;this.$4=a;c("BladeRunnerLogger").info("MQTTStateChanged: "+a);a==j?(c("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$18()):a==i&&c("BladeRunnerLogger").bumpCounter("mqtt_state_connected")};e.$12=function(a){c("BladeRunnerLogger").bumpCounter("socket_send_request");this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(a));if(!this.$16()){(a=a.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"MQTT Not Connected"})}};e.$13=function(a,b){this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a));if(this.$16()){(a=b.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").SENT)}};e.$17=function(a){for(var b=0;b<a.length;b++){var c=a[b];this.$1.push(d("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(c))}this.$16()};e.$19=function(){this.$2++;return this.$2};e.$15=function(){this.$3++;return this.$3};e.$16=function(){var a=!1;if(this.$7.getConnectionState()===i&&this.$1.length>0)try{this.$20(this.$1),a=!0}catch(a){}finally{this.$1=[]}return a};e.$20=function(a){var b=this,e=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(this.$19(),a),f=e.write();if(f.length>this.$21()){var g=Math.floor(a.length/2);if(g===0){a.forEach(function(a){return s(a,d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR,{reason:"too long"})});var h=new Error("Publish is too long: "+f.length);h.stack;this.$22(e,h,"Publish is too long");throw h}this.$20(a.slice(0,g));this.$20(a.slice(g,a.length))}else try{c("BladeRunnerLogger").info("send message to "+k+" ("+f.length+" bytes)");h={qos:1,skipBuffer:!1};if(e.isInstrumented()){var i=Date.now();h.listener={onEvent:function(b){var c=(Date.now()-i).toString();a.forEach(function(a){s(a,b,{latency:c})})}}}this.$7.publish(k,f,h)["catch"](function(a){b.$22(e,a,"Failed publishing to MQTT")});c("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(a){this.$22(e,a,"Failed publishing to MQTT");throw a}};e.$9=function(){var a=this;c("BladeRunnerLogger").info("Starting socket with endpoint "+this.$7.getEndpoint()+" useragent "+navigator.userAgent);this.onMQTTStateChanged(this.$7.getConnectionState());this.$7.subscribeChannelEvents({onMQTTStateChanged:function(b){a.onMQTTStateChanged(b)},onJSError:function(a){var b=a!=null&&typeof a.isRecoverable==="boolean"?a.isRecoverable:!1;b?c("BladeRunnerLogger").bumpCounter("mqtt_channel_recoverable_error"):(c("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),c("BladeRunnerLogger").bumpCounter("mqtt_channel_error"))}});this.$7.subscribe(k,function(a){throw new Error("Unexpected response: "+k+" "+a.toString())});this.$7.subscribe(l,function(b){a.$23(b)})};e.$23=function(a){a=d("BladeRunnerTypesInternal").GatewayStreamBatch.read(a);this.processBatch(a)};e.$22=function(a,b,e){for(var a=a.getFrames(),f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;if(h.type===d("BladeRunnerTypes").StreamFrameType.REQUEST){var i=h.getRequest(),j=this.$6.get(i.streamId);j!=null&&this.$24(j,i.streamId,d("BladeRunnerStreamStatus").StreamStatus.CLOSED,!0,null)}else if(h.type===d("BladeRunnerTypes").StreamFrameType.DATA){j=h.getData();i=j.dataId;if(j.shouldAck!=null&&j.shouldAck&&i!=null){h=new(d("BladeRunnerTypesInternal").GatewayStreamDataAck)();h.streamId=j.streamId;h.dataId=i;h.success=!1;h.code=d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_FAILED_TO_LAND;h.message=e;this.$25(h)}}}c("BladeRunnerLogger").info("Failed publishing to MQTT: "+b.message);c("BladeRunnerLogger").bumpCounter("mqtt_publish_error")};e.$25=function(a){var b=this.$8.get(a.dataId);b!=null&&(this.$8["delete"](a.dataId),a.success?b.resolve(!0):a.code===d("BladeRunnerTypesInternal").GatewayStreamDataAck.ACK_CODE_LANDED_BUT_NOT_ACCEPTED?b.resolve(!1):b.reject(a.message))};e.processBatch=function(a){try{d("RequestStreamE2ELogger").logRequestStreamE2EEventStatic(a.getInstrumentationData(),d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,q(a),a.getInstrumentationDataDfTraceId());c("BladeRunnerLogger").bumpCounter("socket_process_batch");var b=JSON.stringify(a);c("BladeRunnerLogger").info("Received batch ("+b.length+" bytes)");b=null;for(var e=a.getFrames(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;var i=h.getStreamId();b==null&&(b=i);if(i!=null&&b!=i)throw new Error("Received batch with frames for multiple streams");h.type==d("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.$25(h.getDataAck())}if(b!=null){i=this.$6.get(b);i!=null?i.onProxyResponse(a):c("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+b)}else c("BladeRunnerLogger").info("Received batch with no frames")}catch(a){c("BladeRunnerLogger").exception(a,"Failed processing batch from MQTT");c("BladeRunnerLogger").bumpCounter("socket_process_batch_error");throw a}};e.$18=function(){this.$6.forEach(function(a,b,c){a.onDisconnect()})};e.$11=function(a,b){this.$24(a,b,d("BladeRunnerStreamStatus").StreamStatus.REJECTED,!1,0)};e.$24=function(a,b,c,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();g.streamId=b;g.status=c;g.shouldRetry=e;g.retryDelayMs=f;b=new(d("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[d("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(g)]);a.onProxyResponse(b)};e.$10=function(){if(!c("CurrentUser").isLoggedIn()){c("BladeRunnerLogger").bumpCounter("request_stream_user_logged_out");return!1}return!0};e.$21=function(){var a=1024*1024,b=512*1024;try{var d=c("justknobx")._("317");b=d*a}catch(a){}return Math.max(b-1024,0)};return a}();a.maxStreamCount=2e3;g["default"]=a}),98);
__d("BladeRunnerStream",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){var g;a=function(){function a(a){this.$1=a}var c=a.prototype;c.getStreamHandler=function(){return this.$1};c.cancel=function(){};c.amendWithAck=function(a){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",!1);case 1:case"end":return a.stop()}},null,this)};c.amendFireAndForget=function(a){};c.amendWithoutAck=function(a){};c.start=function(){return(g||(g=b("Promise"))).resolve()};c.isAlive=function(){return!1};c.canAmend=function(){return!1};c.getStatus=function(){return null};c.getStreamId=function(){return 0};return a}();f["default"]=a}),66);
__d("BladeRunnerStreamState",["BladeRunnerLogger","BladeRunnerStreamStatus","BladeRunnerTypes"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}var b=a.prototype;b.getRequest=function(){return this.$1};b.updateRetryRequestPayload=function(a){this.$1.updateRetryRequestPayload(a)};b.isAlive=function(){return!(this.$2==d("BladeRunnerStreamStatus").StreamStatus.CLOSED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.REJECTED)};b.canAmend=function(){return this.$2==d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STARTED||this.$2==d("BladeRunnerStreamStatus").StreamStatus.STOPPED};b.getLastStatus=function(){return this.$2};b.setLastStatus=function(a){this.$2=a};b.onError=function(){this.$3+=1};b.getErrorCount=function(){return this.$3};b.resetErrors=function(){this.$3=0};b.getRetryRequestScheduled=function(){return this.$6};b.setRetryRequestScheduled=function(a){this.$6=a};b.witnessFrame=function(a){switch(a.type){case d("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var b=a.getStatusUpdate(),c=!0;switch(b.status){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:c=!this.$4;this.$4||(this.$4=!0);break;case d("BladeRunnerStreamStatus").StreamStatus.STARTED:c=this.getLastStatus()!=d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:c=this.getLastStatus()==d("BladeRunnerStreamStatus").StreamStatus.STARTED;break;case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:default:c=!0}this.setLastStatus(b.status);return c;case d("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:this.$7(a.getRewriteRequest());return!1;default:return!0}};b.setRetriesAllowed=function(a){this.$5=a};b.getRetriesAllowed=function(){return this.$5};b.$7=function(a){if(!(a.temporary!=null||a.temporary==!0)){a.newBody!=null&&(this.$1.payload=a.newBody);a.newExtraHeader!=null&&(this.$1.extraHeader=a.newExtraHeader,this.$1.headers=JSON.parse(a.newExtraHeader));if(a.patchExtraHeader!=null)try{var b=JSON.parse(a.patchExtraHeader),d=this.$1.extraHeader!=null?JSON.parse(this.$1.extraHeader):{};this.$1.headers==null&&(this.$1.headers={});var e=Object.keys(b);for(var f=0;f<e.length;f++){var g=e[f];this.$1.headers[g]=b[g];d[g]=b[g]}this.$1.extraHeader=JSON.stringify(d)}catch(b){c("BladeRunnerLogger").warn("Failed to patch header: "+a.patchExtraHeader)}a.killBody!=null&&a.killBody==!0&&(this.$1.payload=null)}};return a}();g["default"]=a}),98);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerStreamStatus","Promise","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","regeneratorRuntime","uuidv4"],(function(a,b,c,d,e,f,g){var h,i=4,j={reason:"stream_dead"};a=function(a){babelHelpers.inheritsLoose(e,a);function e(b,d,e){b=a.call(this,b)||this;b.$BladeRunnerSocketStream$p_1=e;b.$BladeRunnerSocketStream$p_2=new(c("BladeRunnerStreamState"))(d);b.$BladeRunnerSocketStream$p_2.setRetriesAllowed(i);return b}var f=e.prototype;f.start=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.send(),b()})};f.send=function(){var a,b=this.$BladeRunnerSocketStream$p_2.getRequest();(a=b.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_base64_size:(a=b.payload)==null?void 0:(b=a.length)==null?void 0:b.toString()});this.$BladeRunnerSocketStream$p_1.sendNewStreamRequest(this.$BladeRunnerSocketStream$p_2,this.getStreamHandler())};f.amendWithAck=function(a){var d,e,f,g,i,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:e=this.$BladeRunnerSocketStream$p_2.getRequest();f=e.getInstrumentationData();f&&(f.auxId=c("uuidv4")(),(g=e.e2eLogger)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null?void 0:(i=a.length)==null?void 0:i.toString()},f.auxId));if(!this.canAmend()){m.next=6;break}f&&((k=e.e2eLogger)==null?void 0:k.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null?void 0:(l=a.length)==null?void 0:l.toString()},f.auxId));return m.abrupt("return",this.$BladeRunnerSocketStream$p_1.sendAmendmentWithAck(e.streamId,this.$BladeRunnerSocketStream$p_3(a),f==null?null:JSON.stringify(f)));case 6:(d=e.e2eLogger)==null?void 0:d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,j,f==null?void 0:f.auxId);return m.abrupt("return",(h||(h=b("Promise"))).reject("Stream is closed or not accepted"));case 8:case"end":return m.stop()}},null,this)};f.amendFireAndForget=function(a){var b=this.$BladeRunnerSocketStream$p_2.getRequest(),d=b.getInstrumentationData();if(d){var e;d.auxId=c("uuidv4")();(e=b.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}if(this.canAmend()){this.$BladeRunnerSocketStream$p_1.sendAmendment(this.$BladeRunnerSocketStream$p_2.getRequest().streamId,this.$BladeRunnerSocketStream$p_3(a),d==null?null:JSON.stringify(d));if(d){(e=b.e2eLogger)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:a==null?void 0:(e=a.length)==null?void 0:e.toString()},d.auxId)}}else{(a=b.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,j,d==null?void 0:d.auxId);throw new Error("Stream is closed or not accepted")}};f.amendWithoutAck=function(a){this.amendFireAndForget(a)};f.$BladeRunnerSocketStream$p_3=function(a){return typeof a=="object"?btoa(new TextDecoder("utf8").decode(a)):a};f.cancel=function(){var a=this.$BladeRunnerSocketStream$p_2.getRequest();(a=a.e2eLogger)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.isAlive()&&(this.$BladeRunnerSocketStream$p_1.sendCancel(this.$BladeRunnerSocketStream$p_2.getRequest()),this.$BladeRunnerSocketStream$p_2.setLastStatus(d("BladeRunnerStreamStatus").StreamStatus.CLOSED),this.getStreamHandler().onClientCancel())};f.isAlive=function(){return this.$BladeRunnerSocketStream$p_2.isAlive()};f.canAmend=function(){return this.$BladeRunnerSocketStream$p_2.canAmend()};f.getStatus=function(){return this.$BladeRunnerSocketStream$p_2.getLastStatus()};f.getStreamId=function(){return this.$BladeRunnerSocketStream$p_2.getRequest().streamId};return e}(c("BladeRunnerStream"));g["default"]=a}),98);
__d("RequestStreamE2ESampling",["invariant","Random","RequestStreamE2EClientSamplingConfig","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a==null?!1:a.requestId!=null&&typeof a.requestId=="string"&&a.forceLogContext!=null&&typeof a.forceLogContext=="string"}function j(a,b){var d=c("RequestStreamE2EClientSamplingConfig").sampleRate;if(d>1&&a!=null){a=c("RequestStreamE2EClientSamplingConfig").methodToSamplingMultiplier[a];a==0?d=0:a!=null&&(d/=a)}return d==1?1:d/b}function k(a,b,d,e){var f=c("uuidv4")();(b.requestId==null||b.requestId===""||typeof b.requestId!="string")&&(a.requestId!=null&&typeof a.requestId=="string"?b.requestId=a.requestId:b.requestId=f);b.requestId+="/_"+f.substring(0,4);b.resumeId="0";d!=null?b.sampleRate=d:b.sampleRate=void 0;f="";e!=null&&e.length>0&&(f=e);f.length>0&&(b.requestLogContext!=null&&b.requestLogContext.length>0?b.requestLogContext+=":":b.requestLogContext="",b.requestLogContext+=f);(a==null?void 0:a.method)==="Falco"&&(b.clientLoggingDisabled="Falco");d={};for(e=Object.keys(b).sort(),f=Array.isArray(e),a=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(f){if(a>=e.length)break;g=e[a++]}else{a=e.next();if(a.done)break;g=a.value}g=g;d[g]=b[g]}return JSON.stringify(d)}function a(a,b,d,e){b&&(!b.requestId.includes("/")&&!b.requestId.includes("#")||h(0,41721));e=j(a.method,(e=e)!=null?e:1);if(c("Random").coinflip(e))return k(a,b||{requestId:""},e,d);return i(b)?k(a,b||{requestId:""},null,d):""}g.isForceLogged=i;g.getSampleRateForLogging=j;g.normalizeInstrumentationData=k;g.validateInstrumentationData=a}),98);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamTransport","cr:2046346"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$2=d("RequestStreamTransport").RequestStreamTransport.WEB_BR_MQTT,this.$1=a!=null?a:c("BladeRunnerSocket").get(),b&&(this.$2=b)}var e=a.prototype;e.createStream=function(a,b,c,d){return this.$3(a,b,c,d)};e.requestStream=function(a,c,d,e){a=this.$3(a,c,d,e);a.send();b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return a};e.logInfo=function(a){c("BladeRunnerLogger").info(a)};e.bumpCounter=function(a){c("BladeRunnerLogger").bumpCounter(a)};e.$3=function(a,b,e,f){var g=new(d("BladeRunnerTypesInternal").GatewayStreamRequest)();g.streamId=this.$1.getNextStreamId();g.requestType=d("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER;g.headers=c("BladeRunnerConfig").patchRequestHeaders(a);g.extraHeader=JSON.stringify(g.headers);g.payload=b!=null?c("Base64").encode(b):null;f!=null&&(f.transport="WEB_RS_MQTT");g.instrumentationData=d("RequestStreamE2ESampling").validateInstrumentationData(g.headers||{},f);g.e2eLogger=d("RequestStreamE2ELogger").createStreamLogger(g.headers,g.instrumentationData,this.$2);return new(c("BladeRunnerSocketStream"))(e,g,this.$1)};return a}();g["default"]=a}),98);
__d("BootloaderEventsPerf",["invariant","Bootloader","BootloaderEvents","ResourceTimingStore","objectEntries","objectValues"],(function(a,b,c,d,e,f,g,h){var i={total_count:0,total_bytes:0,downloaded_count:0,downloaded_bytes:0,cached_count:0,cached_bytes:0,inlined_count:0,inlined_bytes:0,duration:0,missing_count:0};function j(a,b,c){return Math.max(0,((c=c)!=null?c:0)-Math.max(a,(c=b)!=null?c:0))}function k(){return{blocking:babelHelpers["extends"]({},i),nonblocking:babelHelpers["extends"]({},i),"default":babelHelpers["extends"]({},i)}}function l(a,b,c){var e,f;if(c==null)e=0,f="downloaded";else if(c[1])e=c[0].length,f="inlined";else{c=d("ResourceTimingStore").getEntryForURL(c[0]);c?(e=c.encodedBodySize,f=c.transferSize===0?"cached":"downloaded"):(e=0,f="downloaded",a.missing_count++)}a.total_count++;a.total_bytes+=e;if(!b)return;a.duration=Math.max(a.duration,b);switch(f){case"downloaded":a.downloaded_count++;a.downloaded_bytes+=e;break;case"inlined":a.inlined_count++;a.inlined_bytes+=e;break;case"cached":a.cached_count++;a.cached_bytes+=e;break}}function m(a,b,d,e,f){var g=c("Bootloader").getResourceState(b);l(a,j(d,g.loadStart,g.loadEnd),e);g.loadError!=null&&f.add(b)}function n(a,b,d,e){var f=k();for(var a=c("objectEntries")(a),g=Array.isArray(a),i=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;var l=j[0];j=j[1];for(var j=j,n=Array.isArray(j),o=0,j=n?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=j.length)break;p=j[o++]}else{o=j.next();if(o.done)break;p=o.value}p=p;var q=p[0];p=p[1];var r=void 0,s=void 0;switch(p.type){case"async":s=null;r=d;break;case"js":case"css":s=[p.src,p.d===1];r=f;break;default:p,h(0,3721)}m(r[l],q,b,s,e)}}return f}function o(a,b){var e={unpredicted:d("BootloaderEvents").newResourceMapSet(),ef:d("BootloaderEvents").newResourceMapSet(),overpredicted:d("BootloaderEvents").newResourceMapSet()};for(var f=c("objectEntries")(b),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];for(var i=i.entries(),k=Array.isArray(i),l=0,i=k?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=i.length)break;m=i[l++]}else{l=i.next();if(l.done)break;m=l.value}m=m;var n=m[0];m=m[1];a[j].has(n)?e.ef[j].set(n,m):e.overpredicted[j].set(n,m)}}for(n=c("objectEntries")(a),m=Array.isArray(n),l=0,n=m?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(m){if(l>=n.length)break;k=n[l++]}else{l=n.next();if(l.done)break;k=l.value}i=k;j=i[0];h=i[1];for(g=h.entries(),f=Array.isArray(g),a=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(a>=g.length)break;k=g[a++]}else{a=g.next();if(a.done)break;k=a.value}i=k;h=i[0];k=i[1];b[j].has(h)||e.unpredicted[j].set(h,k)}}return e}function a(a){var b=a.efData,c=a.rsrcs,d=a.startTime,e=new Set(),f;if(b){var g=o(c,b.tierOne);f=g.unpredicted;g={ef:n(g.ef,b.fetchRsrcsStart,k(),e),overpredicted:n(g.overpredicted,b.fetchRsrcsStart,k(),e)};b={ef_fetch_predictions:b.fetchPredictionsEnd-b.fetchPredictionsStart,ef_fetch_start_wait:b.fetchPredictionsEnd-b.fetchRsrcsStart,ef_head_start:d-b.fetchRsrcsStart}}else f=c,g={},b={};c=babelHelpers["extends"]({unpredicted:n(f,d,k(),e)},g);return{source:a.source,source_detail:a.sourceDetail,is_first_identical:a.isFirstIdentical,timeslice_context:(f=a.timesliceContext)==null?void 0:f.name,start_time:d,err_count:e.size,resources:c,durations:babelHelpers["extends"]({jsmods_wait:a.jsmodsStart-d,jsmods:a.jsmodsEnd-a.jsmodsStart,jsmods_done_wait:a.jsmodsEnd-d,download_done_wait:a.logTime-d},b),payloadStats:a.payloadStats}}function b(a){var b=a.startTime,e=0,f=0,g=0,h=0;for(var i=a.components,m=Array.isArray(i),o=0,i=m?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(m){if(o>=i.length)break;p=i[o++]}else{o=i.next();if(o.done)break;p=o.value}p=p;p=c("Bootloader").getComponentTiming(p);var q=p.tierTwoStart,r=p.tierTwoEnd,s=p.tierThreeStart;p=p.tierThreeEnd;e=Math.max(e,j(b,q,r));f=Math.max(f,j(b,b,r));g=Math.max(g,j(b,s,p));h=Math.max(h,j(b,b,p))}q=new Set();r=k();s=n(a.tierOne,b,r,q);p=n(a.tierTwo,b,r,q);o=n(a.tierThree,b,r,q);m=r.blocking.downloaded_count!=0;i=k();var t=d("BootloaderEvents").newResourceMapSet(),u=new Set(),v=[a.tierOne,a.tierTwo,a.tierThree];for(var w=0;w<v.length;w++){var x=v[w];for(var x=c("objectValues")(x),y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}A=A;for(var A=A.keys(),B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}D=D;u.add(D)}}}D=0;C=0;B=0;for(A=a.beRequests.values(),z=Array.isArray(A),y=0,A=z?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(z){if(y>=A.length)break;x=A[y++]}else{y=A.next();if(y.done)break;x=y.value}v=x;D+=j(b,b,v.requestStart);C+=v.serverGenTime;B+=v.jsmodsEnd-v.jsmodsStart;l(i[m?"blocking":"nonblocking"],v.responseStart-v.requestStart,[v.uri,!1]);for(w=c("objectEntries")(v.rsrcs),x=Array.isArray(w),v=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var E;if(x){if(v>=w.length)break;E=w[v++]}else{v=w.next();if(v.done)break;E=v.value}E=E;var F=E[0];E=E[1];for(var E=E,G=Array.isArray(E),H=0,E=G?E:E[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var I;if(G){if(H>=E.length)break;I=E[H++]}else{H=E.next();if(H.done)break;I=H.value}I=I;var J=I[0];I=I[1];u.has(J)||t[F].set(J,I)}}}J=n(t,b,r,q);return{ref:a.ref,components:a.components,timeslice_context:(I=a.timesliceContext)==null?void 0:I.name,start_time:b,err_count:q.size,resources:{t1:s,t2:p,t3:o,be:i,unpredicted:J,async:r},durations:{fetch_start_wait:a.fetchStartTime-b,be_start_wait:D,be_server_gen:C,be_jsmods:B,callback_wait:a.callbackStart-b,callback:a.callbackEnd-a.callbackStart,bootload_done_wait:a.callbackEnd-b,rdfd_requirelazy:e,rdfd_done_wait:f,rd_requirelazy:g,rd_done_wait:h}}}function e(a){a.start_time;var b=a.resources,d=a.durations;a=babelHelpers.objectWithoutPropertiesLoose(a,["start_time","resources","durations"]);for(var b=c("objectEntries")(b),e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];for(var g=c("objectEntries")(g),i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=g.length)break;k=g[j++]}else{j=g.next();if(j.done)break;k=j.value}k=k;var l=k[0];k=k[1];for(var k=c("objectEntries")(k),m=Array.isArray(k),n=0,k=m?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=k.length)break;o=k[n++]}else{n=k.next();if(n.done)break;o=n.value}o=o;var p=o[0];o=o[1];a[h+"_"+l+"_resources_"+p]=Math.round(Number(o))}}}for(p=c("objectEntries")(d),o=Array.isArray(p),n=0,p=o?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(o){if(n>=p.length)break;m=p[n++]}else{n=p.next();if(n.done)break;m=n.value}k=m;l=k[0];j=k[1];a[l+"_duration"]=Math.round(Number(j))}if(a.payloadStats){for(i=c("objectEntries")(a.payloadStats),g=Array.isArray(i),h=0,i=g?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(h>=i.length)break;f=i[h++]}else{h=i.next();if(h.done)break;f=h.value}e=f;b=e[0];d=e[1];for(m=c("objectEntries")(d),k=Array.isArray(m),l=0,m=k?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(k){if(l>=m.length)break;j=m[l++]}else{l=m.next();if(l.done)break;j=l.value}n=j;o=n[0];p=n[1];a[b+"_"+o+"_count"]=Math.round(Number(p))}}delete a.payloadStats}return a}g.computeHRData=a;g.computeBLData=b;g.flattenData=e}),98);
__d("BootloaderLoggingStatusEnum",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["SUCCESS","TIMEOUT"]);c=a;f["default"]=c}),66);
__d("CometBootloaderEventsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:CometBootloaderEventsLoggerConfig")}),null);
__d("HasteResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1823926");b=d("FalcoLoggerInternal").create("haste_response",a);e=b;g["default"]=e}),98);
__d("CometBootloaderLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderEventsTypedLoggerLite","CometTimeSpentNavigation","HasteResponseFalcoEvent","ResourceTimingStore","SiteData","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h=!1;function a(a){var b=a.bl_sample_rate,e=a.hr_sample_rate,f=a.parent_lid;if(h||!(b||e))return;h=!0;d("ResourceTimingStore").init();var g=function(a){return{ms_since_navstart:Math.round(a-c("performanceNavigationStart")()),parent_lid:f,pkg_cohort:c("SiteData").pkg_cohort,request_path:(a=c("CometTimeSpentNavigation").getPathInfo())==null?void 0:a.name,svn_rev:c("SiteData").client_revision}};e&&d("BootloaderEvents").onHasteResponse(function(a){return c("HasteResponseFalcoEvent").log(function(){var b=d("BootloaderEventsPerf").computeHRData(a),c=d("BootloaderEventsPerf").flattenData(b);return babelHelpers["extends"]({},c,g(b.start_time))})});var i=function(a,b,e){a=d("BootloaderEventsPerf").computeBLData(a);var f=d("BootloaderEventsPerf").flattenData(a);c("CometBootloaderEventsTypedLoggerLite").log(babelHelpers["extends"]({},f,g(a.start_time),{status:b}),{weight:e})};b&&d("BootloaderEvents").onBootload(function(a){return i(a,"SUCCESS",b)});var j=1;d("BootloaderEvents").onBootloaderCallbackTimeout(function(a){return i(a,"TIMEOUT",j)})}g.initLogging=a}),98);
__d("CometSSREntrypoint",["objectValues","relay-runtime/util/withProvidedVariables"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b,d=c("relay-runtime/util/withProvidedVariables")(a.variables,a.parameters.params.providedVariables);return{actor_id:(b=(b=a.environmentProviderOptions)==null?void 0:b.actorID)!=null?b:null,exclude_from_ssr:(b=(b=a.environmentProviderOptions)==null?void 0:b.excludeFromSSR)!=null?b:!1,graphql_env_override_ref:(b=(b=a.environmentProviderOptions)==null?void 0:b.graphQLEnvOverrideRef)!=null?b:null,id:a.parameters.params.id,name:a.parameters.params.name,num_connections_for_ssr:(a=(b=a.environmentProviderOptions)==null?void 0:b.numConnectionsForSSR)!=null?a:null,variables:d}}function i(a,b){b=a.getPreloadProps(b);var d=b.entryPoints;b=b.queries;b=(b=b)!=null?b:{};var e=c("objectValues")(b).filter(function(a){return a!=null}),f=[a.root.getModuleId()];if(d!=null){b=Object.keys(d);b.forEach(function(a){a=d[a];if(a==null)return;var b=a.entryPoint;a=a.entryPointParams;b=i(b,a);e=e.concat(b.queries);f=f.concat(b.roots)})}return{queries:e,roots:f}}function a(a,b){a=i(a,b);b=a.queries;return b.map(h)}function b(a){a=a.map(function(a){return i(a.entryPoint,a.entryPointParams)});return a.map(function(a){var b=a.queries;a=a.roots;return{quries:b.map(h),roots:a}})}function d(a,b){a=i(a,b);b=a.queries;a=a.roots;return{queries:b.map(h),roots:a}}function e(){throw new Error("This function should not be called. It exists solely for the type-generation")}function f(a,b){var d;a=a.map(function(a){return i(a.entryPoint,a.entryPointParams)});a=a.map(function(a){var b=a.queries;a=a.roots;return{queries:b.map(h),roots:a}});d=c("objectValues")((d=b==null?void 0:b.getDisplayQueries())!=null?d:{}).filter(function(a){return a!=null}).map(h);b=c("objectValues")((b=b==null?void 0:b.getDeferredQueries())!=null?b:{}).filter(function(a){return a!=null}).map(h);return{appshellQueries:{deferred:b,display:d},routeObjects:a}}g.processRootEntryPoint=a;g.processRootEntryPoints=b;g.processRootEntryPointData=d;g.preloadQuery=e;g.processServerEntryPoints=f}),98);
__d("CometRouterSSREntrypoint",["CometSSREntrypoint"],(function(a,b,c,d,e,f){"use strict";a=importNamespace("CometSSREntrypoint").processRootEntryPoint;b=importNamespace("CometSSREntrypoint").processRootEntryPointData;f.processRootEntryPoint=a;f.processRootEntryPointData=b}),66);
__d("CometRelayEF",["Bootloader","BootloaderEvents","ClientConsistencyEventEmitter","CometRouterSSREntrypoint","cometAsyncFetch","gkx","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function j(a){if(!c("gkx")("26332"))return;a=a.filter(function(a){return!i.has(a)});if(a.length===0)return;a.forEach(function(a){d("BootloaderEvents").notifyHasteResponseEFStart("relay_3d",a)});var b=(h||(h=c("performanceAbsoluteNow")))(),e=c("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:a},method:"POST"}).then(function(a){return{fetchPredictionsEnd:(h||(h=c("performanceAbsoluteNow")))(),fetchPredictionsStart:b,payload:a}});a.forEach(function(a){return i.set(a,e)})}function a(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);j(a.map(function(a){a=a.name;return a}))}function k(a){if(!c("gkx")("26332"))return;j(a);var b=(h||(h=c("performanceAbsoluteNow")))();a.forEach(function(a){var e=i.get(a);e&&e!==!0&&c("promiseDone")(e,function(e){var f=e.fetchPredictionsEnd,g=e.fetchPredictionsStart;e=e.payload;if(e!=null&&typeof e==="object"){var h;c("Bootloader").loadPredictedResourceMap(e.predictions[a],{onLog:function(c){return d("BootloaderEvents").notifyHasteResponseEF("relay_3d",a,{fetchPredictionsEnd:f,fetchPredictionsStart:g,fetchRsrcsStart:b,tierOne:c})}},(h=(h=e.consistency)==null?void 0:h.rev)!=null?h:null);e.consistency!=null&&c("ClientConsistencyEventEmitter").emit("newEntry",e.consistency)}});i.set(a,!0)})}function b(a,b){a=d("CometRouterSSREntrypoint").processRootEntryPoint(a,b);b=a.map(function(a){a=a.name;return a});k(b)}e={fetchPredictedResources:b,fetchPredictedResourcesForQueries:k,fetchPredictions:a,fetchPredictionsForQueries:j};g["default"]=e}),98);
__d("CometToast.react",["fbt","ix","BaseToast.react","CometPressable.react","FDSCircleButton.react","FDSText.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useMemo,m={pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",width:"xh8yej3",$$css:!0}};function a(a){var b=a.action,e=a.href,f=a.icon,g=a.impressionLoggingRef,j=a.message,n=a.onDismiss,o=a.supressCloseButton;o=o===void 0?!1:o;var p=a.target,q=a.testid;q=q===void 0?"Toast":q;q=a.truncateText;var r=q===void 0?!0:q,s=babelHelpers.objectWithoutPropertiesLoose(a,["action","href","icon","impressionLoggingRef","message","onDismiss","supressCloseButton","target","testid","truncateText"]),t=l(function(){return e!=null?{target:p,url:e}:void 0},[e,p]);return k.jsx(c("BaseToast.react"),{action:b!=null?{label:b.label,labelRenderer:function(a){return k.jsx(c("FDSText.react"),{color:"blueLink",numberOfLines:1,type:"bodyLink3",children:a})},onPress:b.onPress,testid:b.testid}:void 0,addOnStart:f,closeButton:o!==!0&&k.jsx(c("FDSCircleButton.react"),{icon:d("fbicon")._(i("478231"),12),label:h._(/*BTDS*/"__JHASH__cCrSTii9yXy__JHASH__"),onPress:n,size:24,testid:void 0}),linkWrapper:s.onPress!=null||t!=null?function(a){return k.jsx(c("CometPressable.react"),babelHelpers["extends"]({},s,{expanding:!0,linkProps:t,xstyle:m.pressable,children:a}))}:void 0,message:function(a){a=a.toastMessageId;return k.jsx(c("FDSText.react"),{color:"primary",id:a,numberOfLines:r?4:void 0,type:"body3",children:j})},onDismiss:n,testid:void 0,toastRef:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("ContextualConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a=1e3;b=", ";c={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"};d={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"};e=[];var g=[],h=[],i={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},j=10,k=", ",l={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};f.ANALYTICS_SAMPLE_RATE=a;f.BUCKET_DELIMITER=b;f.CONTEXT_BUCKET_STRATEGY=c;f.CONFIG_TYPE=d;f.EMPTY_RESOLVED_CONTEXTS=e;f.EMPTY_RESOLVED_MONITORS=g;f.EMPTY_RESULT_PARAMS=h;f.ERROR=i;f.JSON_SUB_SAMPLE_RATE=j;f.LIST_DELIMITER=k;f.TYPE=l}),66);
__d("ContextualConfigResolvedContextsUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.bucketIndex;if(e==void 0)break;b.push(e)}return b};b=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.bucketName;if(e===void 0)break;b.push(e)}return b};var g=function(a){return a.name};c=function(a){return a.map(g)};d=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.value;if(e===void 0)break;b.push(e)}return b};f.getBucketIndices=a;f.getBucketNames=b;f.getContextNames=c;f.getContextValues=d}),66);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=["cfg_ver_timestamp","policy_id","version","sample_rate"],i=function(a){return a.join(d("ContextualConfigConstants").LIST_DELIMITER)},j=function(a,b){for(var c=0;c<h.length;c++){var d=h[c];b[d]!=null&&(a[d]=b[d])}b.name&&(a.config_name=b.name)},k=function(a,b){var c=b[0],e=b[1],f=b[2];b=b[3];c!=null&&(a.exception=c.message);a.result=i(e.map(function(a){return a.value}))||"INVALID";a.context=i(d("ContextualConfigResolvedContextsUtils").getContextNames(f));a.context_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(f));a.bucket_name=i(d("ContextualConfigResolvedContextsUtils").getBucketNames(f));a.monitor=i(d("ContextualConfigResolvedContextsUtils").getContextNames(b));a.monitor_value=i(d("ContextualConfigResolvedContextsUtils").getContextValues(b))};function a(a,b,c){var e={sample_rate:d("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};j(e,a);k(e,b);c&&(e.config_contents=JSON.stringify(a));return e}g["default"]=a}),98);
__d("ContextualConfigExposureEvent",["Random"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$2=a,this.$4=d("Random").random()<1/a.sample_rate,this.$3=b,this.$1=c}var b=a.prototype;b.getData=function(){return this.$2};b.log=function(a){var b=this.$2,c=this.$3,d=this.$4;a&&c(b);d&&this.$1(b);return this};b.isSampled=function(){return this.$4};return a}();g["default"]=a}),98);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$2=a,this.$1=b}var b=a.prototype;b.createEvent=function(a){var b=this.$1,d=this.$2;a=new(c("ContextualConfigExposureEvent"))(a,d,b);return a};return a}();function a(a,b){return new h(a,b)}g["default"]=a}),98);
__d("MarauderLogger",["Banzai","CacheStorage","MarauderConfig"],(function(a,b,c,d,e,f){var g="client_event",h="navigation",i=18e4,j="marauder",k="marauder_last_event_time",l="marauder_last_session_id",m={},n=[],o=!1,p=null,q=null,r=null,s=0,t,u,v=!1,w=null;function a(){F().set(k,x())}b("Banzai").subscribe(b("Banzai").SHUTDOWN,a);function x(){t=t||F().get(k)||0;return t}function y(){v||(u=F().get(l),v=!0);var a=Date.now();(!u||a-i>x())&&(u=a.toString(16)+"-"+(~~(Math.random()*16777215)).toString(16),F().set(l,u));return u}function z(){return{user_agent:window.navigator.userAgent,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,density:window.screen.devicePixelRatio||null,platform:window.navigator.platform||null,locale:window.navigator.language||null}}function A(){return{locale:navigator.language}}function B(a,b,c,d,e,f,g){var h=g!=null&&g!=0?g:Date.now();t=g!=null&&g!=0?Date.now():h;g=b!=null&&b!=""?b:p;return{name:a,time:h/1e3,module:g,obj_type:d,obj_id:e,uuid:f,extra:c}}function C(a,b,c){return B("content",null,{flags:b},null,null,a,c)}function D(a){var b=window.__mrdr;if(b)for(var c in b){var d=b[c];if(d[3]!==0){delete b[c];if(c==="1")if(r!==null)c=r;else continue;a.push(C(c,1,d[1]));a.push(C(c,2,d[2]));a.push(C(c,3,d[3]))}}}function E(a,c){D(a);if(a.length===0)return;o&&a.push(B("counters",null,m));var d=b("Banzai").BASIC;c==="vital"&&(d=b("Banzai").VITAL);var e=b("MarauderConfig").gk_enabled;s===0&&e&&(a.push(B("device_status",null,A())),d={delay:5e3});c==="signal"&&(d={signal:!0});e&&Math.random()<.01&&a.push(B("device_info",null,z()));if(r!==null)for(c=0;c<a.length;c++){e=a[c];(e.uuid===null||e.uuid===void 0)&&(e.uuid=r)}e={app_ver:b("MarauderConfig").app_version,data:a,device_id:void 0,log_type:g,seq:s++,session_id:y()};c=F().get("device_id");c&&(e.device_id=c);m={};o=!1;b("Banzai").post(j,e,d)}function F(){w||(w=new(b("CacheStorage"))("localstorage",""));return w}function c(a){m[a]||(m[a]=0),m[a]++,o=!0}function G(b,a,c,d,f,g,h,i){E([B(b,a,c,d,f,g,h)],i)}function H(a,b){p!==b&&(n.push(B(h,p,{dest_module:b,source_url:q,destination_url:a})),p=b,q=a)}function d(a,b){p!==b&&(r=null,H(a,b))}function f(a,b,c){G(b?"show_module":"hide_module",a,c)}function I(a){p=a}function J(){return p}function K(a){r===null&&(r=a,a!==null&&(E(n),n=[]))}e.exports={count:c,log:G,navigateTo:d,navigateWithinSession:H,toggleModule:f,setUUID:K,setNavigationModule:I,getNavigationModule:J}}),null);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){};b=function(a){d("MarauderLogger").log("contextual_config_exposure","",a)};e=c("ContextualConfigExposureLoggerFactory")(a,b);g["default"]=e}),98);
__d("ContextualConfigAssert",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a===!1)throw new Error(b)}f["default"]=a}),66);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return Array.isArray(a)};b=function(a){return typeof a==="boolean"};c=function(a){return a!=null};e=function(a){return function(b){return Object.prototype.hasOwnProperty.call(a,b)}};f=function(a){return i(a)&&a%1===0};var h=function(a){return j(a)&&a.length>0},i=function(a){return typeof a==="number"&&!isNaN(a)&&a!==Infinity&&a!==-Infinity},j=function(a){return typeof a==="string"},k=function(a){switch(a){case d("ContextualConfigConstants").TYPE.BOOL:case d("ContextualConfigConstants").TYPE.FLOAT:case d("ContextualConfigConstants").TYPE.INT:case d("ContextualConfigConstants").TYPE.STRING:return!0;default:return!1}};g.isArray=a;g.isBoolean=b;g.isDefined=c;g.isKey=e;g.isInteger=f;g.isNonEmptyString=h;g.isNumber=i;g.isString=j;g.isType=k}),98);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(d("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}g["default"]=a}),98);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var f=c("ContextualConfigParseBoolean")(a);e=function(a){return a===f};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:e=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:e=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:e=function(a){return!0};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(a){return e(a)}}g["default"]=a}),98);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseFloat(a);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=/^[-\+]?([1-9]\d*|0)$/,j=function(a){return i.test(a)};function a(a){(h||(h=c("ContextualConfigAssert")))(j(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);a=parseInt(a,10);h(d("ContextualConfigValidators").isNumber(a),d("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT);return a}g["default"]=a}),98);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){return(h||(h=c("ContextualConfigAssert")))(a>0,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};b=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)};e=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a<b,d("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)};g.assertHasValues=a;g.assertNumberOfValues=b;g.assertValueOrder=e}),98);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){var g=e.map(f?c("ContextualConfigParseInteger"):h||(h=c("ContextualConfigParseFloat"))),i;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var j=f?c("ContextualConfigParseInteger")(a):(h||(h=c("ContextualConfigParseFloat")))(a);i=function(a){return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===j};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,2);d("ContextualConfigPredAssertions").assertValueOrder(g[0],g[1]);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]&&a<g[1]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a<=g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a===g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a!==g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>g[0]};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:d("ContextualConfigPredAssertions").assertNumberOfValues(g.length,1);i=function(a){if(typeof a!=="number")return!1;return f&&!d("ContextualConfigValidators").isInteger(a)?!1:a>=g[0]};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(a){return i(a)}}g["default"]=a}),98);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=/^\/(.+)\/(.*)$/;function a(a){try{var b=a.match(h);if(b!=null)return new RegExp(b[1],b[2]);else return new RegExp(a)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}g["default"]=a}),98);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){if(typeof a!=="string")throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return a},i=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b.push(h(e))}return b};function a(a,b,e){var f=i(e),g;switch(b){case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:g=function(b){return typeof b!=="string"?!1:b===a};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:g=function(a){return a==null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:g=function(a){return a!=null};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:g=function(a){return!0};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:d("ContextualConfigPredAssertions").assertHasValues(f.length);g=function(a){return typeof a!=="string"?!1:f.indexOf(a)===-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);g=function(a){return typeof a!=="string"?!1:a.indexOf(f[0])!==-1};break;case d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:d("ContextualConfigPredAssertions").assertNumberOfValues(f.length,1);var h=c("ContextualConfigParseRegExp")(f[0]);g=function(a){return typeof a!=="string"?!1:h.test(a)};break;default:throw new Error(d("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(a){return g(a)}}g["default"]=a}),98);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},k=d("ContextualConfigValidators").isKey(d("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a)&&k(a.toUpperCase()),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},n=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},o=function(a,b){var e=b.name;n(e);var f=b.strategy;l(f);b=b.values||[];m(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParsePredBoolean")(e,f);case d("ContextualConfigConstants").TYPE.FLOAT:return c("ContextualConfigParsePredNumeric")(e,f,b,!1);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParsePredNumeric")(e,f,b,!0);case d("ContextualConfigConstants").TYPE.STRING:return c("ContextualConfigParsePredString")(e,f,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},p=function(a,b){i(b);var c=b.name;n(c);return{name:c,pred:o(a,b)}};function a(a,b){j(b);return b.map(function(b){return p(a,b)})}g["default"]=a}),98);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a)&&a.length>0,d("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name,d=a.type;a=a.buckets;k(b);l(d);return{name:b,type:d,buckets:c("ContextualConfigParseContextBuckets")(d,a)}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigIsEqualParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c+=1){var d=a[c],e=b[c];if(d.name!==e.name||d.type!==e.type)return!1}return!0}f["default"]=a}),66);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isString(a),d("ContextualConfigConstants").ERROR.INVALID_STRING)};function a(a,b){j(b);switch(a){case d("ContextualConfigConstants").TYPE.BOOL:return c("ContextualConfigParseBoolean")(b);case d("ContextualConfigConstants").TYPE.FLOAT:return(i||(i=c("ContextualConfigParseFloat")))(b);case d("ContextualConfigConstants").TYPE.INT:return c("ContextualConfigParseInteger")(b);case d("ContextualConfigConstants").TYPE.STRING:return b;default:throw new Error(d("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_RESULTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},m=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},n=function(a,b){for(var a=a,c=Array.isArray(a),e=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(f.name===b)return f.type}throw new Error(d("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},o=function(a){return function(b){k(b);var d=b.name;l(d);var e=n(a,d);m(e);b=(i||(i=c("ContextualConfigParseResultParamValue")))(e,b.value);return{name:d,type:e,value:b}}};function a(a,b){j(b);return b.map(o(a))}g["default"]=a}),98);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b.map(function(b,c){return{name:a[c].name,value:b}}));i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){try{return c("ContextualConfigParseDenseResultParams")(a,b)}catch(a){throw new Error(d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}g["default"]=a}),98);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},m=function(a){i(a);var b=a.name;a=a.type;k(b);l(a);return{name:b,type:a}};function a(a){j(a);return a.map(m)}g["default"]=a}),98);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isType(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(m(a),d("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},m=function(a){var b={};for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(b[e.name])return!1;b[e.name]=!0}return!0},n=function(a){k(a.name);j(a.type);return a};function a(a){i(a);a=a.map(n);l(a);return a}g["default"]=a}),98);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_VECTOR)},k=function(a,b){return(h||(h=c("ContextualConfigAssert")))(a===b,d("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},l=function(a,b){k(a.length,b.length);for(var d=0;d<a.length;d+=1){var e=a[d].type,f=b[d];(i||(i=c("ContextualConfigParseResultParamValue")))(e,f)}},m=function(a){return a.reduce(function(a,b){b=b.buckets;return a*b.length},1)};function a(a,b,c){j(c);b=m(b);var d=a.length;k(b*d,c.length);for(var e=0;e<b;e+=1){var f=e*d;l(a,c.slice(f,f+d))}return c}g["default"]=a}),98);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c];try{if(d.pred(b))return[d.name,c]}catch(a){return null}}return null};function a(a,b,c){var e=null;a=a.map(function(a){var f=a.name,g={name:f};if(e!=null)return g;var i;c[f]!=null?i=c[f]:b[f]!=null?i=b[f]():i=null;g.value=i;if(a.buckets!=null){f=h(a.buckets,i);if(f==null){e=new Error(d("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH);return g}a=f[0];i=f[1];g.bucketName=a;g.bucketIndex=i}return g});return[e,a]}g["default"]=a}),98);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},j=function(a){var b=[],c=1;for(var d=a.length-1;d>=0;d-=1)b.push(c),c*=a[d].buckets.length;return b.reverse()},k=function(a,b,d,e){try{b=b.slice(d,d+a.length);return[null,c("ContextualConfigParseDenseResultParams")(a,b)]}catch(a){return[a,e]}},l=function(a,b,d){try{d=d.reduce(function(b,d,e){(h||(h=c("ContextualConfigAssert")))(e<a.length,"Auxillery index out of range.");return b+a[e]*d},0);return[null,d*b]}catch(a){return[a,-1]}};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);var d=c("ContextualConfigParseContexts")(a.contexts);this.aux=j(d);this.contexts=d;this.defaults=c("ContextualConfigParseDenseDefaults")(b,a.vectorDefaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.outputs=b;this.vector=c("ContextualConfigParseVector")(b,d,a.vector)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.aux,e=this.globalContextProviders,f=this.contexts,g=this.defaults,h=this.monitors,i=this.outputs,j=this.vector;f=c("ContextualConfigResolveContexts")(f,e,a);var m=f[0];f=f[1];if(m!=null)return[m,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=l(b,i.length,d("ContextualConfigResolvedContextsUtils").getBucketIndices(f));b=m[0];m=m[1];if(b!=null)return[b,g,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];b=k(i,j,m,g);i=b[0];j=b[1];if(i!=null)return[i,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS];m=c("ContextualConfigResolveContexts")(h,e,a);g=m[0];b=m[1];return g!=null?[g,j,f,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,j,f,b]};return a}();g["default"]=a}),98);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){i(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.values=c("ContextualConfigParseResultParams")(b,a.values)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.values,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.monitors,f=this.values;e=c("ContextualConfigResolveContexts")(e,b,a);b=e[0];a=e[1];return b!=null?[b,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,f,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,a]};return a}();g["default"]=a}),98);
__d("ContextualConfigMergePartialResultParams",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c={};for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;c[f.name]=f}f=[];for(e=a,d=Array.isArray(e),b=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(b>=e.length)break;a=e[b++]}else{b=e.next();if(b.done)break;a=b.value}a=a;var g=c[a.name];f.push(g!=null&&g.name===a.name&&g.type===a.type?g:a)}return f}f["default"]=a}),66);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b){return(h||(h=c("ContextualConfigAssert")))(c("ContextualConfigIsEqualParams")(a,b),d("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};function a(a,b){b=c("ContextualConfigParseResultParams")(a,b);i(a,b);return b}g["default"]=a}),98);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isNonEmptyString(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},l=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isArray(a),d("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},m=function(a,b){j(b);var d=b.bucket;b=b.values;k(d);l(b);return{bucket:d,values:c("ContextualConfigParseResultParams")(a,b)}};function a(a,b){i(b);return b.reduce(function(b,c){c=m(a,c);b[c.bucket]=c.values;return b},{})}g["default"]=a}),98);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a),d("ContextualConfigConstants").ERROR.BAD_CONFIG)};a=function(){function a(a,b){j(a);this.globalContextProviders=babelHelpers["extends"]({},b);b=c("ContextualConfigParseOutputParams")(a.outputs);this.contexts=c("ContextualConfigParseContexts")(a.contexts);this.defaults=c("ContextualConfigParseDefaults")(b,a.defaults);this.monitors=a.monitors!=null?c("ContextualConfigParseMonitors")(a.monitors):[];this.table=c("ContextualConfigParseTable")(b,a.table)}var b=a.prototype;b.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}};b.unsafeResolve=function(a){var b=this.globalContextProviders,e=this.contexts,f=this.defaults,g=this.monitors,h=this.table;e=c("ContextualConfigResolveContexts")(e,b,a);var j=e[0];e=e[1];if(j!=null)return[j,f,e,[]];j=d("ContextualConfigResolvedContextsUtils").getBucketNames(e).join(d("ContextualConfigConstants").BUCKET_DELIMITER);h=h[j]||i;j=c("ContextualConfigMergePartialResultParams")(f,h);f=c("ContextualConfigResolveContexts")(g,b,a);h=f[0];g=f[1];return h!=null?[h,j,e,[]]:[null,j,e,g]};return a}();g["default"]=a}),98);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[1],j=function(a){return(h||(h=c("ContextualConfigAssert")))(d("ContextualConfigValidators").isDefined(a)&&d("ContextualConfigValidators").isDefined(a.version),d("ContextualConfigConstants").ERROR.BAD_CONFIG)},k=function(a){return(h||(h=c("ContextualConfigAssert")))(i.indexOf(a)!==-1,d("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};function a(a,b){j(a);k(a.version);switch(a.cctype){case d("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(c("DenseContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(c("MultiOutputResolvedContextualConfig"))(a,b);case d("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(c("TableContextualConfig"))(a,b);default:throw new Error(d("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}g["default"]=a}),98);
__d("ContextualConfigWarn",[],(function(a,b,c,d,e,f){"use strict";function a(a){}f["default"]=a}),66);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a.reduce(function(a,b){var c=b.name;b=b.value;a[c]=b;return a},{}),this.$2=a}var b=a.prototype;b.get=function(a,b){try{a=this.$1[a];if(typeof a!==typeof b){c("ContextualConfigWarn")(d("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND);return b}return a}catch(a){c("ContextualConfigWarn")(a.message);return b}};b.getParams=function(){return this.$2};return a}();g["default"]=a}),98);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.error=a}var b=a.prototype;b.resolve=function(a){return[this.error,d("ContextualConfigConstants").EMPTY_RESULT_PARAMS,d("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,d("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]};return a}();g["default"]=a}),98);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random"],(function(a,b,c,d,e,f,g){"use strict";var h=1/d("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,i=1;a=function(){function a(a,b){b===void 0&&(b={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=a,this.$2=b}var b=a.prototype;b.$5=function(){if(this.$1)return this.$1;var a=this.$2,b=this.$4;try{b=c("ContextualConfigParseConfig")(b,a)}catch(a){b=new(c("ErrorContextualConfig"))(a)}this.$1=b;return b};b.$6=function(a){var b=this.isDebugLoggingEnabled,e=this.$4,f=this.$3;f=!f&&d("Random").random()<h;f&&(this.$3=!0);e=c("ContextualConfigCollateExposureData")(e,a,f);a=c("ContextualConfigExposureLogger").createEvent(e);a.log(b)};b.resolve=function(a){a===void 0&&(a={});var b=this.$1||this.$5();b=b.resolve(a);this.$6(b);return new(c("ContextualConfigResult"))(b[i])};return a}();g["default"]=a}),98);
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1755537");b=d("FalcoLoggerInternal").create("dgw_client",a);e=b;g["default"]=e}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h;a="dgw_client";var i=b("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),j={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function k(a){switch(a){case i.GROUPED_STREAM_COMPONENT:case i.ACK_MANAGER_COMPONENT:return!0;default:return!1}}e=function(){function a(a,b,c,d,e,f,g){f===void 0&&(f=!1),g===void 0&&(g=!1),this.$5=""+a,this.$1=b,this.$4=c,this.$3=d,this.$6=e,this.$2=f,this.$7=g}a.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};var b=a.prototype;b.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=this.$4+"."+a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};b.logEvent=function(a,b,c,d,e){d===void 0&&(d=!1),this.$2||this.$8(a,b,null,j.INFO,c,d,e)};b.$8=function(a,b,d,e,f,g,h){var i=this;g===void 0&&(g=!1);if(g&&!this.$7)return;(k(a)&&this.$1!=null||!k(a)&&this.$6!=null)&&c("DgwClientFalcoEvent").log(function(){var c;return{event:b,logging_id:(c=h)!=null?c:i.$1,dgw_version:i.$5,message:d,severity:e,uuid:i.$3,dgw_component:a,extra_info:f,destination_tier:i.$4,sg_transport_id:i.$6,source:2}})};b.logError=function(a,b,c,d,e,f){e===void 0&&(e=!1),this.$2||this.$8(a,b,c,j.ERROR,d,e,f)};b.logWarn=function(a,b,c,d,e){e===void 0&&(e=!1),this.$2||this.$8(a,b,c,j.WARNING,d,e)};return a}();g.DGW_MODULE=a;g.DGWLoggingComponent=i;g.DGWLoggingContext=e}),98);
__d("DGWAckManager",["DGWLoggingContext","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){var b=a.prototype;b.stopTracking=function(a){window.clearTimeout(this.$1),this.$3(a)};function a(a,b,c){var d=this;this.$3=c;this.sendId=a;this.$2=b;this.handleAckReceived=function(){d.stopTracking(!0)};this.$1=window.setTimeout(function(){d.stopTracking(!1)},b)}return a}();a=function(){function a(a){this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitForAck=function(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");e=this.$1;g.prev=2;g.next=5;return b("regeneratorRuntime").awrap(new(h||(h=b("Promise")))(function(b,d){e.set(a,new i(a,c,b))}));case 5:f=g.sent;f===!0?this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+a,!0):(this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+a+" timed out after "+c+"ms"));e["delete"](a);return g.abrupt("return",f);case 11:g.prev=11;g.t0=g["catch"](2);this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error");e["delete"](a);throw g.t0;case 16:case"end":return g.stop()}},null,this,[[2,11]])};c.handleAckReceived=function(a){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var b=this.$1.get(a);if(b===void 0){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked");this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+a+" which was not being tracked");return}b.handleAckReceived()};c.clearPendingAcks=function(){var a=this;this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size);this.$1.forEach(function(b,c,e){a.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+b.sendId,null,!0),b.stopTracking(!1),e["delete"](c)})};return a}();g.DGWAckManager=a}),98);
__d("DGWAuth",["$InternalEnum","err"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",OCULUS:"3:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",HORIZON_WEB:"12:0",SPARK_WEB:"13:0",ABRA:"15:0"});function a(a){if(a==="TEST")return h.TEST;else if(a==="FACEBOOK")return h.FACEBOOK;else if(a==="INTERNALFB")return h.INTERNALFB;else if(a==="OCULUS")return h.OCULUS;else if(a==="ENTERPRISEFB")return h.ENTERPRISEFB;else if(a==="RECRUITINGFB")return h.RECRUITINGFB;else if(a==="INSTAGRAM")return h.INSTAGRAM;else if(a==="HORIZON_WEB")return h.HORIZON_WEB;else if(a==="SPARK_WEB")return h.SPARK_WEB;else if(a==="ABRA")return h.ABRA;else throw c("err")("failed to convert string ("+a+") to DGWAuth Type")}function d(a){if(a===h.FACEBOOK)return"FACEBOOK";else if(a===h.INTERNALFB)return"INTERNALFB";else if(a===h.OCULUS)return"OCULUS";else if(a===h.ENTERPRISEFB)return"ENTERPRISEFB";else if(a===h.RECRUITINGFB)return"RECRUITINGFB";else if(a===h.INSTAGRAM)return"INSTAGRAM";else if(a===h.HORIZON_WEB)return"HORIZON_WEB";else if(a===h.SPARK_WEB)return"SPARK_WEB";else if(a===h.ABRA)return"ABRA";else return"TEST"}g.DGWAuth=h;g.fromStringToDGWAuth=a;g.fromDGWAuthToString=d}),98);
__d("DGWStream",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR"]);function a(a){switch(a){case g.UNAUTHENTICATED:case g.UNAUTHORIZED:case g.REJECTED:case g.BAD_REQUEST:case g.UNKNOWN_ERROR:case g.SERVER_INTERNAL_ERROR:return!1;default:return!0}}f.StreamError=g;f.isRetryableError=a}),66);
__d("DGWCppBridge",[],(function(l,m,n,o,p,q){var r=function(){var l=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(m){m=m||{};var m=typeof m!=="undefined"?m:{},n=function(){function m(){}function n(l,m){return function(){l.apply(m,arguments)}}function l(m){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof m!=="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];t(m,this)}function o(m,n){while(m._state===3)m=m._value;if(m._state===0){m._deferreds.push(n);return}m._handled=!0;l._immediateFn(function(){var l=m._state===1?n.onFulfilled:n.onRejected;if(l===null){(m._state===1?p:q)(n.promise,m._value);return}var o;try{o=l(m._value)}catch(l){q(n.promise,l);return}p(n.promise,o)})}function p(m,o){try{if(o===m)throw new TypeError("A promise cannot be resolved with itself.");if(o&&(typeof o==="object"||typeof o==="function")){var p=o.then;if(o instanceof l){m._state=3;m._value=o;r(m);return}else if(typeof p==="function"){t(n(p,o),m);return}}m._state=1;m._value=o;r(m)}catch(l){q(m,l)}}function q(l,m){l._state=2,l._value=m,r(l)}function r(m){m._state===2&&m._deferreds.length===0&&l._immediateFn(function(){m._handled||l._unhandledRejectionFn(m._value)});for(var n=0,p=m._deferreds.length;n<p;n++)o(m,m._deferreds[n]);m._deferreds=null}function s(l,m,n){this.onFulfilled=typeof l==="function"?l:null,this.onRejected=typeof m==="function"?m:null,this.promise=n}function t(l,m){var n=!1;try{l(function(l){if(n)return;n=!0;p(m,l)},function(l){if(n)return;n=!0;q(m,l)})}catch(l){if(n)return;n=!0;q(m,l)}}l.prototype["catch"]=function(l){return this.then(null,l)};l.prototype.then=function(l,n){var p=new this.constructor(m);o(this,new s(l,n,p));return p};l.all=function(m){return new l(function(l,n){if(!Array.isArray(m))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(m);if(o.length===0)return l([]);var p=o.length;function q(m,r){try{if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(l){q(m,l)},n);return}}o[m]=r;--p===0&&l(o)}catch(l){n(l)}}for(var r=0;r<o.length;r++)q(r,o[r])})};l.resolve=function(m){return m&&typeof m==="object"&&m.constructor===l?m:new l(function(l){l(m)})};l.reject=function(m){return new l(function(l,n){n(m)})};l.race=function(m){return new l(function(n,o){if(!Array.isArray(m))return o(new TypeError("Promise.race accepts an array"));for(var p=0,q=m.length;p<q;p++)l.resolve(m[p]).then(n,o)})};l._immediateFn=typeof setImmediate==="function"&&function(l){setImmediate(l)}||function(l){setTimeout(l,0)};l._unhandledRejectionFn=function(l){typeof console!=="undefined"&&console};return l}(),o,s;m.ready=new n(function(l,m){o=l,s=m});var t={},u;for(u in m)Object.prototype.hasOwnProperty.call(m,u)&&(t[u]=m[u]);var v=[];(function(l,m){throw m});var w=!0,x=!1,y="";function z(l){return m.locateFile?m.locateFile(l,y):y+l}var A;(w||x)&&(x?y=self.location.href:typeof document!=="undefined"&&document.currentScript&&(y=document.currentScript.src),l&&(y=l),y.indexOf("blob:")!==0?y=y.substr(0,y.lastIndexOf("/")+1):y="",(function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.send(null);return m.responseText}catch(n){m=ga(l);if(m)return fa(m);throw n}},x&&(A=function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.responseType="arraybuffer";m.send(null);return new Uint8Array(m.response)}catch(n){m=ga(l);if(m)return m;throw n}}),function(l,m,n){var o=new XMLHttpRequest();o.open("GET",l,!0);o.responseType="arraybuffer";o.onload=function(){if(o.status==200||o.status==0&&o.response){m(o.response);return}var p=ga(l);if(p){m(p.buffer);return}n()};o.onerror=n;o.send(null)}),function(l){document.title=l});m.print||emptyFunction.bind(console);var B=m.printErr||emptyFunction.bind(console);for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&(m[u]=t[u]);t=null;m.arguments&&(v=m.arguments);m.thisProgram&&m.thisProgram;m.quit&&m.quit;var C;m.wasmBinary&&(C=m.wasmBinary);m.noExitRuntime||!0;var D={Memory:function(l){this.buffer=new ArrayBuffer(l.initial*65536)},Module:function(l){},Instance:function(l,m){this.exports=function(l){function m(l){l.set=function(l,m){this[l]=m};l.get=function(l){return this[l]};return l}var n,o=new Uint8Array(123);for(var p=25;p>=0;--p)o[48+p]=52+p,o[65+p]=p,o[97+p]=26+p;o[43]=62;o[47]=63;function q(m,n,p){var q,r,l=0,s=n,t=p.length;n=n+(t*3>>2)-(p[t-2]=="=")-(p[t-1]=="=");for(;l<t;l+=4)q=o[p.charCodeAt(l+1)],r=o[p.charCodeAt(l+2)],m[s++]=o[p.charCodeAt(l)]<<2|q>>4,s<n&&(m[s++]=q<<4|r>>2),s<n&&(m[s++]=r<<6|o[p.charCodeAt(l+3)])}function r(l){q(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),q(n,1372,"gAkQ")}function s(l){var o=l.a,p=o.buffer;o.grow=xa;var q=new Int8Array(p),s=new Int16Array(p),t=new Int32Array(p),u=new Uint8Array(p),v=new Uint16Array(p),w=new Uint32Array(p);new Float32Array(p);new Float64Array(p);var x=Math.imul;Math.fround;Math.abs;var y=Math.clz32;Math.min;Math.max;Math.floor;Math.ceil;Math.trunc;Math.sqrt;l.abort;NaN;Infinity;var z=l.b,A=1051008,B;function C(o,p,l,r,m,n){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;var y=0,z=0,B;y=A-80|0;A=y;t[y+72>>2]=o;t[y+68>>2]=p;t[y+64>>2]=l;t[y+60>>2]=r;t[y+56>>2]=m;t[y+52>>2]=n;a:{if(t[y+52>>2]?!t[y+56>>2]|(!t[y+72>>2]|!t[y+68>>2]|(!t[y+64>>2]|!t[y+60>>2])):1){t[y+76>>2]=5;break a}t[t[y+64>>2]>>2]=0;t[t[y+60>>2]>>2]=0;p=t[y+68>>2];l=t[y+56>>2];r=t[y+52>>2];o=A+-64|0;A=o;t[o+56>>2]=t[y+72>>2];t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=0;t[o+36>>2]=t[o+56>>2];b:{c:{d:{while(1){if(!t[o+52>>2])break c;t[o+32>>2]=t[o+36>>2];q[o+31|0]=u[t[o+36>>2]];t[o+52>>2]=t[o+52>>2]-1;t[o+36>>2]=t[o+36>>2]+1;if(u[o+31|0]!=10?u[o+31|0]==2|u[o+31|0]==4|u[o+31|0]==9:1){t[o+40>>2]=t[o+40>>2]+1;continue}t[o+24>>2]=1;if(V(u[o+31|0])&1){z=o,B=X(u[o+31|0])&1,q[z+23|0]=B;t[o+16>>2]=q[o+23|0]&1?1:2;if(w[o+52>>2]<w[o+16>>2]){t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[o+52>>2]=t[o+52>>2]-t[o+16>>2];t[o+24>>2]=t[o+16>>2]+t[o+24>>2];t[o+36>>2]=t[o+16>>2]+t[o+36>>2];if(!(u[o+31|0]!=14?u[o+31|0]!=8:0)){t[o+40>>2]=t[o+40>>2]+1;continue}}if(w[o+52>>2]<3)break d;t[o+12>>2]=0;p=t[o+36>>2];l=u[p|0]|u[p+1|0]<<8;q[o+12|0]=l;q[o+13|0]=l>>>8;q[o+14|0]=u[p+2|0];t[o+52>>2]=t[o+52>>2]-3;t[o+24>>2]=t[o+24>>2]+3;t[o+36>>2]=t[o+36>>2]+3;if(w[o+12>>2]<=w[o+52>>2]){t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]=t[o+12>>2]+t[o+36>>2];t[o+52>>2]=t[o+52>>2]-t[o+12>>2];continue}break}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+44>>2]>>2]=t[o+52>>2]}t[o+60>>2]=t[o+40>>2];A=o- -64|0;t[y+48>>2]=t[o+60>>2];if(!t[y+48>>2]){t[y+76>>2]=0;break a}z=y,B=D(x(t[y+48>>2],20)),t[z+44>>2]=B;if(!t[y+44>>2]){t[y+76>>2]=3;break a}t[y+40>>2]=t[y+44>>2];t[y+36>>2]=t[y+72>>2];t[y+32>>2]=t[y+68>>2]-t[t[y+52>>2]>>2];t[y+28>>2]=0;while(1){if(w[y+28>>2]<w[y+48>>2]){if(w[y+32>>2]<1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}q[y+27|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;e:{if(!u[y+27|0]|u[y+27|0]==1|(u[y+27|0]==2|u[y+27|0]==3)|(u[y+27|0]==4|u[y+27|0]==9|u[y+27|0]==10))break e;if(V(u[y+27|0])&1)break e;O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=6;break a}o=t[y+40>>2];t[o>>2]=u[y+27|0]&15|t[o>>2]&-16;f:{if(u[y+27|0]!=10?u[y+27|0]==2|u[y+27|0]==4|u[y+27|0]==9:1){o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441;t[y+40>>2]=t[y+40>>2]+20;break f}if(V(u[y+27|0])&1){o=A-48|0;A=o;t[o+40>>2]=t[y+40>>2];t[o+36>>2]=y+36;t[o+32>>2]=y+32;g:{if(!(V(t[t[o+40>>2]>>2]&15)&1)){t[o+44>>2]=1;break g}z=o,B=X(t[t[o+40>>2]>>2]&15)&1,q[z+31|0]=B;t[o+24>>2]=q[o+31|0]&1?1:2;if(w[t[o+32>>2]>>2]<w[o+24>>2]){t[o+44>>2]=1;break g}ba(t[o+40>>2]+4|0,t[t[o+36>>2]>>2],t[o+24>>2]);p=t[o+36>>2];t[p>>2]=t[o+24>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+24>>2];if((t[t[o+40>>2]>>2]&15)==8){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==14){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if(w[t[o+32>>2]>>2]<3){t[o+44>>2]=11;break g}t[o+20>>2]=0;p=t[t[o+36>>2]>>2];l=u[p|0]|u[p+1|0]<<8;q[o+20|0]=l;q[o+21|0]=l>>>8;q[o+22|0]=u[p+2|0];p=t[o+36>>2];t[p>>2]=t[p>>2]+3;p=t[o+32>>2];t[p>>2]=t[p>>2]-3;p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441|(t[o+20>>2]&16777215)<<4;if(w[t[o+32>>2]>>2]<w[o+20>>2]){t[o+44>>2]=11;break g}if((t[t[o+40>>2]>>2]&15)==15){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==5){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}h:{if(!((t[t[o+40>>2]>>2]&15)!=6?(t[t[o+40>>2]>>2]&15)!=7:0)){z=o,B=Q(t[o+36>>2],t[o+32>>2],o+19|0,o+18|0),t[z+12>>2]=B;if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}break h}if(!((t[t[o+40>>2]>>2]&15)!=13?(t[t[o+40>>2]>>2]&15)!=12:0)){l=t[o+32>>2];p=A-32|0;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=o+19;t[p+12>>2]=o+16;s[p+10>>1]=0;i:{if(w[t[p+20>>2]>>2]<2){t[p+28>>2]=1;break i}l=t[t[p+24>>2]>>2];l=u[l|0]|u[l+1|0]<<8;q[p+10|0]=l;q[p+11|0]=l>>>8;l=t[p+24>>2];t[l>>2]=t[l>>2]+2;l=t[p+20>>2];t[l>>2]=t[l>>2]-2;q[t[p+16>>2]]=(v[p+10>>1]&32768)==32768;s[t[p+12>>2]>>1]=v[p+10>>1]&32767;t[p+28>>2]=0}t[o+12>>2]=t[p+28>>2];if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}}}if((t[t[o+40>>2]>>2]&15)==12){p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==7){p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==13){l=t[o+32>>2];r=t[o+20>>2];m=t[o+40>>2]+12|0;n=t[o+40>>2];p=A-32|0;A=p;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=r;t[p+12>>2]=m;t[p+8>>2]=n+16;j:{if(w[p+16>>2]<2){t[p+28>>2]=9;break j}t[t[p+8>>2]>>2]=t[p+16>>2]-2;if(w[t[p+20>>2]>>2]<w[t[p+8>>2]>>2]){t[p+28>>2]=1;break j}l=D(t[t[p+8>>2]>>2]);t[t[p+12>>2]>>2]=l;if(!t[t[p+12>>2]>>2]){t[p+28>>2]=3;break j}ba(t[t[p+12>>2]>>2],t[t[p+24>>2]>>2],t[t[p+8>>2]>>2]);l=t[p+24>>2];t[l>>2]=t[t[p+8>>2]>>2]+t[l>>2];l=t[p+20>>2];t[l>>2]=t[l>>2]-t[t[p+8>>2]>>2];t[p+28>>2]=0}A=p+32|0;t[o+8>>2]=t[p+28>>2];if(t[o+8>>2]){t[o+44>>2]=t[o+8>>2];break g}p=t[o+40>>2];s[p+8>>1]=q[o+19|0]&1|v[p+8>>1]&65534;p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==6){z=o,B=M(t[o+36>>2],t[o+32>>2],t[o+20>>2],t[o+40>>2]+12|0,t[o+40>>2]+16|0),t[z+4>>2]=B;if(t[o+4>>2]){t[o+44>>2]=t[o+4>>2];break g}p=t[o+40>>2];q[p+8|0]=q[o+19|0]&1|u[p+8|0]&254;p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}t[o+44>>2]=1}A=o+48|0;t[y+20>>2]=t[o+44>>2];if(!t[y+20>>2]){t[y+40>>2]=t[y+40>>2]+20;break f}O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+20>>2];break a}t[y+16>>2]=0;if(w[y+32>>2]<3){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}o=t[y+36>>2];p=u[o|0]|u[o+1|0]<<8;q[y+16|0]=p;q[y+17|0]=p>>>8;q[y+18|0]=u[o+2|0];t[y+36>>2]=t[y+36>>2]+3;t[y+32>>2]=t[y+32>>2]-3;if(!(t[y+16>>2]==1|u[y+27|0]!=1)){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=7;break a}o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441|(t[y+16>>2]&16777215)<<4;if(u[y+27|0]==3){if(t[y+16>>2]!=1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=10;break a}q[y+15|0]=0;if(w[y+32>>2]<1){J(t[y+44>>2]);t[y+76>>2]=1;break a}q[y+15|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;k:{if(u[y+15|0]<=4){q[t[y+40>>2]+4|0]=u[y+15|0];break k}q[t[y+40>>2]+4|0]=4}t[y+40>>2]=t[y+40>>2]+20;break f}z=y,B=Q(y+36|0,y+32|0,y+14|0,y+13|0),t[z+8>>2]=B;if(t[y+8>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+8>>2];break a}if(u[y+27|0]==1){o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20;break f}if(!u[y+27|0]){z=y,B=M(y+36|0,y+32|0,t[y+16>>2],t[y+40>>2]+8|0,t[y+40>>2]+12|0),t[z+4>>2]=B;if(t[y+4>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+4>>2];break a}o=t[y+40>>2];q[o+4|0]=q[y+14|0]&1|u[o+4|0]&254;o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20}}t[y+28>>2]=t[y+28>>2]+1;continue}break}if(t[y+32>>2]){O(t[y+44>>2],t[y+48>>2]);t[y+76>>2]=1;break a}t[t[y+64>>2]>>2]=t[y+44>>2];t[t[y+60>>2]>>2]=t[y+48>>2];t[y+76>>2]=0}A=y+80|0;return t[y+76>>2]}function D(o){var q=0,l=0,r=0,m=0,n=0,s=0,u=0,v,w=0,x,p;w=8;a:{b:{if(o>>>0>4294967239)break b;while(1){w=w>>>0>8?w:8;l=t[603];n=l;m=t[602];u=m;o=o>>>0>8?o+3&-4:8;c:{if(o>>>0<=127){s=(o>>>3|0)-1|0;break c}r=y(o);s=((o>>>29-r^4)-(r<<2)|0)+110|0;if(o>>>0<=4095)break c;r=((o>>>30-r^2)-(r<<1)|0)+71|0;s=r>>>0<63?r:63}q=s;r=q&31;(q&63)>>>0>=32?(q=0,l=l>>>r|0):(q=l>>>r|0,l=((1<<r)-1&l)<<32-r|u>>>r);r=q;if(l|q){while(1){n=l;q=r;d:{if(q|l){m=q-1|0;v=m+1|0;u=m;m=l-1|0;u=(m|0)!=-1?v:u;m=y(l^m)+32|0;l=y(q^u);l=(l|0)==32?m:l;q=63-l|0;0-(l>>>0>63)|0;break d}q=64}m=q;q=m;l=q&31;(q&63)>>>0>=32?(q=0,u=r>>>l|0):(q=r>>>l|0,u=((1<<l)-1&r)<<32-l|n>>>l);r=q;s=m+s|0;n=s<<4;q=t[n+1384>>2];m=n+1376|0;e:{if((q|0)!=(m|0)){l=I(q,w,o);if(l)break b;l=t[q+4>>2];t[l+8>>2]=t[q+8>>2];t[t[q+8>>2]+4>>2]=l;t[q+8>>2]=m;l=n+1380|0;t[q+4>>2]=t[l>>2];t[l>>2]=q;t[t[q+4>>2]+8>>2]=q;s=s+1|0;l=(r&1)<<31|u>>>1;r=r>>>1|0;break e}x=t[603];q=s;v=q&63;l=v;n=l&31;l>>>0>=32?(l=0,m=-1>>>n|0):(l=-1>>>n|0,m=(1<<n)-1<<32-n|-1>>>n);m=m&-2;n=v&31;v>>>0>=32?(l=m<<n,v=0):(l=(1<<n)-1&m>>>32-n|l<<n,v=m<<n);n=l;m=0-q&63;l=m;q=l&31;l>>>0>=32?(l=-1<<q,q=0):(l=(1<<q)-1&-1>>>32-q|-1<<q,q=-1<<q);p=q&-2;q=m&31;m>>>0>=32?(m=0,q=l>>>q|0):(m=l>>>q|0,q=((1<<q)-1&l)<<32-q|p>>>q);l=q|v;B=n|m;t[602]=t[602]&l;t[603]=B&x;l=u^1}if(l|r)continue;break}m=t[602];n=t[603]}f:{if(n|m){r=y(n);r=63-((r|0)==32?y(m)+32|0:r)<<4;q=r+1376|0;r=t[r+1384>>2];g:{if(!n&m>>>0<1073741824)break g;s=98;if((q|0)==(r|0))break g;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if(!s)break g;s=s-1|0;if((q|0)!=(r|0))continue;break}}if(G(o+48|0))break f;if(!r|(q|0)==(r|0))break a;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if((q|0)!=(r|0))continue;break}break a}if(!G(o+48|0))break a}l=0;if(o>>>0>4294967239)break b;r=w;q=0;while(1){s=q;if(r){r=r-1&r;q=q+1|0;continue}break}if(s>>>0<=1)continue;break}}return l}return 0}function E(o,p,l,r,m,n,x){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;x=x|0;var y=0,z=0;y=A-32|0;A=y;s[y+26>>1]=o;t[y+20>>2]=p;t[y+16>>2]=l;q[y+15|0]=r;s[y+12>>1]=m;t[y+8>>2]=n;t[y+4>>2]=x;a:{if(!(!(q[y+15|0]&1)|v[y+12>>1]<=32767)){t[y+28>>2]=4;break a}p=t[y+20>>2];l=t[y+16>>2];r=t[y+8>>2];m=t[y+4>>2];n=q[y+15|0]&1;o=A+-64|0;A=o;t[o+56>>2]=y+26;t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=m;q[o+39|0]=2;q[o+38|0]=13;t[o+32>>2]=y+12;q[o+31|0]=n;q[o+30|0]=2;b:{c:{if(!(!t[o+52>>2]|(!t[o+44>>2]|!t[o+40>>2]))&&w[o+48>>2]<=16777215)break c;t[o+60>>2]=5;break b}t[o+24>>2]=t[o+48>>2]+(u[o+39|0]+(u[o+30|0]+4|0)|0);z=o,x=D(t[o+24>>2]),t[z+20>>2]=x;if(!t[o+20>>2]){t[o+60>>2]=3;break b}t[o+16>>2]=t[o+20>>2];q[t[o+16>>2]]=u[o+38|0];t[o+16>>2]=t[o+16>>2]+1;ba(t[o+16>>2],t[o+56>>2],u[o+30|0]);t[o+16>>2]=u[o+30|0]+t[o+16>>2];t[o+12>>2]=u[o+39|0]+t[o+48>>2];if(w[o+12>>2]<w[o+48>>2]){J(t[o+20>>2]);t[o+60>>2]=9;break b}p=t[o+16>>2];l=u[o+12|0]|u[o+13|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+14|0];t[o+16>>2]=t[o+16>>2]+3;if(q[o+31|0]&1)d:{if(u[o+38|0]==6){p=t[o+32>>2];q[p|0]=u[p|0]|128;break d}e:{if(u[o+38|0]==13){p=t[o+32>>2];s[p>>1]=v[p>>1]|32768;break e}J(t[o+20>>2]);t[o+60>>2]=1;break b}}ba(t[o+16>>2],t[o+32>>2],u[o+39|0]);t[o+16>>2]=u[o+39|0]+t[o+16>>2];ba(t[o+16>>2],t[o+52>>2],t[o+48>>2]);t[t[o+44>>2]>>2]=t[o+20>>2];t[t[o+40>>2]>>2]=t[o+24>>2];t[o+60>>2]=0}A=o- -64|0;t[y+28>>2]=t[o+60>>2]}A=y+32|0;return t[y+28>>2]}function F(o,p,l,r,m){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;var n=0,v=0;n=A-32|0;A=n;s[n+30>>1]=o;t[n+24>>2]=p;t[n+20>>2]=l;t[n+16>>2]=r;t[n+12>>2]=m;p=t[n+24>>2];l=t[n+20>>2];r=t[n+16>>2];m=t[n+12>>2];o=A-48|0;A=o;t[o+40>>2]=n+30;t[o+36>>2]=p;t[o+32>>2]=l;t[o+28>>2]=r;t[o+24>>2]=m;q[o+23|0]=2;q[o+22|0]=15;a:{if(!(t[o+24>>2]?t[o+28>>2]:0)){t[o+44>>2]=5;break a}t[t[o+28>>2]>>2]=0;t[t[o+24>>2]>>2]=0;if(!(w[o+32>>2]<=16777215?t[o+36>>2]:0)){t[o+44>>2]=5;break a}t[o+16>>2]=t[o+32>>2]+(u[o+23|0]+4|0);v=o,r=D(t[o+16>>2]),t[v+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break a}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+22|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];p=t[o+8>>2];l=u[o+32|0]|u[o+33|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+34|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+36>>2],t[o+32>>2]);t[o+8>>2]=t[o+32>>2]+t[o+8>>2];t[t[o+28>>2]>>2]=t[o+12>>2];t[t[o+24>>2]>>2]=t[o+16>>2];t[o+44>>2]=0}A=o+48|0;A=n+32|0;return t[o+44>>2]}function G(o){var p=0,l,r=0,m=0,n,s=0;r=t[343];l=o+3&-4;p=r+l|0;a:{b:{if(p>>>0<=r>>>0?l:0)break b;if(p>>>0>wa()<<16>>>0&&!(z(p|0)|0))break b;t[343]=p;break a}t[604]=48;r=-1}if((r|0)!=-1){l=o+r|0;p=l-16|0;t[p+12>>2]=16;t[p>>2]=16;o=t[600];o?s=t[o+8>>2]:s=0;c:{d:{if((s|0)==(r|0)){m=r-(t[r-4>>2]&-2)|0;n=t[m-4>>2];t[o+8>>2]=l;o=m-(n&-2)|0;l=-16;if(!(q[(o+t[o>>2]|0)-4|0]&1))break d;l=t[o+4>>2];t[l+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=l;p=p-o|0;t[o>>2]=p;break c}t[r+12>>2]=16;t[r>>2]=16;t[r+8>>2]=l;t[r+4>>2]=o;t[600]=r;l=16}o=r+l|0;p=p-o|0;t[o>>2]=p}t[((p&-4)+o|0)-4>>2]=p|1;s=o;m=t[o>>2]-8|0;e:{if(m>>>0<=127){p=(m>>>3|0)-1|0;break e}n=y(m);p=((m>>>29-n^4)-(n<<2)|0)+110|0;if(m>>>0<=4095)break e;p=((m>>>30-n^2)-(n<<1)|0)+71|0;p=p>>>0<63?p:63}l=p<<4;t[s+4>>2]=l+1376;l=l+1384|0;t[o+8>>2]=t[l>>2];t[l>>2]=o;t[t[o+8>>2]+4>>2]=o;l=t[603];o=p&31;(p&63)>>>0>=32?(p=1<<o,o=0):(p=(1<<o)-1&1>>>32-o,o=1<<o);t[602]=o|t[602];t[603]=p|l}return(r|0)!=-1}function la(o,p,l,r){o=o|0;p=p|0;l=l|0;r=r|0;var m=0,n=0;m=A-16|0;A=m;s[m+10>>1]=o;s[m+8>>1]=p;t[m+4>>2]=l;t[m>>2]=r;a:{if(v[m+8>>1]>32767){t[m+12>>2]=4;break a}p=t[m+4>>2];l=t[m>>2];o=A-48|0;A=o;t[o+40>>2]=m+10;t[o+36>>2]=p;t[o+32>>2]=l;q[o+31|0]=2;q[o+30|0]=12;t[o+24>>2]=m+8;q[o+23|0]=2;b:{if(!(t[o+32>>2]?t[o+36>>2]:0)){t[o+44>>2]=5;break b}t[o+16>>2]=u[o+31|0]+(u[o+23|0]+4|0);n=o,r=D(t[o+16>>2]),t[n+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break b}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+30|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];t[o+4>>2]=u[o+31|0];p=t[o+8>>2];l=u[o+4|0]|u[o+5|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+6|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+24>>2],u[o+31|0]);t[t[o+32>>2]>>2]=t[o+16>>2];t[t[o+36>>2]>>2]=t[o+12>>2];t[o+44>>2]=0}A=o+48|0;t[m+12>>2]=t[o+44>>2]}A=m+16|0;return t[m+12>>2]}function H(o,p,l){o=o|0;p=p|0;l=l|0;var q=0,m=0,n=0,r=0,s=0;n=A+-64|0;A=n;m=1;a:{if(R(o,p,0))break a;m=0;if(!p)break a;q=A+-64|0;A=q;m=t[p>>2];r=t[m-4>>2];s=t[m-8>>2];t[q+20>>2]=0;t[q+16>>2]=1084;t[q+12>>2]=p;t[q+8>>2]=1132;m=0;ca(q+24|0,39);p=p+s|0;b:{if(R(r,1132,0)){t[q+56>>2]=1;ka[t[t[r>>2]+20>>2]](r,q+8|0,p,p,1,0);m=t[q+32>>2]==1?p:0;break b}ka[t[t[r>>2]+24>>2]](r,q+8|0,p,1,0);c:switch(t[q+44>>2]){case 0:m=t[q+48>>2]==1?t[q+36>>2]==1?t[q+40>>2]==1?t[q+28>>2]:0:0:0;break b;case 1:break c;default:break b}if(t[q+48>>2]|t[q+36>>2]!=1|t[q+40>>2]!=1?t[q+32>>2]!=1:0)break b;m=t[q+24>>2]}A=q- -64|0;p=m;m=0;if(!p)break a;ca(n+8|4,52);t[n+56>>2]=1;t[n+20>>2]=-1;t[n+16>>2]=o;t[n+8>>2]=p;ka[t[t[p>>2]+28>>2]](p,n+8|0,t[l>>2],1);o=t[n+32>>2];(o|0)==1&&(t[l>>2]=t[n+24>>2]);m=(o|0)==1}o=m;A=n- -64|0;return o|0}function I(o,p,l){var q=0,m,n=0,r=0;q=o+4|0;m=(q+p|0)-1&0-p;p=t[o>>2];if(m+l>>>0<=(p+o|0)-4>>>0){n=t[o+4>>2];t[n+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=n;(q|0)!=(m|0)&&(m=m-q|0,n=o-(t[o-4>>2]&-2)|0,q=m+t[n>>2]|0,t[n>>2]=q,t[(n+(q&-4)|0)-4>>2]=q,o=o+m|0,p=p-m|0,t[o>>2]=p);a:{if(l+24>>>0<=p>>>0){q=(o+l|0)+8|0;p=(p-l|0)-8|0;t[q>>2]=p;t[(q+(p&-4)|0)-4>>2]=p|1;r=q;n=t[q>>2]-8|0;b:{if(n>>>0<=127){m=(n>>>3|0)-1|0;break b}p=y(n);m=((n>>>29-p^4)-(p<<2)|0)+110|0;if(n>>>0<=4095)break b;p=((n>>>30-p^2)-(p<<1)|0)+71|0;m=p>>>0<63?p:63}p=m;m=p<<4;t[r+4>>2]=m+1376;m=m+1384|0;t[q+8>>2]=t[m>>2];t[m>>2]=q;t[t[q+8>>2]+4>>2]=q;m=t[603];q=p&31;(p&63)>>>0>=32?(p=1<<q,r=0):(p=(1<<q)-1&1>>>32-q,r=1<<q);t[602]=r|t[602];t[603]=p|m;p=l+8|0;t[o>>2]=p;t[((p&-4)+o|0)-4>>2]=p;break a}t[(o+p|0)-4>>2]=p}o=o+4|0}else o=0;return o}function J(o){var p=0,l,q=0,m,n=0;if(o){l=o-4|0;m=t[l>>2];q=m;p=l;n=t[o-8>>2];o=n&-2;(o|0)!=(n|0)&&(p=l-o|0,q=t[p+4>>2],t[q+8>>2]=t[p+8>>2],t[t[p+8>>2]+4>>2]=q,q=o+m|0);o=l+m|0;l=t[o>>2];(l|0)!=t[(o+l|0)-4>>2]&&(m=t[o+4>>2],t[m+8>>2]=t[o+8>>2],t[t[o+8>>2]+4>>2]=m,q=q+l|0);t[p>>2]=q;t[((q&-4)+p|0)-4>>2]=q|1;n=p;q=t[p>>2]-8|0;a:{if(q>>>0<=127){o=(q>>>3|0)-1|0;break a}m=y(q);o=((q>>>29-m^4)-(m<<2)|0)+110|0;if(q>>>0<=4095)break a;o=((q>>>30-m^2)-(m<<1)|0)+71|0;o=o>>>0<63?o:63}l=o<<4;t[n+4>>2]=l+1376;l=l+1384|0;t[p+8>>2]=t[l>>2];t[l>>2]=p;t[t[p+8>>2]+4>>2]=p;l=t[603];p=o&31;(o&63)>>>0>=32?(o=1<<p,p=0):(o=(1<<p)-1&1>>>32-p,p=1<<p);t[602]=p|t[602];t[603]=o|l}}function K(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-48|0;A=p;t[p+40>>2]=n;t[p+36>>2]=o;t[p+32>>2]=l;a:{if(!(t[p+32>>2]?t[p+36>>2]:0)){t[p+44>>2]=5;break a}if(w[p+40>>2]>4){t[p+44>>2]=8;break a}t[p+28>>2]=5;m=p,l=D(t[p+28>>2]),t[m+24>>2]=l;if(!t[p+24>>2]){t[p+44>>2]=3;break a}t[p+20>>2]=t[p+24>>2];q[p+19|0]=3;q[t[p+20>>2]]=u[p+19|0];t[p+20>>2]=t[p+20>>2]+1;t[p+12>>2]=1;n=t[p+20>>2];o=u[p+12|0]|u[p+13|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;q[n+2|0]=u[p+14|0];t[p+20>>2]=t[p+20>>2]+3;q[p+11|0]=t[p+40>>2];q[t[p+20>>2]]=u[p+11|0];t[t[p+36>>2]>>2]=t[p+24>>2];t[t[p+32>>2]>>2]=t[p+28>>2];t[p+44>>2]=0}A=p+48|0;return t[p+44>>2]}function L(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(R(n,t[o>>2],m)){if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+32>>2]=p;b:{if(t[o+44>>2]==4)break b;s[o+52>>1]=0;n=t[n+8>>2];ka[t[t[n>>2]+20>>2]](n,o,l,l,1,m);if(u[o+53|0]){t[o+44>>2]=3;if(!u[o+52|0])break b;break a}t[o+44>>2]=4}t[o+20>>2]=l;t[o+40>>2]=t[o+40>>2]+1;if(t[o+36>>2]!=1|t[o+24>>2]!=2)break a;q[o+54|0]=1;return}n=t[n+8>>2];ka[t[t[n>>2]+24>>2]](n,o,l,p,m)}}function M(o,p,l,q,m){var n=0;n=A-32|0;A=n;t[n+24>>2]=o;t[n+20>>2]=p;t[n+16>>2]=l;t[n+12>>2]=q;t[n+8>>2]=m;a:{if(w[n+16>>2]<1){t[n+28>>2]=9;break a}t[t[n+8>>2]>>2]=t[n+16>>2]-1;if(w[t[n+20>>2]>>2]<w[t[n+8>>2]>>2]){t[n+28>>2]=1;break a}o=D(t[t[n+8>>2]>>2]);t[t[n+12>>2]>>2]=o;if(!t[t[n+12>>2]>>2]){t[n+28>>2]=3;break a}ba(t[t[n+12>>2]>>2],t[t[n+24>>2]>>2],t[t[n+8>>2]>>2]);o=t[n+24>>2];t[o>>2]=t[t[n+8>>2]>>2]+t[o>>2];o=t[n+20>>2];t[o>>2]=t[o>>2]-t[t[n+8>>2]>>2];t[n+28>>2]=0}A=n+32|0;return t[n+28>>2]}function N(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-32|0;A=p;s[p+26>>1]=n;t[p+20>>2]=o;t[p+16>>2]=l;t[t[p+16>>2]>>2]=3;m=p,l=D(t[t[p+16>>2]>>2]),t[m+12>>2]=l;a:{if(!t[p+12>>2]){t[p+28>>2]=3;break a}t[t[p+20>>2]>>2]=t[p+12>>2];q[p+11|0]=14;q[t[p+12>>2]]=u[p+11|0];t[p+12>>2]=t[p+12>>2]+1;n=t[p+12>>2];o=u[p+26|0]|u[p+27|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;t[p+28>>2]=0}A=p+32|0;return t[p+28>>2]}function O(m,n){var l=0;l=A-16|0;A=l;t[l+12>>2]=m;t[l+8>>2]=n;t[l+4>>2]=0;while(1){if(w[l+4>>2]<w[l+8>>2]){t[l>>2]=t[l+12>>2]+x(t[l+4>>2],20);a:{if(!(t[t[l>>2]>>2]&15)){J(t[t[l>>2]+8>>2]);break a}b:{if((t[t[l>>2]>>2]&15)==5){J(t[t[l>>2]+8>>2]);break b}(t[t[l>>2]>>2]&15)==6&&J(t[t[l>>2]+12>>2])}}t[l+4>>2]=t[l+4>>2]+1;continue}break}J(t[l+12>>2]);A=l+16|0}function P(m,n,l,o){q[m+53|0]=1;a:{if(t[m+4>>2]!=(l|0))break a;q[m+52|0]=1;l=t[m+16>>2];if(!l){t[m+36>>2]=1;t[m+24>>2]=o;t[m+16>>2]=n;if((o|0)!=1|t[m+48>>2]!=1)break a;q[m+54|0]=1;return}if((n|0)==(l|0)){l=t[m+24>>2];(l|0)==2&&(t[m+24>>2]=o,l=o);if(t[m+48>>2]!=1|(l|0)!=1)break a;q[m+54|0]=1;return}q[m+54|0]=1;t[m+36>>2]=t[m+36>>2]+1}}function Q(n,o,l,p){var m;m=A-32|0;t[m+24>>2]=n;t[m+20>>2]=o;t[m+16>>2]=l;t[m+12>>2]=p;q[m+11|0]=0;a:{if(w[t[m+20>>2]>>2]<1){t[m+28>>2]=1;break a}q[m+11|0]=u[t[t[m+24>>2]>>2]];n=t[m+24>>2];t[n>>2]=t[n>>2]+1;n=t[m+20>>2];t[n>>2]=t[n>>2]-1;q[t[m+16>>2]]=(u[m+11|0]&128)==128;q[t[m+12>>2]]=u[m+11|0]&127;t[m+28>>2]=0}return t[m+28>>2]}function ma(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(!R(n,t[o>>2],m))break a;if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+20>>2]=l;t[o+32>>2]=p;t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]!=1|t[o+24>>2]!=2||(q[o+54|0]=1);t[o+44>>2]=4}}function R(m,n,l){var o;if(!l)return t[m+4>>2]==t[n+4>>2];if((m|0)==(n|0))return 1;l=t[m+4>>2];m=u[l|0];n=t[n+4>>2];o=u[n|0];a:{if(!m|(o|0)!=(m|0))break a;while(1){o=u[n+1|0];m=u[l+1|0];if(!m)break a;n=n+1|0;l=l+1|0;if((m|0)==(o|0))continue;break}}return(m|0)==(o|0)}function na(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=9;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function S(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=10;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function T(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=2;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function U(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=4;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function V(l){var m=0;m=A-16|0;A=m;t[m+12>>2]=l;l=1;a:{if(X(t[m+12>>2])&1)break a;l=1;if(t[m+12>>2]==15)break a;l=1;if(t[m+12>>2]==13)break a;l=1;if(t[m+12>>2]==12)break a;l=t[m+12>>2]==14}A=m+16|0;return l}function W(m,n,l){var o;o=t[m+16>>2];if(!o){t[m+36>>2]=1;t[m+24>>2]=l;t[m+16>>2]=n;return}a:{if((n|0)==(o|0)){if(t[m+24>>2]!=2)break a;t[m+24>>2]=l;return}q[m+54|0]=1;t[m+24>>2]=2;t[m+36>>2]=t[m+36>>2]+1}}function X(l){var m;m=A-16|0;t[m+12>>2]=l;l=1;a:{if(t[m+12>>2]==5)break a;l=1;if(t[m+12>>2]==6)break a;l=1;if(t[m+12>>2]==7)break a;l=t[m+12>>2]==8}return l}function Y(o,p,l,q,m,n){o=o|0;p=p|0;l=l|0;q=q|0;m=m|0;n=n|0;if(R(o,t[p+8>>2],n)){P(p,l,q,m);return}o=t[o+8>>2];ka[t[t[o>>2]+20>>2]](o,p,l,q,m,n)}function Z(){var m=0,n,l;while(1){n=m<<4;l=n+1376|0;t[n+1380>>2]=l;t[n+1384>>2]=l;m=m+1|0;if((m|0)!=64)continue;break}G(48)}function $(m,n,l,o){m=m|0;n=n|0;l=l|0;o=o|0;if(R(m,t[n+8>>2],0)){W(n,l,o);return}m=t[m+8>>2];ka[t[t[m>>2]+28>>2]](m,n,l,o)}function aa(o,p,l,q,m,n){o=o|0,p=p|0,l=l|0,q=q|0,m=m|0,n=n|0,R(o,t[p+8>>2],n)&&P(p,l,q,m)}function ba(m,n,l){if(l)while(1){q[m|0]=u[n|0];m=m+1|0;n=n+1|0;l=l-1|0;if(l)continue;break}}function ca(l,m){if(m)while(1){q[l|0]=0;l=l+1|0;m=m-1|0;if(m)continue;break}}function oa(m,n,l,o){m=m|0,n=n|0,l=l|0,o=o|0,R(m,t[n+8>>2],0)&&W(n,l,o)}function da(m,n,l){t[m+28>>2]==1|t[m+4>>2]!=(n|0)||(t[m+28>>2]=l)}function pa(l,m){l=l|0;m=m|0;return x(m,20)+l|0}function ea(l){l=l|0;return v[l+8>>1]>>>1|0}function qa(l){l=l|0;return s[l+8>>1]&1}function fa(l){l=l|0;return t[l+12>>2]}function ra(l){l=l|0;return t[l>>2]&15}function sa(l){l=l|0;return t[l+16>>2]}function ga(l){l=l|0;return v[l+4>>1]}function ha(l){l=l|0;return t[l+8>>2]}function ia(l){l=l|0;return u[l+4|0]}function ja(l){l=l|0;return l|0}function ta(l){return D(l)}function ua(l){l=l|0,J(l)}function va(l){l|0}n=u;r(l);var ka=m([null,ja,ua,va,va,H,aa,ma,oa,ua,Y,L,$]);function wa(){return p.byteLength/65536|0}function xa(l){l=l|0;var m=wa()|0;l=m+l|0;if(m<l&&l<65536){l=new ArrayBuffer(x(l,65536));var r=new Int8Array(l);r.set(q);q=new Int8Array(l);s=new Int16Array(l);t=new Int32Array(l);u=new Uint8Array(l);v=new Uint16Array(l);w=new Uint32Array(l);new Float32Array(l);new Float64Array(l);p=l;o.buffer=p;n=u}return m}return{c:Z,d:ta,e:ua,f:T,g:U,h:K,i:F,j:N,k:E,l:la,m:na,n:S,o:C,p:ra,q:ia,r:pa,s:ga,t:ha,u:fa,v:fa,w:sa,x:ea,y:qa,z:ea,A:ka}}return s(l)}(ha)},instantiate:function(l,m){return{then:function(n){var m=new D.Module(l);n({instance:new D.Instance(m)})}}},RuntimeError:Error};C=[];typeof D!=="object"&&Y("no native wasm support detected");var E,F=!1;function G(l,m){l||Y("Assertion failed: "+m)}function la(l,m){l%m>0&&(l+=m-l%m);return l}var H,I;function J(l){H=l,m.HEAP8=new Int8Array(l),m.HEAP16=new Int16Array(l),m.HEAP32=new Int32Array(l),m.HEAPU8=I=new Uint8Array(l),m.HEAPU16=new Uint16Array(l),m.HEAPU32=new Uint32Array(l),m.HEAPF32=new Float32Array(l),m.HEAPF64=new Float64Array(l)}u=m.INITIAL_MEMORY||2097152;m.wasmMemory?E=m.wasmMemory:E=new D.Memory({initial:u/65536,maximum:2147483648/65536});E&&(H=E.buffer);H.byteLength;J(H);var K,L=[],M=[],N=[];function O(){if(m.preRun){typeof m.preRun=="function"&&(m.preRun=[m.preRun]);while(m.preRun.length)ma(m.preRun.shift())}da(L)}function P(){da(M)}function Q(){if(m.postRun){typeof m.postRun=="function"&&(m.postRun=[m.postRun]);while(m.postRun.length)na(m.postRun.shift())}da(N)}function ma(l){L.unshift(l)}function R(l){M.unshift(l)}function na(l){N.unshift(l)}(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(l,m){var n=l>>>16;l=l&65535;var o=m>>>16;m=m&65535;return l*m+(n*m+l*o<<16)|0});if(!Math.fround){var S=new Float32Array(1);Math.fround=function(l){S[0]=l;return S[0]}}Math.clz32||(Math.clz32=function(l){var m=32,n=l>>16;n&&(m-=16,l=n);n=l>>8;n&&(m-=8,l=n);n=l>>4;n&&(m-=4,l=n);n=l>>2;n&&(m-=2,l=n);n=l>>1;return n?m-2:m-l});Math.trunc||(Math.trunc=function(l){return l<0?Math.ceil(l):Math.floor(l)});var T=0,U=null,V=null;function W(l){T++,m.monitorRunDependencies&&m.monitorRunDependencies(T)}function X(l){T--;m.monitorRunDependencies&&m.monitorRunDependencies(T);if(T==0){U!==null&&(clearInterval(U),U=null);if(V){l=V;V=null;l()}}}m.preloadedImages={};m.preloadedAudios={};function Y(l){m.onAbort&&m.onAbort(l);l+="";B(l);F=!0;l="abort("+l+"). Build with -s ASSERTIONS=1 for more info.";l=new D.RuntimeError(l);s(l);throw l}var Z="data:application/octet-stream;base64,";function $(l){return l.startsWith(Z)}var aa="dgwcppbridge.wasm";$(aa)||(aa=z(aa));function ba(l){try{if(l==aa&&C)return new Uint8Array(C);var m=ga(l);if(m)return m;if(A)return A(l);else throw"both async and sync fetching of the wasm failed"}catch(l){Y(l)}}function ca(){return!C&&(w||x)&&typeof fetch==="function"?fetch(aa,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+aa+"'";return l.arrayBuffer()})["catch"](function(){return ba(aa)}):n.resolve().then(function(){return ba(aa)})}function oa(){var n={a:ha};function o(n,l){l=n.exports;m.asm=l;K=m.asm.A;R(m.asm.c);X("wasm-instantiate")}W("wasm-instantiate");function r(l){o(l.instance)}function t(l){return ca().then(function(l){l=D.instantiate(l,n);return l}).then(l,function(l){B("failed to asynchronously prepare wasm: "+l),Y(l)})}function u(){if(!C&&typeof D.instantiateStreaming==="function"&&!$(aa)&&typeof fetch==="function")return fetch(aa,{credentials:"same-origin"}).then(function(l){l=D.instantiateStreaming(l,n);return l.then(r,function(l){B("wasm streaming compile failed: "+l);B("falling back to ArrayBuffer instantiation");return t(r)})});else return t(r)}if(m.instantiateWasm)try{var l=m.instantiateWasm(n,o);return l}catch(l){B("Module.instantiateWasm callback failed with error: "+l);return!1}u()["catch"](s);return{}}function da(l){while(l.length>0){var n=l.shift();if(typeof n=="function"){n(m);continue}var o=n.func;typeof o==="number"?n.arg===void 0?K.get(o)():K.get(o)(n.arg):o(n.arg===void 0?null:n.arg)}}function pa(l){try{E.grow(l-H.byteLength+65535>>>16);J(E.buffer);return 1}catch(l){}}function ea(l){var m=I.length;l=l>>>0;var n=2147483648;if(l>n)return!1;for(var o=1;o<=4;o*=2){var p=m*(1+.2/o);p=Math.min(p,l+100663296);p=Math.min(n,la(Math.max(l,p),65536));p=pa(p);if(p)return!0}return!1}var qa=!1;function fa(l){var m=[];for(var n=0;n<l.length;n++){var o=l[n];o>255&&(qa&&G(!1,"Character code "+o+" ("+String.fromCharCode(o)+")  at offset "+n+" not in 0x00-0xFF."),o&=255);m.push(String.fromCharCode(o))}return m.join("")}var ra=typeof atob==="function"?atob:function(l){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",o,p,q,r,s,t=0;l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");do p=m.indexOf(l.charAt(t++)),q=m.indexOf(l.charAt(t++)),r=m.indexOf(l.charAt(t++)),s=m.indexOf(l.charAt(t++)),p=p<<2|q>>4,q=(q&15)<<4|r>>2,o=(r&3)<<6|s,n=n+String.fromCharCode(p),r!==64&&(n=n+String.fromCharCode(q)),s!==64&&(n=n+String.fromCharCode(o));while(t<l.length);return n};function sa(l){try{l=ra(l);var m=new Uint8Array(l.length);for(var n=0;n<l.length;++n)m[n]=l.charCodeAt(n);return m}catch(l){throw new Error("Converting base64 string to bytes failed.")}}function ga(l){if(!$(l))return;return sa(l.slice(Z.length))}var ha={b:ea,a:E};oa();m.___wasm_call_ctors=function(){return(m.___wasm_call_ctors=m.asm.c).apply(null,arguments)};m.__malloc=function(){return(m.__malloc=m.asm.d).apply(null,arguments)};m.__free=function(){return(m.__free=m.asm.e).apply(null,arguments)};m.__DgwCodecEncodeEmpty=function(){return(m.__DgwCodecEncodeEmpty=m.asm.f).apply(null,arguments)};m.__DgwCodecEncodeDeauth=function(){return(m.__DgwCodecEncodeDeauth=m.asm.g).apply(null,arguments)};m.__DgwCodecEncodeDrain=function(){return(m.__DgwCodecEncodeDrain=m.asm.h).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(m.__DgwCodecEncodeStreamGroup_EstabStream=m.asm.i).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(m.__DgwCodecEncodeStreamGroup_EndOfData=m.asm.j).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Data=function(){return(m.__DgwCodecEncodeStreamGroup_Data=m.asm.k).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Ack=function(){return(m.__DgwCodecEncodeStreamGroup_Ack=m.asm.l).apply(null,arguments)};m.__DgwCodecEncodePing=function(){return(m.__DgwCodecEncodePing=m.asm.m).apply(null,arguments)};m.__DgwCodecEncodePong=function(){return(m.__DgwCodecEncodePong=m.asm.n).apply(null,arguments)};m.__DgwCodecDecode=function(){return(m.__DgwCodecDecode=m.asm.o).apply(null,arguments)};m.__getFrameType=function(){return(m.__getFrameType=m.asm.p).apply(null,arguments)};m.__getDrainReasonFromDrainFrame=function(){return(m.__getDrainReasonFromDrainFrame=m.asm.q).apply(null,arguments)};m.__getDGWFramePtr=function(){return(m.__getDGWFramePtr=m.asm.r).apply(null,arguments)};m.__getStreamIdFromStreamGroupFrame=function(){return(m.__getStreamIdFromStreamGroupFrame=m.asm.s).apply(null,arguments)};m.__getEncodedParamsFromEstablishStreamFrame=function(){return(m.__getEncodedParamsFromEstablishStreamFrame=m.asm.t).apply(null,arguments)};m.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(m.__getEncodedParamsSizeFromEstablishStreamFrame=m.asm.u).apply(null,arguments)};m.__getDataFromGroupedStreamDataFrame=function(){return(m.__getDataFromGroupedStreamDataFrame=m.asm.v).apply(null,arguments)};m.__getDataSizeFromGroupedStreamDataFrame=function(){return(m.__getDataSizeFromGroupedStreamDataFrame=m.asm.w).apply(null,arguments)};m.__getAckIdFromGroupedStreamDataFrame=function(){return(m.__getAckIdFromGroupedStreamDataFrame=m.asm.x).apply(null,arguments)};m.__getRequiresAckFromGroupedStreamDataFrame=function(){return(m.__getRequiresAckFromGroupedStreamDataFrame=m.asm.y).apply(null,arguments)};m.__getAckIdFromGroupedStreamAckFrame=function(){return(m.__getAckIdFromGroupedStreamAckFrame=m.asm.z).apply(null,arguments)};var ia;V=function l(){ia||ja(),ia||(V=l)};function ja(l){l||v;if(T>0)return;O();if(T>0)return;function n(){if(ia)return;ia=!0;m.calledRun=!0;if(F)return;P();o(m);m.onRuntimeInitialized&&m.onRuntimeInitialized();Q()}m.setStatus?(m.setStatus("Running..."),setTimeout(function(){setTimeout(function(){m.setStatus("")},1),n()},1)):n()}m.run=ja;if(m.preInit){typeof m.preInit=="function"&&(m.preInit=[m.preInit]);while(m.preInit.length>0)m.preInit.pop()()}ja();return m.ready}}();typeof q==="object"&&typeof p==="object"?p.exports=r:typeof define==="function"&&define.amd?define([],function(){return r}):typeof q==="object"&&(q.Module=r)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Promise","Random","URI","gkx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=4;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=d("Random").random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})}function k(a){var b=new TextDecoder();b=b.decode(a);a=c("Base64").encode(b);b=a.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return b}var l=null,m=null;function n(){m==null&&(m=(i||(i=b("Promise"))).resolve().then(function(){return c("DGWCppBridge")()}).then(function(a){l=a}));return m}e=function(){function a(){}a.initialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:if(!c("gkx")("9999")){a.next=4;break}return a.abrupt("return",n());case 4:if(!(l!=null)){a.next=6;break}return a.abrupt("return");case 6:a.next=8;return b("regeneratorRuntime").awrap(c("DGWCppBridge")());case 8:l=a.sent;case 9:case"end":return a.stop()}},null,this)};a.constructConnectUrl=function(a){var b,e,f=a.appId,g=a.appVersion,i=a.authType,j=a.deviceId,l=a.dgwVersion,m=a.fbId,n=a.tier,o=a.loggingId,p=a.headers,q=a.endpoint,r=a.serviceId,s=a.regionHint;a=a.establishStreamFrame;var t=(b={},b[(e=d("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=f,b[e.HEADER_CONSTANTS.HEADER_APPVERSION]=g,b[e.HEADER_CONSTANTS.HEADER_AUTHTYPE]=i,b[e.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+l,b[e.HEADER_CONSTANTS.HEADER_UUID]=m,b[e.HEADER_CONSTANTS.HEADER_TARGET_TIER]=n,b);a!==void 0&&(t[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=k(a));o!==void 0&&(t[d("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=o);s!==void 0&&(t[d("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=s);j!==void 0&&(t[d("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=j);Object.keys(p).forEach(function(a){var b=d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+a;Object.prototype.hasOwnProperty.call(t,b)||(t[b]=p[a])});f=new(h||(h=c("URI")))(q);f.setQueryData(t);f.setPath(f.getPath()+"/"+r);f.toString().length>2e3&&(delete t[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],f.setQueryData(t));return f.toString()};return a}();f=function(){function a(a,b,c){this.$1=null,this.$2=a,this.$3=b,this.$4=c}a.initialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:if(!c("gkx")("9999")){a.next=4;break}return a.abrupt("return",n());case 4:if(!(l!=null)){a.next=6;break}return a.abrupt("return");case 6:a.next=8;return b("regeneratorRuntime").awrap(c("DGWCppBridge")());case 8:l=a.sent;case 9:case"end":return a.stop()}},null,this)};var e=a.prototype;e.malloc=function(a){try{a=l.__malloc(a);if(a===0){var b;(b=this.$2)==null?void 0:b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0");return-1}return a}catch(a){(b=this.$2)==null?void 0:b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",a.toString());return-1}};e.free=function(a){l.__free(a)};e.append=function(a){if(this.$1==null){this.$1=a;return}var b=this.$1.length,c=new Uint8Array(b+a.length);c.set(this.$1,0);c.set(a,b);this.$1=c};e.processData=function(){var a=this;if(this.$1==null)return;var b=this.$1.length,c=this.malloc(b);if(c===-1)return;var e=l.HEAPU8.subarray(c,c+b);if(this.$1)for(var f=0;f<e.length;++f)e[f]=this.$1[f];f=this.malloc(j*4);if(f===-1)return;e=f;var g=e+j,h=g+j,i=h+j;b=l.__DgwCodecDecode(c,b,e,g,h,i);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){this.free(f);(h=this.$2)==null?void 0:h.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return}c=l.HEAPU32.subarray(i/j,i/j+1)[0];if(this.$1==null){this.free(f);return}h=this.$1.length-c;if(this.$1&&this.$1.length>h){this.$1=new Uint8Array(((b=this.$1)==null?void 0:b.subarray(h))||[])}else this.$1=null;i=l.HEAPU32.subarray(g/j,g/j+1)[0];c=l.HEAPU32.subarray(e/j,e/j+1)[0];var k=[];for(b=0;b<i;++b){var m=l.__getDGWFramePtr(c,b);h=l.__getFrameType(m);switch(h){case d("DGWConstants").DgwFrameType.DgwFrameType_Drain:g=function(){var b=l.__getDrainReasonFromDrainFrame(m),c=d("DGWConstants").drainReasonToDrainReasonString(b);(b=a.$2)==null?void 0:b.logEvent(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+c);k.push(function(){var b;return(b=a.$3)==null?void 0:b.receivedDrainSignal(c)});return"break"}();if(g==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:e=function(){var b=l.__getStreamIdFromStreamGroupFrame(m),c=l.__getEncodedParamsFromEstablishStreamFrame(m),d=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getEncodedParamsSizeFromEstablishStreamFrame(m)));a.free(c);k.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamEstablishStreamReceived(b,d)});return"break"}();if(e==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:h=function(){var b=l.__getStreamIdFromStreamGroupFrame(m),c=l.__getDataFromGroupedStreamDataFrame(m),d=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getDataSizeFromGroupedStreamDataFrame(m)));a.free(c);var e=l.__getRequiresAckFromGroupedStreamDataFrame(m)?l.__getAckIdFromGroupedStreamDataFrame(m):null;k.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamDataReceived(b,d,e)});return"break"}();if(h==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:g=function(){var b=l.__getStreamIdFromStreamGroupFrame(m),c=l.__getAckIdFromGroupedStreamAckFrame(m);k.push(function(){var d;return(d=a.$3)==null?void 0:d.onGroupedStreamAckReceived(b,c)});return"break"}();if(g==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:e=function(){var b=l.__getStreamIdFromStreamGroupFrame(m);k.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamEndOfDataReceived(b)});return"break"}();if(e==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_Ping:k.push(function(){var b;return(b=a.$3)==null?void 0:b.onPingReceived()});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Pong:k.push(function(){var b;return(b=a.$3)==null?void 0:b.onPongReceived()});break;default:break}this.free(m)}this.free(f);for(h=0;h<k.length;h++)k[h]()};e.encodeData=function(a,b,c,e){var f=this.malloc(a.length);if(f===-1)return null;var g=l.HEAPU8.subarray(f,f+a.length);for(var h=0;h<g.length;++h)g[h]=a[h];a=this.malloc(j*2);h=a;var i=a+j;e=l.__DgwCodecEncodeStreamGroup_Data(e,f,g.length,b,c,h,i);this.free(f);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(g=this.$2)==null?void 0:g.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}b=l.HEAPU32.subarray(h/j,h/j+1)[0];c=l.HEAPU32.subarray(i/j,i/j+1)[0];f=new Uint8Array(l.HEAPU8.subarray(b,b+c));this.free(b);this.free(a);return f};e.encodeAck=function(a,b){var c=this.malloc(j*2);if(c===-1)return null;var e=c,f=c+j;b=l.__DgwCodecEncodeStreamGroup_Ack(b,a,e,f);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(a=this.$2)==null?void 0:a.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return null}a=l.HEAPU32.subarray(e/j,e/j+1)[0];b=l.HEAPU32.subarray(f/j,f/j+1)[0];e=new Uint8Array(l.HEAPU8.subarray(a,a+b));this.free(a);this.free(c);return e};e.encodeDrain=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeDrain(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};e.encodeEstablishStream=function(a,b){var c=this.malloc(b.length);if(c===-1)return null;var e=l.HEAPU8.subarray(c,c+b.length);for(var f=0;f<b.length;++f)e[f]=b[f];e=this.malloc(j*2);f=e;var g=e+j;b=l.__DgwCodecEncodeStreamGroup_EstabStream(a,c,b.length,f,g);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(c=this.$2)==null?void 0:c.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b)+" for StreamId "+a);return null}c=l.HEAPU32.subarray(f/j,f/j+1)[0];b=l.HEAPU32.subarray(g/j,g/j+1)[0];a=new Uint8Array(l.HEAPU8.subarray(c,c+b));this.free(c);this.free(e);return a};e.encodeEndOfData=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeStreamGroup_EndOfData(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};e.encodePing=function(){if(this.$5!=null)return this.$5;var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePing(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);this.$5=b;return b};e.encodePong=function(){if(this.$6!=null)return this.$6;var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePong(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);this.$6=b;return b};return a}();g.uuidv4=a;g.Uint8ArrayToBase64UrlStr=k;g.DGWUtils=e;g.DGWCodec=f}),98);
__d("DGWExponentialBackoff",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g,h={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},i=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.errors=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c===void 0&&(c=h);d.prev=1;d.next=4;return b("regeneratorRuntime").awrap(j(a,c));case 4:return d.abrupt("return",d.sent);case 7:d.prev=7;d.t0=d["catch"](1);throw d.t0.errors[d.t0.errors.length-1];case 10:case"end":return d.stop()}},null,this,[[1,7]])}function j(a,c){var d,e,f,g,h;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:d=0,e=[],f=c.baseRetryInterval,g=c.backoffFactor;case 4:if(!(d<=c.maxRetries)){j.next=20;break}j.prev=5;j.next=8;return b("regeneratorRuntime").awrap(a());case 8:h=j.sent;return j.abrupt("return",h);case 12:j.prev=12,j.t0=j["catch"](5),e.push(j.t0);case 15:j.next=17;return b("regeneratorRuntime").awrap(k(f*Math.pow(g,d)));case 17:++d;j.next=4;break;case 20:throw new i("Max call count exceeded",e);case 21:case"end":return j.stop()}},null,this,[[5,12]])}function k(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(new(g||(g=b("Promise")))(function(b){return window.setTimeout(b,a)}));case 2:case"end":return c.stop()}},null,this)}f.callWithExponentialBackoff=a}),66);
__d("DGWPinger",["DGWLoggingContext"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;if(this.$3){var b;(b=d("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout_fired.reset");this.$3=!1;this.$4();b.DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout.newtimeout");this.$2=window.setTimeout(function(){a.$6()},this.$1)}else d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null);this.$1>0&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)};return a}();g.DGWPinger=a}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8});function a(a){switch(a){case g.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}c=function(){function a(){}var b=a.prototype;b.onStreamGroupError=function(){};b.onStreamGroupMustDrain=function(){};b.onStreamGroupTransportClose=function(){};return a}();f.DGWStreamGroupError=g;f.isRetryableError=a;f.NoOpDGWStreamGroupCallbacks=c}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=a}var b=a.prototype;b.transportEstablished=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open","readyState:"+a),this.$2=Date.now(),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")};b.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")};b.transportClosed=function(a,b){this.$4=Date.now(),a?(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",b))};b.transportEstablishmentFailure=function(a){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+a+" onLine:"+String(c("NetworkStatus").isOnline())),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")};b.streamEstablishmentTimeout=function(a,b,e){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",a,"streamId:"+b+", onLine:"+String(c("NetworkStatus").isOnline()),!1,e),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")};b.streamEstablishmentPending=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")};b.streamEstablishmentSuccess=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")};b.transportError=function(a,b,c){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,a,b,c)};b.receivedFrameForInactiveStream=function(a,b,c){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+a+", streamID: "+b,c)};b.ranOutOfStreamIds=function(a){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",a)};return a}();g.DGWTransportEvents=a}),98);
__d("DGWWebSocketTransport",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=new WebSocket(a);a.binaryType="arraybuffer";a.onopen=function(){};a.onclose=function(){};a.onerror=function(){};return a}f.getWebSocketConnection=a}),66);
__d("DGWStreamEvents",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$4=new Map(),this.$5=new Map(),this.$6=a,this.$1=b,c!=null&&(this.$8="streamId:"+c+"::")}var b=a.prototype;b.dataSent=function(a,b,c){var d=c?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,d,((d=this.$8)!=null?d:"")+"sendId:"+a+", payloadSize:"+b,!0);this.$4.set(a,{ackRequested:c,payloadSize:b,sendTimestamp:Date.now()})};b.ackReceived=function(a){var b;this.$6.logEvent(this.$1,"AckReceived",((b=this.$8)!=null?b:"")+"sendId:"+a,!0);this.$6.bumpODSKey(this.$1,"ack_received");b=this.$4.get(a);b!=null&&(b.ackReceivedTimestamp=Date.now())};b.ackSent=function(a){var b;this.$6.bumpODSKey(this.$1,"ack_sent");this.$6.logEvent(this.$1,"ACK sent",((b=this.$8)!=null?b:"")+"ackId:"+a,!0)};b.drainSent=function(a){var b;this.$6.logEvent(this.$1,"Drain sent",((b=this.$8)!=null?b:"")+"drainReason: "+a)};b.dataReceived=function(a,b,c){var d;this.$6.bumpODSKey(this.$1,"data_received");this.$6.logEvent(this.$1,"Data received",((d=this.$8)!=null?d:"")+"sendId:"+((d=c)!=null?d:"null")+", ackRequested:"+b.toString()+", payloadSize:"+a,!0);c!=null&&this.$5.set(c,{ackRequested:b,payloadSize:a,receiveTimestamp:Date.now()})};b.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)};b.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)};b.streamClosed=function(a,b){this.$7=Date.now();var c=this.$9();if(a){this.$6.bumpODSKey(this.$1,"stream_closed_gracefully");this.$6.logEvent(this.$1,"Stream closed gracefully",""+((a=this.$8)!=null?a:"")+c)}else{this.$6.bumpODSKey(this.$1,"stream_closed_with_error");this.$6.logError(this.$1,"Stream closed abnormally",b,""+((a=this.$8)!=null?a:"")+c)}};b.connectionEstablishmentFailure=function(a){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+a)};b.streamEstablishmentFailure=function(a,b){this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+a.toString(),""+((a=this.$8)!=null?a:"")+b);this.$6.bumpODSKey(this.$1,"stream_establishment_failure")};b.error=function(a,b){b={msg:b,state:this.$9()};this.$6.logError(this.$1,a,JSON.stringify(b),this.$8)};b.$9=function(){var a={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(a)};return a}();f.DGWStreamEvents=a}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,e,f,g,h){this.$1=a,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=b,this.$7=c,this.$8=e,this.$2=g,this.$9=f,this.$10=new(d("DGWAckManager").DGWAckManager)(this.$9),this.$12=new(d("DGWStreamEvents").DGWStreamEvents)(this.$9,d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=h}var c=a.prototype;c.send=function(a,c){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:f=this.$11++%d("DGWConstants").MAX_ACK_ID;if(this.$14(a,!0,f)){h.next=3;break}return h.abrupt("return",!1);case 3:h.next=5;return b("regeneratorRuntime").awrap(this.$10.waitForAck(f,(e=c)!=null?e:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));case 5:g=h.sent;return h.abrupt("return",g);case 7:case"end":return h.stop()}},null,this)};c.sendAndForget=function(a){return this.$14(a,!1)};c.close=function(){var a=this.$2.encodeEndOfData(this.$1);if(a==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}a=this.$8.send(a);if(!a){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent();this.$5=!0;this.$4&&this.$15()};c.loggingContext=function(){return this.$9};c.__sendDrain=function(a){var b=d("DGWConstants").drainReasonToDrainReasonString(a);if(this.$5)return!1;a=this.$2.encodeDrain(a);if(a==null)return!1;this.$12.drainSent(b);b=this.$8.send(a);return b};c.__transportCloseHook=function(a){this.$13(),this.$10.clearPendingAcks(),a?(this.$12.error("Received StreamError","StreamErrorType: "+a),this.$6.onError(a)):this.$5&&this.$4?this.$15():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(d("DGWStream").StreamError.PREMATURE_CLOSE))};c.$15=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)};c.__dataReceivedHook=function(a,b){this.$12.dataReceived(a.length,b!=null,b),b!=null&&this.$16(b),this.$6.onDataReceived(a)};c.__ackReceivedHook=function(a){this.$12.ackReceived(a),this.$10.handleAckReceived(a)};c.__drainReceivedHook=function(a){this.$3===!1&&(this.$6.onStreamMustDrain(this,a),this.$3=!0)};c.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$15():this.$6.onServerHasFinishedSendingData(this)};c.$14=function(a,b,c){b===void 0&&(b=!1);c===void 0&&(c=0);if(this.$5){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally");return!1}a=this.$2.encodeData(a,b,c,this.$1);if(a==null)return!1;var e=this.$8.send(a);if(!e){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString());return!1}this.$12.dataSent(c,a.length,b);return!0};c.$16=function(a){var b=this.$2.encodeAck(a,this.$1);if(b==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+a);return!1}b=this.$8.send(b);if(!b){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+a);return!1}this.$12.ackSent(a);return!0};return a}();g.GroupedStream=a}),98);
__d("StreamIdGenerator",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=65535;a=function(){function a(){this.$1=new Set(),this.$2=0,this.$1.add(this.$2)}var b=a.prototype;b.getNextStreamId=function(){var a;if(!this.streamIdAvailable())throw c("err")("Max number of stream IDs reached");if(this.$1.size===0)return++this.$2;a=(a=this.$1.values().next().value)!=null?a:0;this.$1["delete"](a);return a};b.putBackStreamId=function(a){this.$1.add(a)};b.streamIdAvailable=function(){return this.$1.size>0||this.$2<h};return a}();g.MAX_STREAM_ID=h;g.StreamIdGeneratorImpl=a}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","Promise","StreamIdGenerator","err","gkx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("gkx")("4657"),j=function(a,b,c,e,f){var g=this;this.groupedStream=a;this.$1=window.setTimeout(function(){c(d("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},e);this.handleEstablishFrameReceived=function(){window.clearTimeout(g.$1),b(g.groupedStream)};this.abortStream=function(a){f(),c(a)}};a=function(){function a(b,e,f,g,h,j,k,l){var m=this;this.$14=h;this.$16=this.__getStreamIdGenerator();this.$5=new Map();this.$6=new Map();this.$7=g.keepAliveMs;this.$8=!1;this.$3=!0;this.$4=!1;this.$12=f;this.$10=new TextEncoder();this.$11=new TextDecoder();this.$13=g;h={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(a){m.$13.streamGroupCallbacks.onStreamGroupMustDrain(a),m.$5.forEach(function(b){b.__drainReceivedHook(a)})},onGroupedStreamDataReceived:function(a,b,c){if(m.$5.has(a)){var d=m.$5.get(a);d==null?void 0:d.__dataReceivedHook(b,c)}else{m.$12.receivedFrameForInactiveStream("Data",a,"sendAckID: "+((d=c)!=null?d:"null"))}},onGroupedStreamAckReceived:function(a,b){if(m.$5.has(a)){var c=m.$5.get(a);c==null?void 0:c.__ackReceivedHook(b)}else{m.$12.receivedFrameForInactiveStream("ACK",a,"ackId: "+((c=b)!=null?c:"null"))}},onGroupedStreamEndOfDataReceived:function(a){if(m.$5.has(a)){var b=m.$5.get(a);b==null?void 0:b.__endOfDataHook()}else m.$12.receivedFrameForInactiveStream("EndOfData",a)},onGroupedStreamEstablishStreamReceived:function(a,b){if(m.$6.has(a)){var c=m.$6.get(a);m.$6["delete"](a);b=JSON.parse(m.$11.decode(b));(b.code===void 0||b.code!==200)&&(c==null?void 0:c.abortStream(d("DGWStream").StreamError.ABNORMAL_CLOSURE));c==null?void 0:c.handleEstablishFrameReceived()}else m.$12.receivedFrameForInactiveStream("EstablishStream",a,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var a=m.$2.encodePing();if(a==null)return;m.send(a)},onPongReceived:function(){i&&(m.$3=!1)}};this.$2=new(d("DGWUtils").DGWCodec)(j,h,g.dgwVersion);if(g.enableFirstStreamOnWsHandshake){if(k===void 0)throw c("err")("Missing grouped stream options");if(l===void 0)throw c("err")("Missing grouped stream callbacks");var n=this.$16.getNextStreamId();f=this.createEstablishStreamFrame(n,k);h=d("DGWUtils").DGWUtils.constructConnectUrl({appId:g.appId,appVersion:g.appVersion,authType:g.authType,deviceId:(j=g.deviceId)!=null?j:void 0,dgwVersion:g.dgwVersion,fbId:g.fbId,tier:g.tier,loggingId:(h=g.loggingId)!=null?h:void 0,headers:a.__prefixAppHeaders(g.headers),endpoint:g.connectEndpoint,serviceId:g.serviceId,regionHint:(j=g.regionHint)!=null?j:void 0,establishStreamFrame:f});this.$1=e(h);if(!h.includes(d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;this.$15=this.waitForEstablishStream(n,l,k,new(d("DGWLoggingContext").DGWLoggingContext)(this.$13.dgwVersion,k.loggingId,this.$13.serviceId,this.$13.fbId,this.$13.loggingId,k.disableFalcoLogging),function(a){m.$5.set(n,a)},function(){m.$16.putBackStreamId(n)})}else this.$1=e(b)}var e=a.prototype;e.send=function(a){try{this.$1.send(a);return!0}catch(a){this.$12.transportError("Failed to send over transport","readyState: "+this.$1.readyState,a.toString());return!1}};e.close=function(){this.$1.close(d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE)};e.abort=function(a,b,c,d){this.$8=!0,this.$12.transportClosed(!1,d),this.$5.forEach(function(a){a.__transportCloseHook(b)}),this.$6.forEach(function(a){a.abortStream(b)}),this.$13.streamGroupCallbacks.onStreamGroupError(a),this.$5.clear(),this.$6.clear(),this.$1.close(c)};e.cleanup=function(){var a;(a=this.$9)==null?void 0:a.cancel();this.$1!=null&&(this.$1.onopen=function(a){},this.$1.onmessage=function(a){},this.$1.onerror=function(a){},this.$1.onclose=function(a){},this.$1.close())};a.getTransportWithInitialStream=function(c,e,f,g,h,i){var j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return b("regeneratorRuntime").awrap(d("DGWUtils").DGWCodec.initialize());case 2:j=new(d("DGWTransportEvents").DGWTransportEvents)(g);j.transportEstablishmentPending();k=function(){return a.$17("",f,j,h,g,c,e)};n.prev=5;n.next=8;return b("regeneratorRuntime").awrap(d("DGWExponentialBackoff").callWithExponentialBackoff(k,i));case 8:l=n.sent;m=l.$15!=null?l.$15:l.establishGroupedStream(e,c,new(d("DGWLoggingContext").DGWLoggingContext)(f.dgwVersion,c.loggingId,f.serviceId,f.fbId,f.loggingId,c.disableFalcoLogging));return n.abrupt("return",{transport:l,streamPromise:m});case 13:n.prev=13;n.t0=n["catch"](5);throw n.t0;case 16:case"end":return n.stop()}},null,this,[[5,13]])};a.getTransport_DEPRECATED=function(c,e,f,g,h){var i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("DGWUtils").DGWCodec.initialize());case 2:i=new(d("DGWTransportEvents").DGWTransportEvents)(f);i.transportEstablishmentPending();j=function(){return a.$17(c,e,i,g,f)};k.prev=5;k.next=8;return b("regeneratorRuntime").awrap(d("DGWExponentialBackoff").callWithExponentialBackoff(j,h));case 8:return k.abrupt("return",k.sent);case 11:k.prev=11;k.t0=k["catch"](5);throw k.t0;case 14:case"end":return k.stop()}},null,this,[[5,11]])};e.establishGroupedStream=function(a,d,e){var f=this,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:g=this.getStreamId();h=this.createEstablishStreamFrame(g,d);i=this.waitForEstablishStream(g,a,d,e,function(a){f.$5.set(g,a)},function(){f.$16.putBackStreamId(g)});if(this.send(h)){k.next=5;break}throw c("err")("Websocket connection closed before stream established");case 5:k.next=7;return b("regeneratorRuntime").awrap(i);case 7:j=k.sent;return k.abrupt("return",j);case 9:case"end":return k.stop()}},null,this)};a.__prefixAppHeaders=function(a){return Object.keys(a).reduce(function(b,c){b[""+d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+c]=a[c];return b},{})};e.waitForEstablishStream=function(a,c,d,e,f,g){var i=this,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:this.$12.streamEstablishmentPending(a,d.loggingId);k=this.__createGroupedStream(a,c,d,e);m.prev=2;m.next=5;return b("regeneratorRuntime").awrap(new(h||(h=b("Promise")))(function(b,c){i.$6.set(a,new j(k,b,c,3e4,function(){i.streamEndCallback(a)}))}));case 5:l=m.sent;f(k);this.$12.streamEstablishmentSuccess(a,d.loggingId);return m.abrupt("return",l);case 11:m.prev=11;m.t0=m["catch"](2);g();this.$12.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,a,d.loggingId);throw m.t0;case 16:case"end":return m.stop()}},null,this,[[2,11]])};a.$17=function(c,e,f,g,h,j,k){var l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:l=new a(c,d("DGWWebSocketTransport").getWebSocketConnection,f,e,g,h,j,k);l.$1.onmessage=a.$18(l);l.$1.onopen=function(){f.transportEstablished(l.$1.readyState),i||(l.$3=!1),l.$7!=null&&(l.$9=new(d("DGWPinger").DGWPinger)(l.$7,function(){l.$19()},function(){l.abort(d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,d("DGWStream").StreamError.KEEPALIVE_TIMEOUT,d("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout")}))};l.$1.onerror=function(){l.$12.transportError("onerror","readyState: "+l.$1.readyState)};l.$1.onclose=a.$20(l);n.next=7;return b("regeneratorRuntime").awrap(a.getTransportPromise(l));case 7:m=n.sent;return n.abrupt("return",m);case 9:case"end":return n.stop()}},null,this)};a.getTransportPromise=function(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(new(h||(h=b("Promise")))(function(b,c){var e=a.$1.onerror;if(i){var f=a.$1.onmessage,g=a.$1.onclose;a.$1.onerror=function(){window.clearTimeout(k),e(),c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};a.$1.onclose=function(a){window.clearTimeout(k),g(a),a.code===d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?c(d("DGWStream").StreamError.UNAUTHORIZED):c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};var h=!1;a.$1.onmessage=function(c){f(c),!h&&!a.$3&&(window.clearTimeout(k),b(a),h=!0)}}else{var j=a.$1.onopen;a.$1.onerror=function(){window.clearTimeout(k),e(),c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};a.$1.onopen=function(){window.clearTimeout(k),j(),b(a)}}var k=window.setTimeout(function(){a.cleanup(),c(d("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},2e4)}));case 2:c=e.sent;return e.abrupt("return",c);case 4:case"end":return e.stop()}},null,this)};a.$18=function(a){return function(b){var c;(c=a.$9)==null?void 0:c.reset();if(!(b.data instanceof ArrayBuffer)){a.$12.transportError("Incorrect Data Protocol","Received "+typeof b.data+" instead of ArrayBuffer");return}a.$2.append(new Uint8Array(b.data));a.$2.processData()}};a.$20=function(a){return function(b){var c;(c=a.$9)==null?void 0:c.cancel();if(a.$8===!0||a.$4)return;if(a.$3===!0){a.$12.transportEstablishmentFailure(b.code);a.$5.clear();a.$14();return}a.$14();a.$3=!0;if(b.code!==d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){a.$12.transportClosed(!1,"Websocket connection failure with code "+b.code);c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;var e=d("DGWStream").StreamError.UNKNOWN_ERROR;switch(b.code){case d("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case d("DGWConstants").WebsocketCloseCodes.GOING_AWAY:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY;e=d("DGWStream").StreamError.GOING_AWAY;break;case d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED;e=d("DGWStream").StreamError.UNAUTHORIZED;break;case d("DGWConstants").WebsocketCloseCodes.REJECTED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED;e=d("DGWStream").StreamError.REJECTED;break;case d("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST;e=d("DGWStream").StreamError.BAD_REQUEST;break;case d("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.DGW_SERVER_ERROR;c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;e=d("DGWStream").StreamError.UNKNOWN_ERROR;break}a.$13.streamGroupCallbacks.onStreamGroupError(c);a.$5.forEach(function(a){a.__transportCloseHook(e)});a.$6.forEach(function(a){a.abortStream(e)})}else a.$12.transportClosed(!0,""),a.$13.streamGroupCallbacks.onStreamGroupTransportClose(),a.$5.forEach(function(a){a.__transportCloseHook()}),a.$6.forEach(function(a){a.abortStream(d("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});a.$5.clear();a.$6.clear()}};e.$19=function(){var a=this.$2.encodePing();if(a==null)throw c("err")("Failed to encode Ping Frame");this.send(a)};e.isClosedLocally=function(){return this.$3||this.$8||this.$4};e.streamEndCallback=function(a){this.$5["delete"](a),this.$6["delete"](a),this.$16.putBackStreamId(a)};e.canCreateGroupedStream=function(){return this.$16.streamIdAvailable()};e.createEstablishStreamFrame=function(b,d){d=this.$2.encodeEstablishStream(b,new Uint8Array(this.$10.encode(JSON.stringify(a.__prefixAppHeaders(d.groupedStreamHeaders)))));if(d==null){this.$16.putBackStreamId(b);throw c("err")("Failed to encode EstablishStreamFrame")}return d};e.getStreamId=function(){try{return this.$16.getNextStreamId()}catch(a){this.$12.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size);throw a}};e.__createGroupedStream=function(a,b,c,e){var f=this;return new(d("GroupedStream").GroupedStream)(a,b,c,this,e,this.$2,function(){f.streamEndCallback(a)})};e.__getStreamIdGenerator=function(){return new(d("StreamIdGenerator").StreamIdGeneratorImpl)()};return a}();g.StreamGroupWebSocketTransport=a}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","justknobx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h={maxRetries:c("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};a=function(){function a(a,b,c,e,f,g,h,i,j){this.$2=j;this.$1=j.getNewStreamGroupId();j=(j=h.overrideUrl)!=null?j:f;this.$5=null;this.$3={appId:a,appVersion:b,authType:c,deviceId:h.deviceId,dgwVersion:e,headers:h.streamGroupAppHeaders,tier:(f=h.serviceTier)!=null?f:d("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:j,fbId:g,loggingId:h.loggingId,serviceId:h.serviceId,streamGroupCallbacks:i,keepAliveMs:h.keepAliveMs,regionHint:h.regionHint,enableFirstStreamOnWsHandshake:!1};this.$4=h;this.streamGroupLoggingContext=new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(a=h.verboseLoggingEnabled)!=null?a:!1);this.$6=d("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(b=this.$3.deviceId)!=null?b:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers["extends"]({},this.$3.headers),loggingId:(c=this.$3.loggingId)!=null?c:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(e=this.$3.regionHint)!=null?e:void 0})}var c=a.prototype;c.initTransport=function(){var c=this,a,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:a={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){c.$2.removeStreamGroupAndTransport(c.$1)},a);f.prev=2;f.next=5;return b("regeneratorRuntime").awrap(this.$5);case 5:e=f.sent;this.$5=null;f.next=13;break;case 9:f.prev=9;f.t0=f["catch"](2);this.$5=null;throw f.t0;case 13:this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,e);return f.abrupt("return",e);case 15:case"end":return f.stop()}},null,this,[[2,9]])};c.establishStream=function(a,c){var e=this,f,g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(this.$2.containsStreamGroup(this.$1)===!1)){i.next=23;break}this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream");if(this.$3.enableFirstStreamOnWsHandshake){i.next=18;break}this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},h);i.prev=4;i.next=7;return b("regeneratorRuntime").awrap(this.$5);case 7:f=i.sent;this.$5=null;i.next=15;break;case 11:i.prev=11;i.t0=i["catch"](4);this.$5=null;throw i.t0;case 15:this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,f);i.next=23;break;case 18:i.next=20;return b("regeneratorRuntime").awrap(d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(a,c,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},h));case 20:g=i.sent;this.$2.setStreamGroupAndTransport(this.$1,g.transport);return i.abrupt("return",g.streamPromise);case 23:return i.abrupt("return",this.establishStreamWithTransport(a,c));case 24:case"end":return i.stop()}},null,this,[[4,11]])};c.establishStreamWithTransport=function(a,c){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:f=a.loggingId;this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream",null,!0,f);h.next=4;return b("regeneratorRuntime").awrap(this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(c,a,new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,f,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,a.disableFalcoLogging,(e=a.verboseLoggingEnabled)!=null?e:!1)));case 4:g=h.sent;return h.abrupt("return",g);case 6:case"end":return h.stop()}},null,this)};c.canCreateGroupedStream=function(){var a=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var b=this.$2.getStreamGroupTransport(this.$1);a=b.canCreateGroupedStream()}d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a?"can_create":"cannot_create");return a};c.close=function(){var a=this.$2.getStreamGroupTransport(this.$1);a.close()};return a}();g.StreamGroup=a}),98);
__d("StreamGroupRegistry",["Random","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map(),this.$2=new Set()}var b=a.prototype;b.setStreamGroupAndTransport=function(a,b){this.$1.set(a,b)};b.containsStreamGroup=function(a){return this.$1.has(a)};b.removeStreamGroupAndTransport=function(a){this.$1["delete"](a)};b.getStreamGroupTransport=function(a){a=this.$1.get(a);if(a==null)throw c("err")("No stream group transport");return a};b.getNewStreamGroupId=function(){var a=d("Random").uint32();while(this.$2.has(a))a=d("Random").uint32();this.$2.add(a);return a};return a}();g.StreamGroupRegistry=a}),98);
__d("RawDGWClient",["CurrentUser","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain","justknobx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.appId,c=a.appVersion,e=a.authType,f=a.dgwVersion,g=a.endpoint;a=a.fbId;this.$1=b;this.$2=c;this.$3=e;this.$4=f;this.$5=g;this.$6=a;this.$7=new(d("StreamGroupRegistry").StreamGroupRegistry)()}var b=a.prototype;b.createStreamGroup=function(a,b){c("justknobx")._("1023")&&this.handleUserChecks();return new(d("StreamGroup").StreamGroup)(this.$1,this.$2,this.$3,this.$4,this.$5,this.$6,b,a,this.$7)};b.handleUserChecks=function(){if(!c("CurrentUser").isLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated");throw d("DGWStream").StreamError.UNAUTHENTICATED}};return a}();g.RawDGWClient=a}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("RawDGWClient").RawDGWClient)({appId:c("DGWWebConfig").appId,appVersion:c("DGWWebConfig").appVersion,authType:d("DGWAuth").fromStringToDGWAuth(c("DGWEnvUtil").getDGWAuthType()),dgwVersion:c("DGWEnvUtil").getDGWVersion(),endpoint:c("DGWEnvUtil").getDGWEndpoint(),fbId:c("DGWWebConfig").fbId});function a(){if(c("DGWEnvUtil").isDGWEnvCompatible())return h;else throw c("err")("unsupported_environment_retry_with_mqtt")}g["default"]=a}),98);
__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,d,e,f){var g={};a=Object.entries(a);for(var h=0;h<a.length;h++){var i=a[h],j=i[0];i=i[1];typeof i=="string"?g["XRSS-"+j]=i:typeof i=="number"?g["XRSN-"+j]=i.toString():typeof i=="boolean"?g["XRSB-"+j]=i.toString():typeof i=="object"&&i!=null&&(g["XRSO-"+j]=c("Base64").encode(JSON.stringify(i)))}d&&(g["xrs-body"]="true");e!=null&&e.length>0&&(g["xrs-instrumentation"]=c("Base64").encode(e));g["XRS-Accept-Ack"]="RSAck";f!=null&&f.ackTimeoutSec!=null&&(g["XRS-SRAck-Timeout"]=f.ackTimeoutSec.toString());g["XRSS-http_referer"]=window.location.href;if(c("WebDriverConfig").isTestRunning&&c("gkx")("20919")){j=b("cr:3024")==null?void 0:b("cr:3024").get();j!=null&&(g["XRSB-is_test"]="true",g["XRSS-original_request_id"]=j)}return g}function h(a){return Object.keys(a).reduce(function(b,c){(typeof a[c]==="string"||typeof a[c]==="boolean"||typeof a[c]==="number"||typeof a[c]==="object")&&(b[c]=a[c]);return b},{})}function d(a){if(a.response&&a.response.instrumentation_data!=null&&a.response.instrumentation_data.length>0)try{a=JSON.parse(new TextDecoder("utf-8").decode(a.response.instrumentation_data));return{auxId:a.auxId,dfTraceId:(a=a.dataFlowTracingData)==null?void 0:a.traceId}}catch(a){}return null}function e(a,b){var c=a.headers;a=a.body;b.kill_body===!0&&(a=null);b.new_body!=null&&(a=b.new_body);if(b.new_headers!=null)try{c=h(JSON.parse(b.new_headers))}catch(a){}if(b.patch_headers!=null)try{c=babelHelpers["extends"]({},c,h(JSON.parse(b.patch_headers)))}catch(a){}return{headers:c,body:a}}g.convertHeaders=a;g.cleanHeaders=h;g.getInstrumentationDataFieldsFromPayload=d;g.transformContextWithRewriteDelta=e}),98);
__d("DGWStreamHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d,e){this.$2=a,this.$3=b,this.$4=c,this.$5=d,this.$6=e,this.$1=!0}var b=a.prototype;b.onClose=function(a){if(!this.$1)return;this.$2(a)};b.onDataReceived=function(a){if(!this.$1)return;this.$3(a)};b.onError=function(a){if(!this.$1)return;this.$4(a)};b.onStreamMustDrain=function(a,b){if(!this.$1)return;this.$5(a,b)};b.onServerHasFinishedSendingData=function(a){if(!this.$1)return;this.$6(a)};b.stop=function(){this.$1=!1};b.isStopped=function(){return!this.$1};return a}();f["default"]=a}),66);
__d("InflightAmends",["Deferred","err"],(function(a,b,c,d,e,f,g){"use strict";var h="inflight_amends_timeout",i="inflight_amends_duplicate_id";a=function(){function a(a,b,c){this.$1=a,this.$3=b,this.$4=c,this.$2=new Map()}var b=a.prototype;b.add=function(a){var b=this;if(this.$2.has(a))throw c("err")(i);var d=new(c("Deferred"))(),e=Date.now(),f=setTimeout(function(){b.$2.has(a)&&b.reject(a,c("err")(h))},this.$1);this.$2.set(a,{id:a,deferred:d,createdTimestampMs:e,timeoutId:f});return d.getPromise()};b.getPromise=function(a){return(a=this.$5(a))==null?void 0:a.deferred.getPromise()};b.resolve=function(a,b){a=this.$5(a);a&&(a.deferred.resolve==null?void 0:a.deferred.resolve(b),this.$3(a.id,Date.now()-a.createdTimestampMs),this.$6(a))};b.reject=function(a,b){a=this.$5(a);a&&(a.deferred.reject==null?void 0:a.deferred.reject(b),this.$4(a.id,b),this.$6(a))};b.rejectAll=function(a){for(var b=this.$2.entries(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e[1];this.reject(f,a)}};b.getSize=function(){return this.$2.size};b.getAllPromises=function(){var a=[];for(var b=this.$2.values(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a.push(e.deferred.getPromise())}return a};b.$6=function(a){clearTimeout(a.timeoutId),this.$2["delete"](a.id)};b.$5=function(a){return this.$2.get(a)};return a}();g["default"]=a}),98);
__d("RequestStreamCloseReason",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]);f.RequestStreamCloseReason=a}),66);
__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{expected_existing_headers:"",patch_headers_if_match:""}}function e(){return{bytes:Uint8Array.of()}}function f(){return{message:""}}function i(){return{reason:d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function j(){return{}}function k(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function l(){return{caller_timestamp_ms:"0"}}function m(){return{original_ping_timestamp_ms:"0"}}function n(){return{}}function o(a,b){b.writeStructBegin("ResponseRewriteRequest"),a.new_headers!=null&&(b.writeFieldBegin({fname:"new_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeString(a.new_headers),b.writeFieldEnd()),a.new_body!=null&&(b.writeFieldBegin({fname:"new_body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.new_body),b.writeFieldEnd()),a.patch_headers!=null&&(b.writeFieldBegin({fname:"patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers),b.writeFieldEnd()),a.kill_body!=null&&(b.writeFieldBegin({fname:"kill_body",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:4}),b.writeBool(a.kill_body),b.writeFieldEnd()),a.temporary!=null&&(b.writeFieldBegin({fname:"temporary",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:5}),b.writeBool(a.temporary),b.writeFieldEnd()),a.conditional_patch_headers!=null&&(b.writeFieldBegin({fname:"conditional_patch_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6}),p(a.conditional_patch_headers,b),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function p(a,b){b.writeStructBegin("ResponseRewriteConditionalPatchHeaders");b.writeFieldBegin({fname:"expected_existing_headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.expected_existing_headers!=null)b.writeString(a.expected_existing_headers);else{var d="";b.writeString(d)}b.writeFieldEnd();b.writeFieldBegin({fname:"patch_headers_if_match",ftype:h.STRING,fid:2});if(a.patch_headers_if_match!=null)b.writeString(a.patch_headers_if_match);else{d="";b.writeString(d)}b.writeFieldEnd();a.patch_headers_otherwise!=null&&(b.writeFieldBegin({fname:"patch_headers_otherwise",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeString(a.patch_headers_otherwise),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function q(a,b){b.writeStructBegin("ResponseData");b.writeFieldBegin({fname:"bytes",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.bytes!=null)b.writeBinary(a.bytes);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.metadata!=null&&(b.writeFieldBegin({fname:"metadata",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.metadata),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function r(a,b){b.writeStructBegin("LogMessage");b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.message!=null)b.writeString(a.message);else{a="";b.writeString(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function s(a,b){b.writeStructBegin("Termination");b.writeFieldBegin({fname:"reason",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});if(a.reason!=null){var e;b.writeI32((e=a.reason)!=null?e:0)}else{e=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.message!=null&&(b.writeFieldBegin({fname:"message",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeString(a.message),b.writeFieldEnd());a.retry_delay_ms!=null&&(b.writeFieldBegin({fname:"retry_delay_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:3}),b.writeI64(c("jsbi").BigInt(a.retry_delay_ms)),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function t(a,b){b.writeStructBegin("AmendStreamAck"),a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd()),a.accepted!=null&&(b.writeFieldBegin({fname:"accepted",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:2}),b.writeBool(a.accepted),b.writeFieldEnd()),a.result!=null&&(b.writeFieldBegin({fname:"result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.result),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function u(a,b){b.writeStructBegin("StreamCheck");b.writeFieldBegin({fname:"stream_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.stream_id!=null)b.writeI64(c("jsbi").BigInt(a.stream_id));else{var e="0";b.writeI64(c("jsbi").BigInt(e))}b.writeFieldEnd();b.writeFieldBegin({fname:"last_sequencer",ftype:h.I32,fid:2});if(a.last_sequencer!=null)b.writeI32(a.last_sequencer);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"amendment_count",ftype:h.I32,fid:4});if(a.amendment_count!=null)b.writeI32(a.amendment_count);else{e=0;b.writeI32(e)}b.writeFieldEnd();b.writeFieldBegin({fname:"last_status",ftype:h.I32,fid:3});if(a.last_status!=null){b.writeI32((e=a.last_status)!=null?e:0)}else{a=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0);b.writeI32((e=a)!=null?e:0)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function v(a,b){b.writeStructBegin("Ping");b.writeFieldBegin({fname:"caller_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.caller_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.caller_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.streams_to_check!=null){b.writeFieldBegin({fname:"streams_to_check",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.STRUCT,size:a.streams_to_check.length});for(var d=a.streams_to_check,a=Array.isArray(d),e=0,d=a?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(a){if(e>=d.length)break;f=d[e++]}else{e=d.next();if(e.done)break;f=e.value}f=f;u(f,b)}b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function w(a,b){b.writeStructBegin("Pong");b.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1});if(a.original_ping_timestamp_ms!=null)b.writeI64(c("jsbi").BigInt(a.original_ping_timestamp_ms));else{var d="0";b.writeI64(c("jsbi").BigInt(d))}b.writeFieldEnd();if(a.stream_ids_missing!=null){b.writeFieldBegin({fname:"stream_ids_missing",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});b.writeListBegin({etype:h.I64,size:a.stream_ids_missing.length});for(var d=a.stream_ids_missing,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.writeI64(c("jsbi").BigInt(g))}b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_behind!=null){b.writeFieldBegin({fname:"stream_ids_behind",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:3});b.writeListBegin({etype:h.I64,size:a.stream_ids_behind.length});for(g=a.stream_ids_behind,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}d=d;b.writeI64(c("jsbi").BigInt(d))}b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_lost_amendments!=null){b.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:4});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_lost_amendments.length});for(d=a.stream_ids_with_lost_amendments,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.writeI64(c("jsbi").BigInt(g))}b.writeListEnd();b.writeFieldEnd()}if(a.stream_ids_with_wrong_status!=null){b.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:5});b.writeListBegin({etype:h.I64,size:a.stream_ids_with_wrong_status.length});for(g=a.stream_ids_with_wrong_status,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}a=d;b.writeI64(c("jsbi").BigInt(a))}b.writeListEnd();b.writeFieldEnd()}b.writeFieldStop();b.writeStructEnd()}function x(a,b){b.writeStructBegin("StreamResponseDelta");if(a.flow_status!=null){var d;b.writeFieldBegin({fname:"flow_status",ftype:(h||(h=c("ThriftTypes"))).I32,fid:1});b.writeI32((d=a.flow_status)!=null?d:0);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.log!=null){b.writeFieldBegin({fname:"log",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});r(a.log,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.rewrite!=null){b.writeFieldBegin({fname:"rewrite",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});o(a.rewrite,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.data!=null){b.writeFieldBegin({fname:"data",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});q(a.data,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.termination!=null){b.writeFieldBegin({fname:"termination",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});s(a.termination,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend_ack!=null){b.writeFieldBegin({fname:"amend_ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});t(a.amend_ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function y(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.new_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.new_body=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers=a.readString():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).BOOL?b.kill_body=a.readBool():a.skip(e);break;case 5:e===(h||(h=c("ThriftTypes"))).BOOL?b.temporary=a.readBool():a.skip(e);break;case 6:e===(h||(h=c("ThriftTypes"))).STRUCT?b.conditional_patch_headers=z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function z(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.expected_existing_headers=a.readString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_if_match=a.readString():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.patch_headers_otherwise=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.expected_existing_headers===void 0&&(b.expected_existing_headers="");b.patch_headers_if_match===void 0&&(b.patch_headers_if_match="");return b}function A(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.bytes=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.metadata=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.bytes===void 0&&(b.bytes=Uint8Array.of());return b}function B(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.message===void 0&&(b.message="");return b}function C(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I32?b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(a.readI32()):a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).STRING?b.message=a.readString():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I64?b.retry_delay_ms=a.readI64().toString():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.reason===void 0&&(b.reason=d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0));return b}function D(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).BOOL?b.accepted=a.readBool():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).STRING?b.result=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function E(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.stream_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.last_sequencer=a.readI32():a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).I32?b.amendment_count=a.readI32():a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()):a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.stream_id===void 0&&(b.stream_id="0");b.last_sequencer===void 0&&(b.last_sequencer=0);b.amendment_count===void 0&&(b.amendment_count=0);b.last_status===void 0&&(b.last_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0));return b}function F(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.caller_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.streams_to_check=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=E(a);b.streams_to_check.push(g)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.caller_timestamp_ms===void 0&&(b.caller_timestamp_ms="0");return b}function G(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.original_ping_timestamp_ms=a.readI64().toString():a.skip(e);break;case 2:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_missing=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=a.readI64().toString();b.stream_ids_missing.push(g)}}else a.skip(e);break;case 3:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_behind=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_behind.push(d)}}else a.skip(e);break;case 4:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_lost_amendments=[];d=a.readListBegin();for(f=0;f<d.size;f++){g=a.readI64().toString();b.stream_ids_with_lost_amendments.push(g)}}else a.skip(e);break;case 5:if(e===(h||(h=c("ThriftTypes"))).LIST){b.stream_ids_with_wrong_status=[];g=a.readListBegin();for(f=0;f<g.size;f++){d=a.readI64().toString();b.stream_ids_with_wrong_status.push(d)}}else a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.original_ping_timestamp_ms===void 0&&(b.original_ping_timestamp_ms="0");return b}function H(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).I32)if(b==null)e.flow_status=d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(a.readI32()),b="flow_status";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.log=B(a),b="log";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.rewrite=y(a),b="rewrite";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.data=A(a),b="data";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.termination=C(a),b="termination";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend_ack=D(a),b="amend_ack";else throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.ResponseRewriteRequest$DefaultConstructor=a;g.ResponseRewriteConditionalPatchHeaders$DefaultConstructor=b;g.ResponseData$DefaultConstructor=e;g.LogMessage$DefaultConstructor=f;g.Termination$DefaultConstructor=i;g.AmendStreamAck$DefaultConstructor=j;g.StreamCheck$DefaultConstructor=k;g.Ping$DefaultConstructor=l;g.Pong$DefaultConstructor=m;g.StreamResponseDelta$DefaultConstructor=n;g.serializeResponseRewriteRequest=o;g.serializeResponseRewriteConditionalPatchHeaders=p;g.serializeResponseData=q;g.serializeLogMessage=r;g.serializeTermination=s;g.serializeAmendStreamAck=t;g.serializeStreamCheck=u;g.serializePing=v;g.serializePong=w;g.serializeStreamResponseDelta=x;g.deserializeResponseRewriteRequest=y;g.deserializeResponseRewriteConditionalPatchHeaders=z;g.deserializeResponseData=A;g.deserializeLogMessage=B;g.deserializeTermination=C;g.deserializeAmendStreamAck=D;g.deserializeStreamCheck=E;g.deserializePing=F;g.deserializePong=G;g.deserializeStreamResponseDelta=H}),98);
__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500});c=b("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"});e.exports={Ack:a,Payload$Types:c}}),null);
__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{}}function b(){return{body:Uint8Array.of()}}function e(){return{amendment:Uint8Array.of()}}function f(){return{ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function i(){return{delta:[]}}function j(){return{}}function k(a,b){b.writeStructBegin("RequestStreamHeaders"),a.headers!=null&&(b.writeFieldBegin({fname:"headers",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1}),b.writeBinary(a.headers),b.writeFieldEnd()),a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd()),b.writeFieldStop(),b.writeStructEnd()}function l(a,b){b.writeStructBegin("RequestStreamBody");b.writeFieldBegin({fname:"body",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:1});if(a.body!=null)b.writeBinary(a.body);else{a=Uint8Array.of();b.writeBinary(a)}b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd()}function m(a,b){b.writeStructBegin("AmendStream");a.amendment_id!=null&&(b.writeFieldBegin({fname:"amendment_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.amendment_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"amendment",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:2});if(a.amendment!=null)b.writeBinary(a.amendment);else{var d=Uint8Array.of();b.writeBinary(d)}b.writeFieldEnd();a.is_query!=null&&(b.writeFieldBegin({fname:"is_query",ftype:(h||(h=c("ThriftTypes"))).BOOL,fid:3}),b.writeBool(a.is_query),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function n(a,b){b.writeStructBegin("StreamResponseAck");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).I32,fid:2});if(a.ack!=null){var e;b.writeI32((e=a.ack)!=null?e:0)}else{e=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0);b.writeI32((e=e)!=null?e:0)}b.writeFieldEnd();a.query_result!=null&&(b.writeFieldBegin({fname:"query_result",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:3}),b.writeBinary(a.query_result),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function o(a,b){b.writeStructBegin("StreamResponse");a.response_id!=null&&(b.writeFieldBegin({fname:"response_id",ftype:(h||(h=c("ThriftTypes"))).I64,fid:1}),b.writeI64(c("jsbi").BigInt(a.response_id)),b.writeFieldEnd());b.writeFieldBegin({fname:"delta",ftype:(h||(h=c("ThriftTypes"))).LIST,fid:2});if(a.delta!=null){b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:a.delta.length});for(var e=a.delta,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(i,b)}b.writeListEnd()}else{i=[];b.writeListBegin({etype:(h||(h=c("ThriftTypes"))).STRUCT,size:i.length});for(g=0;g<i.length;g++){f=i[g];d("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(f,b)}b.writeListEnd()}b.writeFieldEnd();if(a.ack_level!=null){b.writeFieldBegin({fname:"ack_level",ftype:(h||(h=c("ThriftTypes"))).I32,fid:3});b.writeI32((e=a.ack_level)!=null?e:0);b.writeFieldEnd()}a.query_request!=null&&(b.writeFieldBegin({fname:"query_request",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:4}),b.writeBinary(a.query_request),b.writeFieldEnd());a.instrumentation_data!=null&&(b.writeFieldBegin({fname:"instrumentation_data",ftype:(h||(h=c("ThriftTypes"))).STRING,fid:5}),b.writeBinary(a.instrumentation_data),b.writeFieldEnd());b.writeFieldStop();b.writeStructEnd()}function p(a,b){b.writeStructBegin("Payload");if(a.request_headers!=null){b.writeFieldBegin({fname:"request_headers",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:1});k(a.request_headers,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.request_body!=null){b.writeFieldBegin({fname:"request_body",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:2});l(a.request_body,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.amend!=null){b.writeFieldBegin({fname:"amend",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:3});m(a.amend,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ack!=null){b.writeFieldBegin({fname:"ack",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:4});n(a.ack,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.response!=null){b.writeFieldBegin({fname:"response",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:5});o(a.response,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.ping!=null){b.writeFieldBegin({fname:"ping",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:6});d("RequestStreamCommonRequestStreamCommonSerializers").serializePing(a.ping,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}if(a.pong!=null){b.writeFieldBegin({fname:"pong",ftype:(h||(h=c("ThriftTypes"))).STRUCT,fid:7});d("RequestStreamCommonRequestStreamCommonSerializers").serializePong(a.pong,b);b.writeFieldEnd();b.writeFieldStop();b.writeStructEnd();return}b.writeFieldStop();b.writeStructEnd()}function q(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.headers=a.readBinary():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return b}function r(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).STRING?b.body=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.body===void 0&&(b.body=Uint8Array.of());return b}function s(a){var b={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===(h||(h=c("ThriftTypes"))).STOP)break;switch(d){case 1:e===(h||(h=c("ThriftTypes"))).I64?b.amendment_id=a.readI64().toString():a.skip(e);break;case 2:e===(h||(h=c("ThriftTypes"))).STRING?b.amendment=a.readBinary():a.skip(e);break;case 3:e===(h||(h=c("ThriftTypes"))).BOOL?b.is_query=a.readBool():a.skip(e);break;case 4:e===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();b.amendment===void 0&&(b.amendment=Uint8Array.of());return b}function t(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:f===(h||(h=c("ThriftTypes"))).I32?b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(a.readI32()):a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).STRING?b.query_result=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.ack===void 0&&(b.ack=d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0));return b}function u(a){var b={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===(h||(h=c("ThriftTypes"))).STOP)break;switch(e){case 1:f===(h||(h=c("ThriftTypes"))).I64?b.response_id=a.readI64().toString():a.skip(f);break;case 2:if(f===(h||(h=c("ThriftTypes"))).LIST){b.delta=[];e=a.readListBegin();for(var g=0;g<e.size;g++){var i=d("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(a);b.delta.push(i)}}else a.skip(f);break;case 3:f===(h||(h=c("ThriftTypes"))).I32?b.ack_level=d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(a.readI32()):a.skip(f);break;case 4:f===(h||(h=c("ThriftTypes"))).STRING?b.query_request=a.readBinary():a.skip(f);break;case 5:f===(h||(h=c("ThriftTypes"))).STRING?b.instrumentation_data=a.readBinary():a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();b.delta===void 0&&(b.delta=[]);return b}function v(a){var b,e={};a.readStructBegin();while(!0){var f=a.readFieldBegin(),g=f.ftype;f=f.fid;if(g===(h||(h=c("ThriftTypes"))).STOP)break;switch(f){case 1:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_headers=q(a),b="request_headers";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+b);else a.skip(g);break;case 2:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.request_body=r(a),b="request_body";else throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+b);else a.skip(g);break;case 3:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.amend=s(a),b="amend";else throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+b);else a.skip(g);break;case 4:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ack=t(a),b="ack";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+b);else a.skip(g);break;case 5:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.response=u(a),b="response";else throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+b);else a.skip(g);break;case 6:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.ping=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(a),b="ping";else throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+b);else a.skip(g);break;case 7:if(g===(h||(h=c("ThriftTypes"))).STRUCT)if(b==null)e.pong=d("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(a),b="pong";else throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+b);else a.skip(g);break;default:a.skip(g)}a.readFieldEnd()}a.readStructEnd();return e}g.RequestStreamHeaders$DefaultConstructor=a;g.RequestStreamBody$DefaultConstructor=b;g.AmendStream$DefaultConstructor=e;g.StreamResponseAck$DefaultConstructor=f;g.StreamResponse$DefaultConstructor=i;g.Payload$DefaultConstructor=j;g.serializeRequestStreamHeaders=k;g.serializeRequestStreamBody=l;g.serializeAmendStream=m;g.serializeStreamResponseAck=n;g.serializeStreamResponse=o;g.serializePayload=p;g.deserializeRequestStreamHeaders=q;g.deserializeRequestStreamBody=r;g.deserializeAmendStream=s;g.deserializeStreamResponseAck=t;g.deserializeStreamResponse=u;g.deserializePayload=v}),98);
__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(b){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:if(a.seenAccepted)return a;return a.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?a:{flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:if(!a.seenAccepted||a.flowStatus===b)return a;else return{flowStatus:b,seenAccepted:!0}}}g.getNextState=a}),98);
__d("StreamRetryState",[],(function(a,b,c,d,e,f){"use strict";var g=1e3,h=2*60*1e3;a=function(){function a(){this.$1=0}var b=a.prototype;b.resetErrorAndRetryCount=function(){this.$1=0};b.onRetry=function(){this.$1+=1};b.getRetryCount=function(){return this.$1};b.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(this.$1===2)return g*Math.random();var a=g*Math.pow(2,this.$1-3),b=a*Math.random();a=a+b;return Math.min(a,h)};return a}();f["default"]=a}),66);
__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","Promise","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","err","gkx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=4,j=0,k=1e3,l=2,m=c("gkx")("20915")?3e4:5e3,n="dgw_stream_send_ack_failure";function o(a){if(!a){a=c("err")(n);a.stack;throw a}}function p(a,b){if(a==null||a.length===0)return null;a=JSON.parse(a);a.auxId=b;return new TextEncoder().encode(JSON.stringify(a))}function q(a){var b={};a=a.delta;a.forEach(function(a){if(a.flow_status){b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status;switch(a.flow_status){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:b.flow_status="Accepted";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:b.flow_status="Started";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:b.flow_status="Stopped";break}}else a.log?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:a.rewrite?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:a.data?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:a.termination?b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:a.amend_ack&&(b.type=d("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)});return b}a=function(){function a(a,b,e,f,g,h){var j=this;this.$6=null;this.$7={};this.$10=!1;this.$15=new(c("StreamRetryState"))();this.$16=0;this.$17=0;this.$18=0;this.$21=0;var k=null;typeof b==="string"?k=new TextEncoder().encode(b):typeof b==="object"&&(k=b);this.$1={headers:a,body:k};this.$3=e;this.$4=f;this.$12=i;this.$9=!1;this.$14=!1;this.$20=h;k=f==null?void 0:f.serviceId;g!=null&&(this.$22()||(g.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId(k)),g.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(k),g.transport="WEB_RS_STARGATE");this.$5=d("RequestStreamE2ESampling").validateInstrumentationData(a,g,f==null?void 0:f.requestLogContext,f==null?void 0:f.upsampleMultiplier);!this.$22()?this.$6=d("RequestStreamE2ELogger").createStreamLogger(a,this.$5,d("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE):this.$7.disableFalcoLogging=!0;(f==null?void 0:f.deviceId)!=null&&(this.$7.deviceId=f.deviceId);this.$6&&(this.$7.loggingId=this.$6.getRequestId());f&&f.overrideUrl!=null&&(this.$7.overrideUrl=f.overrideUrl);k!=null&&(this.$7.serviceId=k);this.$8={flowStatus:d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1};this.$19=new(c("InflightAmends"))(m,function(a,b){var d;(d=j.$6)==null?void 0:d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers["extends"]({},j.$23(),{latency:b.toString()}),a)},function(a,b){if(b.message!==n){var d;(d=j.$6)==null?void 0:d.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers["extends"]({},j.$23(),{reason:b.message}),a)}});(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:(g=b==null?void 0:(h=b.length)==null?void 0:h.toString())!=null?g:"0"},"0","0")}var e=a.prototype;e.getInstrumentationData=function(){return this.$5};e.getE2EClientLogger=function(){return this.$6};e.amendWithAck=function(a){a=this.$24(a,!0);return a==null?(h||(h=b("Promise"))).resolve(!1):this.$19.getPromise(a)||(h||(h=b("Promise"))).resolve(!1)};e.amendWithoutAck=function(a){this.$24(a,!1)};e.cancel=function(){var a;(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").CANCEL,c("RequestStreamE2EClientLoggerEvent").RECEIVED);this.$9=!0;this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)};e.start=function(a){var e=this;a===void 0&&(a=!1);var f=String(this.$16++),g=Date.now();return this.$26(f).then(function(){var a;e.$14=!1;e.$21=0;var b=(Date.now()-g).toString();(a=e.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:b},f,String(e.$18))})["catch"](function(g){g.stack;if(g.message===n&&e.$10)return;e.$14=!1;if(g!==d("DGWStream").StreamError.ESTABLISHMENT_ERROR){var i,j=g.message;g===d("DGWStream").StreamError.UNAUTHENTICATED?j="UNAUTHENTICATED":g===d("DGWStream").StreamError.UNAUTHORIZED&&(j="UNAUTHORIZED");(i=e.$6)==null?void 0:i.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:j},f,String(e.$18));e.$25(a?d("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:d("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,j,!0);if(g===d("DGWStream").StreamError.UNAUTHENTICATED||g===d("DGWStream").StreamError.UNAUTHORIZED)return;throw g}else{(i=e.$6)==null?void 0:i.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:(j=g.message)!=null?j:g},f,String(e.$18));e.$15.onRetry();var m=c("gkx")("20916")?e.$15.getBackoffDelayMs():k*Math.pow(l,e.$21);return new(h||(h=b("Promise")))(function(a){return window.setTimeout(a,m)}).then(function(){e.$21++;e.$18++;return e.start()})}})};e.getFlowStatus=function(){return this.$8.flowStatus};e.shouldTerminateOrRetry=function(a,e,f,g){var i=this;if(this.$14)return;var k=e;this.$12||(k="cannot retry for error: "+e+" because of hit max retry limitation");if(a!==d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError){(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:k},null,String(this.$18))}e=f&&(c("gkx")("20916")||this.$12);this.$25(a,k,!e);if(e){var l=c("gkx")("20916")?Math.max((f=g)!=null?f:0,this.$15.getBackoffDelayMs()):(a=g)!=null?a:j;this.$14=!0;return new(h||(h=b("Promise")))(function(a){return window.setTimeout(a,l)}).then(function(){return i.$27()})["catch"](function(a){})}};e.$28=function(){return this.$11!=null};e.$24=function(a,b){var e,f=this,g=typeof a==="string"?new TextEncoder().encode(a):a,h=String(this.$17++);(e=this.$6)==null?void 0:e.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").RECEIVED,{},h);e=p(this.$5,h);g={amend:{amendment:g,instrumentation_data:e}};b&&g.amend&&(g.amend.amendment_id=h);e=d("CompactSerializerPolyfill").serialize(g,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);var i=Date.now();if(this.$29()&&this.$11!=null){b&&this.$19.add(h);this.$11.send(e).then(function(a){var b;o(a);a=(Date.now()-i).toString();(b=f.$6)==null?void 0:b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:a},h)})["catch"](function(a){var b;(b=f.$6)==null?void 0:b.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:a.message},h);f.$19.reject(h,a)});(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").SENT,{data_size:(e=a==null?void 0:(b=a.length)==null?void 0:b.toString())!=null?e:"0"},h);return h}else{(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").AMENDMENT,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},h)}};e.$26=function(a){var e=this,f,g,h,j,k,l,m,n,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:if(this.$9){q.next=39;break}g=this.$2||this.$1;q.prev=2;h=this.$30();this.$13=h;j=g.headers.graphiql_sandbox;k=babelHelpers["extends"]({},g.headers,this.$31());j!=null&&(k=babelHelpers["extends"]({},k,{www_sandbox:j,distillery_sandbox:j+":8086"}));l=d("DGWRequestStreamUtils").convertHeaders(k,g.body!=null,this.$5);q.next=11;return b("regeneratorRuntime").awrap(this.$20.establishStream(l,h,this.$7));case 11:this.$11=q.sent;q.next=26;break;case 14:q.prev=14;q.t0=q["catch"](2);if(!(q.t0===d("DGWStream").StreamError.ESTABLISHMENT_ERROR)){q.next=18;break}throw q.t0;case 18:if(!(d("DGWStream").StreamError.isValid(q.t0)&&!d("DGWStream").isRetryableError(q.t0))){q.next=22;break}throw q.t0;case 22:if(!(d("DGWStream").StreamError.isValid(q.t0)&&d("DGWStream").isRetryableError(q.t0))){q.next=25;break}this.$32(q.t0);return q.abrupt("return");case 25:throw q.t0;case 26:if(!this.$9){q.next=29;break}this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0);return q.abrupt("return");case 29:m=new Uint8Array([]);g.body!=null&&(n={request_body:{body:g.body}},m=d("CompactSerializerPolyfill").serialize(n,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload));if(this.$11){q.next=33;break}throw new Error("dgwstream_is_null");case 33:p=this.$11.send(m).then(function(a){o(a),e.$9&&e.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)});(f=this.$6)==null?void 0:f.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").SENT,{},a,String(this.$18));this.$12=i;return q.abrupt("return",p);case 39:throw new Error("stream_already_canceled");case 40:case"end":return q.stop()}},null,this,[[2,14]])};e.$29=function(){return this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted};e.$25=function(a,b,c){var e;this.$11&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&a!==d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close();(e=this.$13)==null?void 0:e.stop();this.$11=null;this.$10=!0;this.$33(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped);c&&!this.$9&&this.$3.onTermination("terminate stream because "+a+" with msg : "+b)};e.$33=function(a){var b=this.$8;this.$8=d("RequestStreamState").getNextState(b,a);return b!==this.$8};e.$27=function(){this.$12--;this.$18++;this.$15.onRetry();return this.start(!0)};e.$34=function(a){var b=this;a=d("CompactSerializerPolyfill").deserialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload);if(a.response){var e=d("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(a),f=e==null?void 0:e.auxId;e=e==null?void 0:e.dfTraceId;if(!this.$28()){var g;(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},f,String(this.$18),e);return}(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").RECEIVED,q(a.response),f,String(this.$18),e);g=a.response.delta;g.forEach(function(a){if(a.data)b.$15.resetErrorAndRetryCount(),b.$8.flowStatus===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&b.$3.onData(new TextDecoder("utf-8").decode(a.data.bytes));else if(a.flow_status){var c=a.flow_status;c===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&b.$15.resetErrorAndRetryCount();b.$33(c)&&b.$3.onFlowStatus(c)}else if(a.termination){c=(c=a.termination.message)!=null?c:"unknown termination msg";b.$2=null;b.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,c,a.termination.reason===d("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,a.termination.retry_delay_ms!=null?parseInt(a.termination.retry_delay_ms,10):null)}else if(a.log)b.$3.onLog(a.log.message);else if(a.amend_ack){c=a.amend_ack.amendment_id;if(c!=null){var e=a.amend_ack.accepted||!1;b.$19.resolve(c,e)}}else if(a.rewrite){c=d("DGWRequestStreamUtils").transformContextWithRewriteDelta(b.$1,a.rewrite);a.rewrite.temporary===!0?b.$2=c:b.$1=c}});(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").SENT,q(a.response),f,String(this.$18),e);a.response.ack_level===d("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&a.response.response_id!=null&&this.$35(a.response.response_id,f)}else{(g=this.$6)==null?void 0:g.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))}};e.$35=function(a,b){a={ack:{response_id:a,ack:d("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}};a=d("CompactSerializerPolyfill").serialize(a,d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);if(this.$11!=null){this.$11.send(a);(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").SENT,{},b,String(this.$18))}else{(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},b,String(this.$18))}};e.$22=function(){return this.$1.headers.method==="Falco"};e.$30=function(){return new(c("DGWStreamHandler"))(this.$36.bind(this),this.$37.bind(this),this.$32.bind(this),this.$38.bind(this),this.$39.bind(this))};e.$39=function(a){(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)};e.$36=function(a){(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18));this.$25(d("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)};e.$37=function(a){try{this.$34(a)}catch(b){(a=this.$6)==null?void 0:a.logE2EEvent(c("RequestStreamE2EClientLoggerMessageType").RESPONSE,c("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:b.message},null,String(this.$18));this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,b.message,!1)}};e.$32=function(a){var b="",c=d("DGWStream").isRetryableError(a);b="StreamError: Received "+a;this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,b,c)};e.$38=function(a,b){this.shouldTerminateOrRetry(d("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,b,!0)};e.$31=function(){return c("RtiWebRequestStreamClient").overrideHeaders};e.$23=function(){var a={};c("gkx")("20918")&&(a.pending_amendments_size=this.$19.getSize().toString());return a};return a}();g["default"]=a}),98);
__d("DGWStreamGroupHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.onStreamGroupError=function(a){this.$1(a)};b.onStreamGroupMustDrain=function(a){this.$2(a)};b.onStreamGroupTransportClose=function(){this.$3()};return a}();f["default"]=a}),66);
__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="realtime",j=1e4,k=null;a=function(){function a(){this.$1={}}a.get=function(){k==null&&(k=new a());return k};var d=a.prototype;d.$2=function(a){var b;this.$1=(b={},b[a]={dgwStreamGroup:null,multiStreamGroupLoggingId:null,multiStreamGroupPriorStreamCountGuess:0},b)};d.getStreamGroupLoggingId=function(a){a===void 0&&(a=null);return(a=this.$1[(a=a)!=null?a:i])==null?void 0:a.multiStreamGroupLoggingId};d.guessStreamGroupPriorStreamCount=function(a){a===void 0&&(a=null);return((a=this.$1[(a=a)!=null?a:i])==null?void 0:a.multiStreamGroupPriorStreamCountGuess)||0};d.establishStream=function(a,d,e){var f,g=this,k=e.serviceId==null?i:e.serviceId;f=(f=this.$1[k])==null?void 0:f.dgwStreamGroup;if(f==null||!f.canCreateGroupedStream()){var l={deviceId:e.deviceId,serviceId:k,disableFalcoLogging:e.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"}};e.overrideUrl!=null&&(l.overrideUrl=e.overrideUrl);l.keepAliveMs=j;c("gkx")("20920")&&(l.loggingId=c("uuidv4")());try{f=c("DGWClient")().createStreamGroup(new(c("DGWStreamGroupHandler"))(function(){g.$2(k)},function(){g.$2(k)},function(){g.$2(k)}),l),this.$1[k]={dgwStreamGroup:f,multiStreamGroupLoggingId:l.loggingId,multiStreamGroupPriorStreamCountGuess:0}}catch(a){return(h||(h=b("Promise"))).reject(a)}}this.$1[k].multiStreamGroupPriorStreamCountGuess++;return f.establishStream({loggingId:e.loggingId,disableFalcoLogging:e.disableFalcoLogging,groupedStreamHeaders:a},d)};return a}();g["default"]=a}),98);
__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$1=a!=null?a:c("DGWStreamFactory").get()}var d=a.prototype;d.createStream=function(a,d,e,f,g){b("cr:2046346")!=null&&b("cr:2046346").startPulsarTest();return(h||(h=b("Promise"))).resolve(new(c("DGWRequestStreamRef"))(a,d,f,g,e,this.$1))};return a}();g["default"]=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("lodash-4.17.15",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g},i;function j(){(function(){var b,c="4.17.15",d=200,e="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",j="__lodash_hash_undefined__",k=500,l="__lodash_placeholder__",m=1,n=2,o=4,p=1,q=2,r=1,s=2,t=4,u=8,v=16,w=32,x=64,y=128,z=256,A=512,B=30,aa="...",ba=800,ca=16,da=1,ea=2,C=3,fa=1/0,ga=9007199254740991,ha=17976931348623157e292,ia=0/0,D=4294967295,ja=D-1,ka=D>>>1,la=[["ary",y],["bind",r],["bindKey",s],["curry",u],["curryRight",v],["flip",A],["partial",w],["partialRight",x],["rearg",z]],ma="[object Arguments]",na="[object Array]",oa="[object AsyncFunction]",pa="[object Boolean]",qa="[object Date]",ra="[object DOMException]",sa="[object Error]",ta="[object Function]",ua="[object GeneratorFunction]",E="[object Map]",va="[object Number]",wa="[object Null]",xa="[object Object]",F="[object Promise]",ya="[object Proxy]",za="[object RegExp]",Aa="[object Set]",Ba="[object String]",Ca="[object Symbol]",Da="[object Undefined]",Ea="[object WeakMap]",Fa="[object WeakSet]",Ga="[object ArrayBuffer]",Ha="[object DataView]",Ia="[object Float32Array]",Ja="[object Float64Array]",Ka="[object Int8Array]",La="[object Int16Array]",Ma="[object Int32Array]",Na="[object Uint8Array]",Oa="[object Uint8ClampedArray]",Pa="[object Uint16Array]",Qa="[object Uint32Array]",Ra=/\b__p \+= '';/g,Sa=/\b(__p \+=) '' \+/g,Ta=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ua=/&(?:amp|lt|gt|quot|#39);/g,Va=/[&<>"']/g,Wa=RegExp(Ua.source),Xa=RegExp(Va.source),Ya=/<%-([\s\S]+?)%>/g,Za=/<%([\s\S]+?)%>/g,$a=/<%=([\s\S]+?)%>/g,ab=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bb=/^\w*$/,cb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,db=/[\\^$.*+?()[\]{}|]/g,eb=RegExp(db.source),fb=/^\s+|\s+$/g,gb=/^\s+/,hb=/\s+$/,ib=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jb=/\{\n\/\* \[wrapped with (.+)\] \*/,kb=/,? & /,lb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mb=/\\(\\)?/g,nb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ob=/\w*$/,pb=/^[-+]0x[0-9a-f]+$/i,qb=/^0b[01]+$/i,rb=/^\[object .+?Constructor\]$/,sb=/^0o[0-7]+$/i,tb=/^(?:0|[1-9]\d*)$/,ub=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vb=/($^)/,wb=/['\n\r\u2028\u2029\\]/g,xb="\\ud800-\\udfff",G="\\u0300-\\u036f",H="\\ufe20-\\ufe2f",yb="\\u20d0-\\u20ff";G=G+H+yb;H="\\u2700-\\u27bf";yb="a-z\\xdf-\\xf6\\xf8-\\xff";var I="\\xac\\xb1\\xd7\\xf7",zb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ab="\\u2000-\\u206f",Bb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cb="A-Z\\xc0-\\xd6\\xd8-\\xde",Db="\\ufe0e\\ufe0f";I=I+zb+Ab+Bb;zb="['\u2019]";Ab="["+xb+"]";Bb="["+I+"]";var J="["+G+"]",Eb="\\d+",Fb="["+H+"]",Gb="["+yb+"]";I="[^"+xb+I+Eb+H+yb+Cb+"]";H="\\ud83c[\\udffb-\\udfff]";yb="(?:"+J+"|"+H+")";var Hb="[^"+xb+"]",Ib="(?:\\ud83c[\\udde6-\\uddff]){2}",Jb="[\\ud800-\\udbff][\\udc00-\\udfff]";Cb="["+Cb+"]";var K="\\u200d",Kb="(?:"+Gb+"|"+I+")";I="(?:"+Cb+"|"+I+")";var Lb="(?:"+zb+"(?:d|ll|m|re|s|t|ve))?",Mb="(?:"+zb+"(?:D|LL|M|RE|S|T|VE))?";yb=yb+"?";var Nb="["+Db+"]?",Ob="(?:"+K+"(?:"+[Hb,Ib,Jb].join("|")+")"+Nb+yb+")*",Pb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qb="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])";Nb=Nb+yb+Ob;yb="(?:"+[Fb,Ib,Jb].join("|")+")"+Nb;Ob="(?:"+[Hb+J+"?",J,Ib,Jb,Ab].join("|")+")";var Rb=RegExp(zb,"g"),Sb=RegExp(J,"g"),Tb=RegExp(H+"(?="+H+")|"+Ob+Nb,"g"),Ub=RegExp([Cb+"?"+Gb+"+"+Lb+"(?="+[Bb,Cb,"$"].join("|")+")",I+"+"+Mb+"(?="+[Bb,Cb+Kb,"$"].join("|")+")",Cb+"?"+Kb+"+"+Lb,Cb+"+"+Mb,Qb,Pb,Eb,yb].join("|"),"g"),Vb=RegExp("["+K+xb+G+Db+"]"),Wb=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xb=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yb=-1,L={};L[Ia]=L[Ja]=L[Ka]=L[La]=L[Ma]=L[Na]=L[Oa]=L[Pa]=L[Qa]=!0;L[ma]=L[na]=L[Ga]=L[pa]=L[Ha]=L[qa]=L[sa]=L[ta]=L[E]=L[va]=L[xa]=L[za]=L[Aa]=L[Ba]=L[Ea]=!1;var M={};M[ma]=M[na]=M[Ga]=M[Ha]=M[pa]=M[qa]=M[Ia]=M[Ja]=M[Ka]=M[La]=M[Ma]=M[E]=M[va]=M[xa]=M[za]=M[Aa]=M[Ba]=M[Ca]=M[Na]=M[Oa]=M[Pa]=M[Qa]=!0;M[sa]=M[ta]=M[Ea]=!1;Fb={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"};Hb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};Ib={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var Zb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$b=parseFloat,ac=parseInt;Jb=typeof a=="object"&&a&&a.Object===Object&&a;Ab=typeof self=="object"&&self&&self.Object===Object&&self;var N=Jb||Ab||Function("return this")();zb=typeof g=="object"&&g&&!g.nodeType&&g;J=zb&&typeof h=="object"&&h&&!h.nodeType&&h;var bc=J&&J.exports===zb;bc&&Jb.process;H=null;var cc=H&&H.isArrayBuffer,dc=H&&H.isDate,ec=H&&H.isMap,fc=H&&H.isRegExp,gc=H&&H.isSet,hc=H&&H.isTypedArray;function ic(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function jc(a,b,c,d){var e=-1,f=a==null?0:a.length;while(++e<f){var g=a[e];b(d,g,c(g),a)}return d}function kc(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(b(a[c],c,a)===!1)break;return a}function lc(a,b){var c=a==null?0:a.length;while(c--)if(b(a[c],c,a)===!1)break;return a}function mc(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(!b(a[c],c,a))return!1;return!0}function nc(a,b){var c=-1,d=a==null?0:a.length,e=0,f=[];while(++c<d){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function oc(a,b){var c=a==null?0:a.length;return!!c&&zc(a,b,0)>-1}function pc(a,b,c){var d=-1,e=a==null?0:a.length;while(++d<e)if(c(b,a[d]))return!0;return!1}function O(a,b){var c=-1,d=a==null?0:a.length,e=Array(d);while(++c<d)e[c]=b(a[c],c,a);return e}function qc(a,b){var c=-1,d=b.length,e=a.length;while(++c<d)a[e+c]=b[c];return a}function rc(a,b,c,d){var e=-1,f=a==null?0:a.length;d&&f&&(c=a[++e]);while(++e<f)c=b(c,a[e],e,a);return c}function sc(a,b,c,d){var e=a==null?0:a.length;d&&e&&(c=a[--e]);while(e--)c=b(c,a[e],e,a);return c}function tc(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(b(a[c],c,a))return!0;return!1}var uc=Dc("length");function vc(a){return a.split("")}function wc(a){return a.match(lb)||[]}function xc(a,b,c){var d;c(a,function(c,e,a){if(b(c,e,a)){d=e;return!1}});return d}function yc(a,b,c,d){var e=a.length;c=c+(d?1:-1);while(d?c--:++c<e)if(b(a[c],c,a))return c;return-1}function zc(a,b,c){return b===b?bd(a,b,c):yc(a,Bc,c)}function Ac(a,b,c,d){c=c-1;var e=a.length;while(++c<e)if(d(a[c],b))return c;return-1}function Bc(a){return a!==a}function Cc(a,b){var c=a==null?0:a.length;return c?Hc(a,b)/c:ia}function Dc(a){return function(b){return b==null?void 0:b[a]}}function Ec(a){return function(b){return a==null?void 0:a[b]}}function Fc(a,b,c,d,e){e(a,function(e,f,a){c=d?(d=!1,e):b(c,e,f,a)});return c}function Gc(a,b){var c=a.length;a.sort(b);while(c--)a[c]=a[c].value;return a}function Hc(a,b){var c,d=-1,e=a.length;while(++d<e){var f=b(a[d]);f!==void 0&&(c=c===void 0?f:c+f)}return c}function Ic(a,b){var c=-1,d=Array(a);while(++c<a)d[c]=b(c);return d}function Jc(a,b){return O(b,function(b){return[b,a[b]]})}function Kc(a){return function(b){return a(b)}}function Lc(a,b){return O(b,function(b){return a[b]})}function Mc(a,b){return a.has(b)}function Nc(a,b){var c=-1,d=a.length;while(++c<d&&zc(b,a[c],0)>-1);return c}function Oc(a,b){var c=a.length;while(c--&&zc(b,a[c],0)>-1);return c}function Pc(a,b){var c=a.length,d=0;while(c--)a[c]===b&&++d;return d}var Qc=Ec(Fb),Rc=Ec(Hb);function Sc(a){return"\\"+Zb[a]}function Tc(a,b){return a==null?void 0:a[b]}function Uc(a){return Vb.test(a)}function Vc(a){return Wb.test(a)}function Wc(a){var b,c=[];while(!(b=a.next()).done)c.push(b.value);return c}function Xc(a){var b=-1,c=Array(a.size);a.forEach(function(a,d){c[++b]=[d,a]});return c}function Yc(a,b){return function(c){return a(b(c))}}function Zc(a,b){var c=-1,d=a.length,e=0,f=[];while(++c<d){var g=a[c];(g===b||g===l)&&(a[c]=l,f[e++]=c)}return f}function $c(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}function ad(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=[a,a]});return c}function bd(a,b,c){c=c-1;var d=a.length;while(++c<d)if(a[c]===b)return c;return-1}function cd(a,b,c){c=c+1;while(c--)if(a[c]===b)return c;return c}function dd(a){return Uc(a)?gd(a):uc(a)}function ed(a){return Uc(a)?hd(a):vc(a)}var fd=Ec(Ib);function gd(a){var b=Tb.lastIndex=0;while(Tb.test(a))++b;return b}function hd(a){return a.match(Tb)||[]}function id(a){return a.match(Ub)||[]}Ob=function a(b){b=b==null?N:jd.defaults(N.Object(),b,jd.pick(N,Xb));var g=b.Array,h=b.Date,i=b.Error,lb=b.Function,xb=b.Math,G=b.Object,H=b.RegExp,yb=b.String,I=b.TypeError,zb=g.prototype,Ab=lb.prototype,Bb=G.prototype,Cb=b["__core-js_shared__"],Db=Ab.toString,J=Bb.hasOwnProperty,Eb=0,Fb=function(){var a=/[^.]+$/.exec(Cb&&Cb.keys&&Cb.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Gb=Bb.toString,Hb=Db.call(G),Ib=N._,Jb=H("^"+Db.call(J).replace(db,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Ab=bc?b.Buffer:void 0;var K=b.Symbol,Kb=b.Uint8Array,Lb=Ab?Ab.allocUnsafe:void 0,Mb=Yc(G.getPrototypeOf,G),Nb=G.create,Ob=Bb.propertyIsEnumerable,Pb=zb.splice,Qb=K?K.isConcatSpreadable:void 0,Tb=K?K.iterator:void 0,Ub=K?K.toStringTag:void 0,Vb=function(){try{var a=Yg(G,"defineProperty");a({},"",{});return a}catch(a){}}(),Wb=b.clearTimeout!==N.clearTimeout&&b.clearTimeout,Zb=h&&h.now!==N.Date.now&&h.now,uc=b.setTimeout!==N.setTimeout&&b.setTimeout,vc=xb.ceil,Ec=xb.floor,bd=G.getOwnPropertySymbols;Ab=Ab?Ab.isBuffer:void 0;var gd=b.isFinite,hd=zb.join,kd=Yc(G.keys,G),P=xb.max,ld=xb.min,md=h.now,nd=b.parseInt,od=xb.random,pd=zb.reverse;h=Yg(b,"DataView");var qd=Yg(b,"Map"),rd=Yg(b,"Promise"),sd=Yg(b,"Set");b=Yg(b,"WeakMap");var td=Yg(G,"create"),ud=b&&new b,vd={},wd=Kh(h),xd=Kh(qd),yd=Kh(rd),zd=Kh(sd),Ad=Kh(b);K=K?K.prototype:void 0;var Bd=K?K.valueOf:void 0,Cd=K?K.toString:void 0;function Q(a){if(X(a)&&!U(a)&&!(a instanceof R)){if(a instanceof Fd)return a;if(J.call(a,"__wrapped__"))return Mh(a)}return new Fd(a)}var Dd=function(){function a(){}return function(b){if(!W(b))return{};if(Nb)return Nb(b);a.prototype=b;b=new a;a.prototype=void 0;return b}}();function Ed(){}function Fd(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=void 0}Q.templateSettings={escape:Ya,evaluate:Za,interpolate:$a,variable:"",imports:{_:Q}};Q.prototype=Ed.prototype;Q.prototype.constructor=Q;Fd.prototype=Dd(Ed.prototype);Fd.prototype.constructor=Fd;function R(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function Gd(){var a=new R(this.__wrapped__);a.__actions__=ig(this.__actions__);a.__dir__=this.__dir__;a.__filtered__=this.__filtered__;a.__iteratees__=ig(this.__iteratees__);a.__takeCount__=this.__takeCount__;a.__views__=ig(this.__views__);return a}function Hd(){if(this.__filtered__){var a=new R(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Id(){var b=this.__wrapped__.value(),c=this.__dir__,d=U(b),e=c<0,f=d?b.length:0,g=ch(0,f,this.__views__),h=g.start;g=g.end;var i=g-h;g=e?g:h-1;h=this.__iteratees__;var j=h.length,k=0,l=ld(i,this.__takeCount__);if(!d||!e&&f==i&&l==i)return Rf(b,this.__actions__);d=[];outer:while(i--&&k<l){g+=c;e=-1;f=b[g];while(++e<j){var m=h[e],a=m.iteratee;m=m.type;a=a(f);if(m==ea)f=a;else if(!a)if(m==da)continue outer;else break outer}d[k++]=f}return d}R.prototype=Dd(Ed.prototype);R.prototype.constructor=R;function Jd(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}function Kd(){this.__data__=td?td(null):{},this.size=0}function Ld(a){a=this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a}function Md(b){var c=this.__data__;if(td){var a=c[b];return a===j?void 0:a}return J.call(c,b)?c[b]:void 0}function Nd(a){var b=this.__data__;return td?b[a]!==void 0:J.call(b,a)}function Od(a,b){var c=this.__data__;this.size+=this.has(a)?0:1;c[a]=td&&b===void 0?j:b;return this}Jd.prototype.clear=Kd;Jd.prototype["delete"]=Ld;Jd.prototype.get=Md;Jd.prototype.has=Nd;Jd.prototype.set=Od;function Pd(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}function Qd(){this.__data__=[],this.size=0}function Rd(a){var b=this.__data__;a=pe(b,a);if(a<0)return!1;var c=b.length-1;a==c?b.pop():Pb.call(b,a,1);--this.size;return!0}function Sd(a){var b=this.__data__;a=pe(b,a);return a<0?void 0:b[a][1]}function Td(a){return pe(this.__data__,a)>-1}function Ud(a,b){var c=this.__data__,d=pe(c,a);d<0?(++this.size,c.push([a,b])):c[d][1]=b;return this}Pd.prototype.clear=Qd;Pd.prototype["delete"]=Rd;Pd.prototype.get=Sd;Pd.prototype.has=Td;Pd.prototype.set=Ud;function Vd(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}function Wd(){this.size=0,this.__data__={hash:new Jd,map:new(qd||Pd),string:new Jd}}function Xd(a){a=Wg(this,a)["delete"](a);this.size-=a?1:0;return a}function Yd(a){return Wg(this,a).get(a)}function Zd(a){return Wg(this,a).has(a)}function $d(b,c){var d=Wg(this,b),a=d.size;d.set(b,c);this.size+=d.size==a?0:1;return this}Vd.prototype.clear=Wd;Vd.prototype["delete"]=Xd;Vd.prototype.get=Yd;Vd.prototype.has=Zd;Vd.prototype.set=$d;function ae(a){var b=-1,c=a==null?0:a.length;this.__data__=new Vd;while(++b<c)this.add(a[b])}function be(a){this.__data__.set(a,j);return this}function ce(a){return this.__data__.has(a)}ae.prototype.add=ae.prototype.push=be;ae.prototype.has=ce;function de(a){a=this.__data__=new Pd(a);this.size=a.size}function ee(){this.__data__=new Pd,this.size=0}function fe(a){var b=this.__data__;a=b["delete"](a);this.size=b.size;return a}function ge(a){return this.__data__.get(a)}function he(a){return this.__data__.has(a)}function ie(a,b){var c=this.__data__;if(c instanceof Pd){var e=c.__data__;if(!qd||e.length<d-1){e.push([a,b]);this.size=++c.size;return this}c=this.__data__=new Vd(e)}c.set(a,b);this.size=c.size;return this}de.prototype.clear=ee;de.prototype["delete"]=fe;de.prototype.get=ge;de.prototype.has=he;de.prototype.set=ie;function je(a,b){var c=U(a),d=!c&&Jj(a),e=!c&&!d&&Mj(a),f=!c&&!d&&!e&&jk(a);c=c||d||e||f;d=c?Ic(a.length,yb):[];var g=d.length;for(var h in a)(b||J.call(a,h))&&!(c&&(h=="length"||e&&(h=="offset"||h=="parent")||f&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||kh(h,g)))&&d.push(h);return d}function ke(a){var b=a.length;return b?a[yf(0,b-1)]:void 0}function le(a,b){return Hh(ig(a),ve(b,0,a.length))}function me(a){return Hh(ig(a))}function ne(a,b,c){(c!==void 0&&!Ij(a[b],c)||c===void 0&&!(b in a))&&te(a,b,c)}function oe(a,b,c){var d=a[b];(!(J.call(a,b)&&Ij(d,c))||c===void 0&&!(b in a))&&te(a,b,c)}function pe(a,b){var c=a.length;while(c--)if(Ij(a[c][0],b))return c;return-1}function qe(b,c,a,d){Be(b,function(e,f,b){c(d,e,a(e),b)});return d}function re(a,b){return a&&jg(b,$(b),a)}function se(a,b){return a&&jg(b,Gk(b),a)}function te(a,b,c){b=="__proto__"&&Vb?Vb(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function ue(b,c){var d=-1,e=c.length,a=g(e),f=b==null;while(++d<e)a[d]=f?void 0:Dk(b,c[d]);return a}function ve(a,b,c){a===a&&(c!==void 0&&(a=a<=c?a:c),b!==void 0&&(a=a>=b?a:b));return a}function we(b,c,d,e,f,g){var a,h=c&m,i=c&n,j=c&o;d&&(a=f?d(b,e,f,g):d(b));if(a!==void 0)return a;if(!W(b))return b;e=U(b);if(e){a=fh(b);if(!h)return ig(b,a)}else{var k=bh(b),l=k==ta||k==ua;if(Mj(b))return Zf(b,h);if(k==xa||k==ma||l&&!f){a=i||l?{}:gh(b);if(!h)return i?lg(b,se(a,b)):kg(b,re(a,b))}else{if(!M[k])return f?b:{};a=hh(b,k,h)}}g||(g=new de);l=g.get(b);if(l)return l;g.set(b,a);gk(b)?b.forEach(function(e){a.add(we(e,c,d,e,b,g))}):Wj(b)&&b.forEach(function(f,e){a.set(e,we(f,c,d,e,b,g))});f=j?i?Sg:Rg:i?Gk:$;var p=e?void 0:f(b);kc(p||b,function(f,e){p&&(e=f,f=b[e]),oe(a,e,we(f,c,d,e,b,g))});return a}function xe(a){var b=$(a);return function(c){return ye(c,a,b)}}function ye(a,b,c){var d=c.length;if(a==null)return!d;a=G(a);while(d--){var e=c[d],f=b[e],g=a[e];if(g===void 0&&!(e in a)||!f(g))return!1}return!0}function ze(a,b,c){if(typeof a!="function")throw new I(f);return Dh(function(){a.apply(void 0,c)},b)}function Ae(f,c,e,g){var h=-1,a=oc,i=!0,j=f.length,b=[],k=c.length;if(!j)return b;e&&(c=O(c,Kc(e)));g?(a=pc,i=!1):c.length>=d&&(a=Mc,i=!1,c=new ae(c));outer:while(++h<j){var l=f[h],m=e==null?l:e(l);l=g||l!==0?l:0;if(i&&m===m){var n=k;while(n--)if(c[n]===m)continue outer;b.push(l)}else a(c,m,g)||b.push(l)}return b}var Be=og(Ke),Ce=og(Le,!0);function De(b,c){var a=!0;Be(b,function(d,e,b){a=!!c(d,e,b);return a});return a}function Ee(c,b,d){var e=-1,f=c.length;while(++e<f){var g=c[e],h=b(g);if(h!=null&&(i===void 0?h===h&&!ik(h):d(h,i)))var i=h,a=g}return a}function Fe(a,b,c,d){var e=a.length;c=Y(c);c<0&&(c=-c>e?0:e+c);d=d===void 0||d>e?e:Y(d);d<0&&(d+=e);d=c>d?0:pk(d);while(c<d)a[c++]=b;return a}function Ge(b,c){var a=[];Be(b,function(d,e,b){c(d,e,b)&&a.push(d)});return a}function He(b,c,d,e,a){var f=-1,g=b.length;d||(d=jh);a||(a=[]);while(++f<g){var h=b[f];c>0&&d(h)?c>1?He(h,c-1,d,e,a):qc(a,h):e||(a[a.length]=h)}return a}var Ie=pg(),Je=pg(!0);function Ke(b,a){return b&&Ie(b,a,$)}function Le(b,a){return b&&Je(b,a,$)}function Me(a,b){return nc(b,function(b){return Tj(a[b])})}function Ne(a,b){b=Wf(b,a);var c=0,d=b.length;while(a!=null&&c<d)a=a[Jh(b[c++])];return c&&c==d?a:void 0}function Oe(a,b,c){b=b(a);return U(a)?b:qc(b,c(a))}function Pe(a){return a==null?a===void 0?Da:wa:Ub&&Ub in G(a)?Zg(a):xh(a)}function Qe(a,b){return a>b}function Re(a,b){return a!=null&&J.call(a,b)}function Se(a,b){return a!=null&&b in G(a)}function Te(a,b,c){return a>=ld(b,c)&&a<P(b,c)}function Ue(d,c,e){var a=e?pc:oc,f=d[0].length,h=d.length,i=h,j=g(h),k=Infinity,b=[];while(i--){var l=d[i];i&&c&&(l=O(l,Kc(c)));k=ld(l.length,k);j[i]=!e&&(c||f>=120&&l.length>=120)?new ae(i&&l):void 0}l=d[0];var m=-1,n=j[0];outer:while(++m<f&&b.length<k){var o=l[m],p=c?c(o):o;o=e||o!==0?o:0;if(!(n?Mc(n,p):a(b,p,e))){i=h;while(--i){var q=j[i];if(!(q?Mc(q,p):a(d[i],p,e)))continue outer}n&&n.push(p);b.push(o)}}return b}function Ve(b,c,a,d){Ke(b,function(e,f,b){c(d,a(e),f,b)});return d}function We(a,b,c){b=Wf(b,a);a=zh(a,b);b=a==null?a:a[Jh(ei(b))];return b==null?void 0:ic(b,a,c)}function Xe(a){return X(a)&&Pe(a)==ma}function Ye(a){return X(a)&&Pe(a)==Ga}function Ze(a){return X(a)&&Pe(a)==qa}function $e(a,b,c,d,e){if(a===b)return!0;return a==null||b==null||!X(a)&&!X(b)?a!==a&&b!==b:af(a,b,c,d,$e,e)}function af(a,b,c,d,e,f){var g=U(a),h=U(b),i=g?na:bh(a);h=h?na:bh(b);i=i==ma?xa:i;h=h==ma?xa:h;var j=i==xa,k=h==xa;h=i==h;if(h&&Mj(a)){if(!Mj(b))return!1;g=!0;j=!1}if(h&&!j){f||(f=new de);return g||jk(a)?Ng(a,b,c,d,e,f):Og(a,b,i,c,d,e,f)}if(!(c&p)){g=j&&J.call(a,"__wrapped__");i=k&&J.call(b,"__wrapped__");if(g||i){j=g?a.value():a;k=i?b.value():b;f||(f=new de);return e(j,k,c,d,f)}}if(!h)return!1;f||(f=new de);return Pg(a,b,c,d,e,f)}function bf(a){return X(a)&&bh(a)==E}function cf(b,c,d,e){var f=d.length,g=f,h=!e;if(b==null)return!g;b=G(b);while(f--){var i=d[f];if(h&&i[2]?i[1]!==b[i[0]]:!(i[0]in b))return!1}while(++f<g){i=d[f];var j=i[0],k=b[j],l=i[1];if(h&&i[2]){if(k===void 0&&!(j in b))return!1}else{i=new de;if(e)var a=e(k,l,j,b,c,i);if(!(a===void 0?$e(l,k,p|q,e,i):a))return!1}}return!0}function df(a){if(!W(a)||ph(a))return!1;var b=Tj(a)?Jb:rb;return b.test(Kh(a))}function ef(a){return X(a)&&Pe(a)==za}function ff(a){return X(a)&&bh(a)==Aa}function gf(a){return X(a)&&Vj(a.length)&&!!L[Pe(a)]}function hf(a){if(typeof a=="function")return a;if(a==null)return Jl;return typeof a=="object"?U(a)?of(a[0],a[1]):nf(a):Vl(a)}function jf(b){if(!rh(b))return kd(b);var a=[];for(var c in G(b))J.call(b,c)&&c!="constructor"&&a.push(c);return a}function kf(b){if(!W(b))return wh(b);var c=rh(b),a=[];for(var d in b)d=="constructor"&&(c||!J.call(b,d))||a.push(d);return a}function lf(a,b){return a<b}function mf(c,b){var d=-1,a=Kj(c)?g(c.length):[];Be(c,function(e,f,c){a[++d]=b(e,f,c)});return a}function nf(a){var b=Xg(a);return b.length==1&&b[0][2]?th(b[0][0],b[0][1]):function(c){return c===a||cf(c,a,b)}}function of(a,b){return mh(a)&&sh(b)?th(Jh(a),b):function(c){var d=Dk(c,a);return d===void 0&&d===b?Fk(c,a):$e(b,d,p|q)}}function pf(a,b,c,d,e){if(a===b)return;Ie(b,function(f,g){e||(e=new de);if(W(f))qf(a,b,g,c,pf,d,e);else{var h=d?d(Bh(a,g),f,g+"",a,b,e):void 0;h===void 0&&(h=f);ne(a,g,h)}},Gk)}function qf(a,b,c,d,e,f,g){var h=Bh(a,c),i=Bh(b,c),j=g.get(i);if(j){ne(a,c,j);return}j=f?f(h,i,c+"",a,b,g):void 0;b=j===void 0;if(b){var k=U(i),l=!k&&Mj(i),m=!k&&!l&&jk(i);j=i;k||l||m?U(h)?j=h:V(h)?j=ig(h):l?(b=!1,j=Zf(i,!0)):m?(b=!1,j=dg(i,!0)):j=[]:dk(i)||Jj(i)?(j=h,Jj(h)?j=rk(h):(!W(h)||Tj(h))&&(j=gh(i))):b=!1}b&&(g.set(i,j),e(j,i,d,f,g),g["delete"](i));ne(a,c,j)}function rf(a,b){var c=a.length;if(!c)return;b+=b<0?c:0;return kh(b,c)?a[b]:void 0}function sf(a,b,c){var d=-1;b=O(b.length?b:[Jl],Kc(T()));a=mf(a,function(c,e,a){e=O(b,function(a){return a(c)});return{criteria:e,index:++d,value:c}});return Gc(a,function(a,b){return fg(a,b,c)})}function tf(a,b){return uf(a,b,function(b,c){return Fk(a,c)})}function uf(b,c,d){var e=-1,f=c.length,a={};while(++e<f){var g=c[e],h=Ne(b,g);d(h,g)&&Df(a,Wf(g,b),h)}return a}function vf(a){return function(b){return Ne(b,a)}}function wf(d,b,c,e){var a=e?Ac:zc,f=-1,g=b.length,h=d;d===b&&(b=ig(b));c&&(h=O(d,Kc(c)));while(++f<g){var i=0,j=b[f];j=c?c(j):j;while((i=a(h,j,i,e))>-1)h!==d&&Pb.call(h,i,1),Pb.call(d,i,1)}return d}function xf(a,b){var c=a?b.length:0,d=c-1;while(c--){var e=b[c];if(c==d||e!==f){var f=e;kh(e)?Pb.call(a,e,1):Of(a,e)}}return a}function yf(a,b){return a+Ec(od()*(b-a+1))}function zf(b,c,d,e){var f=-1;c=P(vc((c-b)/(d||1)),0);var a=g(c);while(c--)a[e?c:++f]=b,b+=d;return a}function Af(b,c){var a="";if(!b||c<1||c>ga)return a;do c%2&&(a+=b),c=Ec(c/2),c&&(b+=b);while(c);return a}function S(a,b){return Eh(yh(a,b,Jl),a+"")}function Bf(a){return ke(Wk(a))}function Cf(a,b){a=Wk(a);return Hh(a,ve(b,0,a.length))}function Df(a,b,c,d){if(!W(a))return a;b=Wf(b,a);var e=-1,f=b.length,g=f-1,h=a;while(h!=null&&++e<f){var i=Jh(b[e]),j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):void 0;j===void 0&&(j=W(k)?k:kh(b[e+1])?[]:{})}oe(h,i,j);h=h[i]}return a}var Ef=ud?function(a,b){ud.set(a,b);return a}:Jl;K=Vb?function(a,b){return Vb(a,"toString",{configurable:!0,enumerable:!1,value:Gl(b),writable:!0})}:Jl;function Ff(a){return Hh(Wk(a))}function Gf(a,b,c){var d=-1,e=a.length;b<0&&(b=-b>e?0:e+b);c=c>e?e:c;c<0&&(c+=e);e=b>c?0:c-b>>>0;b>>>=0;c=g(e);while(++d<e)c[d]=a[d+b];return c}function Hf(b,c){var a;Be(b,function(d,e,b){a=c(d,e,b);return!a});return!!a}function If(a,b,c){var d=0,e=a==null?d:a.length;if(typeof b=="number"&&b===b&&e<=ka){while(d<e){var f=d+e>>>1,g=a[f];g!==null&&!ik(g)&&(c?g<=b:g<b)?d=f+1:e=f}return e}return Jf(a,b,Jl,c)}function Jf(b,c,a,d){c=a(c);var e=0,f=b==null?0:b.length,g=c!==c,h=c===null,i=ik(c),j=c===void 0;while(e<f){var k=Ec((e+f)/2),l=a(b[k]),m=l!==void 0,n=l===null,o=l===l,p=ik(l);if(g)var q=d||o;else j?q=o&&(d||m):h?q=o&&m&&(d||!n):i?q=o&&m&&!n&&(d||!p):n||p?q=!1:q=d?l<=c:l<c;q?e=k+1:f=k}return ld(f,ja)}function Kf(c,b){var d=-1,e=c.length,f=0,a=[];while(++d<e){var g=c[d],h=b?b(g):g;if(!d||!Ij(h,i)){var i=h;a[f++]=g===0?0:g}}return a}function Lf(a){if(typeof a=="number")return a;return ik(a)?ia:+a}function Mf(b){if(typeof b=="string")return b;if(U(b))return O(b,Mf)+"";if(ik(b))return Cd?Cd.call(b):"";var a=b+"";return a=="0"&&1/b==-fa?"-0":a}function Nf(f,e,g){var h=-1,a=oc,i=f.length,j=!0,b=[],k=b;if(g)j=!1,a=pc;else if(i>=d){var c=e?null:Hg(f);if(c)return $c(c);j=!1;a=Mc;k=new ae}else k=e?[]:b;outer:while(++h<i){c=f[h];var l=e?e(c):c;c=g||c!==0?c:0;if(j&&l===l){var m=k.length;while(m--)if(k[m]===l)continue outer;e&&k.push(l);b.push(c)}else a(k,l,g)||(k!==b&&k.push(l),b.push(c))}return b}function Of(a,b){b=Wf(b,a);a=zh(a,b);return a==null||delete a[Jh(ei(b))]}function Pf(a,b,c,d){return Df(a,b,c(Ne(a,b)),d)}function Qf(a,b,c,d){var e=a.length,f=d?e:-1;while((d?f--:++f<e)&&b(a[f],f,a));return c?Gf(a,d?0:f,d?f+1:e):Gf(a,d?f+1:0,d?e:f)}function Rf(a,b){a=a;a instanceof R&&(a=a.value());return rc(b,function(a,b){return b.func.apply(b.thisArg,qc([a],b.args))},a)}function Sf(c,b,d){var e=c.length;if(e<2)return e?Nf(c[0]):[];var f=-1,a=g(e);while(++f<e){var h=c[f],i=-1;while(++i<e)i!=f&&(a[f]=Ae(a[f]||h,c[i],b,d))}return Nf(He(a,1),b,d)}function Tf(c,b,d){var e=-1,f=c.length,g=b.length,a={};while(++e<f){var h=e<g?b[e]:void 0;d(a,c[e],h)}return a}function Uf(a){return V(a)?a:[]}function Vf(a){return typeof a=="function"?a:Jl}function Wf(a,b){return U(a)?a:mh(a,b)?[a]:Ih(Z(a))}Kd=S;function Xf(a,b,c){var d=a.length;c=c===void 0?d:c;return!b&&c>=d?a:Gf(a,b,c)}var Yf=Wb||function(a){return N.clearTimeout(a)};function Zf(a,b){if(b)return a.slice();b=a.length;b=Lb?Lb(b):new a.constructor(b);a.copy(b);return b}function $f(b){var a=new b.constructor(b.byteLength);new Kb(a).set(new Kb(b));return a}function ag(a,b){b=b?$f(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.byteLength)}function bg(b){var a=new b.constructor(b.source,ob.exec(b));a.lastIndex=b.lastIndex;return a}function cg(a){return Bd?G(Bd.call(a)):{}}function dg(a,b){b=b?$f(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.length)}function eg(a,b){if(a!==b){var c=a!==void 0,d=a===null,e=a===a,f=ik(a),g=b!==void 0,h=b===null,i=b===b,j=ik(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&a<b||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function fg(b,c,d){var e=-1,f=b.criteria,g=c.criteria,h=f.length,i=d.length;while(++e<h){var a=eg(f[e],g[e]);if(a){if(e>=i)return a;var j=d[e];return a*(j=="desc"?-1:1)}}return b.index-c.index}function gg(b,c,d,e){var f=-1,h=b.length,i=d.length,j=-1,k=c.length,l=P(h-i,0),a=g(k+l);e=!e;while(++j<k)a[j]=c[j];while(++f<i)(e||f<h)&&(a[d[f]]=b[f]);while(l--)a[j++]=b[f++];return a}function hg(b,c,d,e){var f=-1,h=b.length,i=-1,j=d.length,k=-1,l=c.length,m=P(h-j,0),a=g(m+l);e=!e;while(++f<m)a[f]=b[f];m=f;while(++k<l)a[m+k]=c[k];while(++i<j)(e||f<h)&&(a[m+d[i]]=b[f++]);return a}function ig(a,b){var c=-1,d=a.length;b||(b=g(d));while(++c<d)b[c]=a[c];return b}function jg(a,b,c,d){var e=!c;c||(c={});var f=-1,g=b.length;while(++f<g){var h=b[f],i=d?d(c[h],a[h],h,c,a):void 0;i===void 0&&(i=a[h]);e?te(c,h,i):oe(c,h,i)}return c}function kg(a,b){return jg(a,$g(a),b)}function lg(a,b){return jg(a,ah(a),b)}function mg(a,b){return function(d,c){var e=U(d)?jc:qe,f=b?b():{};return e(d,a,T(c,2),f)}}function ng(a){return S(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:void 0,g=e>2?c[2]:void 0;f=a.length>3&&typeof f=="function"?(e--,f):void 0;g&&lh(c[0],c[1],g)&&(f=e<3?void 0:f,e=1);b=G(b);while(++d<e){g=c[d];g&&a(b,g,d,f)}return b})}function og(a,b){return function(d,c){if(d==null)return d;if(!Kj(d))return a(d,c);var e=d.length,f=b?e:-1,g=G(d);while(b?f--:++f<e)if(c(g[f],f,g)===!1)break;return d}}function pg(a){return function(c,b,d){var e=-1,f=G(c);d=d(c);var g=d.length;while(g--){var h=d[a?g:++e];if(b(f[h],h,f)===!1)break}return c}}function qg(a,b,c){var d=b&r,e=tg(a);function f(){var b=this&&this!==N&&this instanceof f?e:a;return b.apply(d?c:this,arguments)}return f}function rg(a){return function(b){b=Z(b);var c=Uc(b)?ed(b):void 0,d=c?c[0]:b.charAt(0);c=c?Xf(c,1).join(""):b.slice(1);return d[a]()+c}}function sg(a){return function(b){return rc(Cl(cl(b).replace(Rb,"")),a,"")}}function tg(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var d=Dd(a.prototype),b=a.apply(d,c);return W(b)?b:d}}function ug(a,b,c){var d=tg(a);function e(){var f=arguments.length,h=g(f),i=f,j=Vg(e);while(i--)h[i]=arguments[i];var k=f<3&&h[0]!==j&&h[f-1]!==j?[]:Zc(h,j);f-=k.length;if(f<c)return Fg(a,b,xg,e.placeholder,void 0,h,k,void 0,void 0,c-f);var l=this&&this!==N&&this instanceof e?d:a;return ic(l,this,h)}return e}function vg(a){return function(c,d,e){var f=G(c);if(!Kj(c)){var b=T(d,3);c=$(c);d=function(a){return b(f[a],a,f)}}d=a(c,d,e);return d>-1?f[b?c[d]:d]:void 0}}function wg(a){return Qg(function(b){var c=b.length,d=c,e=Fd.prototype.thru;a&&b.reverse();while(d--){var g=b[d];if(typeof g!="function")throw new I(f);if(e&&!h&&Ug(g)=="wrapper")var h=new Fd([],!0)}d=h?d:c;while(++d<c){g=b[d];e=Ug(g);var i=e=="wrapper"?Tg(g):void 0;i&&oh(i[0])&&i[1]==(y|u|w|z)&&!i[4].length&&i[9]==1?h=h[Ug(i[0])].apply(h,i[3]):h=g.length==1&&oh(g)?h[e]():h.thru(g)}return function(){var e=arguments,f=e[0];if(h&&e.length==1&&U(f))return h.plant(f).value();var d=0,a=c?b[d].apply(this,e):f;while(++d<c)a=b[d].call(this,a);return a}})}function xg(b,c,d,e,f,h,i,j,a,k){var l=c&y,m=c&r,n=c&s,o=c&(u|v),p=c&A,q=n?void 0:tg(b);function t(){var r=arguments.length,s=g(r),u=r;while(u--)s[u]=arguments[u];if(o)var v=Vg(t),w=Pc(s,v);e&&(s=gg(s,e,f,o));h&&(s=hg(s,h,i,o));r-=w;if(o&&r<k){var x=Zc(s,v);return Fg(b,c,xg,t.placeholder,d,s,x,j,a,k-r)}var y=m?d:this,z=n?y[b]:b;r=s.length;j?s=Ah(s,j):p&&r>1&&s.reverse();l&&a<r&&(s.length=a);this&&this!==N&&this instanceof t&&(z=q||tg(z));return z.apply(y,s)}return t}function yg(a,b){return function(d,c){return Ve(d,a,b(c),{})}}function zg(a,b){return function(d,e){var c;if(d===void 0&&e===void 0)return b;d!==void 0&&(c=d);if(e!==void 0){if(c===void 0)return e;typeof d=="string"||typeof e=="string"?(d=Mf(d),e=Mf(e)):(d=Lf(d),e=Lf(e));c=a(d,e)}return c}}function Ag(a){return Qg(function(b){b=O(b,Kc(T()));return S(function(c){var d=this;return a(b,function(a){return ic(a,d,c)})})})}function Bg(a,b){b=b===void 0?" ":Mf(b);var c=b.length;if(c<2)return c?Af(b,a):b;c=Af(b,vc(a/dd(b)));return Uc(b)?Xf(ed(c),0,a).join(""):c.slice(0,a)}function Cg(a,b,c,d){var e=b&r,f=tg(a);function h(){var b=-1,i=arguments.length,j=-1,k=d.length,l=g(k+i),m=this&&this!==N&&this instanceof h?f:a;while(++j<k)l[j]=d[j];while(i--)l[j++]=arguments[++b];return ic(m,e?c:this,l)}return h}function Dg(a){return function(b,c,d){d&&typeof d!="number"&&lh(b,c,d)&&(c=d=void 0);b=ok(b);c===void 0?(c=b,b=0):c=ok(c);d=d===void 0?b<c?1:-1:ok(d);return zf(b,c,d,a)}}function Eg(a){return function(b,c){typeof b=="string"&&typeof c=="string"||(b=qk(b),c=qk(c));return a(b,c)}}function Fg(b,c,d,e,f,g,h,i,a,j){var k=c&u,l=k?h:void 0;h=k?void 0:h;var m=k?g:void 0;g=k?void 0:g;c|=k?w:x;c&=~(k?x:w);c&t||(c&=~(r|s));k=[b,c,f,m,l,g,h,i,a,j];f=d.apply(void 0,k);oh(b)&&Ch(f,k);f.placeholder=e;return Fh(f,b,c)}function Gg(a){var b=xb[a];return function(a,c){a=qk(a);c=c==null?0:ld(Y(c),292);if(c&&gd(a)){var d=(Z(a)+"e").split("e"),e=b(d[0]+"e"+(+d[1]+c));d=(Z(e)+"e").split("e");return+(d[0]+"e"+(+d[1]-c))}return b(a)}}var Hg=sd&&1/$c(new sd([,-0]))[1]==fa?function(a){return new sd(a)}:Rl;function Ig(a){return function(b){var c=bh(b);if(c==E)return Xc(b);return c==Aa?ad(b):Jc(b,a(b))}}function Jg(b,c,d,e,g,h,a,i){var j=c&s;if(!j&&typeof b!="function")throw new I(f);var k=e?e.length:0;k||(c&=~(w|x),e=g=void 0);a=a===void 0?a:P(Y(a),0);i=i===void 0?i:Y(i);k-=g?g.length:0;if(c&x){var l=e,m=g;e=g=void 0}var n=j?void 0:Tg(b);h=[b,c,d,e,g,l,m,h,a,i];n&&vh(h,n);b=h[0];c=h[1];d=h[2];e=h[3];g=h[4];i=h[9]=h[9]===void 0?j?0:b.length:P(h[9]-k,0);!i&&c&(u|v)&&(c&=~(u|v));if(!c||c==r)var a=qg(b,c,d);else c==u||c==v?a=ug(b,c,i):(c==w||c==(r|w))&&!g.length?a=Cg(b,c,d,e):a=xg.apply(void 0,h);j=n?Ef:Ch;return Fh(j(a,h),b,c)}function Kg(a,b,c,d){return a===void 0||Ij(a,Bb[c])&&!J.call(d,c)?b:a}function Lg(a,b,c,d,e,f){W(a)&&W(b)&&(f.set(b,a),pf(a,b,void 0,Lg,f),f["delete"](b));return a}function Mg(a){return dk(a)?void 0:a}function Ng(b,c,d,e,f,g){var h=d&p,i=b.length,j=c.length;if(i!=j&&!(h&&j>i))return!1;j=g.get(b);if(j&&g.get(c))return j==c;j=-1;var a=!0,k=d&q?new ae:void 0;g.set(b,c);g.set(c,b);while(++j<i){var l=b[j],m=c[j];if(e)var n=h?e(m,l,j,c,b,g):e(l,m,j,b,c,g);if(n!==void 0){if(n)continue;a=!1;break}if(k){if(!tc(c,function(a,b){if(!Mc(k,b)&&(l===a||f(l,a,d,e,g)))return k.push(b)})){a=!1;break}}else if(!(l===m||f(l,m,d,e,g))){a=!1;break}}g["delete"](b);g["delete"](c);return a}function Og(a,b,c,d,e,f,g){switch(c){case Ha:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer;b=b.buffer;case Ga:return a.byteLength!=b.byteLength||!f(new Kb(a),new Kb(b))?!1:!0;case pa:case qa:case va:return Ij(+a,+b);case sa:return a.name==b.name&&a.message==b.message;case za:case Ba:return a==b+"";case E:var h=Xc;case Aa:c=d&p;h||(h=$c);if(a.size!=b.size&&!c)return!1;c=g.get(a);if(c)return c==b;d|=q;g.set(a,b);c=Ng(h(a),h(b),d,e,f,g);g["delete"](a);return c;case Ca:if(Bd)return Bd.call(a)==Bd.call(b)}return!1}function Pg(a,b,c,d,e,f){var g=c&p,h=Rg(a),i=h.length,j=Rg(b);j=j.length;if(i!=j&&!g)return!1;j=i;while(j--){var k=h[j];if(!(g?k in b:J.call(b,k)))return!1}var l=f.get(a);if(l&&f.get(b))return l==b;l=!0;f.set(a,b);f.set(b,a);var m=g;while(++j<i){k=h[j];var n=a[k],o=b[k];if(d)var q=g?d(o,n,k,b,a,f):d(n,o,k,a,b,f);if(!(q===void 0?n===o||e(n,o,c,d,f):q)){l=!1;break}m||(m=k=="constructor")}if(l&&!m){n=a.constructor;o=b.constructor;n!=o&&"constructor"in a&&"constructor"in b&&!(typeof n=="function"&&n instanceof n&&typeof o=="function"&&o instanceof o)&&(l=!1)}f["delete"](a);f["delete"](b);return l}function Qg(a){return Eh(yh(a,void 0,Xh),a+"")}function Rg(a){return Oe(a,$,$g)}function Sg(a){return Oe(a,Gk,ah)}var Tg=ud?function(a){return ud.get(a)}:Rl;function Ug(b){var a=b.name+"",c=vd[a],d=J.call(vd,a)?c.length:0;while(d--){var e=c[d],f=e.func;if(f==null||f==b)return e.name}return a}function Vg(a){a=J.call(Q,"placeholder")?Q:a;return a.placeholder}function T(){var a=Q.iteratee||Kl;a=a===Kl?hf:a;return arguments.length?a(arguments[0],arguments[1]):a}function Wg(a,b){a=a.__data__;return nh(b)?a[typeof b=="string"?"string":"hash"]:a.map}function Xg(b){var a=$(b),c=a.length;while(c--){var d=a[c],e=b[d];a[c]=[d,e,sh(e)]}return a}function Yg(a,b){a=Tc(a,b);return df(a)?a:void 0}function Zg(b){var c=J.call(b,Ub),d=b[Ub];try{b[Ub]=void 0;var e=!0}catch(a){}var a=Gb.call(b);e&&(c?b[Ub]=d:delete b[Ub]);return a}var $g=bd?function(a){if(a==null)return[];a=G(a);return nc(bd(a),function(b){return Ob.call(a,b)})}:Yl,ah=bd?function(b){var a=[];while(b)qc(a,$g(b)),b=Mb(b);return a}:Yl,bh=Pe;(h&&bh(new h(new ArrayBuffer(1)))!=Ha||qd&&bh(new qd)!=E||rd&&bh(rd.resolve())!=F||sd&&bh(new sd)!=Aa||b&&bh(new b)!=Ea)&&(bh=function(b){var a=Pe(b);b=a==xa?b.constructor:void 0;b=b?Kh(b):"";if(b)switch(b){case wd:return Ha;case xd:return E;case yd:return F;case zd:return Aa;case Ad:return Ea}return a});function ch(b,c,d){var e=-1,f=d.length;while(++e<f){var g=d[e],a=g.size;switch(g.type){case"drop":b+=a;break;case"dropRight":c-=a;break;case"take":c=ld(c,b+a);break;case"takeRight":b=P(b,c-a);break}}return{start:b,end:c}}function dh(a){a=a.match(jb);return a?a[1].split(kb):[]}function eh(b,c,d){c=Wf(c,b);var e=-1,f=c.length,a=!1;while(++e<f){var g=Jh(c[e]);if(!(a=b!=null&&d(b,g)))break;b=b[g]}if(a||++e!=f)return a;f=b==null?0:b.length;return!!f&&Vj(f)&&kh(g,f)&&(U(b)||Jj(b))}function fh(b){var c=b.length,a=new b.constructor(c);c&&typeof b[0]=="string"&&J.call(b,"index")&&(a.index=b.index,a.input=b.input);return a}function gh(a){return typeof a.constructor=="function"&&!rh(a)?Dd(Mb(a)):{}}function hh(a,b,c){var d=a.constructor;switch(b){case Ga:return $f(a);case pa:case qa:return new d(+a);case Ha:return ag(a,c);case Ia:case Ja:case Ka:case La:case Ma:case Na:case Oa:case Pa:case Qa:return dg(a,c);case E:return new d;case va:case Ba:return new d(a);case za:return bg(a);case Aa:return new d;case Ca:return cg(a)}}function ih(a,b){var c=b.length;if(!c)return a;var d=c-1;b[d]=(c>1?"& ":"")+b[d];b=b.join(c>2?", ":" ");return a.replace(ib,"{\n/* [wrapped with "+b+"] */\n")}function jh(a){return U(a)||Jj(a)||!!(Qb&&a&&a[Qb])}function kh(a,b){var c=typeof a;b=b==null?ga:b;return!!b&&(c=="number"||c!="symbol"&&tb.test(a))&&a>-1&&a%1==0&&a<b}function lh(a,b,c){if(!W(c))return!1;var d=typeof b;return(d=="number"?Kj(c)&&kh(b,c.length):d=="string"&&b in c)?Ij(c[b],a):!1}function mh(a,b){if(U(a))return!1;var c=typeof a;return c=="number"||c=="symbol"||c=="boolean"||a==null||ik(a)?!0:bb.test(a)||!ab.test(a)||b!=null&&a in G(b)}function nh(a){var b=typeof a;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?a!=="__proto__":a===null}function oh(a){var b=Ug(a),c=Q[b];if(typeof c!="function"||!(b in R.prototype))return!1;if(a===c)return!0;b=Tg(c);return!!b&&a===b[0]}function ph(a){return!!Fb&&Fb in a}var qh=Cb?Tj:Zl;function rh(a){var b=a&&a.constructor;b=typeof b=="function"&&b.prototype||Bb;return a===b}function sh(a){return a===a&&!W(a)}function th(a,b){return function(c){return c==null?!1:c[a]===b&&(b!==void 0||a in G(c))}}function uh(a){a=sj(a,function(a){b.size===k&&b.clear();return a});var b=a.cache;return a}function vh(a,b){var c=a[1],d=b[1],e=c|d,f=e<(r|s|y),g=d==y&&c==u||d==y&&c==z&&a[7].length<=b[8]||d==(y|z)&&b[7].length<=b[8]&&c==u;if(!(f||g))return a;d&r&&(a[2]=b[2],e|=c&r?0:t);f=b[3];if(f){g=a[3];a[3]=g?gg(g,f,b[4]):f;a[4]=g?Zc(a[3],l):b[4]}f=b[5];f&&(g=a[5],a[5]=g?hg(g,f,b[6]):f,a[6]=g?Zc(a[5],l):b[6]);f=b[7];f&&(a[7]=f);d&y&&(a[8]=a[8]==null?b[8]:ld(a[8],b[8]));a[9]==null&&(a[9]=b[9]);a[0]=b[0];a[1]=e;return a}function wh(b){var a=[];if(b!=null)for(b in G(b))a.push(b);return a}function xh(a){return Gb.call(a)}function yh(b,c,a){c=P(c===void 0?b.length-1:c,0);return function(){var d=arguments,e=-1,f=P(d.length-c,0),h=g(f);while(++e<f)h[e]=d[c+e];e=-1;var i=g(c+1);while(++e<c)i[e]=d[e];i[c]=a(h);return ic(b,this,i)}}function zh(a,b){return b.length<2?a:Ne(a,Gf(b,0,-1))}function Ah(a,b){var c=a.length,d=ld(b.length,c),e=ig(a);while(d--){var f=b[d];a[d]=kh(f,c)?e[f]:void 0}return a}function Bh(a,b){if(b==="constructor"&&typeof a[b]==="function")return;if(b=="__proto__")return;return a[b]}var Ch=Gh(Ef),Dh=uc||function(a,b){return N.setTimeout(a,b)},Eh=Gh(K);function Fh(a,b,c){b=b+"";return Eh(a,ih(b,Lh(dh(b),c)))}function Gh(a){var b=0,c=0;return function(){var d=md(),e=ca-(d-c);c=d;if(e>0){if(++b>=ba)return arguments[0]}else b=0;return a.apply(void 0,arguments)}}function Hh(b,a){var c=-1,d=b.length,e=d-1;a=a===void 0?d:a;while(++c<a){d=yf(c,e);var f=b[d];b[d]=b[c];b[c]=f}b.length=a;return b}var Ih=uh(function(b){var a=[];b.charCodeAt(0)===46&&a.push("");b.replace(cb,function(b,c,d,e){a.push(d?e.replace(mb,"$1"):c||b)});return a});function Jh(b){if(typeof b=="string"||ik(b))return b;var a=b+"";return a=="0"&&1/b==-fa?"-0":a}function Kh(a){if(a!=null){try{return Db.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function Lh(a,b){kc(la,function(c){var d="_."+c[0];b&c[1]&&!oc(a,d)&&a.push(d)});return a.sort()}function Mh(b){if(b instanceof R)return b.clone();var a=new Fd(b.__wrapped__,b.__chain__);a.__actions__=ig(b.__actions__);a.__index__=b.__index__;a.__values__=b.__values__;return a}function Nh(c,a,d){(d?lh(c,a,d):a===void 0)?a=1:a=P(Y(a),0);d=c==null?0:c.length;if(!d||a<1)return[];var e=0,f=0,b=g(vc(d/a));while(e<d)b[f++]=Gf(c,e,e+=a);return b}function Oh(b){var c=-1,d=b==null?0:b.length,e=0,a=[];while(++c<d){var f=b[c];f&&(a[e++]=f)}return a}function Ph(){var a=arguments.length;if(!a)return[];var b=g(a-1),c=arguments[0],d=a;while(d--)b[d-1]=arguments[d];return qc(U(c)?ig(c):[c],He(b,1))}Ld=S(function(b,a){return V(b)?Ae(b,He(a,1,V,!0)):[]});Md=S(function(c,a){var b=ei(a);V(b)&&(b=void 0);return V(c)?Ae(c,He(a,1,V,!0),T(b,2)):[]});Nd=S(function(b,a){var c=ei(a);V(c)&&(c=void 0);return V(b)?Ae(b,He(a,1,V,!0),void 0,c):[]});function Qh(a,b,c){var d=a==null?0:a.length;if(!d)return[];b=c||b===void 0?1:Y(b);return Gf(a,b<0?0:b,d)}function Rh(a,b,c){var d=a==null?0:a.length;if(!d)return[];b=c||b===void 0?1:Y(b);b=d-b;return Gf(a,0,b<0?0:b)}function Sh(a,b){return a&&a.length?Qf(a,T(b,3),!0,!0):[]}function Th(a,b){return a&&a.length?Qf(a,T(b,3),!0):[]}function Uh(a,b,c,d){var e=a==null?0:a.length;if(!e)return[];c&&typeof c!="number"&&lh(a,b,c)&&(c=0,d=e);return Fe(a,b,c,d)}function Vh(a,b,c){var d=a==null?0:a.length;if(!d)return-1;c=c==null?0:Y(c);c<0&&(c=P(d+c,0));return yc(a,T(b,3),c)}function Wh(a,b,c){var d=a==null?0:a.length;if(!d)return-1;var e=d-1;c!==void 0&&(e=Y(c),e=c<0?P(d+e,0):ld(e,d-1));return yc(a,T(b,3),e,!0)}function Xh(a){var b=a==null?0:a.length;return b?He(a,1):[]}function Yh(a){var b=a==null?0:a.length;return b?He(a,fa):[]}function Zh(a,b){var c=a==null?0:a.length;if(!c)return[];b=b===void 0?1:Y(b);return He(a,b)}function $h(b){var c=-1,d=b==null?0:b.length,a={};while(++c<d){var e=b[c];a[e[0]]=e[1]}return a}function ai(a){return a&&a.length?a[0]:void 0}function bi(a,b,c){var d=a==null?0:a.length;if(!d)return-1;c=c==null?0:Y(c);c<0&&(c=P(d+c,0));return zc(a,b,c)}function ci(a){var b=a==null?0:a.length;return b?Gf(a,0,-1):[]}Od=S(function(a){var b=O(a,Uf);return b.length&&b[0]===a[0]?Ue(b):[]});Qd=S(function(b){var a=ei(b),c=O(b,Uf);a===ei(c)?a=void 0:c.pop();return c.length&&c[0]===b[0]?Ue(c,T(a,2)):[]});Rd=S(function(a){var b=ei(a),c=O(a,Uf);b=typeof b=="function"?b:void 0;b&&c.pop();return c.length&&c[0]===a[0]?Ue(c,void 0,b):[]});function di(a,b){return a==null?"":hd.call(a,b)}function ei(a){var b=a==null?0:a.length;return b?a[b-1]:void 0}function fi(a,b,c){var d=a==null?0:a.length;if(!d)return-1;var e=d;c!==void 0&&(e=Y(c),e=e<0?P(d+e,0):ld(e,d-1));return b===b?cd(a,b,e):yc(a,Bc,e,!0)}function gi(a,b){return a&&a.length?rf(a,Y(b)):void 0}Sd=S(hi);function hi(b,a){return b&&b.length&&a&&a.length?wf(b,a):b}function ii(c,a,b){return c&&c.length&&a&&a.length?wf(c,a,T(b,2)):c}function ji(b,a,c){return b&&b.length&&a&&a.length?wf(b,a,void 0,c):b}Td=Qg(function(b,c){var d=b==null?0:b.length,a=ue(b,c);xf(b,O(c,function(a){return kh(a,d)?+a:a}).sort(eg));return a});function ki(b,c){var a=[];if(!(b&&b.length))return a;var d=-1,e=[],f=b.length;c=T(c,3);while(++d<f){var g=b[d];c(g,d,b)&&(a.push(g),e.push(d))}xf(b,e);return a}function li(a){return a==null?a:pd.call(a)}function mi(a,b,c){var d=a==null?0:a.length;if(!d)return[];c&&typeof c!="number"&&lh(a,b,c)?(b=0,c=d):(b=b==null?0:Y(b),c=c===void 0?d:Y(c));return Gf(a,b,c)}function ni(a,b){return If(a,b)}function oi(b,c,a){return Jf(b,c,T(a,2))}function pi(a,b){var c=a==null?0:a.length;if(c){var d=If(a,b);if(d<c&&Ij(a[d],b))return d}return-1}function qi(a,b){return If(a,b,!0)}function ri(b,c,a){return Jf(b,c,T(a,2),!0)}function si(a,b){var c=a==null?0:a.length;if(c){c=If(a,b,!0)-1;if(Ij(a[c],b))return c}return-1}function ti(a){return a&&a.length?Kf(a):[]}function ui(b,a){return b&&b.length?Kf(b,T(a,2)):[]}function vi(a){var b=a==null?0:a.length;return b?Gf(a,1,b):[]}function wi(a,b,c){if(!(a&&a.length))return[];b=c||b===void 0?1:Y(b);return Gf(a,0,b<0?0:b)}function xi(a,b,c){var d=a==null?0:a.length;if(!d)return[];b=c||b===void 0?1:Y(b);b=d-b;return Gf(a,b<0?0:b,d)}function yi(a,b){return a&&a.length?Qf(a,T(b,3),!1,!0):[]}function zi(a,b){return a&&a.length?Qf(a,T(b,3)):[]}Ud=S(function(a){return Nf(He(a,1,V,!0))});Wd=S(function(b){var a=ei(b);V(a)&&(a=void 0);return Nf(He(b,1,V,!0),T(a,2))});Xd=S(function(a){var b=ei(a);b=typeof b=="function"?b:void 0;return Nf(He(a,1,V,!0),void 0,b)});function Ai(a){return a&&a.length?Nf(a):[]}function Bi(b,a){return b&&b.length?Nf(b,T(a,2)):[]}function Ci(a,b){b=typeof b=="function"?b:void 0;return a&&a.length?Nf(a,void 0,b):[]}function Di(a){if(!(a&&a.length))return[];var b=0;a=nc(a,function(a){if(V(a)){b=P(a.length,b);return!0}});return Ic(b,function(b){return O(a,Dc(b))})}function Ei(b,a){if(!(b&&b.length))return[];b=Di(b);return a==null?b:O(b,function(b){return ic(a,void 0,b)})}Yd=S(function(b,a){return V(b)?Ae(b,a):[]});Zd=S(function(a){return Sf(nc(a,V))});$d=S(function(b){var a=ei(b);V(a)&&(a=void 0);return Sf(nc(b,V),T(a,2))});be=S(function(a){var b=ei(a);b=typeof b=="function"?b:void 0;return Sf(nc(a,V),void 0,b)});ce=S(Di);function Fi(b,a){return Tf(b||[],a||[],oe)}function Gi(b,a){return Tf(b||[],a||[],Df)}ee=S(function(a){var b=a.length;b=b>1?a[b-1]:void 0;b=typeof b=="function"?(a.pop(),b):void 0;return Ei(a,b)});function Hi(a){a=Q(a);a.__chain__=!0;return a}function Ii(a,b){b(a);return a}function Ji(a,b){return b(a)}fe=Qg(function(a){var b=a.length,c=b?a[0]:0,d=this.__wrapped__,e=function(b){return ue(b,a)};if(b>1||this.__actions__.length||!(d instanceof R)||!kh(c))return this.thru(e);d=d.slice(c,+c+(b?1:0));d.__actions__.push({func:Ji,args:[e],thisArg:void 0});return new Fd(d,this.__chain__).thru(function(a){b&&!a.length&&a.push(void 0);return a})});function Ki(){return Hi(this)}function Li(){return new Fd(this.value(),this.__chain__)}function Mi(){this.__values__===void 0&&(this.__values__=nk(this.value()));var a=this.__index__>=this.__values__.length,b=a?void 0:this.__values__[this.__index__++];return{done:a,value:b}}function Ni(){return this}function Oi(d){var c,a=this;while(a instanceof Ed){var b=Mh(a);b.__index__=0;b.__values__=void 0;c?e.__wrapped__=b:c=b;var e=b;a=a.__wrapped__}e.__wrapped__=d;return c}function Pi(){var a=this.__wrapped__;if(a instanceof R){a=a;this.__actions__.length&&(a=new R(this));a=a.reverse();a.__actions__.push({func:Ji,args:[li],thisArg:void 0});return new Fd(a,this.__chain__)}return this.thru(li)}function Qi(){return Rf(this.__wrapped__,this.__actions__)}ge=mg(function(a,b,c){J.call(a,c)?++a[c]:te(a,c,1)});function Ri(a,b,c){var d=U(a)?mc:De;c&&lh(a,b,c)&&(b=void 0);return d(a,T(b,3))}function Si(a,b){var c=U(a)?nc:Ge;return c(a,T(b,3))}he=vg(Vh);ie=vg(Wh);function Ti(b,a){return He(Zi(b,a),1)}function Ui(b,a){return He(Zi(b,a),fa)}function Vi(b,a,c){c=c===void 0?1:Y(c);return He(Zi(b,a),c)}function Wi(b,a){var c=U(b)?kc:Be;return c(b,T(a,3))}function Xi(b,a){var c=U(b)?lc:Ce;return c(b,T(a,3))}og=mg(function(a,b,c){J.call(a,c)?a[c].push(b):te(a,c,[b])});function Yi(a,b,c,d){a=Kj(a)?a:Wk(a);c=c&&!d?Y(c):0;d=a.length;c<0&&(c=P(d+c,0));return hk(a)?c<=d&&a.indexOf(b,c)>-1:!!d&&zc(a,b,c)>-1}pg=S(function(b,c,d){var e=-1,f=typeof c=="function",a=Kj(b)?g(b.length):[];Be(b,function(b){a[++e]=f?ic(c,b,d):We(b,c,d)});return a});Wb=mg(function(a,b,c){te(a,c,b)});function Zi(b,a){var c=U(b)?O:mf;return c(b,T(a,3))}function $i(a,b,c,d){if(a==null)return[];U(b)||(b=b==null?[]:[b]);c=d?void 0:c;U(c)||(c=c==null?[]:[c]);return sf(a,b,c)}h=mg(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]});function aj(b,a,c){var d=U(b)?rc:Fc,e=arguments.length<3;return d(b,T(a,4),c,e,Be)}function bj(b,a,c){var d=U(b)?sc:Fc,e=arguments.length<3;return d(b,T(a,4),c,e,Ce)}function cj(a,b){var c=U(a)?nc:Ge;return c(a,tj(T(b,3)))}function dj(a){var b=U(a)?ke:Bf;return b(a)}function ej(a,b,c){(c?lh(a,b,c):b===void 0)?b=1:b=Y(b);c=U(a)?le:Cf;return c(a,b)}function fj(a){var b=U(a)?me:Ff;return b(a)}function gj(a){if(a==null)return 0;if(Kj(a))return hk(a)?dd(a):a.length;var b=bh(a);return b==E||b==Aa?a.size:jf(a).length}function hj(a,b,c){var d=U(a)?tc:Hf;c&&lh(a,b,c)&&(b=void 0);return d(a,T(b,3))}rd=S(function(a,b){if(a==null)return[];var c=b.length;c>1&&lh(a,b[0],b[1])?b=[]:c>2&&lh(b[0],b[1],b[2])&&(b=[b[0]]);return sf(a,He(b,1),[])});var ij=Zb||function(){return N.Date.now()};function jj(a,b){if(typeof b!="function")throw new I(f);a=Y(a);return function(){if(--a<1)return b.apply(this,arguments)}}function kj(a,b,c){b=c?void 0:b;b=a&&b==null?a.length:b;return Jg(a,y,void 0,void 0,void 0,void 0,b)}function lj(b,c){var a;if(typeof c!="function")throw new I(f);b=Y(b);return function(){--b>0&&(a=c.apply(this,arguments));b<=1&&(c=void 0);return a}}var mj=S(function(a,b,c){var d=r;if(c.length){var e=Zc(c,Vg(mj));d|=w}return Jg(a,d,b,c,e)}),nj=S(function(a,b,c){var d=r|s;if(c.length){var e=Zc(c,Vg(nj));d|=w}return Jg(b,d,a,c,e)});function oj(a,b,c){b=c?void 0:b;c=Jg(a,u,void 0,void 0,void 0,void 0,void 0,b);c.placeholder=oj.placeholder;return c}function pj(a,b,c){b=c?void 0:b;c=Jg(a,v,void 0,void 0,void 0,void 0,void 0,b);c.placeholder=pj.placeholder;return c}function qj(b,c,d){var e,g,h,a,i,j,k=0,l=!1,m=!1,n=!0;if(typeof b!="function")throw new I(f);c=qk(c)||0;W(d)&&(l=!!d.leading,m="maxWait"in d,h=m?P(qk(d.maxWait)||0,c):h,n="trailing"in d?!!d.trailing:n);function o(c){var d=e,f=g;e=g=void 0;k=c;a=b.apply(f,d);return a}function p(b){k=b;i=Dh(s,c);return l?o(b):a}function q(a){var b=a-j;a=a-k;b=c-b;return m?ld(b,h-a):b}function r(a){var b=a-j;a=a-k;return j===void 0||b>=c||b<0||m&&a>=h}function s(){var a=ij();if(r(a))return t(a);i=Dh(s,q(a))}function t(b){i=void 0;if(n&&e)return o(b);e=g=void 0;return a}function u(){i!==void 0&&Yf(i),k=0,e=j=g=i=void 0}function v(){return i===void 0?a:t(ij())}function w(){var b=ij(),d=r(b);e=arguments;g=this;j=b;if(d){if(i===void 0)return p(j);if(m){Yf(i);i=Dh(s,c);return o(j)}}i===void 0&&(i=Dh(s,c));return a}w.cancel=u;w.flush=v;return w}b=S(function(a,b){return ze(a,1,b)});uc=S(function(a,b,c){return ze(a,qk(b)||0,c)});function rj(a){return Jg(a,A)}function sj(a,b){if(typeof a!="function"||b!=null&&typeof b!="function")throw new I(f);var c=function(){var e=arguments,f=b?b.apply(this,e):e[0],g=c.cache;if(g.has(f))return g.get(f);var d=a.apply(this,e);c.cache=g.set(f,d)||g;return d};c.cache=new(sj.Cache||Vd);return c}sj.Cache=Vd;function tj(a){if(typeof a!="function")throw new I(f);return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function uj(a){return lj(2,a)}Gh=Kd(function(a,b){b=b.length==1&&U(b[0])?O(b[0],Kc(T())):O(He(b,1),Kc(T()));var c=b.length;return S(function(d){var e=-1,f=ld(d.length,c);while(++e<f)d[e]=b[e].call(this,d[e]);return ic(a,this,d)})});var vj=S(function(a,b){var c=Zc(b,Vg(vj));return Jg(a,w,void 0,b,c)}),wj=S(function(a,b){var c=Zc(b,Vg(wj));return Jg(a,x,void 0,b,c)});K=Qg(function(a,b){return Jg(a,z,void 0,void 0,void 0,b)});function xj(a,b){if(typeof a!="function")throw new I(f);b=b===void 0?b:Y(b);return S(a,b)}function yj(a,b){if(typeof a!="function")throw new I(f);b=b==null?0:P(Y(b),0);return S(function(c){var d=c[b];c=Xf(c,0,b);d&&qc(c,d);return ic(a,this,c)})}function zj(a,b,c){var d=!0,e=!0;if(typeof a!="function")throw new I(f);W(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e);return qj(a,b,{leading:d,maxWait:b,trailing:e})}function Aj(a){return kj(a,1)}function Bj(a,b){return vj(Vf(b),a)}function Cj(){if(!arguments.length)return[];var a=arguments[0];return U(a)?a:[a]}function Dj(a){return we(a,o)}function Ej(a,b){b=typeof b=="function"?b:void 0;return we(a,o,b)}function Fj(a){return we(a,m|o)}function Gj(a,b){b=typeof b=="function"?b:void 0;return we(a,m|o,b)}function Hj(a,b){return b==null||ye(a,b,$(b))}function Ij(a,b){return a===b||a!==a&&b!==b}uh=Eg(Qe);vg=Eg(function(a,b){return a>=b});var Jj=Xe(function(){return arguments}())?Xe:function(a){return X(a)&&J.call(a,"callee")&&!Ob.call(a,"callee")},U=g.isArray;mg=cc?Kc(cc):Ye;function Kj(a){return a!=null&&Vj(a.length)&&!Tj(a)}function V(a){return X(a)&&Kj(a)}function Lj(a){return a===!0||a===!1||X(a)&&Pe(a)==pa}var Mj=Ab||Zl;Zb=dc?Kc(dc):Ze;function Nj(a){return X(a)&&a.nodeType===1&&!dk(a)}function Oj(a){if(a==null)return!0;if(Kj(a)&&(U(a)||typeof a=="string"||typeof a.splice=="function"||Mj(a)||jk(a)||Jj(a)))return!a.length;var b=bh(a);if(b==E||b==Aa)return!a.size;if(rh(a))return!jf(a).length;for(b in a)if(J.call(a,b))return!1;return!0}function Pj(a,b){return $e(a,b)}function Qj(b,c,d){d=typeof d=="function"?d:void 0;var a=d?d(b,c):void 0;return a===void 0?$e(b,c,void 0,d):!!a}function Rj(a){if(!X(a))return!1;var b=Pe(a);return b==sa||b==ra||typeof a.message=="string"&&typeof a.name=="string"&&!dk(a)}function Sj(a){return typeof a=="number"&&gd(a)}function Tj(a){if(!W(a))return!1;a=Pe(a);return a==ta||a==ua||a==oa||a==ya}function Uj(a){return typeof a=="number"&&a==Y(a)}function Vj(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=ga}function W(a){var b=typeof a;return a!=null&&(b=="object"||b=="function")}function X(a){return a!=null&&typeof a=="object"}var Wj=ec?Kc(ec):bf;function Xj(a,b){return a===b||cf(a,b,Xg(b))}function Yj(a,b,c){c=typeof c=="function"?c:void 0;return cf(a,b,Xg(b),c)}function Zj(a){return ck(a)&&a!=+a}function $j(a){if(qh(a))throw new i(e);return df(a)}function ak(a){return a===null}function bk(a){return a==null}function ck(a){return typeof a=="number"||X(a)&&Pe(a)==va}function dk(a){if(!X(a)||Pe(a)!=xa)return!1;a=Mb(a);if(a===null)return!0;a=J.call(a,"constructor")&&a.constructor;return typeof a=="function"&&a instanceof a&&Db.call(a)==Hb}var ek=fc?Kc(fc):ef;function fk(a){return Uj(a)&&a>=-ga&&a<=ga}var gk=gc?Kc(gc):ff;function hk(a){return typeof a=="string"||!U(a)&&X(a)&&Pe(a)==Ba}function ik(a){return typeof a=="symbol"||X(a)&&Pe(a)==Ca}var jk=hc?Kc(hc):gf;function kk(a){return a===void 0}function lk(a){return X(a)&&bh(a)==Ea}function mk(a){return X(a)&&Pe(a)==Fa}Kd=Eg(lf);Xe=Eg(function(a,b){return a<=b});function nk(a){if(!a)return[];if(Kj(a))return hk(a)?ed(a):ig(a);if(Tb&&a[Tb])return Wc(a[Tb]());var b=bh(a);b=b==E?Xc:b==Aa?$c:Wk;return b(a)}function ok(a){if(!a)return a===0?a:0;a=qk(a);if(a===fa||a===-fa){var b=a<0?-1:1;return b*ha}return a===a?a:0}function Y(a){a=ok(a);var b=a%1;return a===a?b?a-b:a:0}function pk(a){return a?ve(Y(a),0,D):0}function qk(a){if(typeof a=="number")return a;if(ik(a))return ia;if(W(a)){var b=typeof a.valueOf=="function"?a.valueOf():a;a=W(b)?b+"":b}if(typeof a!="string")return a===0?a:+a;a=a.replace(fb,"");b=qb.test(a);return b||sb.test(a)?ac(a.slice(2),b?2:8):pb.test(a)?ia:+a}function rk(a){return jg(a,Gk(a))}function sk(a){return a?ve(Y(a),-ga,ga):a===0?a:0}function Z(a){return a==null?"":Mf(a)}Ye=ng(function(a,b){if(rh(b)||Kj(b)){jg(b,$(b),a);return}for(var c in b)J.call(b,c)&&oe(a,c,b[c])});Ab=ng(function(a,b){jg(b,Gk(b),a)});var tk=ng(function(a,b,c,d){jg(b,Gk(b),a,d)});Ze=ng(function(a,b,c,d){jg(b,$(b),a,d)});bf=Qg(ue);function uk(a,b){a=Dd(a);return b==null?a:re(a,b)}ef=S(function(a,b){a=G(a);var c=-1,d=b.length,e=d>2?b[2]:void 0;e&&lh(b[0],b[1],e)&&(d=1);while(++c<d){e=b[c];var f=Gk(e),g=-1,h=f.length;while(++g<h){var i=f[g],j=a[i];(j===void 0||Ij(j,Bb[i])&&!J.call(a,i))&&(a[i]=e[i])}}return a});ff=S(function(a){a.push(void 0,Lg);return ic(Kk,void 0,a)});function vk(a,b){return xc(a,T(b,3),Ke)}function wk(a,b){return xc(a,T(b,3),Le)}function xk(b,a){return b==null?b:Ie(b,T(a,3),Gk)}function yk(b,a){return b==null?b:Je(b,T(a,3),Gk)}function zk(b,a){return b&&Ke(b,T(a,3))}function Ak(b,a){return b&&Le(b,T(a,3))}function Bk(a){return a==null?[]:Me(a,$(a))}function Ck(a){return a==null?[]:Me(a,Gk(a))}function Dk(a,b,c){a=a==null?void 0:Ne(a,b);return a===void 0?c:a}function Ek(a,b){return a!=null&&eh(a,b,Re)}function Fk(a,b){return a!=null&&eh(a,b,Se)}gf=yg(function(a,b,c){b!=null&&typeof b.toString!="function"&&(b=Gb.call(b)),a[b]=c},Gl(Jl));Eg=yg(function(a,b,c){b!=null&&typeof b.toString!="function"&&(b=Gb.call(b)),J.call(a,b)?a[b].push(c):a[b]=[c]},T);yg=S(We);function $(a){return Kj(a)?je(a):jf(a)}function Gk(a){return Kj(a)?je(a,!0):kf(a)}function Hk(c,b){var a={};b=T(b,3);Ke(c,function(d,e,c){te(a,b(d,e,c),d)});return a}function Ik(c,b){var a={};b=T(b,3);Ke(c,function(d,e,c){te(a,e,b(d,e,c))});return a}var Jk=ng(function(a,b,c){pf(a,b,c)}),Kk=ng(function(a,b,c,d){pf(a,b,c,d)});ng=Qg(function(b,c){var a={};if(b==null)return a;var d=!1;c=O(c,function(a){a=Wf(a,b);d||(d=a.length>1);return a});jg(b,Sg(b),a);d&&(a=we(a,m|n|o,Mg));var e=c.length;while(e--)Of(a,c[e]);return a});function Lk(a,b){return Nk(a,tj(T(b)))}var Mk=Qg(function(a,b){return a==null?{}:tf(a,b)});function Nk(a,b){if(a==null)return{};var c=O(Sg(a),function(a){return[a]});b=T(b);return uf(a,c,function(a,c){return b(a,c[0])})}function Ok(a,b,c){b=Wf(b,a);var d=-1,e=b.length;e||(e=1,a=void 0);while(++d<e){var f=a==null?void 0:a[Jh(b[d])];f===void 0&&(d=e,f=c);a=Tj(f)?f.call(a):f}return a}function Pk(a,b,c){return a==null?a:Df(a,b,c)}function Qk(a,b,c,d){d=typeof d=="function"?d:void 0;return a==null?a:Df(a,b,c,d)}var Rk=Ig($);Ig=Ig(Gk);function Sk(b,a,c){var d=U(b),e=d||Mj(b)||jk(b);a=T(a,4);if(c==null){var f=b&&b.constructor;e?c=d?new f:[]:W(b)?c=Tj(f)?Dd(Mb(b)):{}:c={}}(e?kc:Ke)(b,function(d,e,b){return a(c,d,e,b)});return c}function Tk(a,b){return a==null?!0:Of(a,b)}function Uk(a,b,c){return a==null?a:Pf(a,b,Vf(c))}function Vk(a,b,c,d){d=typeof d=="function"?d:void 0;return a==null?a:Pf(a,b,Vf(c),d)}function Wk(a){return a==null?[]:Lc(a,$(a))}function Xk(a){return a==null?[]:Lc(a,Gk(a))}function Yk(a,b,c){c===void 0&&(c=b,b=void 0);c!==void 0&&(c=qk(c),c=c===c?c:0);b!==void 0&&(b=qk(b),b=b===b?b:0);return ve(qk(a),b,c)}function Zk(a,b,c){b=ok(b);c===void 0?(c=b,b=0):c=ok(c);a=qk(a);return Te(a,b,c)}function $k(a,b,c){c&&typeof c!="boolean"&&lh(a,b,c)&&(b=c=void 0);c===void 0&&(typeof b=="boolean"?(c=b,b=void 0):typeof a=="boolean"&&(c=a,a=void 0));a===void 0&&b===void 0?(a=0,b=1):(a=ok(a),b===void 0?(b=a,a=0):b=ok(b));if(a>b){var d=a;a=b;b=d}if(c||a%1||b%1){d=od();return ld(a+d*(b-a+$b("1e-"+((d+"").length-1))),b)}return yf(a,b)}var al=sg(function(a,b,c){b=b.toLowerCase();return a+(c?bl(b):b)});function bl(a){return Bl(Z(a).toLowerCase())}function cl(a){a=Z(a);return a&&a.replace(ub,Qc).replace(Sb,"")}function dl(a,b,c){a=Z(a);b=Mf(b);var d=a.length;c=c===void 0?d:ve(Y(c),0,d);d=c;c-=b.length;return c>=0&&a.slice(c,d)==b}function el(a){a=Z(a);return a&&Xa.test(a)?a.replace(Va,Rc):a}function fl(a){a=Z(a);return a&&eb.test(a)?a.replace(db,"\\$&"):a}var gl=sg(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),hl=sg(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),il=rg("toLowerCase");function jl(a,b,c){a=Z(a);b=Y(b);var d=b?dd(a):0;if(!b||d>=b)return a;b=(b-d)/2;return Bg(Ec(b),c)+a+Bg(vc(b),c)}function kl(a,b,c){a=Z(a);b=Y(b);var d=b?dd(a):0;return b&&d<b?a+Bg(b-d,c):a}function ll(a,b,c){a=Z(a);b=Y(b);var d=b?dd(a):0;return b&&d<b?Bg(b-d,c)+a:a}function ml(a,b,c){c||b==null?b=0:b&&(b=+b);return nd(Z(a).replace(gb,""),b||0)}function nl(a,b,c){(c?lh(a,b,c):b===void 0)?b=1:b=Y(b);return Af(Z(a),b)}function ol(){var a=arguments,b=Z(a[0]);return a.length<3?b:b.replace(a[1],a[2])}var pl=sg(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()});function ql(a,b,c){c&&typeof c!="number"&&lh(a,b,c)&&(b=c=void 0);c=c===void 0?D:c>>>0;if(!c)return[];a=Z(a);if(a&&(typeof b=="string"||b!=null&&!ek(b))){b=Mf(b);if(!b&&Uc(a))return Xf(ed(a),0,c)}return a.split(b,c)}var rl=sg(function(a,b,c){return a+(c?" ":"")+Bl(b)});function sl(a,b,c){a=Z(a);c=c==null?0:ve(Y(c),0,a.length);b=Mf(b);return a.slice(c,c+b.length)==b}function tl(a,b,c){var d=Q.templateSettings;c&&lh(a,b,c)&&(b=void 0);a=Z(a);b=tk({},b,d,Kg);c=tk({},b.imports,d.imports,Kg);var e=$(c),f=Lc(c,e),g,h,i=0;d=b.interpolate||vb;var j="__p += '";c=H((b.escape||vb).source+"|"+d.source+"|"+(d===$a?nb:vb).source+"|"+(b.evaluate||vb).source+"|$","g");var k="//# sourceURL="+(J.call(b,"sourceURL")?(b.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Yb+"]")+"\n";a.replace(c,function(b,c,d,e,f,k){d||(d=e);j+=a.slice(i,k).replace(wb,Sc);c&&(g=!0,j+="' +\n__e("+c+") +\n'");f&&(h=!0,j+="';\n"+f+";\n__p += '");d&&(j+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'");i=k+b.length;return b});j+="';\n";d=J.call(b,"variable")&&b.variable;d||(j="with (obj) {\n"+j+"\n}\n");j=(h?j.replace(Ra,""):j).replace(Sa,"$1").replace(Ta,"$1;");j="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(g?", __e = _.escape":"")+(h?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+j+"return __p\n}";c=Dl(function(){return lb(e,k+"return "+j).apply(void 0,f)});c.source=j;if(Rj(c))throw c;return c}function ul(a){return Z(a).toLowerCase()}function vl(a){return Z(a).toUpperCase()}function wl(a,b,c){a=Z(a);if(a&&(c||b===void 0))return a.replace(fb,"");if(!a||!(b=Mf(b)))return a;c=ed(a);a=ed(b);b=Nc(c,a);a=Oc(c,a)+1;return Xf(c,b,a).join("")}function xl(a,b,c){a=Z(a);if(a&&(c||b===void 0))return a.replace(hb,"");if(!a||!(b=Mf(b)))return a;c=ed(a);a=Oc(c,ed(b))+1;return Xf(c,0,a).join("")}function yl(a,b,c){a=Z(a);if(a&&(c||b===void 0))return a.replace(gb,"");if(!a||!(b=Mf(b)))return a;c=ed(a);a=Nc(c,ed(b));return Xf(c,a).join("")}function zl(a,b){var c=B,d=aa;if(W(b)){var e="separator"in b?b.separator:e;c="length"in b?Y(b.length):c;d="omission"in b?Mf(b.omission):d}a=Z(a);b=a.length;if(Uc(a)){var f=ed(a);b=f.length}if(c>=b)return a;b=c-dd(d);if(b<1)return d;c=f?Xf(f,0,b).join(""):a.slice(0,b);if(e===void 0)return c+d;f&&(b+=c.length-b);if(ek(e)){if(a.slice(b).search(e)){var g,h=c;e.global||(e=H(e.source,Z(ob.exec(e))+"g"));e.lastIndex=0;while(g=e.exec(h))var i=g.index;c=c.slice(0,i===void 0?b:i)}}else if(a.indexOf(Mf(e),b)!=b){g=c.lastIndexOf(e);g>-1&&(c=c.slice(0,g))}return c+d}function Al(a){a=Z(a);return a&&Wa.test(a)?a.replace(Ua,fd):a}sg=sg(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()});var Bl=rg("toUpperCase");function Cl(a,b,c){a=Z(a);b=c?void 0:b;return b===void 0?Vc(a)?id(a):wc(a):a.match(b)||[]}var Dl=S(function(a,b){try{return ic(a,void 0,b)}catch(a){return Rj(a)?a:new i(a)}});rg=Qg(function(a,b){kc(b,function(b){b=Jh(b),te(a,b,mj(a[b],a))});return a});function El(a){var b=a==null?0:a.length,c=T();a=b?O(a,function(a){if(typeof a[1]!="function")throw new I(f);return[c(a[0]),a[1]]}):[];return S(function(c){var d=-1;while(++d<b){var e=a[d];if(ic(e[0],this,c))return ic(e[1],this,c)}})}function Fl(a){return xe(we(a,m))}function Gl(a){return function(){return a}}function Hl(a,b){return a==null||a!==a?b:a}var Il=wg();wg=wg(!0);function Jl(a){return a}function Kl(a){return hf(typeof a=="function"?a:we(a,m))}function Ll(a){return nf(we(a,m))}function Ml(a,b){return of(a,we(b,m))}var Nl=S(function(a,b){return function(c){return We(c,a,b)}}),Ol=S(function(a,b){return function(c){return We(a,c,b)}});function Pl(b,c,d){var e=$(c),f=Me(c,e);d==null&&!(W(c)&&(f.length||!e.length))&&(d=c,c=b,b=this,f=Me(c,$(c)));var a=!(W(d)&&"chain"in d)||!!d.chain,g=Tj(b);kc(f,function(d){var e=c[d];b[d]=e;g&&(b.prototype[d]=function(){var d=this.__chain__;if(a||d){var c=b(this.__wrapped__),f=c.__actions__=ig(this.__actions__);f.push({func:e,args:arguments,thisArg:b});c.__chain__=d;return c}return e.apply(b,qc([this.value()],arguments))})});return b}function Ql(){N._===this&&(N._=Ib);return this}function Rl(){}function Sl(a){a=Y(a);return S(function(b){return rf(b,a)})}var Tl=Ag(O),Ul=Ag(mc);Ag=Ag(tc);function Vl(a){return mh(a)?Dc(Jh(a)):vf(a)}function Wl(a){return function(b){return a==null?void 0:Ne(a,b)}}var Xl=Dg();Dg=Dg(!0);function Yl(){return[]}function Zl(){return!1}function $l(){return{}}function am(){return""}function bm(){return!0}function cm(b,a){b=Y(b);if(b<1||b>ga)return[];var c=D,d=ld(b,D);a=T(a);b-=D;d=Ic(d,a);while(++c<b)a(c);return d}function dm(a){return U(a)?O(a,Jh):ik(a)?[a]:ig(Ih(Z(a)))}function em(a){var b=++Eb;return Z(a)+b}var fm=zg(function(a,b){return a+b},0),gm=Gg("ceil"),hm=zg(function(a,b){return a/b},1),im=Gg("floor");function jm(a){return a&&a.length?Ee(a,Jl,Qe):void 0}function km(b,a){return b&&b.length?Ee(b,T(a,2),Qe):void 0}function lm(a){return Cc(a,Jl)}function mm(b,a){return Cc(b,T(a,2))}function nm(a){return a&&a.length?Ee(a,Jl,lf):void 0}function om(b,a){return b&&b.length?Ee(b,T(a,2),lf):void 0}var pm=zg(function(a,b){return a*b},1);Gg=Gg("round");zg=zg(function(a,b){return a-b},0);function qm(a){return a&&a.length?Hc(a,Jl):0}function rm(b,a){return b&&b.length?Hc(b,T(a,2)):0}Q.after=jj;Q.ary=kj;Q.assign=Ye;Q.assignIn=Ab;Q.assignInWith=tk;Q.assignWith=Ze;Q.at=bf;Q.before=lj;Q.bind=mj;Q.bindAll=rg;Q.bindKey=nj;Q.castArray=Cj;Q.chain=Hi;Q.chunk=Nh;Q.compact=Oh;Q.concat=Ph;Q.cond=El;Q.conforms=Fl;Q.constant=Gl;Q.countBy=ge;Q.create=uk;Q.curry=oj;Q.curryRight=pj;Q.debounce=qj;Q.defaults=ef;Q.defaultsDeep=ff;Q.defer=b;Q.delay=uc;Q.difference=Ld;Q.differenceBy=Md;Q.differenceWith=Nd;Q.drop=Qh;Q.dropRight=Rh;Q.dropRightWhile=Sh;Q.dropWhile=Th;Q.fill=Uh;Q.filter=Si;Q.flatMap=Ti;Q.flatMapDeep=Ui;Q.flatMapDepth=Vi;Q.flatten=Xh;Q.flattenDeep=Yh;Q.flattenDepth=Zh;Q.flip=rj;Q.flow=Il;Q.flowRight=wg;Q.fromPairs=$h;Q.functions=Bk;Q.functionsIn=Ck;Q.groupBy=og;Q.initial=ci;Q.intersection=Od;Q.intersectionBy=Qd;Q.intersectionWith=Rd;Q.invert=gf;Q.invertBy=Eg;Q.invokeMap=pg;Q.iteratee=Kl;Q.keyBy=Wb;Q.keys=$;Q.keysIn=Gk;Q.map=Zi;Q.mapKeys=Hk;Q.mapValues=Ik;Q.matches=Ll;Q.matchesProperty=Ml;Q.memoize=sj;Q.merge=Jk;Q.mergeWith=Kk;Q.method=Nl;Q.methodOf=Ol;Q.mixin=Pl;Q.negate=tj;Q.nthArg=Sl;Q.omit=ng;Q.omitBy=Lk;Q.once=uj;Q.orderBy=$i;Q.over=Tl;Q.overArgs=Gh;Q.overEvery=Ul;Q.overSome=Ag;Q.partial=vj;Q.partialRight=wj;Q.partition=h;Q.pick=Mk;Q.pickBy=Nk;Q.property=Vl;Q.propertyOf=Wl;Q.pull=Sd;Q.pullAll=hi;Q.pullAllBy=ii;Q.pullAllWith=ji;Q.pullAt=Td;Q.range=Xl;Q.rangeRight=Dg;Q.rearg=K;Q.reject=cj;Q.remove=ki;Q.rest=xj;Q.reverse=li;Q.sampleSize=ej;Q.set=Pk;Q.setWith=Qk;Q.shuffle=fj;Q.slice=mi;Q.sortBy=rd;Q.sortedUniq=ti;Q.sortedUniqBy=ui;Q.split=ql;Q.spread=yj;Q.tail=vi;Q.take=wi;Q.takeRight=xi;Q.takeRightWhile=yi;Q.takeWhile=zi;Q.tap=Ii;Q.throttle=zj;Q.thru=Ji;Q.toArray=nk;Q.toPairs=Rk;Q.toPairsIn=Ig;Q.toPath=dm;Q.toPlainObject=rk;Q.transform=Sk;Q.unary=Aj;Q.union=Ud;Q.unionBy=Wd;Q.unionWith=Xd;Q.uniq=Ai;Q.uniqBy=Bi;Q.uniqWith=Ci;Q.unset=Tk;Q.unzip=Di;Q.unzipWith=Ei;Q.update=Uk;Q.updateWith=Vk;Q.values=Wk;Q.valuesIn=Xk;Q.without=Yd;Q.words=Cl;Q.wrap=Bj;Q.xor=Zd;Q.xorBy=$d;Q.xorWith=be;Q.zip=ce;Q.zipObject=Fi;Q.zipObjectDeep=Gi;Q.zipWith=ee;Q.entries=Rk;Q.entriesIn=Ig;Q.extend=Ab;Q.extendWith=tk;Pl(Q,Q);Q.add=fm;Q.attempt=Dl;Q.camelCase=al;Q.capitalize=bl;Q.ceil=gm;Q.clamp=Yk;Q.clone=Dj;Q.cloneDeep=Fj;Q.cloneDeepWith=Gj;Q.cloneWith=Ej;Q.conformsTo=Hj;Q.deburr=cl;Q.defaultTo=Hl;Q.divide=hm;Q.endsWith=dl;Q.eq=Ij;Q.escape=el;Q.escapeRegExp=fl;Q.every=Ri;Q.find=he;Q.findIndex=Vh;Q.findKey=vk;Q.findLast=ie;Q.findLastIndex=Wh;Q.findLastKey=wk;Q.floor=im;Q.forEach=Wi;Q.forEachRight=Xi;Q.forIn=xk;Q.forInRight=yk;Q.forOwn=zk;Q.forOwnRight=Ak;Q.get=Dk;Q.gt=uh;Q.gte=vg;Q.has=Ek;Q.hasIn=Fk;Q.head=ai;Q.identity=Jl;Q.includes=Yi;Q.indexOf=bi;Q.inRange=Zk;Q.invoke=yg;Q.isArguments=Jj;Q.isArray=U;Q.isArrayBuffer=mg;Q.isArrayLike=Kj;Q.isArrayLikeObject=V;Q.isBoolean=Lj;Q.isBuffer=Mj;Q.isDate=Zb;Q.isElement=Nj;Q.isEmpty=Oj;Q.isEqual=Pj;Q.isEqualWith=Qj;Q.isError=Rj;Q.isFinite=Sj;Q.isFunction=Tj;Q.isInteger=Uj;Q.isLength=Vj;Q.isMap=Wj;Q.isMatch=Xj;Q.isMatchWith=Yj;Q.isNaN=Zj;Q.isNative=$j;Q.isNil=bk;Q.isNull=ak;Q.isNumber=ck;Q.isObject=W;Q.isObjectLike=X;Q.isPlainObject=dk;Q.isRegExp=ek;Q.isSafeInteger=fk;Q.isSet=gk;Q.isString=hk;Q.isSymbol=ik;Q.isTypedArray=jk;Q.isUndefined=kk;Q.isWeakMap=lk;Q.isWeakSet=mk;Q.join=di;Q.kebabCase=gl;Q.last=ei;Q.lastIndexOf=fi;Q.lowerCase=hl;Q.lowerFirst=il;Q.lt=Kd;Q.lte=Xe;Q.max=jm;Q.maxBy=km;Q.mean=lm;Q.meanBy=mm;Q.min=nm;Q.minBy=om;Q.stubArray=Yl;Q.stubFalse=Zl;Q.stubObject=$l;Q.stubString=am;Q.stubTrue=bm;Q.multiply=pm;Q.nth=gi;Q.noConflict=Ql;Q.noop=Rl;Q.now=ij;Q.pad=jl;Q.padEnd=kl;Q.padStart=ll;Q.parseInt=ml;Q.random=$k;Q.reduce=aj;Q.reduceRight=bj;Q.repeat=nl;Q.replace=ol;Q.result=Ok;Q.round=Gg;Q.runInContext=a;Q.sample=dj;Q.size=gj;Q.snakeCase=pl;Q.some=hj;Q.sortedIndex=ni;Q.sortedIndexBy=oi;Q.sortedIndexOf=pi;Q.sortedLastIndex=qi;Q.sortedLastIndexBy=ri;Q.sortedLastIndexOf=si;Q.startCase=rl;Q.startsWith=sl;Q.subtract=zg;Q.sum=qm;Q.sumBy=rm;Q.template=tl;Q.times=cm;Q.toFinite=ok;Q.toInteger=Y;Q.toLength=pk;Q.toLower=ul;Q.toNumber=qk;Q.toSafeInteger=sk;Q.toString=Z;Q.toUpper=vl;Q.trim=wl;Q.trimEnd=xl;Q.trimStart=yl;Q.truncate=zl;Q.unescape=Al;Q.uniqueId=em;Q.upperCase=sg;Q.upperFirst=Bl;Q.each=Wi;Q.eachRight=Xi;Q.first=ai;Pl(Q,function(){var a={};Ke(Q,function(b,c){J.call(Q.prototype,c)||(a[c]=b)});return a}(),{chain:!1});Q.VERSION=c;kc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Q[a].placeholder=Q});kc(["drop","take"],function(a,b){R.prototype[a]=function(d){d=d===void 0?1:P(Y(d),0);var c=this.__filtered__&&!b?new R(this):this.clone();c.__filtered__?c.__takeCount__=ld(d,c.__takeCount__):c.__views__.push({size:ld(d,D),type:a+(c.__dir__<0?"Right":"")});return c},R.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}});kc(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c==da||c==C;R.prototype[a]=function(b){var a=this.clone();a.__iteratees__.push({iteratee:T(b,3),type:c});a.__filtered__=a.__filtered__||d;return a}});kc(["head","last"],function(a,b){var c="take"+(b?"Right":"");R.prototype[a]=function(){return this[c](1).value()[0]}});kc(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");R.prototype[a]=function(){return this.__filtered__?new R(this):this[c](1)}});R.prototype.compact=function(){return this.filter(Jl)};R.prototype.find=function(a){return this.filter(a).head()};R.prototype.findLast=function(a){return this.reverse().find(a)};R.prototype.invokeMap=S(function(a,b){return typeof a=="function"?new R(this):this.map(function(c){return We(c,a,b)})});R.prototype.reject=function(a){return this.filter(tj(T(a)))};R.prototype.slice=function(b,c){b=Y(b);var a=this;if(a.__filtered__&&(b>0||c<0))return new R(a);b<0?a=a.takeRight(-b):b&&(a=a.drop(b));c!==void 0&&(c=Y(c),a=c<0?a.dropRight(-c):a.take(c-b));return a};R.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()};R.prototype.toArray=function(){return this.take(D)};Ke(R.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=Q[d?"take"+(b=="last"?"Right":""):b],f=d||/^find/.test(b);if(!e)return;Q.prototype[b]=function(){var h=this.__wrapped__,i=d?[1]:arguments,j=h instanceof R,g=i[0],k=j||U(h),l=function(a){a=e.apply(Q,qc([a],i));return d&&m?a[0]:a};k&&c&&typeof g=="function"&&g.length!=1&&(j=k=!1);var m=this.__chain__,n=!!this.__actions__.length,o=f&&!m,p=j&&!n;if(!f&&k){h=p?h:new R(this);var b=a.apply(h,i);b.__actions__.push({func:Ji,args:[l],thisArg:void 0});return new Fd(b,m)}if(o&&p)return a.apply(this,i);b=this.thru(l);return o?d?b.value()[0]:b.value():b}});kc(["pop","push","shift","sort","splice","unshift"],function(a){var b=zb[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);Q.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(U(e)?e:[],a)}return this[c](function(c){return b.apply(U(c)?c:[],a)})}});Ke(R.prototype,function(a,b){a=Q[b];if(a){var c=a.name+"";J.call(vd,c)||(vd[c]=[]);vd[c].push({name:b,func:a})}});vd[xg(void 0,s).name]=[{name:"wrapper",func:void 0}];R.prototype.clone=Gd;R.prototype.reverse=Hd;R.prototype.value=Id;Q.prototype.at=fe;Q.prototype.chain=Ki;Q.prototype.commit=Li;Q.prototype.next=Mi;Q.prototype.plant=Oi;Q.prototype.reverse=Pi;Q.prototype.toJSON=Q.prototype.valueOf=Q.prototype.value=Qi;Q.prototype.first=Q.prototype.head;Tb&&(Q.prototype[Tb]=Ni);return Q};var jd=Ob();typeof i=="function"&&typeof i.amd=="object"&&i.amd?(N._=jd,i(function(){return jd})):J?((J.exports=jd)._=jd,zb._=jd):N._=jd}).call(this)}var k=!1;function l(){k||(k=!0,j());return h.exports}c={};var m={exports:c};function n(){var a=Array.isArray;m.exports=a}var o=!1;function p(){o||(o=!0,n());return m.exports}d={};var q={exports:d};function r(){var b=typeof a=="object"&&a&&a.Object===Object&&a;q.exports=b}var s=!1;function t(){s||(s=!0,r());return q.exports}f={};var u={exports:f};function v(){var a=t(),b=typeof self=="object"&&self&&self.Object===Object&&self;a=a||b||Function("return this")();u.exports=a}var w=!1;function x(){w||(w=!0,v());return u.exports}c={};var y={exports:c};function z(){var a=x();a=a.Symbol;y.exports=a}var A=!1;function B(){A||(A=!0,z());return y.exports}d={};var aa={exports:d};function ba(){var a=B(),b=Object.prototype,c=b.hasOwnProperty,d=b.toString,e=a?a.toStringTag:void 0;function f(a){var b=c.call(a,e),f=a[e];try{a[e]=void 0;var g=!0}catch(a){}var h=d.call(a);g&&(b?a[e]=f:delete a[e]);return h}aa.exports=f}var ca=!1;function da(){ca||(ca=!0,ba());return aa.exports}f={};var ea={exports:f};function C(){var a=Object.prototype,b=a.toString;function c(a){return b.call(a)}ea.exports=c}var fa=!1;function ga(){fa||(fa=!0,C());return ea.exports}c={};var ha={exports:c};function ia(){var a=B(),b=da(),c=ga(),d="[object Null]",e="[object Undefined]",f=a?a.toStringTag:void 0;function g(a){return a==null?a===void 0?e:d:f&&f in Object(a)?b(a):c(a)}ha.exports=g}var D=!1;function ja(){D||(D=!0,ia());return ha.exports}d={};var ka={exports:d};function la(){function a(a){return a!=null&&typeof a=="object"}ka.exports=a}var ma=!1;function na(){ma||(ma=!0,la());return ka.exports}f={};var oa={exports:f};function pa(){var a=ja(),b=na(),c="[object Symbol]";function d(d){return typeof d=="symbol"||b(d)&&a(d)==c}oa.exports=d}var qa=!1;function ra(){qa||(qa=!0,pa());return oa.exports}c={};var sa={exports:c};function ta(){var a=p(),b=ra(),c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function e(e,f){if(a(e))return!1;var g=typeof e;return g=="number"||g=="symbol"||g=="boolean"||e==null||b(e)?!0:d.test(e)||!c.test(e)||f!=null&&e in Object(f)}sa.exports=e}var ua=!1;function E(){ua||(ua=!0,ta());return sa.exports}d={};var va={exports:d};function wa(){function a(a){var b=typeof a;return a!=null&&(b=="object"||b=="function")}va.exports=a}var xa=!1;function F(){xa||(xa=!0,wa());return va.exports}f={};var ya={exports:f};function za(){var a=ja(),b=F(),c="[object AsyncFunction]",d="[object Function]",e="[object GeneratorFunction]",f="[object Proxy]";function g(g){if(!b(g))return!1;g=a(g);return g==d||g==e||g==c||g==f}ya.exports=g}var Aa=!1;function Ba(){Aa||(Aa=!0,za());return ya.exports}c={};var Ca={exports:c};function Da(){var a=x();a=a["__core-js_shared__"];Ca.exports=a}var Ea=!1;function Fa(){Ea||(Ea=!0,Da());return Ca.exports}d={};var Ga={exports:d};function Ha(){var a=Fa(),b=function(){var b=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}();function c(a){return!!b&&b in a}Ga.exports=c}var Ia=!1;function Ja(){Ia||(Ia=!0,Ha());return Ga.exports}f={};var Ka={exports:f};function La(){var a=Function.prototype,b=a.toString;function c(a){if(a!=null){try{return b.call(a)}catch(a){}try{return a+""}catch(a){}}return""}Ka.exports=c}var Ma=!1;function Na(){Ma||(Ma=!0,La());return Ka.exports}c={};var Oa={exports:c};function Pa(){var a=Ba(),b=Ja(),c=F(),d=Na(),e=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,g=Function.prototype,h=Object.prototype;g=g.toString;h=h.hasOwnProperty;var i=RegExp("^"+g.call(h).replace(e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function j(e){if(!c(e)||b(e))return!1;var g=a(e)?i:f;return g.test(d(e))}Oa.exports=j}var Qa=!1;function Ra(){Qa||(Qa=!0,Pa());return Oa.exports}d={};var Sa={exports:d};function Ta(){function a(a,b){return a==null?void 0:a[b]}Sa.exports=a}var Ua=!1;function Va(){Ua||(Ua=!0,Ta());return Sa.exports}f={};var Wa={exports:f};function Xa(){var a=Ra(),b=Va();function c(c,d){c=b(c,d);return a(c)?c:void 0}Wa.exports=c}var Ya=!1;function Za(){Ya||(Ya=!0,Xa());return Wa.exports}c={};var $a={exports:c};function ab(){var a=Za();a=a(Object,"create");$a.exports=a}var bb=!1;function cb(){bb||(bb=!0,ab());return $a.exports}d={};var db={exports:d};function eb(){var a=cb();function b(){this.__data__=a?a(null):{},this.size=0}db.exports=b}var fb=!1;function gb(){fb||(fb=!0,eb());return db.exports}f={};var hb={exports:f};function ib(){function a(a){a=this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a}hb.exports=a}var jb=!1;function kb(){jb||(jb=!0,ib());return hb.exports}c={};var lb={exports:c};function mb(){var a=cb(),b="__lodash_hash_undefined__",c=Object.prototype,d=c.hasOwnProperty;function e(c){var e=this.__data__;if(a){var f=e[c];return f===b?void 0:f}return d.call(e,c)?e[c]:void 0}lb.exports=e}var nb=!1;function ob(){nb||(nb=!0,mb());return lb.exports}d={};var pb={exports:d};function qb(){var a=cb(),b=Object.prototype,c=b.hasOwnProperty;function d(b){var d=this.__data__;return a?d[b]!==void 0:c.call(d,b)}pb.exports=d}var rb=!1;function sb(){rb||(rb=!0,qb());return pb.exports}f={};var tb={exports:f};function ub(){var a=cb(),b="__lodash_hash_undefined__";function c(c,d){var e=this.__data__;this.size+=this.has(c)?0:1;e[c]=a&&d===void 0?b:d;return this}tb.exports=c}var vb=!1;function wb(){vb||(vb=!0,ub());return tb.exports}c={};var xb={exports:c};function G(){var a=gb(),b=kb(),c=ob(),d=sb(),e=wb();function f(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}f.prototype.clear=a;f.prototype["delete"]=b;f.prototype.get=c;f.prototype.has=d;f.prototype.set=e;xb.exports=f}var H=!1;function yb(){H||(H=!0,G());return xb.exports}d={};var I={exports:d};function zb(){function a(){this.__data__=[],this.size=0}I.exports=a}var Ab=!1;function Bb(){Ab||(Ab=!0,zb());return I.exports}f={};var Cb={exports:f};function Db(){function a(a,b){return a===b||a!==a&&b!==b}Cb.exports=a}var J=!1;function Eb(){J||(J=!0,Db());return Cb.exports}c={};var Fb={exports:c};function Gb(){var a=Eb();function b(b,c){var d=b.length;while(d--)if(a(b[d][0],c))return d;return-1}Fb.exports=b}var Hb=!1;function Ib(){Hb||(Hb=!0,Gb());return Fb.exports}d={};var Jb={exports:d};function K(){var a=Ib(),b=Array.prototype,c=b.splice;function d(b){var d=this.__data__;b=a(d,b);if(b<0)return!1;var e=d.length-1;b==e?d.pop():c.call(d,b,1);--this.size;return!0}Jb.exports=d}var Kb=!1;function Lb(){Kb||(Kb=!0,K());return Jb.exports}f={};var Mb={exports:f};function Nb(){var a=Ib();function b(b){var c=this.__data__;b=a(c,b);return b<0?void 0:c[b][1]}Mb.exports=b}var Ob=!1;function Pb(){Ob||(Ob=!0,Nb());return Mb.exports}c={};var Qb={exports:c};function Rb(){var a=Ib();function b(b){return a(this.__data__,b)>-1}Qb.exports=b}var Sb=!1;function Tb(){Sb||(Sb=!0,Rb());return Qb.exports}d={};var Ub={exports:d};function Vb(){var a=Ib();function b(b,c){var d=this.__data__,e=a(d,b);e<0?(++this.size,d.push([b,c])):d[e][1]=c;return this}Ub.exports=b}var Wb=!1;function Xb(){Wb||(Wb=!0,Vb());return Ub.exports}f={};var Yb={exports:f};function L(){var a=Bb(),b=Lb(),c=Pb(),d=Tb(),e=Xb();function f(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}f.prototype.clear=a;f.prototype["delete"]=b;f.prototype.get=c;f.prototype.has=d;f.prototype.set=e;Yb.exports=f}var M=!1;function Zb(){M||(M=!0,L());return Yb.exports}c={};var $b={exports:c};function ac(){var a=Za(),b=x();a=a(b,"Map");$b.exports=a}var N=!1;function bc(){N||(N=!0,ac());return $b.exports}d={};var cc={exports:d};function dc(){var a=yb(),b=Zb(),c=bc();function d(){this.size=0,this.__data__={hash:new a,map:new(c||b),string:new a}}cc.exports=d}var ec=!1;function fc(){ec||(ec=!0,dc());return cc.exports}f={};var gc={exports:f};function hc(){function a(a){var b=typeof a;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?a!=="__proto__":a===null}gc.exports=a}var ic=!1;function jc(){ic||(ic=!0,hc());return gc.exports}c={};var kc={exports:c};function lc(){var a=jc();function b(b,c){b=b.__data__;return a(c)?b[typeof c=="string"?"string":"hash"]:b.map}kc.exports=b}var mc=!1;function nc(){mc||(mc=!0,lc());return kc.exports}d={};var oc={exports:d};function pc(){var a=nc();function b(b){b=a(this,b)["delete"](b);this.size-=b?1:0;return b}oc.exports=b}var O=!1;function qc(){O||(O=!0,pc());return oc.exports}f={};var rc={exports:f};function sc(){var a=nc();function b(b){return a(this,b).get(b)}rc.exports=b}var tc=!1;function uc(){tc||(tc=!0,sc());return rc.exports}c={};var vc={exports:c};function wc(){var a=nc();function b(b){return a(this,b).has(b)}vc.exports=b}var xc=!1;function yc(){xc||(xc=!0,wc());return vc.exports}d={};var zc={exports:d};function Ac(){var a=nc();function b(b,c){var d=a(this,b),e=d.size;d.set(b,c);this.size+=d.size==e?0:1;return this}zc.exports=b}var Bc=!1;function Cc(){Bc||(Bc=!0,Ac());return zc.exports}f={};var Dc={exports:f};function Ec(){var a=fc(),b=qc(),c=uc(),d=yc(),e=Cc();function f(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}f.prototype.clear=a;f.prototype["delete"]=b;f.prototype.get=c;f.prototype.has=d;f.prototype.set=e;Dc.exports=f}var Fc=!1;function Gc(){Fc||(Fc=!0,Ec());return Dc.exports}c={};var Hc={exports:c};function Ic(){var a=Gc(),b="Expected a function";function c(d,e){if(typeof d!="function"||e!=null&&typeof e!="function")throw new TypeError(b);var f=function(){var a=arguments,b=e?e.apply(this,a):a[0],c=f.cache;if(c.has(b))return c.get(b);var g=d.apply(this,a);f.cache=c.set(b,g)||c;return g};f.cache=new(c.Cache||a);return f}c.Cache=a;Hc.exports=c}var Jc=!1;function Kc(){Jc||(Jc=!0,Ic());return Hc.exports}d={};var Lc={exports:d};function Mc(){var a=Kc(),b=500;function c(c){c=a(c,function(a){d.size===b&&d.clear();return a});var d=c.cache;return c}Lc.exports=c}var Nc=!1;function Oc(){Nc||(Nc=!0,Mc());return Lc.exports}f={};var Pc={exports:f};function Qc(){var a=Oc(),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g;a=a(function(a){var d=[];a.charCodeAt(0)===46&&d.push("");a.replace(b,function(a,b,e,f){d.push(e?f.replace(c,"$1"):b||a)});return d});Pc.exports=a}var Rc=!1;function Sc(){Rc||(Rc=!0,Qc());return Pc.exports}c={};var Tc={exports:c};function Uc(){function a(a,b){var c=-1,d=a==null?0:a.length,e=Array(d);while(++c<d)e[c]=b(a[c],c,a);return e}Tc.exports=a}var Vc=!1;function Wc(){Vc||(Vc=!0,Uc());return Tc.exports}d={};var Xc={exports:d};function Yc(){var a=B(),b=Wc(),c=p(),d=ra(),e=1/0;a=a?a.prototype:void 0;var f=a?a.toString:void 0;function g(a){if(typeof a=="string")return a;if(c(a))return b(a,g)+"";if(d(a))return f?f.call(a):"";var h=a+"";return h=="0"&&1/a==-e?"-0":h}Xc.exports=g}var Zc=!1;function $c(){Zc||(Zc=!0,Yc());return Xc.exports}f={};var ad={exports:f};function bd(){var a=$c();function b(b){return b==null?"":a(b)}ad.exports=b}var cd=!1;function dd(){cd||(cd=!0,bd());return ad.exports}c={};var ed={exports:c};function fd(){var a=p(),b=E(),c=Sc(),d=dd();function e(e,f){return a(e)?e:b(e,f)?[e]:c(d(e))}ed.exports=e}var gd=!1;function hd(){gd||(gd=!0,fd());return ed.exports}d={};var id={exports:d};function jd(){var a=ra(),b=1/0;function c(c){if(typeof c=="string"||a(c))return c;var d=c+"";return d=="0"&&1/c==-b?"-0":d}id.exports=c}var kd=!1;function P(){kd||(kd=!0,jd());return id.exports}f={};var ld={exports:f};function md(){var a=hd(),b=P();function c(c,d){d=a(d,c);var e=0,f=d.length;while(c!=null&&e<f)c=c[b(d[e++])];return e&&e==f?c:void 0}ld.exports=c}var nd=!1;function od(){nd||(nd=!0,md());return ld.exports}c={};var pd={exports:c};function qd(){var a=od();function b(b,c,d){b=b==null?void 0:a(b,c);return b===void 0?d:b}pd.exports=b}var rd=!1;function sd(){rd||(rd=!0,qd());return pd.exports}d={};var td={exports:d};function ud(){var a=sd();function b(b,c){var d=-1,e=c.length,f=Array(e),g=b==null;while(++d<e)f[d]=g?void 0:a(b,c[d]);return f}td.exports=b}var vd=!1;function wd(){vd||(vd=!0,ud());return td.exports}f={};var xd={exports:f};function yd(){function a(a,b){var c=-1,d=b.length,e=a.length;while(++c<d)a[e+c]=b[c];return a}xd.exports=a}var zd=!1;function Ad(){zd||(zd=!0,yd());return xd.exports}c={};var Bd={exports:c};function Cd(){var a=ja(),b=na(),c="[object Arguments]";function d(d){return b(d)&&a(d)==c}Bd.exports=d}var Q=!1;function Dd(){Q||(Q=!0,Cd());return Bd.exports}d={};var Ed={exports:d};function Fd(){var a=Dd(),b=na(),c=Object.prototype,d=c.hasOwnProperty,e=c.propertyIsEnumerable;c=a(function(){return arguments}())?a:function(a){return b(a)&&d.call(a,"callee")&&!e.call(a,"callee")};Ed.exports=c}var R=!1;function Gd(){R||(R=!0,Fd());return Ed.exports}f={};var Hd={exports:f};function Id(){var a=B(),b=Gd(),c=p(),d=a?a.isConcatSpreadable:void 0;function e(a){return c(a)||b(a)||!!(d&&a&&a[d])}Hd.exports=e}var Jd=!1;function Kd(){Jd||(Jd=!0,Id());return Hd.exports}c={};var Ld={exports:c};function Md(){var a=Ad(),b=Kd();function c(d,e,f,g,h){var i=-1,j=d.length;f||(f=b);h||(h=[]);while(++i<j){var k=d[i];e>0&&f(k)?e>1?c(k,e-1,f,g,h):a(h,k):g||(h[h.length]=k)}return h}Ld.exports=c}var Nd=!1;function Od(){Nd||(Nd=!0,Md());return Ld.exports}d={};var Pd={exports:d};function Qd(){var a=Od();function b(b){var c=b==null?0:b.length;return c?a(b,1):[]}Pd.exports=b}var Rd=!1;function Sd(){Rd||(Rd=!0,Qd());return Pd.exports}f={};var Td={exports:f};function Ud(){function a(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}Td.exports=a}var Vd=!1;function Wd(){Vd||(Vd=!0,Ud());return Td.exports}c={};var Xd={exports:c};function Yd(){var a=Wd(),b=Math.max;function c(c,d,e){d=b(d===void 0?c.length-1:d,0);return function(){var f=arguments,g=-1,h=b(f.length-d,0),i=Array(h);while(++g<h)i[g]=f[d+g];g=-1;var j=Array(d+1);while(++g<d)j[g]=f[g];j[d]=e(i);return a(c,this,j)}}Xd.exports=c}var Zd=!1;function $d(){Zd||(Zd=!0,Yd());return Xd.exports}d={};var ae={exports:d};function be(){function a(a){return function(){return a}}ae.exports=a}var ce=!1;function de(){ce||(ce=!0,be());return ae.exports}f={};var ee={exports:f};function fe(){var a=Za(),b=function(){try{var b=a(Object,"defineProperty");b({},"",{});return b}catch(a){}}();ee.exports=b}var ge=!1;function he(){ge||(ge=!0,fe());return ee.exports}c={};var ie={exports:c};function je(){function a(a){return a}ie.exports=a}var ke=!1;function le(){ke||(ke=!0,je());return ie.exports}d={};var me={exports:d};function ne(){var a=de(),b=he(),c=le();c=b?function(c,d){return b(c,"toString",{configurable:!0,enumerable:!1,value:a(d),writable:!0})}:c;me.exports=c}var oe=!1;function pe(){oe||(oe=!0,ne());return me.exports}f={};var qe={exports:f};function re(){var a=800,b=16,c=Date.now;function d(d){var e=0,f=0;return function(){var g=c(),h=b-(g-f);f=g;if(h>0){if(++e>=a)return arguments[0]}else e=0;return d.apply(void 0,arguments)}}qe.exports=d}var se=!1;function te(){se||(se=!0,re());return qe.exports}c={};var ue={exports:c};function ve(){var a=pe(),b=te();b=b(a);ue.exports=b}var we=!1;function xe(){we||(we=!0,ve());return ue.exports}d={};var ye={exports:d};function ze(){var a=Sd(),b=$d(),c=xe();function d(d){return c(b(d,void 0,a),d+"")}ye.exports=d}var Ae=!1;function Be(){Ae||(Ae=!0,ze());return ye.exports}f={};var Ce={exports:f};function De(){var a=wd(),b=Be();b=b(a);Ce.exports=b}var Ee=!1;function Fe(){Ee||(Ee=!0,De());return Ce.exports}c={};var Ge={exports:c};function He(){function a(a,b,c){var d=-1,e=a.length;b<0&&(b=-b>e?0:e+b);c=c>e?e:c;c<0&&(c+=e);e=b>c?0:c-b>>>0;b>>>=0;c=Array(e);while(++d<e)c[d]=a[d+b];return c}Ge.exports=a}var Ie=!1;function Je(){Ie||(Ie=!0,He());return Ge.exports}d={};var Ke={exports:d};function Le(){var a=Je();function b(b,c,d){var e=b.length;d=d===void 0?e:d;return!c&&d>=e?b:a(b,c,d)}Ke.exports=b}var Me=!1;function Ne(){Me||(Me=!0,Le());return Ke.exports}f={};var Oe={exports:f};function Pe(){var a="\\ud800-\\udfff",b="\\u0300-\\u036f",c="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff";b=b+c+d;c="\\ufe0e\\ufe0f";d="\\u200d";var e=RegExp("["+d+a+b+c+"]");function f(a){return e.test(a)}Oe.exports=f}var Qe=!1;function Re(){Qe||(Qe=!0,Pe());return Oe.exports}c={};var Se={exports:c};function Te(){function a(a){return a.split("")}Se.exports=a}var Ue=!1;function Ve(){Ue||(Ue=!0,Te());return Se.exports}d={};var We={exports:d};function Xe(){var a="\\ud800-\\udfff",b="\\u0300-\\u036f",c="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff";b=b+c+d;c="\\ufe0e\\ufe0f";d="["+a+"]";b="["+b+"]";var e="\\ud83c[\\udffb-\\udfff]",f="(?:"+b+"|"+e+")";a="[^"+a+"]";var g="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",i="\\u200d";f=f+"?";c="["+c+"]?";i="(?:"+i+"(?:"+[a,g,h].join("|")+")"+c+f+")*";c=c+f+i;f="(?:"+[a+b+"?",b,g,h,d].join("|")+")";var j=RegExp(e+"(?="+e+")|"+f+c,"g");function k(a){return a.match(j)||[]}We.exports=k}var Ye=!1;function Ze(){Ye||(Ye=!0,Xe());return We.exports}f={};var $e={exports:f};function af(){var a=Ve(),b=Re(),c=Ze();function d(d){return b(d)?c(d):a(d)}$e.exports=d}var bf=!1;function cf(){bf||(bf=!0,af());return $e.exports}c={};var df={exports:c};function ef(){var a=Ne(),b=Re(),c=cf(),d=dd();function e(e){return function(f){f=d(f);var g=b(f)?c(f):void 0,h=g?g[0]:f.charAt(0);g=g?a(g,1).join(""):f.slice(1);return h[e]()+g}}df.exports=e}var ff=!1;function gf(){ff||(ff=!0,ef());return df.exports}d={};var hf={exports:d};function jf(){var a=gf();a=a("toUpperCase");hf.exports=a}var kf=!1;function lf(){kf||(kf=!0,jf());return hf.exports}f={};var mf={exports:f};function nf(){var a=dd(),b=lf();function c(c){return b(a(c).toLowerCase())}mf.exports=c}var of=!1;function pf(){of||(of=!0,nf());return mf.exports}c={};var qf={exports:c};function rf(){function a(a,b,c,d){var e=-1,f=a==null?0:a.length;d&&f&&(c=a[++e]);while(++e<f)c=b(c,a[e],e,a);return c}qf.exports=a}var sf=!1;function tf(){sf||(sf=!0,rf());return qf.exports}d={};var uf={exports:d};function vf(){function a(a){return function(b){return a==null?void 0:a[b]}}uf.exports=a}var wf=!1;function xf(){wf||(wf=!0,vf());return uf.exports}f={};var yf={exports:f};function zf(){var a=xf(),b={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"};a=a(b);yf.exports=a}var Af=!1;function S(){Af||(Af=!0,zf());return yf.exports}c={};var Bf={exports:c};function Cf(){var a=S(),b=dd(),c=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,d="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",f="\\u20d0-\\u20ff";d=d+e+f;e="["+d+"]";var g=RegExp(e,"g");function h(d){d=b(d);return d&&d.replace(c,a).replace(g,"")}Bf.exports=h}var Df=!1;function Ef(){Df||(Df=!0,Cf());return Bf.exports}d={};var Ff={exports:d};function Gf(){var a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function b(b){return b.match(a)||[]}Ff.exports=b}var Hf=!1;function If(){Hf||(Hf=!0,Gf());return Ff.exports}f={};var Jf={exports:f};function Kf(){var a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function b(b){return a.test(b)}Jf.exports=b}var Lf=!1;function Mf(){Lf||(Lf=!0,Kf());return Jf.exports}c={};var Nf={exports:c};function Of(){var a="\\ud800-\\udfff",b="\\u0300-\\u036f",c="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff";b=b+c+d;c="\\u2700-\\u27bf";d="a-z\\xdf-\\xf6\\xf8-\\xff";var e="\\xac\\xb1\\xd7\\xf7",f="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",g="\\u2000-\\u206f",h=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="A-Z\\xc0-\\xd6\\xd8-\\xde",j="\\ufe0e\\ufe0f";e=e+f+g+h;f="['\u2019]";g="["+e+"]";h="["+b+"]";b="\\d+";var k="["+c+"]",l="["+d+"]";e="[^"+a+e+b+c+d+i+"]";c="\\ud83c[\\udffb-\\udfff]";d="(?:"+h+"|"+c+")";h="[^"+a+"]";c="(?:\\ud83c[\\udde6-\\uddff]){2}";a="[\\ud800-\\udbff][\\udc00-\\udfff]";i="["+i+"]";var m="\\u200d",n="(?:"+l+"|"+e+")";e="(?:"+i+"|"+e+")";var o="(?:"+f+"(?:d|ll|m|re|s|t|ve))?";f="(?:"+f+"(?:D|LL|M|RE|S|T|VE))?";d=d+"?";j="["+j+"]?";m="(?:"+m+"(?:"+[h,c,a].join("|")+")"+j+d+")*";h="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])";var p="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])";j=j+d+m;d="(?:"+[k,c,a].join("|")+")"+j;var q=RegExp([i+"?"+l+"+"+o+"(?="+[g,i,"$"].join("|")+")",e+"+"+f+"(?="+[g,i+n,"$"].join("|")+")",i+"?"+n+"+"+o,i+"+"+f,p,h,b,d].join("|"),"g");function r(a){return a.match(q)||[]}Nf.exports=r}var Pf=!1;function Qf(){Pf||(Pf=!0,Of());return Nf.exports}d={};var Rf={exports:d};function Sf(){var a=If(),b=Mf(),c=dd(),d=Qf();function e(e,f,g){e=c(e);f=g?void 0:f;return f===void 0?b(e)?d(e):a(e):e.match(f)||[]}Rf.exports=e}var Tf=!1;function Uf(){Tf||(Tf=!0,Sf());return Rf.exports}f={};var Vf={exports:f};function Wf(){var a=tf(),b=Ef(),c=Uf(),d="['\u2019]",e=RegExp(d,"g");function f(d){return function(f){return a(c(b(f).replace(e,"")),d,"")}}Vf.exports=f}var Xf=!1;function Yf(){Xf||(Xf=!0,Wf());return Vf.exports}c={};var Zf={exports:c};function $f(){var a=pf(),b=Yf();b=b(function(b,c,d){c=c.toLowerCase();return b+(d?a(c):c)});Zf.exports=b}var ag=!1;function bg(){ag||(ag=!0,$f());return Zf.exports}d={};var cg={exports:d};function dg(){var a=9007199254740991;function b(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=a}cg.exports=b}var eg=!1;function fg(){eg||(eg=!0,dg());return cg.exports}f={};var gg={exports:f};function hg(){var a=Ba(),b=fg();function c(c){return c!=null&&b(c.length)&&!a(c)}gg.exports=c}var ig=!1;function jg(){ig||(ig=!0,hg());return gg.exports}c={};var kg={exports:c};function lg(){var a=9007199254740991,b=/^(?:0|[1-9]\d*)$/;function c(c,d){var e=typeof c;d=d==null?a:d;return!!d&&(e=="number"||e!="symbol"&&b.test(c))&&c>-1&&c%1==0&&c<d}kg.exports=c}var mg=!1;function ng(){mg||(mg=!0,lg());return kg.exports}d={};var og={exports:d};function pg(){var a=Eb(),b=jg(),c=ng(),d=F();function e(e,f,g){if(!d(g))return!1;var h=typeof f;return(h=="number"?b(g)&&c(f,g.length):h=="string"&&f in g)?a(g[f],e):!1}og.exports=e}var qg=!1;function rg(){qg||(qg=!0,pg());return og.exports}f={};var sg={exports:f};function tg(){var a=F(),b=ra(),c=0/0,d=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,g=/^0o[0-7]+$/i,h=parseInt;function i(i){if(typeof i=="number")return i;if(b(i))return c;if(a(i)){var j=typeof i.valueOf=="function"?i.valueOf():i;i=a(j)?j+"":j}if(typeof i!="string")return i===0?i:+i;i=i.replace(d,"");j=f.test(i);return j||g.test(i)?h(i.slice(2),j?2:8):e.test(i)?c:+i}sg.exports=i}var ug=!1;function vg(){ug||(ug=!0,tg());return sg.exports}c={};var wg={exports:c};function xg(){var a=vg(),b=1/0,c=17976931348623157e292;function d(d){if(!d)return d===0?d:0;d=a(d);if(d===b||d===-b){var e=d<0?-1:1;return e*c}return d===d?d:0}wg.exports=d}var yg=!1;function zg(){yg||(yg=!0,xg());return wg.exports}d={};var Ag={exports:d};function Bg(){var a=zg();function b(b){b=a(b);var c=b%1;return b===b?c?b-c:b:0}Ag.exports=b}var Cg=!1;function Dg(){Cg||(Cg=!0,Bg());return Ag.exports}f={};var Eg={exports:f};function Fg(){var a=Je(),b=rg(),c=Dg(),d=Math.ceil,e=Math.max;function f(f,g,h){(h?b(f,g,h):g===void 0)?g=1:g=e(c(g),0);h=f==null?0:f.length;if(!h||g<1)return[];var i=0,j=0,k=Array(d(h/g));while(i<h)k[j++]=a(f,i,i+=g);return k}Eg.exports=f}var Gg=!1;function Hg(){Gg||(Gg=!0,Fg());return Eg.exports}c={};var Ig={exports:c};function Jg(){function a(a,b,c){a===a&&(c!==void 0&&(a=a<=c?a:c),b!==void 0&&(a=a>=b?a:b));return a}Ig.exports=a}var Kg=!1;function Lg(){Kg||(Kg=!0,Jg());return Ig.exports}d={};var Mg={exports:d};function Ng(){var a=Lg(),b=vg();function c(c,d,e){e===void 0&&(e=d,d=void 0);e!==void 0&&(e=b(e),e=e===e?e:0);d!==void 0&&(d=b(d),d=d===d?d:0);return a(b(c),d,e)}Mg.exports=c}var Og=!1;function Pg(){Og||(Og=!0,Ng());return Mg.exports}f={};var Qg={exports:f};function Rg(){var a=Zb();function b(){this.__data__=new a,this.size=0}Qg.exports=b}var Sg=!1;function Tg(){Sg||(Sg=!0,Rg());return Qg.exports}c={};var Ug={exports:c};function Vg(){function a(a){var b=this.__data__;a=b["delete"](a);this.size=b.size;return a}Ug.exports=a}var T=!1;function Wg(){T||(T=!0,Vg());return Ug.exports}d={};var Xg={exports:d};function Yg(){function a(a){return this.__data__.get(a)}Xg.exports=a}var Zg=!1;function $g(){Zg||(Zg=!0,Yg());return Xg.exports}f={};var ah={exports:f};function bh(){function a(a){return this.__data__.has(a)}ah.exports=a}var ch=!1;function dh(){ch||(ch=!0,bh());return ah.exports}c={};var eh={exports:c};function fh(){var a=Zb(),b=bc(),c=Gc(),d=200;function e(e,f){var g=this.__data__;if(g instanceof a){var h=g.__data__;if(!b||h.length<d-1){h.push([e,f]);this.size=++g.size;return this}g=this.__data__=new c(h)}g.set(e,f);this.size=g.size;return this}eh.exports=e}var gh=!1;function hh(){gh||(gh=!0,fh());return eh.exports}d={};var ih={exports:d};function jh(){var a=Zb(),b=Tg(),c=Wg(),d=$g(),e=dh(),f=hh();function g(b){b=this.__data__=new a(b);this.size=b.size}g.prototype.clear=b;g.prototype["delete"]=c;g.prototype.get=d;g.prototype.has=e;g.prototype.set=f;ih.exports=g}var kh=!1;function lh(){kh||(kh=!0,jh());return ih.exports}f={};var mh={exports:f};function nh(){function a(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(b(a[c],c,a)===!1)break;return a}mh.exports=a}var oh=!1;function ph(){oh||(oh=!0,nh());return mh.exports}c={};var qh={exports:c};function rh(){var a=he();function b(b,c,d){c=="__proto__"&&a?a(b,c,{configurable:!0,enumerable:!0,value:d,writable:!0}):b[c]=d}qh.exports=b}var sh=!1;function th(){sh||(sh=!0,rh());return qh.exports}d={};var uh={exports:d};function vh(){var a=th(),b=Eb(),c=Object.prototype,d=c.hasOwnProperty;function e(c,e,f){var g=c[e];(!(d.call(c,e)&&b(g,f))||f===void 0&&!(e in c))&&a(c,e,f)}uh.exports=e}var wh=!1;function xh(){wh||(wh=!0,vh());return uh.exports}f={};var yh={exports:f};function zh(){var a=xh(),b=th();function c(c,d,e,f){var g=!e;e||(e={});var h=-1,i=d.length;while(++h<i){var j=d[h],k=f?f(e[j],c[j],j,e,c):void 0;k===void 0&&(k=c[j]);g?b(e,j,k):a(e,j,k)}return e}yh.exports=c}var Ah=!1;function Bh(){Ah||(Ah=!0,zh());return yh.exports}c={};var Ch={exports:c};function Dh(){function a(a,b){var c=-1,d=Array(a);while(++c<a)d[c]=b(c);return d}Ch.exports=a}var Eh=!1;function Fh(){Eh||(Eh=!0,Dh());return Ch.exports}d={};var Gh={exports:d};function Hh(){function a(){return!1}Gh.exports=a}var Ih=!1;function Jh(){Ih||(Ih=!0,Hh());return Gh.exports}var Kh={},Lh={exports:Kh};function Mh(){var a=x(),b=Jh(),c=typeof Kh=="object"&&Kh&&!Kh.nodeType&&Kh,d=c&&typeof Lh=="object"&&Lh&&!Lh.nodeType&&Lh;d=d&&d.exports===c;c=d?a.Buffer:void 0;d=c?c.isBuffer:void 0;a=d||b;Lh.exports=a}var Nh=!1;function Oh(){Nh||(Nh=!0,Mh());return Lh.exports}f={};var Ph={exports:f};function Qh(){var a=ja(),b=fg(),c=na(),d="[object Arguments]",e="[object Array]",f="[object Boolean]",g="[object Date]",h="[object Error]",i="[object Function]",j="[object Map]",k="[object Number]",l="[object Object]",m="[object RegExp]",n="[object Set]",o="[object String]",p="[object WeakMap]",q="[object ArrayBuffer]",r="[object DataView]",s="[object Float32Array]",t="[object Float64Array]",u="[object Int8Array]",v="[object Int16Array]",w="[object Int32Array]",x="[object Uint8Array]",y="[object Uint8ClampedArray]",z="[object Uint16Array]",A="[object Uint32Array]",B={};B[s]=B[t]=B[u]=B[v]=B[w]=B[x]=B[y]=B[z]=B[A]=!0;B[d]=B[e]=B[q]=B[f]=B[r]=B[g]=B[h]=B[i]=B[j]=B[k]=B[l]=B[m]=B[n]=B[o]=B[p]=!1;function aa(d){return c(d)&&b(d.length)&&!!B[a(d)]}Ph.exports=aa}var Rh=!1;function Sh(){Rh||(Rh=!0,Qh());return Ph.exports}c={};var Th={exports:c};function Uh(){function a(a){return function(b){return a(b)}}Th.exports=a}var Vh=!1;function Wh(){Vh||(Vh=!0,Uh());return Th.exports}var Xh={},Yh={exports:Xh};function Zh(){var a=t(),b=typeof Xh=="object"&&Xh&&!Xh.nodeType&&Xh,c=b&&typeof Yh=="object"&&Yh&&!Yh.nodeType&&Yh;c=c&&c.exports===b;c&&a.process;b=null;Yh.exports=b}var $h=!1;function ai(){$h||($h=!0,Zh());return Yh.exports}d={};var bi={exports:d};function ci(){var a=Sh(),b=Wh(),c=ai();c=c&&c.isTypedArray;b=c?b(c):a;bi.exports=b}var di=!1;function ei(){di||(di=!0,ci());return bi.exports}f={};var fi={exports:f};function gi(){var a=Fh(),b=Gd(),c=p(),d=Oh(),e=ng(),f=ei(),g=Object.prototype,h=g.hasOwnProperty;function i(g,i){var j=c(g),k=!j&&b(g),l=!j&&!k&&d(g),m=!j&&!k&&!l&&f(g);j=j||k||l||m;k=j?a(g.length,String):[];var n=k.length;for(var o in g)(i||h.call(g,o))&&!(j&&(o=="length"||l&&(o=="offset"||o=="parent")||m&&(o=="buffer"||o=="byteLength"||o=="byteOffset")||e(o,n)))&&k.push(o);return k}fi.exports=i}var hi=!1;function ii(){hi||(hi=!0,gi());return fi.exports}c={};var ji={exports:c};function ki(){var a=Object.prototype;function b(b){var c=b&&b.constructor;c=typeof c=="function"&&c.prototype||a;return b===c}ji.exports=b}var li=!1;function mi(){li||(li=!0,ki());return ji.exports}d={};var ni={exports:d};function oi(){function a(a,b){return function(c){return a(b(c))}}ni.exports=a}var pi=!1;function qi(){pi||(pi=!0,oi());return ni.exports}f={};var ri={exports:f};function si(){var a=qi();a=a(Object.keys,Object);ri.exports=a}var ti=!1;function ui(){ti||(ti=!0,si());return ri.exports}c={};var vi={exports:c};function wi(){var a=mi(),b=ui(),c=Object.prototype,d=c.hasOwnProperty;function e(c){if(!a(c))return b(c);var e=[];for(var f in Object(c))d.call(c,f)&&f!="constructor"&&e.push(f);return e}vi.exports=e}var xi=!1;function yi(){xi||(xi=!0,wi());return vi.exports}d={};var zi={exports:d};function Ai(){var a=ii(),b=yi(),c=jg();function d(d){return c(d)?a(d):b(d)}zi.exports=d}var Bi=!1;function Ci(){Bi||(Bi=!0,Ai());return zi.exports}f={};var Di={exports:f};function Ei(){var a=Bh(),b=Ci();function c(c,d){return c&&a(d,b(d),c)}Di.exports=c}var Fi=!1;function Gi(){Fi||(Fi=!0,Ei());return Di.exports}c={};var Hi={exports:c};function Ii(){function a(a){var b=[];if(a!=null)for(a in Object(a))b.push(a);return b}Hi.exports=a}var Ji=!1;function Ki(){Ji||(Ji=!0,Ii());return Hi.exports}d={};var Li={exports:d};function Mi(){var a=F(),b=mi(),c=Ki(),d=Object.prototype,e=d.hasOwnProperty;function f(d){if(!a(d))return c(d);var f=b(d),g=[];for(var h in d)h=="constructor"&&(f||!e.call(d,h))||g.push(h);return g}Li.exports=f}var Ni=!1;function Oi(){Ni||(Ni=!0,Mi());return Li.exports}f={};var Pi={exports:f};function Qi(){var a=ii(),b=Oi(),c=jg();function d(d){return c(d)?a(d,!0):b(d)}Pi.exports=d}var Ri=!1;function Si(){Ri||(Ri=!0,Qi());return Pi.exports}c={};var Ti={exports:c};function Ui(){var a=Bh(),b=Si();function c(c,d){return c&&a(d,b(d),c)}Ti.exports=c}var Vi=!1;function Wi(){Vi||(Vi=!0,Ui());return Ti.exports}var Xi={},Yi={exports:Xi};function Zi(){var a=x(),b=typeof Xi=="object"&&Xi&&!Xi.nodeType&&Xi,c=b&&typeof Yi=="object"&&Yi&&!Yi.nodeType&&Yi;c=c&&c.exports===b;b=c?a.Buffer:void 0;var d=b?b.allocUnsafe:void 0;function e(a,b){if(b)return a.slice();b=a.length;b=d?d(b):new a.constructor(b);a.copy(b);return b}Yi.exports=e}var $i=!1;function aj(){$i||($i=!0,Zi());return Yi.exports}d={};var bj={exports:d};function cj(){function a(a,b){var c=-1,d=a.length;b||(b=Array(d));while(++c<d)b[c]=a[c];return b}bj.exports=a}var dj=!1;function ej(){dj||(dj=!0,cj());return bj.exports}f={};var fj={exports:f};function gj(){function a(a,b){var c=-1,d=a==null?0:a.length,e=0,f=[];while(++c<d){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}fj.exports=a}var hj=!1;function ij(){hj||(hj=!0,gj());return fj.exports}c={};var jj={exports:c};function kj(){function a(){return[]}jj.exports=a}var lj=!1;function mj(){lj||(lj=!0,kj());return jj.exports}d={};var nj={exports:d};function oj(){var a=ij(),b=mj(),c=Object.prototype,d=c.propertyIsEnumerable,e=Object.getOwnPropertySymbols;c=e?function(b){if(b==null)return[];b=Object(b);return a(e(b),function(a){return d.call(b,a)})}:b;nj.exports=c}var pj=!1;function qj(){pj||(pj=!0,oj());return nj.exports}f={};var rj={exports:f};function sj(){var a=Bh(),b=qj();function c(c,d){return a(c,b(c),d)}rj.exports=c}var tj=!1;function uj(){tj||(tj=!0,sj());return rj.exports}c={};var vj={exports:c};function wj(){var a=qi();a=a(Object.getPrototypeOf,Object);vj.exports=a}var xj=!1;function yj(){xj||(xj=!0,wj());return vj.exports}d={};var zj={exports:d};function Aj(){var a=Ad(),b=yj(),c=qj(),d=mj(),e=Object.getOwnPropertySymbols;e=e?function(d){var e=[];while(d)a(e,c(d)),d=b(d);return e}:d;zj.exports=e}var Bj=!1;function Cj(){Bj||(Bj=!0,Aj());return zj.exports}f={};var Dj={exports:f};function Ej(){var a=Bh(),b=Cj();function c(c,d){return a(c,b(c),d)}Dj.exports=c}var Fj=!1;function Gj(){Fj||(Fj=!0,Ej());return Dj.exports}c={};var Hj={exports:c};function Ij(){var a=Ad(),b=p();function c(c,d,e){d=d(c);return b(c)?d:a(d,e(c))}Hj.exports=c}var Jj=!1;function U(){Jj||(Jj=!0,Ij());return Hj.exports}d={};var Kj={exports:d};function V(){var a=U(),b=qj(),c=Ci();function d(d){return a(d,c,b)}Kj.exports=d}var Lj=!1;function Mj(){Lj||(Lj=!0,V());return Kj.exports}f={};var Nj={exports:f};function Oj(){var a=U(),b=Cj(),c=Si();function d(d){return a(d,c,b)}Nj.exports=d}var Pj=!1;function Qj(){Pj||(Pj=!0,Oj());return Nj.exports}c={};var Rj={exports:c};function Sj(){var a=Za(),b=x();a=a(b,"DataView");Rj.exports=a}var Tj=!1;function Uj(){Tj||(Tj=!0,Sj());return Rj.exports}d={};var Vj={exports:d};function W(){var a=Za(),b=x();a=a(b,"Promise");Vj.exports=a}var X=!1;function Wj(){X||(X=!0,W());return Vj.exports}f={};var Xj={exports:f};function Yj(){var a=Za(),b=x();a=a(b,"Set");Xj.exports=a}var Zj=!1;function $j(){Zj||(Zj=!0,Yj());return Xj.exports}c={};var ak={exports:c};function bk(){var a=Za(),b=x();a=a(b,"WeakMap");ak.exports=a}var ck=!1;function dk(){ck||(ck=!0,bk());return ak.exports}d={};var ek={exports:d};function fk(){var a=Uj(),b=bc(),c=Wj(),d=$j(),e=dk(),f=ja(),g=Na(),h="[object Map]",i="[object Object]",j="[object Promise]",k="[object Set]",l="[object WeakMap]",m="[object DataView]",n=g(a),o=g(b),p=g(c),q=g(d),r=g(e),s=f;(a&&s(new a(new ArrayBuffer(1)))!=m||b&&s(new b)!=h||c&&s(c.resolve())!=j||d&&s(new d)!=k||e&&s(new e)!=l)&&(s=function(a){var b=f(a);a=b==i?a.constructor:void 0;a=a?g(a):"";if(a)switch(a){case n:return m;case o:return h;case p:return j;case q:return k;case r:return l}return b});ek.exports=s}var gk=!1;function hk(){gk||(gk=!0,fk());return ek.exports}f={};var ik={exports:f};function jk(){var a=Object.prototype,b=a.hasOwnProperty;function c(a){var c=a.length,d=new a.constructor(c);c&&typeof a[0]=="string"&&b.call(a,"index")&&(d.index=a.index,d.input=a.input);return d}ik.exports=c}var kk=!1;function lk(){kk||(kk=!0,jk());return ik.exports}c={};var mk={exports:c};function nk(){var a=x();a=a.Uint8Array;mk.exports=a}var ok=!1;function Y(){ok||(ok=!0,nk());return mk.exports}d={};var pk={exports:d};function qk(){var a=Y();function b(b){var c=new b.constructor(b.byteLength);new a(c).set(new a(b));return c}pk.exports=b}var rk=!1;function sk(){rk||(rk=!0,qk());return pk.exports}f={};var Z={exports:f};function tk(){var a=sk();function b(b,c){c=c?a(b.buffer):b.buffer;return new b.constructor(c,b.byteOffset,b.byteLength)}Z.exports=b}var uk=!1;function vk(){uk||(uk=!0,tk());return Z.exports}c={};var wk={exports:c};function xk(){var a=/\w*$/;function b(b){var c=new b.constructor(b.source,a.exec(b));c.lastIndex=b.lastIndex;return c}wk.exports=b}var yk=!1;function zk(){yk||(yk=!0,xk());return wk.exports}d={};var Ak={exports:d};function Bk(){var a=B();a=a?a.prototype:void 0;var b=a?a.valueOf:void 0;function c(a){return b?Object(b.call(a)):{}}Ak.exports=c}var Ck=!1;function Dk(){Ck||(Ck=!0,Bk());return Ak.exports}f={};var Ek={exports:f};function Fk(){var a=sk();function b(b,c){c=c?a(b.buffer):b.buffer;return new b.constructor(c,b.byteOffset,b.length)}Ek.exports=b}var $=!1;function Gk(){$||($=!0,Fk());return Ek.exports}c={};var Hk={exports:c};function Ik(){var a=sk(),b=vk(),c=zk(),d=Dk(),e=Gk(),f="[object Boolean]",g="[object Date]",h="[object Map]",i="[object Number]",j="[object RegExp]",k="[object Set]",l="[object String]",m="[object Symbol]",n="[object ArrayBuffer]",o="[object DataView]",p="[object Float32Array]",q="[object Float64Array]",r="[object Int8Array]",s="[object Int16Array]",t="[object Int32Array]",u="[object Uint8Array]",v="[object Uint8ClampedArray]",w="[object Uint16Array]",x="[object Uint32Array]";function y(y,z,A){var B=y.constructor;switch(z){case n:return a(y);case f:case g:return new B(+y);case o:return b(y,A);case p:case q:case r:case s:case t:case u:case v:case w:case x:return e(y,A);case h:return new B;case i:case l:return new B(y);case j:return c(y);case k:return new B;case m:return d(y)}}Hk.exports=y}var Jk=!1;function Kk(){Jk||(Jk=!0,Ik());return Hk.exports}d={};var Lk={exports:d};function Mk(){var a=F(),b=Object.create,c=function(){function c(){}return function(d){if(!a(d))return{};if(b)return b(d);c.prototype=d;d=new c;c.prototype=void 0;return d}}();Lk.exports=c}var Nk=!1;function Ok(){Nk||(Nk=!0,Mk());return Lk.exports}f={};var Pk={exports:f};function Qk(){var a=Ok(),b=yj(),c=mi();function d(d){return typeof d.constructor=="function"&&!c(d)?a(b(d)):{}}Pk.exports=d}var Rk=!1;function Sk(){Rk||(Rk=!0,Qk());return Pk.exports}c={};var Tk={exports:c};function Uk(){var a=hk(),b=na(),c="[object Map]";function d(d){return b(d)&&a(d)==c}Tk.exports=d}var Vk=!1;function Wk(){Vk||(Vk=!0,Uk());return Tk.exports}d={};var Xk={exports:d};function Yk(){var a=Wk(),b=Wh(),c=ai();c=c&&c.isMap;b=c?b(c):a;Xk.exports=b}var Zk=!1;function $k(){Zk||(Zk=!0,Yk());return Xk.exports}f={};var al={exports:f};function bl(){var a=hk(),b=na(),c="[object Set]";function d(d){return b(d)&&a(d)==c}al.exports=d}var cl=!1;function dl(){cl||(cl=!0,bl());return al.exports}c={};var el={exports:c};function fl(){var a=dl(),b=Wh(),c=ai();c=c&&c.isSet;b=c?b(c):a;el.exports=b}var gl=!1;function hl(){gl||(gl=!0,fl());return el.exports}d={};var il={exports:d};function jl(){var a=lh(),b=ph(),c=xh(),d=Gi(),e=Wi(),f=aj(),g=ej(),h=uj(),i=Gj(),j=Mj(),k=Qj(),l=hk(),m=lk(),n=Kk(),o=Sk(),q=p(),r=Oh(),s=$k(),t=F(),u=hl(),v=Ci(),w=1,x=2,y=4,z="[object Arguments]",A="[object Array]",B="[object Boolean]",aa="[object Date]",ba="[object Error]",ca="[object Function]",da="[object GeneratorFunction]",ea="[object Map]",C="[object Number]",fa="[object Object]",ga="[object RegExp]",ha="[object Set]",ia="[object String]",D="[object Symbol]",ja="[object WeakMap]",ka="[object ArrayBuffer]",la="[object DataView]",ma="[object Float32Array]",na="[object Float64Array]",oa="[object Int8Array]",pa="[object Int16Array]",qa="[object Int32Array]",ra="[object Uint8Array]",sa="[object Uint8ClampedArray]",ta="[object Uint16Array]",ua="[object Uint32Array]",E={};E[z]=E[A]=E[ka]=E[la]=E[B]=E[aa]=E[ma]=E[na]=E[oa]=E[pa]=E[qa]=E[ea]=E[C]=E[fa]=E[ga]=E[ha]=E[ia]=E[D]=E[ra]=E[sa]=E[ta]=E[ua]=!0;E[ba]=E[ca]=E[ja]=!1;function va(p,A,B,aa,ba,ea){var C,ga=A&w,ha=A&x,ia=A&y;B&&(C=ba?B(p,aa,ba,ea):B(p));if(C!==void 0)return C;if(!t(p))return p;aa=q(p);if(aa){C=m(p);if(!ga)return g(p,C)}else{var D=l(p),ja=D==ca||D==da;if(r(p))return f(p,ga);if(D==fa||D==z||ja&&!ba){C=ha||ja?{}:o(p);if(!ga)return ha?i(p,e(C,p)):h(p,d(C,p))}else{if(!E[D])return ba?p:{};C=n(p,D,ga)}}ea||(ea=new a);ja=ea.get(p);if(ja)return ja;ea.set(p,C);u(p)?p.forEach(function(a){C.add(va(a,A,B,a,p,ea))}):s(p)&&p.forEach(function(b,a){C.set(a,va(b,A,B,a,p,ea))});ba=ia?ha?k:j:ha?keysIn:v;var ka=aa?void 0:ba(p);b(ka||p,function(b,a){ka&&(a=b,b=p[a]),c(C,a,va(b,A,B,a,p,ea))});return C}il.exports=va}var kl=!1;function ll(){kl||(kl=!0,jl());return il.exports}f={};var ml={exports:f};function nl(){var a=ll(),b=4;function c(c){return a(c,b)}ml.exports=c}var ol=!1;function pl(){ol||(ol=!0,nl());return ml.exports}c={};var ql={exports:c};function rl(){var a=ll(),b=1,c=4;function d(d){return a(d,b|c)}ql.exports=d}var sl=!1;function tl(){sl||(sl=!0,rl());return ql.exports}d={};var ul={exports:d};function vl(){var a=x(),b=function(){return a.Date.now()};ul.exports=b}var wl=!1;function xl(){wl||(wl=!0,vl());return ul.exports}f={};var yl={exports:f};function zl(){var a=F(),b=xl(),c=vg(),d="Expected a function",e=Math.max,f=Math.min;function g(g,h,i){var j,k,l,m,n,o,p=0,q=!1,r=!1,s=!0;if(typeof g!="function")throw new TypeError(d);h=c(h)||0;a(i)&&(q=!!i.leading,r="maxWait"in i,l=r?e(c(i.maxWait)||0,h):l,s="trailing"in i?!!i.trailing:s);function t(a){var b=j,c=k;j=k=void 0;p=a;m=g.apply(c,b);return m}function u(a){p=a;n=setTimeout(x,h);return q?t(a):m}function v(a){var b=a-o;a=a-p;b=h-b;return r?f(b,l-a):b}function w(a){var b=a-o;a=a-p;return o===void 0||b>=h||b<0||r&&a>=l}function x(){var a=b();if(w(a))return y(a);n=setTimeout(x,v(a))}function y(a){n=void 0;if(s&&j)return t(a);j=k=void 0;return m}function z(){n!==void 0&&clearTimeout(n),p=0,j=o=k=n=void 0}function A(){return n===void 0?m:y(b())}function B(){var a=b(),c=w(a);j=arguments;k=this;o=a;if(c){if(n===void 0)return u(o);if(r){clearTimeout(n);n=setTimeout(x,h);return t(o)}}n===void 0&&(n=setTimeout(x,h));return m}B.cancel=z;B.flush=A;return B}yl.exports=g}var Al=!1;function Bl(){Al||(Al=!0,zl());return yl.exports}c={};var Cl={exports:c};function Dl(){var a=le(),b=$d(),c=xe();function d(d,e){return c(b(d,e,a),d+"")}Cl.exports=d}var El=!1;function Fl(){El||(El=!0,Dl());return Cl.exports}d={};var Gl={exports:d};function Hl(){var a=Fl(),b=Eb(),c=rg(),d=Si(),e=Object.prototype,f=e.hasOwnProperty;a=a(function(a,g){a=Object(a);var h=-1,i=g.length,j=i>2?g[2]:void 0;j&&c(g[0],g[1],j)&&(i=1);while(++h<i){j=g[h];var k=d(j),l=-1,m=k.length;while(++l<m){var n=k[l],o=a[n];(o===void 0||b(o,e[n])&&!f.call(a,n))&&(a[n]=j[n])}}return a});Gl.exports=a}var Il=!1;function Jl(){Il||(Il=!0,Hl());return Gl.exports}f={};var Kl={exports:f};function Ll(){var a="__lodash_hash_undefined__";function b(b){this.__data__.set(b,a);return this}Kl.exports=b}var Ml=!1;function Nl(){Ml||(Ml=!0,Ll());return Kl.exports}c={};var Ol={exports:c};function Pl(){function a(a){return this.__data__.has(a)}Ol.exports=a}var Ql=!1;function Rl(){Ql||(Ql=!0,Pl());return Ol.exports}d={};var Sl={exports:d};function Tl(){var a=Gc(),b=Nl(),c=Rl();function d(b){var c=-1,d=b==null?0:b.length;this.__data__=new a;while(++c<d)this.add(b[c])}d.prototype.add=d.prototype.push=b;d.prototype.has=c;Sl.exports=d}var Ul=!1;function Vl(){Ul||(Ul=!0,Tl());return Sl.exports}f={};var Wl={exports:f};function Xl(){function a(a,b,c,d){var e=a.length;c=c+(d?1:-1);while(d?c--:++c<e)if(b(a[c],c,a))return c;return-1}Wl.exports=a}var Yl=!1;function Zl(){Yl||(Yl=!0,Xl());return Wl.exports}c={};var $l={exports:c};function am(){function a(a){return a!==a}$l.exports=a}var bm=!1;function cm(){bm||(bm=!0,am());return $l.exports}d={};var dm={exports:d};function em(){function a(a,b,c){c=c-1;var d=a.length;while(++c<d)if(a[c]===b)return c;return-1}dm.exports=a}var fm=!1;function gm(){fm||(fm=!0,em());return dm.exports}f={};var hm={exports:f};function im(){var a=Zl(),b=cm(),c=gm();function d(d,e,f){return e===e?c(d,e,f):a(d,b,f)}hm.exports=d}var jm=!1;function km(){jm||(jm=!0,im());return hm.exports}c={};var lm={exports:c};function mm(){var a=km();function b(b,c){var d=b==null?0:b.length;return!!d&&a(b,c,0)>-1}lm.exports=b}var nm=!1;function om(){nm||(nm=!0,mm());return lm.exports}d={};var pm={exports:d};function qm(){function a(a,b,c){var d=-1,e=a==null?0:a.length;while(++d<e)if(c(b,a[d]))return!0;return!1}pm.exports=a}var rm=!1;function sm(){rm||(rm=!0,qm());return pm.exports}f={};var tm={exports:f};function um(){function a(a,b){return a.has(b)}tm.exports=a}var vm=!1;function wm(){vm||(vm=!0,um());return tm.exports}c={};var xm={exports:c};function ym(){var a=Vl(),b=om(),c=sm(),d=Wc(),e=Wh(),f=wm(),g=200;function h(h,i,j,k){var l=-1,m=b,n=!0,o=h.length,p=[],q=i.length;if(!o)return p;j&&(i=d(i,e(j)));k?(m=c,n=!1):i.length>=g&&(m=f,n=!1,i=new a(i));outer:while(++l<o){var r=h[l],s=j==null?r:j(r);r=k||r!==0?r:0;if(n&&s===s){var t=q;while(t--)if(i[t]===s)continue outer;p.push(r)}else m(i,s,k)||p.push(r)}return p}xm.exports=h}var zm=!1;function Am(){zm||(zm=!0,ym());return xm.exports}d={};var Bm={exports:d};function Cm(){var a=jg(),b=na();function c(c){return b(c)&&a(c)}Bm.exports=c}var Dm=!1;function Em(){Dm||(Dm=!0,Cm());return Bm.exports}f={};var Fm={exports:f};function Gm(){var a=Am(),b=Od(),c=Fl(),d=Em();c=c(function(c,e){return d(c)?a(c,b(e,1,d,!0)):[]});Fm.exports=c}var Hm=!1;function Im(){Hm||(Hm=!0,Gm());return Fm.exports}c={};var Jm={exports:c};function Km(){function a(a){return function(b,c,d){var e=-1,f=Object(b);d=d(b);var g=d.length;while(g--){var h=d[a?g:++e];if(c(f[h],h,f)===!1)break}return b}}Jm.exports=a}var Lm=!1;function Mm(){Lm||(Lm=!0,Km());return Jm.exports}d={};var Nm={exports:d};function Om(){var a=Mm();a=a();Nm.exports=a}var Pm=!1;function Qm(){Pm||(Pm=!0,Om());return Nm.exports}f={};var Rm={exports:f};function Sm(){var a=Qm(),b=Ci();function c(c,d){return c&&a(c,d,b)}Rm.exports=c}var Tm=!1;function Um(){Tm||(Tm=!0,Sm());return Rm.exports}c={};var Vm={exports:c};function Wm(){var a=jg();function b(b,c){return function(d,e){if(d==null)return d;if(!a(d))return b(d,e);var f=d.length,g=c?f:-1,h=Object(d);while(c?g--:++g<f)if(e(h[g],g,h)===!1)break;return d}}Vm.exports=b}var Xm=!1;function Ym(){Xm||(Xm=!0,Wm());return Vm.exports}d={};var Zm={exports:d};function $m(){var a=Um(),b=Ym();b=b(a);Zm.exports=b}var an=!1;function bn(){an||(an=!0,$m());return Zm.exports}f={};var cn={exports:f};function dn(){var a=le();function b(b){return typeof b=="function"?b:a}cn.exports=b}var en=!1;function fn(){en||(en=!0,dn());return cn.exports}c={};var gn={exports:c};function hn(){var a=ph(),b=bn(),c=fn(),d=p();function e(e,f){var g=d(e)?a:b;return g(e,c(f))}gn.exports=e}var jn=!1;function kn(){jn||(jn=!0,hn());return gn.exports}d={};var ln={exports:d};function mn(){ln.exports=kn()}var nn=!1;function on(){nn||(nn=!0,mn());return ln.exports}f={};var pn={exports:f};function qn(){function a(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(!b(a[c],c,a))return!1;return!0}pn.exports=a}var rn=!1;function sn(){rn||(rn=!0,qn());return pn.exports}c={};var tn={exports:c};function un(){var a=bn();function b(b,c){var d=!0;a(b,function(b,e,a){d=!!c(b,e,a);return d});return d}tn.exports=b}var vn=!1;function wn(){vn||(vn=!0,un());return tn.exports}d={};var xn={exports:d};function yn(){function a(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(b(a[c],c,a))return!0;return!1}xn.exports=a}var zn=!1;function An(){zn||(zn=!0,yn());return xn.exports}f={};var Bn={exports:f};function Cn(){var a=Vl(),b=An(),c=wm(),d=1,e=2;function f(f,g,h,i,j,k){var l=h&d,m=f.length,n=g.length;if(m!=n&&!(l&&n>m))return!1;n=k.get(f);if(n&&k.get(g))return n==g;n=-1;var o=!0,p=h&e?new a:void 0;k.set(f,g);k.set(g,f);while(++n<m){var q=f[n],r=g[n];if(i)var s=l?i(r,q,n,g,f,k):i(q,r,n,f,g,k);if(s!==void 0){if(s)continue;o=!1;break}if(p){if(!b(g,function(a,b){if(!c(p,b)&&(q===a||j(q,a,h,i,k)))return p.push(b)})){o=!1;break}}else if(!(q===r||j(q,r,h,i,k))){o=!1;break}}k["delete"](f);k["delete"](g);return o}Bn.exports=f}var Dn=!1;function En(){Dn||(Dn=!0,Cn());return Bn.exports}c={};var Fn={exports:c};function Gn(){function a(a){var b=-1,c=Array(a.size);a.forEach(function(a,d){c[++b]=[d,a]});return c}Fn.exports=a}var Hn=!1;function In(){Hn||(Hn=!0,Gn());return Fn.exports}d={};var Jn={exports:d};function Kn(){function a(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}Jn.exports=a}var Ln=!1;function Mn(){Ln||(Ln=!0,Kn());return Jn.exports}f={};var Nn={exports:f};function On(){var a=B(),b=Y(),c=Eb(),d=En(),e=In(),f=Mn(),g=1,h=2,i="[object Boolean]",j="[object Date]",k="[object Error]",l="[object Map]",m="[object Number]",n="[object RegExp]",o="[object Set]",p="[object String]",q="[object Symbol]",r="[object ArrayBuffer]",s="[object DataView]";a=a?a.prototype:void 0;var t=a?a.valueOf:void 0;function u(a,u,v,w,x,y,z){switch(v){case s:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer;u=u.buffer;case r:return a.byteLength!=u.byteLength||!y(new b(a),new b(u))?!1:!0;case i:case j:case m:return c(+a,+u);case k:return a.name==u.name&&a.message==u.message;case n:case p:return a==u+"";case l:var A=e;case o:v=w&g;A||(A=f);if(a.size!=u.size&&!v)return!1;v=z.get(a);if(v)return v==u;w|=h;z.set(a,u);v=d(A(a),A(u),w,x,y,z);z["delete"](a);return v;case q:if(t)return t.call(a)==t.call(u)}return!1}Nn.exports=u}var Pn=!1;function Qn(){Pn||(Pn=!0,On());return Nn.exports}c={};var Rn={exports:c};function Sn(){var a=Mj(),b=1,c=Object.prototype,d=c.hasOwnProperty;function e(c,e,f,g,h,i){var j=f&b,k=a(c),l=k.length,m=a(e);m=m.length;if(l!=m&&!j)return!1;m=l;while(m--){var n=k[m];if(!(j?n in e:d.call(e,n)))return!1}var o=i.get(c);if(o&&i.get(e))return o==e;o=!0;i.set(c,e);i.set(e,c);var p=j;while(++m<l){n=k[m];var q=c[n],r=e[n];if(g)var s=j?g(r,q,n,e,c,i):g(q,r,n,c,e,i);if(!(s===void 0?q===r||h(q,r,f,g,i):s)){o=!1;break}p||(p=n=="constructor")}if(o&&!p){q=c.constructor;r=e.constructor;q!=r&&"constructor"in c&&"constructor"in e&&!(typeof q=="function"&&q instanceof q&&typeof r=="function"&&r instanceof r)&&(o=!1)}i["delete"](c);i["delete"](e);return o}Rn.exports=e}var Tn=!1;function Un(){Tn||(Tn=!0,Sn());return Rn.exports}d={};var Vn={exports:d};function Wn(){var a=lh(),b=En(),c=Qn(),d=Un(),e=hk(),f=p(),g=Oh(),h=ei(),i=1,j="[object Arguments]",k="[object Array]",l="[object Object]",m=Object.prototype,n=m.hasOwnProperty;function o(m,o,p,q,r,s){var t=f(m),u=f(o),v=t?k:e(m);u=u?k:e(o);v=v==j?l:v;u=u==j?l:u;var w=v==l,x=u==l;u=v==u;if(u&&g(m)){if(!g(o))return!1;t=!0;w=!1}if(u&&!w){s||(s=new a);return t||h(m)?b(m,o,p,q,r,s):c(m,o,v,p,q,r,s)}if(!(p&i)){t=w&&n.call(m,"__wrapped__");v=x&&n.call(o,"__wrapped__");if(t||v){w=t?m.value():m;x=v?o.value():o;s||(s=new a);return r(w,x,p,q,s)}}if(!u)return!1;s||(s=new a);return d(m,o,p,q,r,s)}Vn.exports=o}var Xn=!1;function Yn(){Xn||(Xn=!0,Wn());return Vn.exports}f={};var Zn={exports:f};function $n(){var a=Yn(),b=na();function c(d,e,f,g,h){if(d===e)return!0;return d==null||e==null||!b(d)&&!b(e)?d!==d&&e!==e:a(d,e,f,g,c,h)}Zn.exports=c}var ao=!1;function bo(){ao||(ao=!0,$n());return Zn.exports}c={};var co={exports:c};function eo(){var a=lh(),b=bo(),c=1,d=2;function e(e,f,g,h){var i=g.length,j=i,k=!h;if(e==null)return!j;e=Object(e);while(i--){var l=g[i];if(k&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}while(++i<j){l=g[i];var m=l[0],n=e[m],o=l[1];if(k&&l[2]){if(n===void 0&&!(m in e))return!1}else{l=new a;if(h)var p=h(n,o,m,e,f,l);if(!(p===void 0?b(o,n,c|d,h,l):p))return!1}}return!0}co.exports=e}var fo=!1;function go(){fo||(fo=!0,eo());return co.exports}d={};var ho={exports:d};function io(){var a=F();function b(b){return b===b&&!a(b)}ho.exports=b}var jo=!1;function ko(){jo||(jo=!0,io());return ho.exports}f={};var lo={exports:f};function mo(){var a=ko(),b=Ci();function c(c){var d=b(c),e=d.length;while(e--){var f=d[e],g=c[f];d[e]=[f,g,a(g)]}return d}lo.exports=c}var no=!1;function oo(){no||(no=!0,mo());return lo.exports}c={};var po={exports:c};function qo(){function a(a,b){return function(c){return c==null?!1:c[a]===b&&(b!==void 0||a in Object(c))}}po.exports=a}var ro=!1;function so(){ro||(ro=!0,qo());return po.exports}d={};var to={exports:d};function uo(){var a=go(),b=oo(),c=so();function d(d){var e=b(d);return e.length==1&&e[0][2]?c(e[0][0],e[0][1]):function(b){return b===d||a(b,d,e)}}to.exports=d}var vo=!1;function wo(){vo||(vo=!0,uo());return to.exports}f={};var xo={exports:f};function yo(){function a(a,b){return a!=null&&b in Object(a)}xo.exports=a}var zo=!1;function Ao(){zo||(zo=!0,yo());return xo.exports}c={};var Bo={exports:c};function Co(){var a=hd(),b=Gd(),c=p(),d=ng(),e=fg(),f=P();function g(g,h,i){h=a(h,g);var j=-1,k=h.length,l=!1;while(++j<k){var m=f(h[j]);if(!(l=g!=null&&i(g,m)))break;g=g[m]}if(l||++j!=k)return l;k=g==null?0:g.length;return!!k&&e(k)&&d(m,k)&&(c(g)||b(g))}Bo.exports=g}var Do=!1;function Eo(){Do||(Do=!0,Co());return Bo.exports}d={};var Fo={exports:d};function Go(){var a=Ao(),b=Eo();function c(c,d){return c!=null&&b(c,d,a)}Fo.exports=c}var Ho=!1;function Io(){Ho||(Ho=!0,Go());return Fo.exports}f={};var Jo={exports:f};function Ko(){var a=bo(),b=sd(),c=Io(),d=E(),e=ko(),f=so(),g=P(),h=1,i=2;function j(j,k){return d(j)&&e(k)?f(g(j),k):function(d){var e=b(d,j);return e===void 0&&e===k?c(d,j):a(k,e,h|i)}}Jo.exports=j}var Lo=!1;function Mo(){Lo||(Lo=!0,Ko());return Jo.exports}c={};var No={exports:c};function Oo(){function a(a){return function(b){return b==null?void 0:b[a]}}No.exports=a}var Po=!1;function Qo(){Po||(Po=!0,Oo());return No.exports}d={};var Ro={exports:d};function So(){var a=od();function b(b){return function(c){return a(c,b)}}Ro.exports=b}var To=!1;function Uo(){To||(To=!0,So());return Ro.exports}f={};var Vo={exports:f};function Wo(){var a=Qo(),b=Uo(),c=E(),d=P();function e(e){return c(e)?a(d(e)):b(e)}Vo.exports=e}var Xo=!1;function Yo(){Xo||(Xo=!0,Wo());return Vo.exports}c={};var Zo={exports:c};function $o(){var a=wo(),b=Mo(),c=le(),d=p(),e=Yo();function f(f){if(typeof f=="function")return f;if(f==null)return c;return typeof f=="object"?d(f)?b(f[0],f[1]):a(f):e(f)}Zo.exports=f}var ap=!1;function bp(){ap||(ap=!0,$o());return Zo.exports}d={};var cp={exports:d};function dp(){var a=sn(),b=wn(),c=bp(),d=p(),e=rg();function f(f,g,h){var i=d(f)?a:b;h&&e(f,g,h)&&(g=void 0);return i(f,c(g,3))}cp.exports=f}var ep=!1;function fp(){ep||(ep=!0,dp());return cp.exports}f={};var gp={exports:f};function hp(){var a=bn();function b(b,c){var d=[];a(b,function(b,e,a){c(b,e,a)&&d.push(b)});return d}gp.exports=b}var ip=!1;function jp(){ip||(ip=!0,hp());return gp.exports}c={};var kp={exports:c};function lp(){var a=ij(),b=jp(),c=bp(),d=p();function e(e,f){var g=d(e)?a:b;return g(e,c(f,3))}kp.exports=e}var mp=!1;function np(){mp||(mp=!0,lp());return kp.exports}d={};var op={exports:d};function pp(){var a=bp(),b=jg(),c=Ci();function d(d){return function(e,f,g){var h=Object(e);if(!b(e)){var i=a(f,3);e=c(e);f=function(a){return i(h[a],a,h)}}f=d(e,f,g);return f>-1?h[i?e[f]:f]:void 0}}op.exports=d}var qp=!1;function rp(){qp||(qp=!0,pp());return op.exports}f={};var sp={exports:f};function tp(){var a=Zl(),b=bp(),c=Dg(),d=Math.max;function e(e,f,g){var h=e==null?0:e.length;if(!h)return-1;g=g==null?0:c(g);g<0&&(g=d(h+g,0));return a(e,b(f,3),g)}sp.exports=e}var up=!1;function vp(){up||(up=!0,tp());return sp.exports}c={};var wp={exports:c};function xp(){var a=rp(),b=vp();a=a(b);wp.exports=a}var yp=!1;function zp(){yp||(yp=!0,xp());return wp.exports}d={};var Ap={exports:d};function Bp(){var a=bn(),b=jg();function c(c,d){var e=-1,f=b(c)?Array(c.length):[];a(c,function(b,c,a){f[++e]=d(b,c,a)});return f}Ap.exports=c}var Cp=!1;function Dp(){Cp||(Cp=!0,Bp());return Ap.exports}f={};var Ep={exports:f};function Fp(){var a=Wc(),b=bp(),c=Dp(),d=p();function e(e,f){var g=d(e)?a:c;return g(e,b(f,3))}Ep.exports=e}var Gp=!1;function Hp(){Gp||(Gp=!0,Fp());return Ep.exports}c={};var Ip={exports:c};function Jp(){var a=Od(),b=Hp();function c(c,d){return a(b(c,d),1)}Ip.exports=c}var Kp=!1;function Lp(){Kp||(Kp=!0,Jp());return Ip.exports}d={};var Mp={exports:d};function Np(){var a=Qm(),b=fn(),c=Si();function d(d,e){return d==null?d:a(d,b(e),c)}Mp.exports=d}var Op=!1;function Pp(){Op||(Op=!0,Np());return Mp.exports}f={};var Qp={exports:f};function Rp(){var a=Object.prototype,b=a.hasOwnProperty;function c(a,c){return a!=null&&b.call(a,c)}Qp.exports=c}var Sp=!1;function Tp(){Sp||(Sp=!0,Rp());return Qp.exports}c={};var Up={exports:c};function Vp(){var a=Tp(),b=Eo();function c(c,d){return c!=null&&b(c,d,a)}Up.exports=c}var Wp=!1;function Xp(){Wp||(Wp=!0,Vp());return Up.exports}d={};var Yp={exports:d};function Zp(){var a=Math.max,b=Math.min;function c(c,d,e){return c>=b(d,e)&&c<a(d,e)}Yp.exports=c}var $p=!1;function aq(){$p||($p=!0,Zp());return Yp.exports}f={};var bq={exports:f};function cq(){var a=aq(),b=zg(),c=vg();function d(d,e,f){e=b(e);f===void 0?(f=e,e=0):f=b(f);d=c(d);return a(d,e,f)}bq.exports=d}var dq=!1;function eq(){dq||(dq=!0,cq());return bq.exports}c={};var fq={exports:c};function gq(){var a=Vl(),b=om(),c=sm(),d=Wc(),e=Wh(),f=wm(),g=Math.min;function h(h,i,j){var k=j?c:b,l=h[0].length,m=h.length,n=m,o=Array(m),p=Infinity,q=[];while(n--){var r=h[n];n&&i&&(r=d(r,e(i)));p=g(r.length,p);o[n]=!j&&(i||l>=120&&r.length>=120)?new a(n&&r):void 0}r=h[0];var s=-1,t=o[0];outer:while(++s<l&&q.length<p){var u=r[s],v=i?i(u):u;u=j||u!==0?u:0;if(!(t?f(t,v):k(q,v,j))){n=m;while(--n){var w=o[n];if(!(w?f(w,v):k(h[n],v,j)))continue outer}t&&t.push(v);q.push(u)}}return q}fq.exports=h}var hq=!1;function iq(){hq||(hq=!0,gq());return fq.exports}d={};var jq={exports:d};function kq(){var a=Em();function b(b){return a(b)?b:[]}jq.exports=b}var lq=!1;function mq(){lq||(lq=!0,kq());return jq.exports}f={};var nq={exports:f};function oq(){var a=Wc(),b=iq(),c=Fl(),d=mq();c=c(function(c){var e=a(c,d);return e.length&&e[0]===c[0]?b(e):[]});nq.exports=c}var pq=!1;function qq(){pq||(pq=!0,oq());return nq.exports}c={};var rq={exports:c};function sq(){var a=yi(),b=hk(),c=Gd(),d=p(),e=jg(),f=Oh(),g=mi(),h=ei(),i="[object Map]",j="[object Set]",k=Object.prototype,l=k.hasOwnProperty;function m(k){if(k==null)return!0;if(e(k)&&(d(k)||typeof k=="string"||typeof k.splice=="function"||f(k)||h(k)||c(k)))return!k.length;var m=b(k);if(m==i||m==j)return!k.size;if(g(k))return!a(k).length;for(m in k)if(l.call(k,m))return!1;return!0}rq.exports=m}var tq=!1;function uq(){tq||(tq=!0,sq());return rq.exports}d={};var vq={exports:d};function wq(){var a=bo();function b(b,c){return a(b,c)}vq.exports=b}var xq=!1;function yq(){xq||(xq=!0,wq());return vq.exports}f={};var zq={exports:f};function Aq(){var a=ja(),b=na(),c="[object Number]";function d(d){return typeof d=="number"||b(d)&&a(d)==c}zq.exports=d}var Bq=!1;function Cq(){Bq||(Bq=!0,Aq());return zq.exports}c={};var Dq={exports:c};function Eq(){var a=Cq();function b(b){return a(b)&&b!=+b}Dq.exports=b}var Fq=!1;function Gq(){Fq||(Fq=!0,Eq());return Dq.exports}d={};var Hq={exports:d};function Iq(){function a(a){return a==null}Hq.exports=a}var Jq=!1;function Kq(){Jq||(Jq=!0,Iq());return Hq.exports}f={};var Lq={exports:f};function Mq(){var a=ja(),b=yj(),c=na(),d="[object Object]",e=Function.prototype,f=Object.prototype,g=e.toString,h=f.hasOwnProperty,i=g.call(Object);function j(e){if(!c(e)||a(e)!=d)return!1;e=b(e);if(e===null)return!0;e=h.call(e,"constructor")&&e.constructor;return typeof e=="function"&&e instanceof e&&g.call(e)==i}Lq.exports=j}var Nq=!1;function Oq(){Nq||(Nq=!0,Mq());return Lq.exports}c={};var Pq={exports:c};function Qq(){var a=ja(),b=p(),c=na(),d="[object String]";function e(e){return typeof e=="string"||!b(e)&&c(e)&&a(e)==d}Pq.exports=e}var Rq=!1;function Sq(){Rq||(Rq=!0,Qq());return Pq.exports}d={};var Tq={exports:d};function Uq(){function a(a){return a===void 0}Tq.exports=a}var Vq=!1;function Wq(){Vq||(Vq=!0,Uq());return Tq.exports}f={};var Xq={exports:f};function Yq(){function a(a){var b=a==null?0:a.length;return b?a[b-1]:void 0}Xq.exports=a}var Zq=!1;function $q(){Zq||(Zq=!0,Yq());return Xq.exports}c={};var ar={exports:c};function br(){var a=th(),b=Um(),c=bp();function d(d,e){var f={};e=c(e,3);b(d,function(c,d,b){a(f,e(c,d,b),c)});return f}ar.exports=d}var cr=!1;function dr(){cr||(cr=!0,br());return ar.exports}d={};var er={exports:d};function fr(){var a=th(),b=Um(),c=bp();function d(d,e){var f={};e=c(e,3);b(d,function(c,d,b){a(f,d,e(c,d,b))});return f}er.exports=d}var gr=!1;function hr(){gr||(gr=!0,fr());return er.exports}f={};var ir={exports:f};function jr(){var a=ra();function b(b,c,d){var e=-1,f=b.length;while(++e<f){var g=b[e],h=c(g);if(h!=null&&(i===void 0?h===h&&!a(h):d(h,i)))var i=h,j=g}return j}ir.exports=b}var kr=!1;function lr(){kr||(kr=!0,jr());return ir.exports}c={};var mr={exports:c};function nr(){function a(a,b){return a>b}mr.exports=a}var or=!1;function pr(){or||(or=!0,nr());return mr.exports}d={};var qr={exports:d};function rr(){var a=lr(),b=pr(),c=le();function d(d){return d&&d.length?a(d,c,b):void 0}qr.exports=d}var sr=!1;function tr(){sr||(sr=!0,rr());return qr.exports}f={};var ur={exports:f};function vr(){var a=lr(),b=pr(),c=bp();function d(d,e){return d&&d.length?a(d,c(e,2),b):void 0}ur.exports=d}var wr=!1;function xr(){wr||(wr=!0,vr());return ur.exports}c={};var yr={exports:c};function zr(){var a=th(),b=Eb();function c(c,d,e){(e!==void 0&&!b(c[d],e)||e===void 0&&!(d in c))&&a(c,d,e)}yr.exports=c}var Ar=!1;function Br(){Ar||(Ar=!0,zr());return yr.exports}d={};var Cr={exports:d};function Dr(){function a(a,b){if(b==="constructor"&&typeof a[b]==="function")return;if(b=="__proto__")return;return a[b]}Cr.exports=a}var Er=!1;function Fr(){Er||(Er=!0,Dr());return Cr.exports}f={};var Gr={exports:f};function Hr(){var a=Bh(),b=Si();function c(c){return a(c,b(c))}Gr.exports=c}var Ir=!1;function Jr(){Ir||(Ir=!0,Hr());return Gr.exports}c={};var Kr={exports:c};function Lr(){var a=Br(),b=aj(),c=Gk(),d=ej(),e=Sk(),f=Gd(),g=p(),h=Em(),i=Oh(),j=Ba(),k=F(),l=Oq(),m=ei(),n=Fr(),o=Jr();function q(p,q,r,s,t,u,v){var w=n(p,r),x=n(q,r),y=v.get(x);if(y){a(p,r,y);return}y=u?u(w,x,r+"",p,q,v):void 0;q=y===void 0;if(q){var z=g(x),A=!z&&i(x),B=!z&&!A&&m(x);y=x;z||A||B?g(w)?y=w:h(w)?y=d(w):A?(q=!1,y=b(x,!0)):B?(q=!1,y=c(x,!0)):y=[]:l(x)||f(x)?(y=w,f(w)?y=o(w):(!k(w)||j(w))&&(y=e(x))):q=!1}q&&(v.set(x,y),t(y,x,s,u,v),v["delete"](x));a(p,r,y)}Kr.exports=q}var Mr=!1;function Nr(){Mr||(Mr=!0,Lr());return Kr.exports}d={};var Or={exports:d};function Pr(){var a=lh(),b=Br(),c=Qm(),d=Nr(),e=F(),f=Si(),g=Fr();function h(i,j,k,l,m){if(i===j)return;c(j,function(c,f){m||(m=new a);if(e(c))d(i,j,f,k,h,l,m);else{var n=l?l(g(i,f),c,f+"",i,j,m):void 0;n===void 0&&(n=c);b(i,f,n)}},f)}Or.exports=h}var Qr=!1;function Rr(){Qr||(Qr=!0,Pr());return Or.exports}f={};var Sr={exports:f};function Tr(){var a=Fl(),b=rg();function c(c){return a(function(a,d){var e=-1,f=d.length,g=f>1?d[f-1]:void 0,h=f>2?d[2]:void 0;g=c.length>3&&typeof g=="function"?(f--,g):void 0;h&&b(d[0],d[1],h)&&(g=f<3?void 0:g,f=1);a=Object(a);while(++e<f){h=d[e];h&&c(a,h,e,g)}return a})}Sr.exports=c}var Ur=!1;function Vr(){Ur||(Ur=!0,Tr());return Sr.exports}c={};var Wr={exports:c};function Xr(){var a=Rr(),b=Vr();b=b(function(b,c,d){a(b,c,d)});Wr.exports=b}var Yr=!1;function Zr(){Yr||(Yr=!0,Xr());return Wr.exports}d={};var $r={exports:d};function as(){function a(a,b){return a<b}$r.exports=a}var bs=!1;function cs(){bs||(bs=!0,as());return $r.exports}f={};var ds={exports:f};function es(){var a=lr(),b=cs(),c=le();function d(d){return d&&d.length?a(d,c,b):void 0}ds.exports=d}var fs=!1;function gs(){fs||(fs=!0,es());return ds.exports}c={};var hs={exports:c};function is(){var a=lr(),b=bp(),c=cs();function d(d,e){return d&&d.length?a(d,b(e,2),c):void 0}hs.exports=d}var js=!1;function ks(){js||(js=!0,is());return hs.exports}d={};var ls={exports:d};function ms(){var a=od(),b=Je();function c(c,d){return d.length<2?c:a(c,b(d,0,-1))}ls.exports=c}var ns=!1;function os(){ns||(ns=!0,ms());return ls.exports}f={};var ps={exports:f};function qs(){var a=hd(),b=$q(),c=os(),d=P();function e(e,f){f=a(f,e);e=c(e,f);return e==null||delete e[d(b(f))]}ps.exports=e}var rs=!1;function ss(){rs||(rs=!0,qs());return ps.exports}c={};var ts={exports:c};function us(){var a=Oq();function b(b){return a(b)?void 0:b}ts.exports=b}var vs=!1;function ws(){vs||(vs=!0,us());return ts.exports}d={};var xs={exports:d};function ys(){var a=Wc(),b=ll(),c=ss(),d=hd(),e=Bh(),f=ws(),g=Be(),h=Qj(),i=1,j=2,k=4;g=g(function(g,l){var m={};if(g==null)return m;var n=!1;l=a(l,function(a){a=d(a,g);n||(n=a.length>1);return a});e(g,h(g),m);n&&(m=b(m,i|j|k,f));var o=l.length;while(o--)c(m,l[o]);return m});xs.exports=g}var zs=!1;function As(){zs||(zs=!0,ys());return xs.exports}f={};var Bs={exports:f};function Cs(){var a=Dg(),b="Expected a function";function c(c,d){var e;if(typeof d!="function")throw new TypeError(b);c=a(c);return function(){--c>0&&(e=d.apply(this,arguments));c<=1&&(d=void 0);return e}}Bs.exports=c}var Ds=!1;function Es(){Ds||(Ds=!0,Cs());return Bs.exports}c={};var Fs={exports:c};function Gs(){var a=Es();function b(b){return a(2,b)}Fs.exports=b}var Hs=!1;function Is(){Hs||(Hs=!0,Gs());return Fs.exports}d={};var Js={exports:d};function Ks(){var a=9007199254740991,b=Math.floor;function c(c,d){var e="";if(!c||d<1||d>a)return e;do d%2&&(e+=c),d=b(d/2),d&&(c+=c);while(d);return e}Js.exports=c}var Ls=!1;function Ms(){Ls||(Ls=!0,Ks());return Js.exports}f={};var Ns={exports:f};function Os(){var a=Qo();a=a("length");Ns.exports=a}var Ps=!1;function Qs(){Ps||(Ps=!0,Os());return Ns.exports}c={};var Rs={exports:c};function Ss(){var a="\\ud800-\\udfff",b="\\u0300-\\u036f",c="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff";b=b+c+d;c="\\ufe0e\\ufe0f";d="["+a+"]";b="["+b+"]";var e="\\ud83c[\\udffb-\\udfff]",f="(?:"+b+"|"+e+")";a="[^"+a+"]";var g="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",i="\\u200d";f=f+"?";c="["+c+"]?";i="(?:"+i+"(?:"+[a,g,h].join("|")+")"+c+f+")*";c=c+f+i;f="(?:"+[a+b+"?",b,g,h,d].join("|")+")";var j=RegExp(e+"(?="+e+")|"+f+c,"g");function k(a){var b=j.lastIndex=0;while(j.test(a))++b;return b}Rs.exports=k}var Ts=!1;function Us(){Ts||(Ts=!0,Ss());return Rs.exports}d={};var Vs={exports:d};function Ws(){var a=Qs(),b=Re(),c=Us();function d(d){return b(d)?c(d):a(d)}Vs.exports=d}var Xs=!1;function Ys(){Xs||(Xs=!0,Ws());return Vs.exports}f={};var Zs={exports:f};function $s(){var a=Ms(),b=$c(),c=Ne(),d=Re(),e=Ys(),f=cf(),g=Math.ceil;function h(h,i){i=i===void 0?" ":b(i);var j=i.length;if(j<2)return j?a(i,h):i;j=a(i,g(h/e(i)));return d(i)?c(f(j),0,h).join(""):j.slice(0,h)}Zs.exports=h}var at=!1;function bt(){at||(at=!0,$s());return Zs.exports}c={};var ct={exports:c};function dt(){var a=bt(),b=Ys(),c=Dg(),d=dd();function e(e,f,g){e=d(e);f=c(f);var h=f?b(e):0;return f&&h<f?a(f-h,g)+e:e}ct.exports=e}var et=!1;function ft(){et||(et=!0,dt());return ct.exports}d={};var gt={exports:d};function ht(){var a=xh(),b=hd(),c=ng(),d=F(),e=P();function f(f,g,h,i){if(!d(f))return f;g=b(g,f);var j=-1,k=g.length,l=k-1,m=f;while(m!=null&&++j<k){var n=e(g[j]),o=h;if(j!=l){var p=m[n];o=i?i(p,n,m):void 0;o===void 0&&(o=d(p)?p:c(g[j+1])?[]:{})}a(m,n,o);m=m[n]}return f}gt.exports=f}var it=!1;function jt(){it||(it=!0,ht());return gt.exports}f={};var kt={exports:f};function lt(){var a=od(),b=jt(),c=hd();function d(d,e,f){var g=-1,h=e.length,i={};while(++g<h){var j=e[g],k=a(d,j);f(k,j)&&b(i,c(j,d),k)}return i}kt.exports=d}var mt=!1;function nt(){mt||(mt=!0,lt());return kt.exports}c={};var ot={exports:c};function pt(){var a=nt(),b=Io();function c(c,d){return a(c,d,function(a,d){return b(c,d)})}ot.exports=c}var qt=!1;function rt(){qt||(qt=!0,pt());return ot.exports}d={};var st={exports:d};function tt(){var a=rt(),b=Be();b=b(function(b,c){return b==null?{}:a(b,c)});st.exports=b}var ut=!1;function vt(){ut||(ut=!0,tt());return st.exports}f={};var wt={exports:f};function xt(){var a=Wc(),b=bp(),c=nt(),d=Qj();function e(e,f){if(e==null)return{};var g=a(d(e),function(a){return[a]});f=b(f);return c(e,g,function(a,b){return f(a,b[0])})}wt.exports=e}var yt=!1;function zt(){yt||(yt=!0,xt());return wt.exports}c={};var At={exports:c};function Bt(){var a=Math.ceil,b=Math.max;function c(c,d,e,f){var g=-1;d=b(a((d-c)/(e||1)),0);var h=Array(d);while(d--)h[f?d:++g]=c,c+=e;return h}At.exports=c}var Ct=!1;function Dt(){Ct||(Ct=!0,Bt());return At.exports}d={};var Et={exports:d};function Ft(){var a=Dt(),b=rg(),c=zg();function d(d){return function(e,f,g){g&&typeof g!="number"&&b(e,f,g)&&(f=g=void 0);e=c(e);f===void 0?(f=e,e=0):f=c(f);g=g===void 0?e<f?1:-1:c(g);return a(e,f,g,d)}}Et.exports=d}var Gt=!1;function Ht(){Gt||(Gt=!0,Ft());return Et.exports}f={};var It={exports:f};function Jt(){var a=Ht();a=a();It.exports=a}var Kt=!1;function Lt(){Kt||(Kt=!0,Jt());return It.exports}c={};var Mt={exports:c};function Nt(){function a(a,b,c,d,e){e(a,function(e,f,a){c=d?(d=!1,e):b(c,e,f,a)});return c}Mt.exports=a}var Ot=!1;function Pt(){Ot||(Ot=!0,Nt());return Mt.exports}d={};var Qt={exports:d};function Rt(){var a=tf(),b=bn(),c=bp(),d=Pt(),e=p();function f(f,g,h){var i=e(f)?a:d,j=arguments.length<3;return i(f,c(g,4),h,j,b)}Qt.exports=f}var St=!1;function Tt(){St||(St=!0,Rt());return Qt.exports}f={};var Ut={exports:f};function Vt(){var a=jt();function b(b,c,d){return b==null?b:a(b,c,d)}Ut.exports=b}var Wt=!1;function Xt(){Wt||(Wt=!0,Vt());return Ut.exports}c={};var Yt={exports:c};function Zt(){var a=jt();function b(b,c,d,e){e=typeof e=="function"?e:void 0;return b==null?b:a(b,c,d,e)}Yt.exports=b}var $t=!1;function au(){$t||($t=!0,Zt());return Yt.exports}d={};var bu={exports:d};function cu(){var a=yi(),b=hk(),c=jg(),d=Sq(),e=Ys(),f="[object Map]",g="[object Set]";function h(h){if(h==null)return 0;if(c(h))return d(h)?e(h):h.length;var i=b(h);return i==f||i==g?h.size:a(h).length}bu.exports=h}var du=!1;function eu(){du||(du=!0,cu());return bu.exports}f={};var fu={exports:f};function gu(){var a=Yf();a=a(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()});fu.exports=a}var hu=!1;function iu(){hu||(hu=!0,gu());return fu.exports}c={};var ju={exports:c};function ku(){var a=bn();function b(b,c){var d;a(b,function(b,e,a){d=c(b,e,a);return!d});return!!d}ju.exports=b}var lu=!1;function mu(){lu||(lu=!0,ku());return ju.exports}d={};var nu={exports:d};function ou(){var a=An(),b=bp(),c=mu(),d=p(),e=rg();function f(f,g,h){var i=d(f)?a:c;h&&e(f,g,h)&&(g=void 0);return i(f,b(g,3))}nu.exports=f}var pu=!1;function qu(){pu||(pu=!0,ou());return nu.exports}f={};var ru={exports:f};function su(){function a(a,b){var c=a.length;a.sort(b);while(c--)a[c]=a[c].value;return a}ru.exports=a}var tu=!1;function uu(){tu||(tu=!0,su());return ru.exports}c={};var vu={exports:c};function wu(){var a=ra();function b(b,c){if(b!==c){var d=b!==void 0,e=b===null,f=b===b,g=a(b),h=c!==void 0,i=c===null,j=c===c,k=a(c);if(!i&&!k&&!g&&b>c||g&&h&&j&&!i&&!k||e&&h&&j||!d&&j||!f)return 1;if(!e&&!g&&!k&&b<c||k&&d&&f&&!e&&!g||i&&d&&f||!h&&f||!j)return-1}return 0}vu.exports=b}var xu=!1;function yu(){xu||(xu=!0,wu());return vu.exports}d={};var zu={exports:d};function Au(){var a=yu();function b(b,c,d){var e=-1,f=b.criteria,g=c.criteria,h=f.length,i=d.length;while(++e<h){var j=a(f[e],g[e]);if(j){if(e>=i)return j;var k=d[e];return j*(k=="desc"?-1:1)}}return b.index-c.index}zu.exports=b}var Bu=!1;function Cu(){Bu||(Bu=!0,Au());return zu.exports}f={};var Du={exports:f};function Eu(){var a=Wc(),b=bp(),c=Dp(),d=uu(),e=Wh(),f=Cu(),g=le();function h(h,i,j){var k=-1;i=a(i.length?i:[g],e(b));h=c(h,function(c,d,b){d=a(i,function(a){return a(c)});return{criteria:d,index:++k,value:c}});return d(h,function(a,b){return f(a,b,j)})}Du.exports=h}var Fu=!1;function Gu(){Fu||(Fu=!0,Eu());return Du.exports}c={};var Hu={exports:c};function Iu(){var a=Od(),b=Gu(),c=Fl(),d=rg();c=c(function(c,e){if(c==null)return[];var f=e.length;f>1&&d(c,e[0],e[1])?e=[]:f>2&&d(e[0],e[1],e[2])&&(e=[e[0]]);return b(c,a(e,1),[])});Hu.exports=c}var Ju=!1;function Ku(){Ju||(Ju=!0,Iu());return Hu.exports}d={};var Lu={exports:d};function Mu(){var a=ja(),b=na(),c="[object RegExp]";function d(d){return b(d)&&a(d)==c}Lu.exports=d}var Nu=!1;function Ou(){Nu||(Nu=!0,Mu());return Lu.exports}f={};var Pu={exports:f};function Qu(){var a=Ou(),b=Wh(),c=ai();c=c&&c.isRegExp;b=c?b(c):a;Pu.exports=b}var Ru=!1;function Su(){Ru||(Ru=!0,Qu());return Pu.exports}c={};var Tu={exports:c};function Uu(){var a=$c(),b=Ne(),c=Re(),d=rg(),e=Su(),f=cf(),g=dd(),h=4294967295;function i(i,j,k){k&&typeof k!="number"&&d(i,j,k)&&(j=k=void 0);k=k===void 0?h:k>>>0;if(!k)return[];i=g(i);if(i&&(typeof j=="string"||j!=null&&!e(j))){j=a(j);if(!j&&c(i))return b(f(i),0,k)}return i.split(j,k)}Tu.exports=i}var Vu=!1;function Wu(){Vu||(Vu=!0,Uu());return Tu.exports}d={};var Xu={exports:d};function Yu(){function a(a,b){var c,d=-1,e=a.length;while(++d<e){var f=b(a[d]);f!==void 0&&(c=c===void 0?f:c+f)}return c}Xu.exports=a}var Zu=!1;function $u(){Zu||(Zu=!0,Yu());return Xu.exports}f={};var av={exports:f};function bv(){var a=bp(),b=$u();function c(c,d){return c&&c.length?b(c,a(d,2)):0}av.exports=c}var cv=!1;function dv(){cv||(cv=!0,bv());return av.exports}c={};var ev={exports:c};function fv(){var a=Bl(),b=F(),c="Expected a function";function d(d,e,f){var g=!0,h=!0;if(typeof d!="function")throw new TypeError(c);b(f)&&(g="leading"in f?!!f.leading:g,h="trailing"in f?!!f.trailing:h);return a(d,e,{leading:g,maxWait:e,trailing:h})}ev.exports=d}var gv=!1;function hv(){gv||(gv=!0,fv());return ev.exports}d={};var iv={exports:d};function jv(){var a=Fh(),b=fn(),c=Dg(),d=9007199254740991,e=4294967295,f=Math.min;function g(g,h){g=c(g);if(g<1||g>d)return[];var i=e,j=f(g,e);h=b(h);g-=e;j=a(j,h);while(++i<g)h(i);return j}iv.exports=g}var kv=!1;function lv(){kv||(kv=!0,jv());return iv.exports}f={};var mv={exports:f};function nv(){var a=Wc(),b=ej(),c=p(),d=ra(),e=Sc(),f=P(),g=dd();function h(h){return c(h)?a(h,f):d(h)?[h]:b(e(g(h)))}mv.exports=h}var ov=!1;function pv(){ov||(ov=!0,nv());return mv.exports}c={};var qv={exports:c};function rv(){var a=ph(),b=Ok(),c=Um(),d=bp(),e=yj(),f=p(),g=Oh(),h=Ba(),i=F(),j=ei();function k(k,l,m){var n=f(k),o=n||g(k)||j(k);l=d(l,4);if(m==null){var p=k&&k.constructor;o?m=n?new p:[]:i(k)?m=h(p)?b(e(k)):{}:m={}}(o?a:c)(k,function(b,c,a){return l(m,b,c,a)});return m}qv.exports=k}var sv=!1;function tv(){sv||(sv=!0,rv());return qv.exports}d={};var uv={exports:d};function vv(){var a=$c(),b=Ne(),c=Re(),d=F(),e=Su(),f=Ys(),g=cf(),h=Dg(),i=dd(),j=30,k="...",l=/\w*$/;function m(m,n){var o=j,p=k;if(d(n)){var q="separator"in n?n.separator:q;o="length"in n?h(n.length):o;p="omission"in n?a(n.omission):p}m=i(m);n=m.length;if(c(m)){var r=g(m);n=r.length}if(o>=n)return m;n=o-f(p);if(n<1)return p;o=r?b(r,0,n).join(""):m.slice(0,n);if(q===void 0)return o+p;r&&(n+=o.length-n);if(e(q)){if(m.slice(n).search(q)){var s,t=o;q.global||(q=RegExp(q.source,i(l.exec(q))+"g"));q.lastIndex=0;while(s=q.exec(t))var u=s.index;o=o.slice(0,u===void 0?n:u)}}else if(m.indexOf(a(q),n)!=n){s=o.lastIndexOf(q);s>-1&&(o=o.slice(0,s))}return o+p}uv.exports=m}var wv=!1;function xv(){wv||(wv=!0,vv());return uv.exports}f={};var yv={exports:f};function zv(){function a(){}yv.exports=a}var Av=!1;function Bv(){Av||(Av=!0,zv());return yv.exports}c={};var Cv={exports:c};function Dv(){var a=$j(),b=Bv(),c=Mn(),d=1/0;c=a&&1/c(new a([,-0]))[1]==d?function(b){return new a(b)}:b;Cv.exports=c}var Ev=!1;function Fv(){Ev||(Ev=!0,Dv());return Cv.exports}d={};var Gv={exports:d};function Hv(){var a=Vl(),b=om(),c=sm(),d=wm(),e=Fv(),f=Mn(),g=200;function h(h,i,j){var k=-1,l=b,m=h.length,n=!0,o=[],p=o;if(j)n=!1,l=c;else if(m>=g){var q=i?null:e(h);if(q)return f(q);n=!1;l=d;p=new a}else p=i?[]:o;outer:while(++k<m){q=h[k];var r=i?i(q):q;q=j||q!==0?q:0;if(n&&r===r){var s=p.length;while(s--)if(p[s]===r)continue outer;i&&p.push(r);o.push(q)}else l(p,r,j)||(p!==o&&p.push(r),o.push(q))}return o}Gv.exports=h}var Iv=!1;function Jv(){Iv||(Iv=!0,Hv());return Gv.exports}f={};var Kv={exports:f};function Lv(){var a=Od(),b=Fl(),c=Jv(),d=Em();b=b(function(b){return c(a(b,1,d,!0))});Kv.exports=b}var Mv=!1;function Nv(){Mv||(Mv=!0,Lv());return Kv.exports}c={};var Ov={exports:c};function Pv(){var a=Jv();function b(b){return b&&b.length?a(b):[]}Ov.exports=b}var Qv=!1;function Rv(){Qv||(Qv=!0,Pv());return Ov.exports}d={};var Sv={exports:d};function Tv(){var a=bp(),b=Jv();function c(c,d){return c&&c.length?b(c,a(d,2)):[]}Sv.exports=c}var Uv=!1;function Vv(){Uv||(Uv=!0,Tv());return Sv.exports}f={};var Wv={exports:f};function Xv(){var a=dd(),b=0;function c(c){var d=++b;return a(c)+d}Wv.exports=c}var Yv=!1;function Zv(){Yv||(Yv=!0,Xv());return Wv.exports}c={};var $v={exports:c};function aw(){var a=Wc();function b(b,c){return a(c,function(a){return b[a]})}$v.exports=b}var bw=!1;function cw(){bw||(bw=!0,aw());return $v.exports}d={};var dw={exports:d};function ew(){var a=cw(),b=Ci();function c(c){return c==null?[]:a(c,b(c))}dw.exports=c}var fw=!1;function gw(){fw||(fw=!0,ew());return dw.exports}f={};var hw={exports:f};function iw(){function a(a,b,c){var d=-1,e=a.length,f=b.length,g={};while(++d<e){var h=d<f?b[d]:void 0;c(g,a[d],h)}return g}hw.exports=a}var jw=!1;function kw(){jw||(jw=!0,iw());return hw.exports}c={};var lw={exports:c};function mw(){var a=xh(),b=kw();function c(c,d){return b(c||[],d||[],a)}lw.exports=c}var nw=!1;function ow(){nw||(nw=!0,mw());return lw.exports}function b(a){switch(a){case void 0:return l();case"/at":return Fe();case"/capitalize":return pf();case"/camelCase":return bg();case"/chunk":return Hg();case"/clamp":return Pg();case"/clone":return pl();case"/cloneDeep":return tl();case"/constant":return de();case"/debounce":return Bl();case"/defaults":return Jl();case"/difference":return Im();case"/each":return on();case"/every":return fp();case"/filter":return np();case"/find":return zp();case"/flatMap":return Lp();case"/flatten":return Sd();case"/forEach":return kn();case"/forIn":return Pp();case"/get":return sd();case"/has":return Xp();case"/inRange":return eq();case"/intersection":return qq();case"/isArray":return p();case"/isEmpty":return uq();case"/isEqual":return yq();case"/isFunction":return Ba();case"/isNaN":return Gq();case"/isNil":return Kq();case"/isNumber":return Cq();case"/isObject":return F();case"/isPlainObject":return Oq();case"/isString":return Sq();case"/isUndefined":return Wq();case"/keys":return Ci();case"/last":return $q();case"/map":return Hp();case"/mapKeys":return dr();case"/mapValues":return hr();case"/max":return tr();case"/maxBy":return xr();case"/memoize":return Kc();case"/merge":return Zr();case"/min":return gs();case"/minBy":return ks();case"/now":return xl();case"/omit":return As();case"/once":return Is();case"/padStart":return ft();case"/pick":return vt();case"/pickBy":return zt();case"/range":return Lt();case"/reduce":return Tt();case"/set":return Xt();case"/setWith":return au();case"/size":return eu();case"/snakeCase":return iu();case"/some":return qu();case"/sortBy":return Ku();case"/split":return Wu();case"/sumBy":return dv();case"/throttle":return hv();case"/times":return lv();case"/toPath":return pv();case"/transform":return tv();case"/truncate":return xv();case"/union":return Nv();case"/uniq":return Rv();case"/uniqBy":return Vv();case"/uniqueId":return Zv();case"/values":return gw();case"/zipObject":return ow();case"/at":return Fe();case"/capitalize":return pf();case"/chunk":return Hg();case"/clamp":return Pg();case"/cloneDeep":return tl();case"/debounce":return Bl();case"/difference":return Im();case"/get":return sd();case"/inRange":return eq();case"/isEmpty":return uq();case"/isEqual":return yq();case"/isObject":return F();case"/isPlainObject":return Oq();case"/isString":return Sq();case"/memoize":return Kc();case"/merge":return Zr();case"/once":return Is();case"/padStart":return ft();case"/pick":return vt();case"/pickBy":return zt();case"/range":return Lt();case"/set":return Xt();case"/setWith":return au();case"/split":return Wu();case"/throttle":return hv();case"/times":return lv();case"/truncate":return xv();case"/uniq":return Rv();case"/uniqueId":return Zv()}}e.exports=b}),null);
__d("lodash-memoize",["lodash-4.17.15"],(function(a,b,c,d,e,f){e.exports=b("lodash-4.17.15")("/memoize")}),null);/*FB_PKG_DELIM*/
__d("ArmadilloReceiveWriteDbSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5721");b=d("FalcoLoggerInternal").create("armadillo_receive_write_db_success",a);e=b;g["default"]=e}),98);
__d("MEBEncryptionVersion",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,ENCRYPTION_KDF_WITH_VERSION:2,ENCRYPTION_KDF_WITH_NULL_SALT:3,ENCRYPTION_KDF_WITH_NULL_SALT_DF_CANARY:4,TEST_VERSION:99});f["default"]=a}),66);
__d("CryptoUtils",["Base64Utils","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","MEBEncryptionVersion","SymmetricEncryptionPaddingUtils","XPlatReactCrypto","XPlatReactTextDecoder","err"],(function(a,b,c,d,e,f,g){"use strict";var h=32,i=2147483647,j="message_key_in_epoch",k="_",l="cipher_version",m="thread";e="message_thread";function a(a,b,d,e){var f=d>=c("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_NULL_SALT?null:n(e);a=o(a,d,e);if(a==null)throw c("err")("Error in derive message symmetric key. info is null");return q(a,f,b,[h])}function n(a){try{return new TextEncoder().encode(a).buffer}catch(a){throw c("err")("Error in get blob from string with exception: ",a)}}function o(a,b,c){a=p(a,b,c);return n(a)}function p(a,b,e){if(b>=c("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_NULL_SALT_DF_CANARY||b>=c("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_NULL_SALT)return[j,new(d("XPlatReactTextDecoder").TextDecoder)().decode(a),l,b,m,e!=null?e:""].join(k);else if(b>=c("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_VERSION)return[j,new(d("XPlatReactTextDecoder").TextDecoder)().decode(a),l,b].join(k);else return[j,new(d("XPlatReactTextDecoder").TextDecoder)().decode(a)].join(k)}function q(a,b,e,f){if(f.length<1||f.some(function(a){return a>i}))throw c("err")("Invalid key lengths for derive keys");var g=f.reduce(function(a,b){return a+b},0)*8;return d("XPlatReactCrypto").subtleImportKey("raw",e,"HKDF",!1,["deriveBits"]).then(function(c){var e;return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:a,name:"HKDF",salt:(e=b)!=null?e:new Uint8Array(10).buffer},c,g)}).then(function(a){a=new Uint8Array(a);var b=[],c=0;for(var d=0,e=f.length;d<e;++d){var g=c+f[d];b.push(a.slice(c,g).buffer);c=g}return b})["catch"](function(a){throw c("err")("Exception in create derived keys",a)})}function b(a,b,e){e=d("Base64Utils").toArrayBuffer(e);return r(a,b,e).then(function(a){return a}).then(function(a){if(a==null)throw c("err")("symmetric string decryption with null result");return new(d("XPlatReactTextDecoder").TextDecoder)().decode(a)})["catch"](function(a){throw c("err")("symmetric string decryption failed with error",a)})}function r(a,b,e){if(e.byteLength<d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes+d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLengthInBytes)throw c("err")("cipher text is invalid");e=new Uint8Array(e);var f=e.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),g=new(d("HChaCha20").HChaCha20)(),h=e.slice(d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes).buffer;e=g.hChaCha20Bytes(f.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,a);return d("XPlatReactCrypto").subtleImportKey("raw",e,"AES-GCM",!1,["decrypt"]).then(function(a){return d("XPlatReactCrypto").subtleDecrypt({additionalData:b,iv:new Uint8Array(f.slice(d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},a,h)}).then(function(a){a=d("SymmetricEncryptionPaddingUtils").stripPadding(a);if(a==null)throw c("err")("Failed to strip padding for symmetric decryption");return a})["catch"](function(a){throw c("err")("symmetric data decryption failed with error",a)})}g.KEY_LEN=h;g.MAX_INT_32=i;g.STRING_JOIN_SEPARATOR=k;g.MESSAGE_ENCYPTION_AAD=e;g.deriveMessageSymmetricKey=a;g.createDerivedKeys=q;g.symmetricEncryptionCreateDecryptedString=b}),98);
__d("LSDeleteAndReenrollDeviceState",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Beginning execution."),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] No reenrollment trigger table. Doing nothing."),d[1]=c.createArray(),void 0!==void 0?d[8]=(d[1].push(void 0),d[1]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure","No reenrollment trigger table. Doing nothing.",d[1],c.i64.cast([0,3]))},function(a){return d[2]=c.i64.of_float(Date.now()),d[3]=c.i64.random(),d[5]="Finishing execution. Execution time: ",d[6]=c.i64.to_string(c.i64.sub(d[2],d[0])),d[7]=" ms",d[4]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ",d[4],d[5],d[4],d[6],d[4],d[7]].join("")),c.i64.eq(c.i64.mod_(d[3],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[8]=",",d[9]=c.createArray(),void 0!==void 0?d[10]=(d[9].push(void 0),d[9]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",[d[5],d[8],d[6],d[8],d[7]].join(""),d[9],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDeleteAndReenrollDeviceStateStoredProcedure",["LSDeleteAndReenrollDeviceState","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDeleteAndReenrollDeviceState"),e.targetDeviceId,e.reenrollmentReason);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSMEBDeviceReenrollmentReason",[],(function(a,b,c,d,e,f){a=Object.freeze({UNIT_TEST:1,UPLOAD_FAILED_WITH_NO_DEVICE_FOUND:2,LOCAL_DEVICE_ID_NOT_IN_FETCH_BACKUPS_RESULT:3,RESTORE_FAILED_WITH_NO_DEVICE_FOUND:4,EPOCH_DOWNLOAD_UNRECOVERABLE_ERROR:5,OPT_OUT_DELTA_FROM_DEVICE_PRUNING:6,UPLOAD_FAILED_WITH_INCORRECT_FINGERPRINT_FROM_CORRUPT_EPOCH:7,INIT_SEV_REMEDIATION:8,INIT_SEV_REMEDIATION_V2:9,GRAPHQL_INIT_SEV_REMEDIATION:10,DELETE_DELTA_TRIGGER:11});f["default"]=a}),66);
__d("LSDecryptSupplementalKey",["LSArrayGetObjectAt","LSBase64Decode.nop","LSCreateDerivedKeys.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateDecryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptSupplementalKey] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.nativeOperation(b("LSBase64Decode.nop"),a[0]).then(function(a){return a=a,d[2]=a[0],a})},function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(a){return c.blobs.neq(d[2],void 0)?c.sequence([function(a){return d[13]=d[3].get("epoch_root_key"),d[14]=c.createArray(),d[21]=(d[14].push(c.i64.cast([0,32])),d[14]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,d[13],d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]!==void 0?c.sequence([function(a){return d[21]=c.i64.of_int32(d[15].length),c.i64.ge(d[21],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[15],c.i64.cast([0,0])).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return d[22]=d[23]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[23]=c.createArray(),void 0!==void 0?d[24]=(d[23].push(void 0),d[23]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[23],c.i64.cast([0,3]))},function(a){return d[22]=void 0}])},function(a){return d[16]=d[22]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[21]=c.createArray(),void 0!==void 0?d[22]=(d[21].push(void 0),d[21]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[21],c.i64.cast([0,3]))},function(a){return d[16]=void 0}])},function(a){return c.blobs.neq(d[16],void 0)?d[17]=!0:d[17]=!1,d[17]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedData.nop"),d[16],c.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),d[2]).then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.blobs.neq(d[18],void 0)?(a=[c.blobs.to_string(d[18]),void 0],d[19]=a[0],d[20]=a[1],a):(d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,109])),d[21].set("stored_procedure","LSEncryptedBackupsDecryptSupplementalKeyStoredProcedure"),d[21].set("error_message",""),a=[void 0,d[21]],d[19]=a[0],d[20]=a[1],a),a=[d[19],d[20]],d[5]=a[0],d[6]=a[1],a}]):c.resolve((d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,109])),d[13].set("stored_procedure","LSEncryptedBackupsDecryptSupplementalKeyStoredProcedure"),d[13].set("error_message",""),a=[void 0,d[13]],d[5]=a[0],d[6]=a[1],a))},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptSupplementalKey] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptSupplementalKey",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptSupplementalKeyStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDecryptMessageProtobufs",["LSArrayGetObjectAt","LSDecryptProtobuf","LSDecryptSupplementalKey","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptMessageProtobufs] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[11]=new c.Map(),d[11].set("error_code",c.i64.cast([0,1])),d[11].set("stored_procedure","LSEncryptedBackupsDecryptMessageProtobufsStoredProcedure"),d[11].set("error_message",""),g=[void 0,d[11]],d[2]=g[0],d[3]=g[1],g):(f=e.item,c.sequence([function(a){return d[19]=f.backupId,d[18]=f.backupTenancy,d[17]=f.encryptionVersion,d[11]=void 0,c.i64.neq(d[11],void 0)?c.resolve(d[12]=d[11]):c.sequence([function(a){return d[20]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[30]=(d[20].push(c.i64.cast([0,0])),d[20]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[22]?d[30]=(d[20].push(c.i64.cast([0,2])),d[20]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[23]?d[30]=(d[20].push(c.i64.cast([0,3])),d[20]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[30]=(d[20].push(c.i64.cast([0,4])),d[20]):0,d[25]=c.createArray(),d[26]=c.i64.of_int32(d[20].length),c.i64.gt(d[26],c.i64.cast([0,0]))?c.loopAsync(d[26],function(a){return d[30]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],d[30]).then(function(a){return a=a,d[31]=a[0],d[32]=a[1],a})},function(a){return d[33]=(d[25].push(d[31]),d[25])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[30]=c.createArray(),d[31]=c.i64.of_int32(d[25].length),c.i64.gt(d[31],c.i64.cast([0,0]))?c.loopAsync(d[31],function(a){return d[33]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[25],d[33]).then(function(a){return a=a,d[34]=a[0],d[35]=a[1],a})},function(a){return d[36]=(d[30].push(c.i64.to_string(d[34])),d[30])}])}):c.resolve()},function(a){return d[32]=d[30].join(","),d[27]=d[32]}])},function(a){return d[25].some(function(a){return c.i64.eq(d[17],a)})?d[28]=d[17]:d[28]=void 0,c.i64.neq(d[28],void 0)?d[29]=d[28]:d[29]=void 0,d[12]=d[29]}])},function(e){return c.i64.neq(d[12],void 0)?d[13]=d[12]:d[13]=c.i64.cast([0,0]),c.i64.neq(d[18],void 0)?d[14]=d[18]:d[14]=c.i64.cast([0,1]),c.i64.neq(f.deviceId,void 0)?c.sequence([function(e){return d[20]=c.createArray(),d[21]=c.createArray(),d[22]=new c.Map(),d[23]=c.i64.of_int32(a[0].length),c.i64.gt(d[23],c.i64.cast([0,0]))?c.loopAsync(d[23],function(e){return d[27]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[27]).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],a})},function(a){return d[30]=d[28].get("encrypted_protobufs"),d[31]=d[30].get("toplevel_protobuf"),d[32]=d[31].get("epoch_id"),d[33]=d[31].get("epoch_anon_id"),d[34]=d[22].get(c.blobs.to_string(d[33])),d[34]!==void 0?c.resolve(d[35]=d[34]):c.sequence([function(a){return c.i64.neq(d[32],void 0)?c.sequence([function(a){return d[42]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch([[[d[32]]]]),function(a){return c.i64.eq(a.backupId,d[19])&&c.i64.eq(a.epochId,d[32])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[43]=new c.Map(),d[43].set("epoch_root_key",a.epochRootKeyBlob),d[43].set("epoch_anon_id",a.epochAnonIdBlob),d[44]=(d[42].push(d[43]),d[42])})},function(a){return d[41]=d[42]}]):c.sequence([function(a){return d[42]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch([[[d[19]]],"fk_secure_encrypted_backups_client_state"]),function(a){return c.i64.eq(a.backupId,d[19])&&c.blobs.eq(a.epochAnonIdBlob,d[33])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[43]=new c.Map(),d[43].set("epoch_root_key",a.epochRootKeyBlob),d[43].set("epoch_anon_id",a.epochAnonIdBlob),d[44]=(d[42].push(d[43]),d[42])})},function(a){return d[41]=d[42]}])},function(a){return d[35]=d[41]}])},function(e){return d[36]=d[31].get("epoch_anon_id"),d[22].set(c.blobs.to_string(d[36]),d[35]),d[37]=d[31].get("encrypted_protobuf"),d[38]=d[31].get("encryption_version"),c.storedProcedure(b("LSDecryptProtobuf"),d[37],d[38],a[1],d[35]).then(function(a){return a=a,d[39]=a[0],d[40]=a[1],a})},function(e){return c.blobs.neq(d[39],void 0)?c.sequence([function(e){return d[41]=d[28].get("encrypted_protobufs"),d[42]=d[41].get("supplemental_protobufs"),d[43]=new c.Map(),d[44]=d[42].keys(),d[45]=c.i64.of_int32(d[44].length),c.i64.gt(d[45],c.i64.cast([0,0]))?c.loopAsync(d[45],function(e){return d[51]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[44],d[51]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],a})},function(e){return d[54]=d[42].get(d[52]),d[54]!==void 0?c.sequence([function(a){return d[55]=d[54].get("epoch_id"),d[56]=d[54].get("epoch_anon_id"),d[57]=d[22].get(c.blobs.to_string(d[56])),d[57]!==void 0?c.resolve(d[58]=d[57]):c.sequence([function(a){return c.i64.neq(d[55],void 0)?c.sequence([function(a){return d[64]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch([[[d[55]]]]),function(a){return c.i64.eq(a.backupId,d[19])&&c.i64.eq(a.epochId,d[55])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[65]=new c.Map(),d[65].set("epoch_root_key",a.epochRootKeyBlob),d[65].set("epoch_anon_id",a.epochAnonIdBlob),d[66]=(d[64].push(d[65]),d[64])})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return d[64]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch([[[d[19]]],"fk_secure_encrypted_backups_client_state"]),function(a){return c.i64.eq(a.backupId,d[19])&&c.blobs.eq(a.epochAnonIdBlob,d[56])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[65]=new c.Map(),d[65].set("epoch_root_key",a.epochRootKeyBlob),d[65].set("epoch_anon_id",a.epochAnonIdBlob),d[66]=(d[64].push(d[65]),d[64])})},function(a){return d[63]=d[64]}])},function(a){return d[58]=d[63]}])},function(a){return d[59]=d[54].get("epoch_anon_id"),d[22].set(c.blobs.to_string(d[59]),d[58]),d[60]=d[54].get("sk_ciphertext"),c.storedProcedure(b("LSDecryptSupplementalKey"),d[60]==null?"":d[60],d[58]).then(function(a){return a=a,d[61]=a[0],d[62]=a[1],a})},function(e){return d[61]!==void 0?c.sequence([function(e){return d[63]=d[54].get("encrypted_protobuf"),d[64]=d[54].get("encryption_version"),c.storedProcedure(b("LSDecryptProtobuf"),d[63],d[64],a[1],d[58]).then(function(a){return a=a,d[65]=a[0],d[66]=a[1],a})},function(a){return c.blobs.neq(d[65],void 0)?(d[67]=d[54].get("protobuf_timestamp_ms"),d[68]=new c.Map(),d[68].set("decrypted_protobuf",d[65]),d[68].set("protobuf_timestamp_ms",d[67]),d[43].set(d[61],d[68])):d[67]=(d[21].push(d[66]),d[21])}]):c.resolve((d[63]=new c.Map(),d[63].set("error_code",c.i64.cast([0,109])),d[63].set("stored_procedure","LSEncryptedBackupsDecryptMessageProtobufsStoredProcedure"),d[63].set("error_message",""),d[64]=(d[21].push(d[63]),d[21])))}]):c.resolve()}])}):c.resolve()},function(a){return d[46]=d[28].get("otid"),d[47]=d[31].get("protobuf_timestamp_ms"),d[48]=new c.Map(),d[48].set("decrypted_protobuf",d[39]),d[48].set("protobuf_timestamp_ms",d[47]),d[49]=d[28].get("message_tags"),d[50]=new c.Map(),d[50].set("otid",d[46]),d[50].set("toplevel_protobuf",d[48]),d[50].set("supplemental_protobufs",d[43]),d[50].set("message_tags",d[49]),d[51]=(d[20].push(d[50]),d[20])}]):c.resolve(d[41]=(d[21].push(d[40]),d[21]))}])}):c.resolve()},function(a){return d[24]=c.i64.of_int32(d[21].length),c.i64.gt(d[24],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[21],c.i64.cast([0,0])).then(function(a){return a=a,d[27]=a[0],d[28]=a[1],a})},function(a){return a=[void 0,d[27]],d[25]=a[0],d[26]=a[1],a}]):c.resolve((a=[d[20],void 0],d[25]=a[0],d[26]=a[1],a))},function(a){return a=[d[25],d[26]],d[15]=a[0],d[16]=a[1],a}]):c.resolve((d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,24])),d[20].set("stored_procedure","LSEncryptedBackupsDecryptMessageProtobufsStoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[15]=e[0],d[16]=e[1],e))},function(a){return a=[d[15],d[16]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptMessageProtobufs] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptMessageProtobufs",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptMessageProtobufsStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSDecryptMessageProtobufsStoredProcedure",["LSDecryptMessageProtobufs","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDecryptMessageProtobufs"),e.encryptedMessagesWithProtobufs,e.actThreadId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSymmetricEncryptionCreateDecryptedString.nop",["Base64Utils","CryptoLogger","LSResult","LSSymmetricEncryptionCreateDecryptedData.nop","XPlatReactTextDecoder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return c("LSResult")(a)}a=function(a,b,e,f,g){var i=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_string");g=d("Base64Utils").toArrayBuffer(g);return c("LSSymmetricEncryptionCreateDecryptedData.nop")(a,b,e,f,g).then(function(a){a=a[0];return a}).then(function(a){return a==null?h():h(new(d("XPlatReactTextDecoder").TextDecoder)().decode(a))})["catch"](function(a){d("CryptoLogger").captureError(i,a).mustfix("symmetric string decryption failed");return h()})};g["default"]=a}),98);
__d("LSDecryptMessageV2",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSIsMobileClient","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateDecryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptMessageV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[8]=a[2]==null?c.i64.cast([0,0]):a[2],d[2]=c.i64.of_int32(a[3].length),c.i64.eq(d[2],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[3],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return d[14]=d[12].get("epoch_anon_id"),d[15]=d[12].get("epoch_root_key"),d[16]=c.createArray(),d[26]=(d[16].push(c.i64.cast([0,32])),d[16]),c.i64.ge(d[8],c.i64.cast([0,3]))?c.resolve(d[17]=void 0):c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[1]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[17]=d[26]}])},function(e){return c.i64.ge(d[8],c.i64.cast([0,4]))?(d[26]="_",d[18]=["message_key_in_epoch",d[26],c.blobs.to_string(d[14]),d[26],"cipher_version",d[26],c.i64.to_string(d[8]),d[26],"thread",d[26],a[1]==null?"":a[1]].join("")):(c.i64.ge(d[8],c.i64.cast([0,3]))?(d[27]="_",d[26]=["message_key_in_epoch",d[27],c.blobs.to_string(d[14]),d[27],"cipher_version",d[27],c.i64.to_string(d[8]),d[27],"thread",d[27],a[1]==null?"":a[1]].join("")):(c.i64.ge(d[8],c.i64.cast([0,2]))?(d[28]="_",d[27]=["message_key_in_epoch",d[28],c.blobs.to_string(d[14]),d[28],"cipher_version",d[28],c.i64.to_string(d[8])].join("")):d[27]=["message_key_in_epoch","_",c.blobs.to_string(d[14])].join(""),d[26]=d[27]),d[18]=d[26]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[18]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[19],d[17],d[15],d[16]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!1:d[21]=!0,d[21]?c.resolve(d[22]=void 0):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],c.i64.cast([0,0])).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],a})},function(a){return d[22]=d[26]}])},function(e){return c.blobs.neq(d[22],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedString.nop"),d[22],c.blobs.of_string(["message_thread","_",a[1]].join("")),a[0]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]!==void 0?c.resolve(d[27]=d[26]):c.sequence([function(a){return d[28]=["Failed to decrypt message. Epoch Anon ID: ",c.blobs.to_string(d[14]),", Encryption Version: ",c.i64.to_string(d[8])].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDecryptMessageV2StoredProcedure] ","",d[28]].join("")),d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptMessageV2StoredProcedure",[d[28]].join(""),d[29],c.i64.cast([0,3]))},function(a){return d[27]=void 0}])},function(a){return d[23]=d[27]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDecryptMessageV2StoredProcedure] Decryption message key is null"),void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,85]),c.i64.cast([0,2]),"[EncryptedBackups][LSEncryptedBackupsDecryptMessageV2StoredProcedure] Decryption message key is null",void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[27]=a[0],a})},function(a){return d[27]?d[28]=!0:d[28]=!1,d[28]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[29],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptMessageV2StoredProcedure","Decryption message key is null",d[26],c.i64.cast([0,3]))},function(a){return d[23]=void 0}])},function(a){return d[23]!==void 0?(a=[d[23],void 0],d[24]=a[0],d[25]=a[1],a):(d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,101])),d[26].set("stored_procedure","LSEncryptedBackupsDecryptMessageV2StoredProcedure"),d[26].set("error_message",""),a=[void 0,d[26]],d[24]=a[0],d[25]=a[1],a),a=[d[24],d[25]],d[3]=a[0],d[4]=a[1],a}]):c.resolve((d[12]=c.i64.of_int32(a[3].length),c.i64.eq(d[12],c.i64.cast([0,0]))?(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,102])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptMessageV2StoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,103])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptMessageV2StoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e),e=[d[13],d[14]],d[3]=e[0],d[4]=e[1],e))},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[11]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptMessageV2] ",d[7],d[9],d[7],d[10],d[7],d[11]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptMessageV2",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[3],d[4]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptMessageV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDecryptMessages",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDecryptMessageV2","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptMessages] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[11]=new c.Map(),d[11].set("error_code",c.i64.cast([0,1])),d[11].set("stored_procedure","LSEncryptedBackupsDecryptMessagesStoredProcedure"),d[11].set("error_message",""),g=[void 0,d[11]],d[2]=g[0],d[3]=g[1],g):(f=e.item,c.sequence([function(a){return d[19]=f.backupId,d[20]=f.deviceId,d[18]=f.backupTenancy,d[17]=f.encryptionVersion,d[11]=void 0,c.i64.neq(d[11],void 0)?c.resolve(d[12]=d[11]):c.sequence([function(a){return d[21]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[22]?d[31]=(d[21].push(c.i64.cast([0,0])),d[21]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[23]?d[31]=(d[21].push(c.i64.cast([0,2])),d[21]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[31]=(d[21].push(c.i64.cast([0,3])),d[21]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[25]=a[0],a})},function(a){return d[25]?d[31]=(d[21].push(c.i64.cast([0,4])),d[21]):0,d[26]=c.createArray(),d[27]=c.i64.of_int32(d[21].length),c.i64.gt(d[27],c.i64.cast([0,0]))?c.loopAsync(d[27],function(a){return d[31]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[21],d[31]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],a})},function(a){return d[34]=(d[26].push(d[32]),d[26])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[31]=c.createArray(),d[32]=c.i64.of_int32(d[26].length),c.i64.gt(d[32],c.i64.cast([0,0]))?c.loopAsync(d[32],function(a){return d[34]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[26],d[34]).then(function(a){return a=a,d[35]=a[0],d[36]=a[1],a})},function(a){return d[37]=(d[31].push(c.i64.to_string(d[35])),d[31])}])}):c.resolve()},function(a){return d[33]=d[31].join(","),d[28]=d[33]}])},function(a){return d[26].some(function(a){return c.i64.eq(d[17],a)})?d[29]=d[17]:d[29]=void 0,c.i64.neq(d[29],void 0)?d[30]=d[29]:d[30]=void 0,d[12]=d[30]}])},function(e){return c.i64.neq(d[12],void 0)?d[13]=d[12]:d[13]=c.i64.cast([0,0]),c.i64.neq(d[18],void 0)?d[14]=d[18]:d[14]=c.i64.cast([0,1]),c.i64.neq(d[20],void 0)?c.sequence([function(e){return d[21]=c.createArray(),d[22]=c.createArray(),d[23]=new c.Map(),d[24]=c.i64.of_int32(a[0].length),c.i64.gt(d[24],c.i64.cast([0,0]))?c.loopAsync(d[24],function(e){return d[28]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[28]).then(function(a){return a=a,d[29]=a[0],d[30]=a[1],a})},function(a){return d[31]=d[29].get("epoch_anon_id"),d[32]=d[23].get(c.blobs.to_string(d[31])),d[32]!==void 0?c.resolve(d[33]=d[32]):c.sequence([function(a){return d[38]=d[29].get("epoch_anon_id"),d[39]=d[29].get("epoch_id"),c.i64.neq(d[39],void 0)?c.sequence([function(a){return d[42]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch([[[d[39]]]]),function(a){return c.i64.eq(a.backupId,d[19])&&c.i64.eq(a.epochId,d[39])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[43]=new c.Map(),d[43].set("epoch_root_key",a.epochRootKeyBlob),d[43].set("epoch_anon_id",a.epochAnonIdBlob),d[44]=(d[42].push(d[43]),d[42])})},function(a){return d[40]=d[42]}]):c.sequence([function(a){return d[42]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch([[[d[19]]],"fk_secure_encrypted_backups_client_state"]),function(a){return c.i64.eq(a.backupId,d[19])&&c.blobs.eq(a.epochAnonIdBlob,d[38])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[43]=new c.Map(),d[43].set("epoch_root_key",a.epochRootKeyBlob),d[43].set("epoch_anon_id",a.epochAnonIdBlob),d[44]=(d[42].push(d[43]),d[42])})},function(a){return d[40]=d[42]}])},function(a){return d[41]=c.i64.of_int32(d[40].length),c.i64.gt(d[41],c.i64.cast([0,0]))?(d[42]=d[29].get("epoch_anon_id"),d[23].set(c.blobs.to_string(d[42]),d[40])):0,d[33]=d[40]}])},function(e){return d[34]=d[29].get("value"),d[35]=d[29].get("encryption_version"),c.storedProcedure(b("LSDecryptMessageV2"),d[34],a[1],d[35],d[33]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],a})},function(a){return d[36]!==void 0?c.resolve((d[38]=d[29].get("otid"),d[39]=new c.Map(),d[39].set("value",d[36]),d[39].set("otid",d[38]),d[40]=(d[21].push(d[39]),d[21]))):c.sequence([function(a){return d[37]!==void 0?c.sequence([function(a){return d[38]=c.i64.of_int32(d[33].length),c.i64.gt(d[38],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],c.i64.cast([0,0])).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[51]=d[49].get("epoch_root_key"),d[52]=c.createArray(),d[57]=(d[52].push(c.i64.cast([0,18])),d[52]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[51],d[52]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[53]!==void 0?c.sequence([function(a){return d[57]=c.i64.of_int32(d[53].length),c.i64.ge(d[57],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[53],c.i64.cast([0,0])).then(function(a){return a=a,d[59]=a[0],d[60]=a[1],a})},function(a){return d[58]=d[59]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[59]=c.createArray(),void 0!==void 0?d[60]=(d[59].push(void 0),d[59]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[59],c.i64.cast([0,3]))},function(a){return d[58]=void 0}])},function(a){return d[54]=d[58]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[57]=c.createArray(),void 0!==void 0?d[58]=(d[57].push(void 0),d[57]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[57],c.i64.cast([0,3]))},function(a){return d[54]=void 0}])},function(a){return c.blobs.neq(d[54],void 0)?d[55]=!0:d[55]=!1,d[55]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.blobs.neq(d[54],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[54]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[56]=d[57]==null?"[encodingFailed]":d[57]}]):c.resolve(d[56]="[null]")},function(a){return d[39]=d[56]}]):c.resolve(d[39]="[noEpochs]")},function(a){return d[40]=d[29].get("otid"),d[41]=d[29].get("epoch_anon_id"),d[42]=d[29].get("encryption_version"),c.i64.neq(d[42],void 0)?d[43]=c.i64.to_string(d[42]):d[43]="null",d[44]=c.i64.of_int32(d[33].length),d[45]=d[29].get("epoch_fingerprint"),c.blobs.neq(d[45],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[46]=d[49]==null?"[encodingFailed]":d[49]}]):c.resolve(d[46]="[null]")},function(a){return d[47]=d[29].get("backup_id"),d[48]="",d[37].set("error_message",["Decryption failed for message with otid:",d[48],d[40],d[48]," epoch:",d[48],c.blobs.to_string(d[41]),d[48]," version:",d[48],d[43],d[48]," epoch_key_count:",d[48],c.i64.to_string(d[44]),d[48]," vsr_fingerprint:",d[48],d[46],d[48]," local_fingerprint:",d[48],d[39],d[48]," vsr_backup_id:",d[48],c.i64.to_string(d[47])==null?"[null]":c.i64.to_string(d[47]),d[48]," local_backup_id:",d[48],c.i64.to_string(d[19]),d[48]," local_device_id:",d[48],c.i64.to_string(d[20])].join(""))}]):c.resolve()},function(a){return d[38]=(d[22].push(d[37]),d[22])}])}])}):c.resolve()},function(a){return d[25]=c.i64.of_int32(d[22].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[22],c.i64.cast([0,0])).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],a})},function(a){return a=[void 0,d[28]],d[26]=a[0],d[27]=a[1],a}]):c.resolve((a=[d[21],void 0],d[26]=a[0],d[27]=a[1],a))},function(a){return a=[d[26],d[27]],d[15]=a[0],d[16]=a[1],a}]):c.resolve((d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,24])),d[21].set("stored_procedure","LSEncryptedBackupsDecryptMessagesStoredProcedure"),d[21].set("error_message",""),e=[void 0,d[21]],d[15]=e[0],d[16]=e[1],e))},function(a){return a=[d[15],d[16]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptMessages] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptMessages",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptMessagesStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSDecryptMessagesStoredProcedure",["LSDecryptMessages","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDecryptMessages"),e.encryptedMessages,e.actThreadId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSGetNextEpochAnonId.nop",["CryptoLogger","LSCryptoUtils","LSResult","Promise","XPlatReactTextDecoder"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){a=d("LSCryptoUtils").strToBuf("0");if(f!=null){e=f;if(e.byteLength===0)f=a;else{var g=new(d("XPlatReactTextDecoder").TextDecoder)();g=g.decode(e);e=Number.parseInt(g,10);g=e+1;f=d("LSCryptoUtils").strToBuf(String(g))}}else f=a;return(h||(h=b("Promise"))).resolve(c("LSResult")(f))["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("get_next_epoch_anonid"),a).mustfix("Getting next epoch anon id failed");throw a})};g["default"]=a}),98);
__d("PublicKeyEncryptionUtils",["Promise","UInt8Array","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){}function c(a){if(a!=null)return a;else return new Uint8Array(0).buffer}function e(a,b,c,e,f){return d("UInt8Array").concatBytes([a,b,c,e,f]).buffer}function f(a,b,c,e){return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey"]).then(function(a){return d("XPlatReactCrypto").subtleDeriveKey({hash:"SHA-256",info:c,name:"HKDF",salt:b},a,{length:256,name:"AES-GCM"},!1,[e])})}var i="key length is not "+32;function j(a,b){if(a.length!==32)return b(i)}function k(a){return new(h||(h=b("Promise")))(function(b,c){j(a,c);return b()})}var l=32;g.assertValidCurvePoint=a;g.getSalt=c;g.concatAad=e;g.getAesKey=f;g.testKeyLength=j;g.assertKeyLength=k;g.keyLength=l}),98);
__d("LSPublicEncryptionCreateDecryptedData.nop",["CryptoLogger","Promise","PublicKeyEncryptionUtils","RetUtil","XPlatReactCrypto","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("PublicKeyCrypto").__setRef("LSPublicEncryptionCreateDecryptedData.nop"),j=c("requireDeferred")("X25519").__setRef("LSPublicEncryptionCreateDecryptedData.nop");function k(a,b){var c=1+d("PublicKeyEncryptionUtils").keyLength+16;a=a.length;a<1+d("PublicKeyEncryptionUtils").keyLength+16&&b("CipherText length is "+a+", < "+c)}function l(a,b,c){b=b[0];if(b!==a)return c("Unexpected version "+b)}function m(a){return new(h||(h=b("Promise")))(function(b,c){l(1,a,c);k(a,c);return b()})}function n(a,c){return new(h||(h=b("Promise")))(function(b,e){d("PublicKeyEncryptionUtils").assertValidCurvePoint(a,e);d("PublicKeyEncryptionUtils").assertValidCurvePoint(c,e);return b()})}a=function(a,c,e,f,g,k,l,o){var p=new Uint8Array(l),q=new Uint8Array([1]),r=d("PublicKeyEncryptionUtils").getSalt(k),s=new Uint8Array(e),t=new Uint8Array(g),u=new Uint8Array(f),v=new Uint8Array(o);return(h||(h=b("Promise"))).all([d("PublicKeyEncryptionUtils").assertKeyLength(s),d("PublicKeyEncryptionUtils").assertKeyLength(u),d("PublicKeyEncryptionUtils").assertKeyLength(t)]).then(function(){return m(v)}).then(function(){return j.load()}).then(function(a){var c=v.slice(1,d("PublicKeyEncryptionUtils").keyLength+1),e=a.publicKeyFromBytes(c,a.KeyPurpose.Encryption);return n(e,t).then(function(){var f=d("PublicKeyEncryptionUtils").concatAad(q,t,s,c,p),g=function(c,d,f){c=a.publicKeyFromBytes(c,a.KeyPurpose.Encryption);d=a.publicKeyFromBytes(d,a.KeyPurpose.Encryption);f=a.secretKeyFromBytes(f,a.KeyPurpose.Encryption);return c==null||d==null||f==null||e==null?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).resolve([c,d,f,e])};return g(s,t,u).then(function(a){if(a==null)return;return{ephemeralPub:a[3],innerAad:f,receiverPriv:a[2],receiverPub:a[0],senderPub:a[1]}})})}).then(function(a){if(a==null)return;var b=a.ephemeralPub,c=a.receiverPriv,e=a.senderPub,f=a.innerAad;return i.load().then(function(a){return a.receiverDeriveSharedSecret(c,b,e)}).then(function(a){if(a==null)return null;else return d("PublicKeyEncryptionUtils").getAesKey(a,r,f,"decrypt")}).then(function(a){if(a==null)return;var b=new Uint8Array(12).buffer,c=v.slice(d("PublicKeyEncryptionUtils").keyLength+1).buffer;return d("XPlatReactCrypto").subtleDecrypt({additionalData:f,iv:new Uint8Array(b),name:"AES-GCM",tagLength:128},a,c)})}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a))})["catch"](function(a){var c=d("CryptoLogger").CryptoLogger("public_encryption_create_decrypted_data");d("CryptoLogger").captureError(c,a).mustfix("Creation of decrypted data for public encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))})};g["default"]=a}),98);
__d("LSDeriveAndStoreEpochs",["LSArrayGetObjectAt","LSBase64Decode.nop","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSGetNextEpochAnonId.nop","LSIsEncryptionVersionSecure","LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop","LSPublicEncryptionCreateDecryptedData.nop","LSSymmetricEncryptionCreateDecryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] Beginning execution."),d[1]=c.i64.of_int32(a[0].length),c.i64.gt(d[1],c.i64.cast([0,0]))?c.sequence([function(e){return d[8]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] Unable to load client state: 1"),d[21]=c.createArray(),void 0!==void 0?d[24]=(d[21].push(void 0),d[21]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure","Unable to load client state: 1",d[21],c.i64.cast([0,3]))},function(e){return d[22]=c.createArray(),d[23]=c.i64.of_int32(a[0].length),c.i64.gt(d[23],c.i64.cast([0,0]))?c.loopAsync(d[23],function(e){return d[24]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[24]).then(function(a){return a=a,d[25]=a[0],d[26]=a[1],a})},function(a){return d[27]=d[25].get("from_epoch"),d[28]=d[27].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[28]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]!==void 0?d[30]=d[29]:d[30]="",d[31]=d[25].get("from_epoch"),d[32]=d[31].get("epoch_id"),d[33]=new c.Map(),d[33].set("anon_id",d[30]),d[33].set("epoch_id",d[32]),d[34]=d[25].get("to_epoch"),d[35]=d[34].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]!==void 0?d[37]=d[36]:d[37]="",d[38]=d[25].get("to_epoch"),d[39]=d[38].get("epoch_id"),d[40]=new c.Map(),d[40].set("anon_id",d[37]),d[40].set("epoch_id",d[39]),d[41]=d[25].get("forward_edge"),d[41]?d[42]=!1:d[42]=!0,d[42]?d[43]=!1:d[43]=!0,d[44]=d[25].get("backward_edge"),c.blobs.neq(d[44],void 0)?d[45]=!0:d[45]=!1,d[46]=new c.Map(),d[46].set("from",d[33]),d[46].set("to",d[40]),d[46].set("has_forward_edge",d[43]),d[46].set("has_backward_edge",d[45]),d[46].set("result_code",c.i64.cast([0,7])),d[46].set("error_message",void 0),d[47]=(d[22].push(d[46]),d[22])}])}):c.resolve()},function(b){return b=[void 0,void 0,void 0,a[2],c.i64.cast([0,0]),c.i64.cast([0,0]),d[22]],d[9]=b[0],d[10]=b[1],d[11]=b[2],d[12]=b[3],d[13]=b[4],d[14]=b[5],d[15]=b[6],b}]):(f=e.item,c.sequence([function(a){return d[35]=f.epochStoragePublicKeyBlob,d[34]=f.deviceId,d[33]=f.backupTenancy,d[32]=f.encryptionVersion,d[21]=void 0,c.i64.neq(d[21],void 0)?c.resolve(d[22]=d[21]):c.sequence([function(a){return d[36]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[46]=(d[36].push(c.i64.cast([0,0])),d[36]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[38]?d[46]=(d[36].push(c.i64.cast([0,2])),d[36]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[39]?d[46]=(d[36].push(c.i64.cast([0,3])),d[36]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[40]=a[0],a})},function(a){return d[40]?d[46]=(d[36].push(c.i64.cast([0,4])),d[36]):0,d[41]=c.createArray(),d[42]=c.i64.of_int32(d[36].length),c.i64.gt(d[42],c.i64.cast([0,0]))?c.loopAsync(d[42],function(a){return d[46]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[36],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=(d[41].push(d[47]),d[41])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[46]=c.createArray(),d[47]=c.i64.of_int32(d[41].length),c.i64.gt(d[47],c.i64.cast([0,0]))?c.loopAsync(d[47],function(a){return d[49]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[41],d[49]).then(function(a){return a=a,d[50]=a[0],d[51]=a[1],a})},function(a){return d[52]=(d[46].push(c.i64.to_string(d[50])),d[46])}])}):c.resolve()},function(a){return d[48]=d[46].join(","),d[43]=d[48]}])},function(a){return d[41].some(function(a){return c.i64.eq(d[32],a)})?d[44]=d[32]:d[44]=void 0,c.i64.neq(d[44],void 0)?d[45]=d[44]:d[45]=void 0,d[22]=d[45]}])},function(e){return c.i64.neq(d[22],void 0)?d[23]=d[22]:d[23]=c.i64.cast([0,0]),c.i64.neq(d[33],void 0)?d[24]=d[33]:d[24]=c.i64.cast([0,1]),c.i64.neq(d[34],void 0)?c.sequence([function(b){return c.i64.neq(a[1],void 0)?c.sequence([function(b){return c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(e,f){var b=e.done;e=e.value;return b?d[44]=!1:(f=e.item,d[47]=f.deviceId,c.i64.neq(d[47],void 0)?d[46]=c.i64.neq(d[47],a[1]):d[46]=!1,d[44]=d[46])})},function(a){return d[36]=d[44]}]):c.resolve(d[36]=!1)},function(e){return d[36]?c.sequence([function(e){return d[44]=c.createArray(),d[45]=c.i64.of_int32(a[0].length),c.i64.gt(d[45],c.i64.cast([0,0]))?c.loopAsync(d[45],function(e){return d[46]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=d[47].get("from_epoch"),d[50]=d[49].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[50]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[51]!==void 0?d[52]=d[51]:d[52]="",d[53]=d[47].get("from_epoch"),d[54]=d[53].get("epoch_id"),d[55]=new c.Map(),d[55].set("anon_id",d[52]),d[55].set("epoch_id",d[54]),d[56]=d[47].get("to_epoch"),d[57]=d[56].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[57]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[58]!==void 0?d[59]=d[58]:d[59]="",d[60]=d[47].get("to_epoch"),d[61]=d[60].get("epoch_id"),d[62]=new c.Map(),d[62].set("anon_id",d[59]),d[62].set("epoch_id",d[61]),d[63]=d[47].get("forward_edge"),d[63]?d[64]=!1:d[64]=!0,d[64]?d[65]=!1:d[65]=!0,d[66]=d[47].get("backward_edge"),c.blobs.neq(d[66],void 0)?d[67]=!0:d[67]=!1,d[68]=new c.Map(),d[68].set("from",d[55]),d[68].set("to",d[62]),d[68].set("has_forward_edge",d[65]),d[68].set("has_backward_edge",d[67]),d[68].set("result_code",c.i64.cast([0,8])),d[68].set("error_message",void 0),d[69]=(d[44].push(d[68]),d[44])}])}):c.resolve()},function(b){return b=[d[34],d[34],a[1],a[2],c.i64.cast([0,0]),c.i64.cast([0,0]),d[44]],d[37]=b[0],d[38]=b[1],d[39]=b[2],d[40]=b[3],d[41]=b[4],d[42]=b[5],d[43]=b[6],b}]):c.sequence([function(e){return d[44]=c.createArray(),d[45]=c.i64.of_int32(a[0].length),c.i64.gt(d[45],c.i64.cast([0,0]))?c.loopAsync(d[45],function(e){return d[46]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=d[47].get("from_epoch"),d[50]=d[49].get("epoch_id"),c.count(c.db.table(169).fetch([[[d[50]]]])).then(function(a){return d[51]=a})},function(a){return c.i64.le(d[51],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch([[[d[50]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?(d[77]=new c.Map(),d[77].set("error_msg","Expected a nonempty query result"),d[77].set("code",c.i64.cast([0,3])),d[77].set("src_line","MEBEpochClientUtils.php:69 MEBEpochClientUtils::maybeEpoch()"),d[78]=c.createArray(),d[79]=(d[78].push(d[77]),d[78]),a=[void 0,d[78]],d[73]=a[0],d[74]=a[1],a):(e=b.item,d[77]=new c.Map(),d[77].set("epoch_id",e.epochId),d[77].set("backup_id",e.backupId),d[77].set("epoch_anon_id_blob",e.epochAnonIdBlob),d[77].set("epoch_root_key_blob",e.epochRootKeyBlob),d[77].set("epoch_status",e.epochStatus),d[77].set("authority_level",e.authorityLevel),a=[d[77],void 0],d[73]=a[0],d[74]=a[1],a)})},function(a){return d[76]=new c.Map(),d[76].set("value",d[73]),d[76].set("errors",d[74]),d[52]=d[76]}]):c.resolve((d[73]=new c.Map(),d[73].set("error_msg","Expected at most one result"),d[73].set("code",c.i64.cast([0,4])),d[73].set("src_line","MEBEpochClientUtils.php:69 MEBEpochClientUtils::maybeEpoch()"),d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),d[75]=new c.Map(),d[75].set("value",void 0),d[75].set("errors",d[74]),d[52]=d[75]))},function(a){return d[53]=d[52].get("value"),d[53]!==void 0?(d[73]=d[53].get("epoch_id"),d[74]=d[53].get("backup_id"),d[75]=d[53].get("epoch_anon_id_blob"),d[76]=d[53].get("epoch_root_key_blob"),d[77]=d[53].get("epoch_status"),d[78]=d[53].get("authority_level"),d[54]=d[52]):(d[73]=d[52].get("errors"),d[74]=d[52].get("errors"),d[75]=new c.Map(),d[75].set("error_msg","EB_EPOCH_SRC_EPOCH_MISSING"),d[75].set("code",c.i64.cast([0,10003])),d[75].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:372 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge()"),d[77]=(d[73].push(d[75]),d[73]),d[76]=new c.Map(),d[76].set("value",void 0),d[76].set("errors",d[73]),d[54]=d[76]),d[55]=d[54].get("value"),d[55]!==void 0?(d[73]=d[55].get("epoch_id"),d[74]=d[55].get("backup_id"),d[75]=d[55].get("epoch_anon_id_blob"),d[76]=d[55].get("epoch_root_key_blob"),d[77]=d[55].get("epoch_status"),d[78]=d[55].get("authority_level"),d[79]=d[47].get("from_epoch"),d[80]=d[79].get("epoch_anon_id"),c.blobs.eq(d[80],d[75])?d[81]=d[54]:(d[82]=new c.Map(),d[82].set("error_msg","EB_EPOCH_DERIVATION_SRC_ANON_ID_MISMATCH"),d[82].set("code",c.i64.cast([0,10007])),d[82].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:377 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge#2()"),d[83]=c.createArray(),d[85]=(d[83].push(d[82]),d[83]),d[84]=new c.Map(),d[84].set("value",void 0),d[84].set("errors",d[83]),d[81]=d[84]),d[56]=d[81]):(d[73]=d[54].get("errors"),d[74]=d[54].get("errors"),d[75]=new c.Map(),d[75].set("value",void 0),d[75].set("errors",d[73]),d[56]=d[75]),d[57]=d[56].get("value"),d[57]!==void 0?c.sequence([function(a){return d[73]=d[57].get("epoch_id"),d[74]=d[57].get("backup_id"),d[75]=d[57].get("epoch_anon_id_blob"),d[76]=d[57].get("epoch_root_key_blob"),d[77]=d[57].get("epoch_status"),d[78]=d[57].get("authority_level"),d[79]=d[47].get("from_epoch_fingerprint"),d[80]=c.createArray(),d[85]=(d[80].push(c.i64.cast([0,18])),d[80]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[76],d[80]).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[81]!==void 0?c.sequence([function(a){return d[85]=c.i64.of_int32(d[81].length),c.i64.ge(d[85],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[81],c.i64.cast([0,0])).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[86]=d[87]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[87]=c.createArray(),void 0!==void 0?d[88]=(d[87].push(void 0),d[87]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[87],c.i64.cast([0,3]))},function(a){return d[86]=void 0}])},function(a){return d[82]=d[86]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[85]=c.createArray(),void 0!==void 0?d[86]=(d[85].push(void 0),d[85]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[85],c.i64.cast([0,3]))},function(a){return d[82]=void 0}])},function(a){return c.blobs.neq(d[82],void 0)?d[83]=!0:d[83]=!1,d[83]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.blobs.eq(d[79],void 0)||c.blobs.eq(d[79],d[82])?d[84]=d[56]:(d[85]=new c.Map(),d[85].set("error_msg","EB_EPOCH_DERIVATION_SRC_FINGERPRINT_MISMATCH"),d[85].set("code",c.i64.cast([0,10002])),d[85].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:386 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge#4()"),d[86]=c.createArray(),d[88]=(d[86].push(d[85]),d[86]),d[87]=new c.Map(),d[87].set("value",void 0),d[87].set("errors",d[86]),d[84]=d[87]),d[58]=d[84]}]):c.resolve((d[73]=d[56].get("errors"),d[74]=d[56].get("errors"),d[75]=new c.Map(),d[75].set("value",void 0),d[75].set("errors",d[73]),d[58]=d[75]))},function(a){return d[59]=d[47].get("forward_edge"),d[59]!==void 0?c.sequence([function(a){return d[73]=d[58].get("value"),d[73]!==void 0?c.sequence([function(a){return d[87]=d[73].get("epoch_id"),d[88]=d[73].get("backup_id"),d[89]=d[73].get("epoch_anon_id_blob"),d[90]=d[73].get("epoch_root_key_blob"),d[91]=d[73].get("epoch_status"),d[92]=d[73].get("authority_level"),c.nativeOperation(b("LSGetNextEpochAnonId.nop"),d[89]).then(function(a){return a=a,d[93]=a[0],a})},function(a){return d[94]=d[47].get("to_epoch"),d[95]=d[94].get("epoch_anon_id"),c.blobs.eq(d[93],d[95])?d[96]=d[58]:(d[97]=new c.Map(),d[97].set("error_msg","EB_EPOCH_FORWARD_EDGE_NOT_CONSECUTIVE"),d[97].set("code",c.i64.cast([0,10009])),d[97].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:104 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge()"),d[98]=c.createArray(),d[100]=(d[98].push(d[97]),d[98]),d[99]=new c.Map(),d[99].set("value",void 0),d[99].set("errors",d[98]),d[96]=d[99]),d[74]=d[96]}]):c.resolve((d[87]=d[58].get("errors"),d[88]=d[58].get("errors"),d[89]=new c.Map(),d[89].set("value",void 0),d[89].set("errors",d[87]),d[74]=d[89]))},function(a){return d[75]=d[74].get("value"),d[75]!==void 0?c.sequence([function(a){return d[87]=d[75].get("epoch_id"),d[88]=d[75].get("backup_id"),d[89]=d[75].get("epoch_anon_id_blob"),d[90]=d[75].get("epoch_root_key_blob"),d[91]=d[75].get("epoch_status"),d[92]=d[75].get("authority_level"),d[93]=d[47].get("from_epoch"),d[94]=d[93].get("epoch_anon_id"),d[95]=d[47].get("from_epoch"),d[96]=d[95].get("epoch_id"),d[97]=c.createArray(),d[106]=(d[97].push(c.i64.cast([0,32])),d[97]),d[106]=(d[97].push(c.i64.cast([0,32])),d[97]),d[98]="_",c.nativeOperation(b("LSGetBlobFromString.nop"),["epoch_chaining",d[98],c.blobs.to_string(d[94]),d[98],c.i64.to_string(d[96])].join("")).then(function(a){return a=a,d[99]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[99],void 0,d[90],d[97]).then(function(a){return a=a,d[100]=a[0],a})},function(a){return d[100]?d[101]=!1:d[101]=!0,d[101]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] Failed to generate epoch_chaining_key and epoch_distribution_pre_shared_key."),d[106]=c.createArray(),void 0!==void 0?d[109]=(d[106].push(void 0),d[106]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils","Failed to generate epoch_chaining_key and epoch_distribution_pre_shared_key.",d[106],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[107]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[108]=a[0],a})},function(a){return a=[d[107],d[108]],d[102]=a[0],d[103]=a[1],a}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[100],c.i64.cast([0,0])).then(function(a){return a=a,d[106]=a[0],d[107]=a[1],a})},function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[100],c.i64.cast([0,1])).then(function(a){return a=a,d[108]=a[0],d[109]=a[1],a})},function(a){return a=[d[106],d[108]],d[102]=a[0],d[103]=a[1],a}])},function(a){return d[104]=new c.Map(),d[104].set("epoch_chaining_key",d[102]),d[104].set("epoch_distribution_pre_shared_key",d[103]),d[105]=new c.Map(),d[105].set("value",d[104]),d[105].set("errors",void 0),d[76]=d[105]}]):c.resolve((d[87]=d[74].get("errors"),d[88]=d[74].get("errors"),d[89]=new c.Map(),d[89].set("value",void 0),d[89].set("errors",d[87]),d[76]=d[89]))},function(a){return d[77]=d[76].get("value"),d[77]!==void 0?c.sequence([function(a){return d[87]=d[77].get("epoch_chaining_key"),d[88]=d[77].get("epoch_distribution_pre_shared_key"),d[89]=d[59].get("psk_fingerprint"),d[90]=c.createArray(),d[95]=(d[90].push(c.i64.cast([0,18])),d[90]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkNyeXB0b1ByZVNoYXJlZEtleQ=="),void 0,d[88],d[90]).then(function(a){return a=a,d[91]=a[0],a})},function(a){return d[91]!==void 0?c.sequence([function(a){return d[95]=c.i64.of_int32(d[91].length),c.i64.ge(d[95],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[91],c.i64.cast([0,0])).then(function(a){return a=a,d[97]=a[0],d[98]=a[1],a})},function(a){return d[96]=d[97]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[97]=c.createArray(),void 0!==void 0?d[98]=(d[97].push(void 0),d[97]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[97],c.i64.cast([0,3]))},function(a){return d[96]=void 0}])},function(a){return d[92]=d[96]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[95]=c.createArray(),void 0!==void 0?d[96]=(d[95].push(void 0),d[95]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[95],c.i64.cast([0,3]))},function(a){return d[92]=void 0}])},function(a){return c.blobs.neq(d[92],void 0)?d[93]=!0:d[93]=!1,d[93]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.blobs.eq(d[89],void 0)||c.blobs.eq(d[89],d[92])?d[94]=d[76]:(d[95]=new c.Map(),d[95].set("error_msg","EB_EPOCH_DERIVATION_PSK_FINGERPRINT_MISMATCH"),d[95].set("code",c.i64.cast([0,10005])),d[95].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:130 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge#4()"),d[96]=c.createArray(),d[98]=(d[96].push(d[95]),d[96]),d[97]=new c.Map(),d[97].set("value",void 0),d[97].set("errors",d[96]),d[94]=d[97]),d[78]=d[94]}]):c.resolve((d[87]=d[76].get("errors"),d[88]=d[76].get("errors"),d[89]=new c.Map(),d[89].set("value",void 0),d[89].set("errors",d[87]),d[78]=d[89]))},function(a){return d[79]=d[78].get("value"),d[79]!==void 0?(d[87]=d[79].get("epoch_chaining_key"),d[88]=d[79].get("epoch_distribution_pre_shared_key"),d[89]=d[59].get("epoch_storage_public_key"),c.blobs.eq(d[89],void 0)||c.blobs.eq(d[89],d[35])?d[90]=d[78]:(d[91]=new c.Map(),d[91].set("error_msg","EB_EPOCH_DERIVATION_STORAGE_KEY_MISMATCH"),d[91].set("code",c.i64.cast([0,10006])),d[91].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:144 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge#7()"),d[92]=c.createArray(),d[94]=(d[92].push(d[91]),d[92]),d[93]=new c.Map(),d[93].set("value",void 0),d[93].set("errors",d[92]),d[90]=d[93]),d[80]=d[90]):(d[87]=d[78].get("errors"),d[88]=d[78].get("errors"),d[89]=new c.Map(),d[89].set("value",void 0),d[89].set("errors",d[87]),d[80]=d[89]),d[81]=d[80].get("value"),d[81]!==void 0?c.sequence([function(a){return d[87]=d[81].get("epoch_chaining_key"),d[88]=d[81].get("epoch_distribution_pre_shared_key"),d[89]=d[59].get("auth_public_key"),d[90]=d[47].get("to_epoch"),d[91]=d[90].get("epoch_anon_id"),d[92]=d[59].get("encrypted_entropy"),c.nativeOperation(b("LSPublicEncryptionCreateDecryptedData.nop"),d[35],f.epochStoragePrivateKeyBlob,d[89],d[88],c.blobs.of_string(["epoch_","_",c.blobs.to_string(d[91])].join("")),d[92]).then(function(a){return a=a,d[93]=a[0],a})},function(a){return c.blobs.neq(d[93],void 0)?c.resolve(d[94]=d[93]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] Couldn't decrypt epoch key. Returning null entropy"),d[100]=c.createArray(),void 0!==void 0?d[101]=(d[100].push(void 0),d[100]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils","Couldn't decrypt epoch key. Returning null entropy",d[100],c.i64.cast([0,3]))},function(a){return d[94]=void 0}])},function(a){return c.blobs.neq(d[94],void 0)?(d[100]=new c.Map(),d[100].set("entropy",d[94]),d[101]=new c.Map(),d[101].set("value",d[100]),d[101].set("errors",void 0),d[102]=d[101].get("value"),d[103]=d[101].get("errors"),a=[d[102],d[103]],d[95]=a[0],d[96]=a[1],a):(d[100]=c.createArray(),c.blobs.eq(d[94],void 0)?d[107]=(d[100].push("entropy"),d[100]):0,d[101]=d[100].join(", "),d[102]=new c.Map(),d[102].set("error_msg",["The following required nullables are null: ","",d[101]].join("")),d[102].set("code",c.i64.cast([0,2])),d[102].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:169 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge#11()"),d[103]=c.createArray(),d[107]=(d[103].push(d[102]),d[103]),d[104]=new c.Map(),d[104].set("value",void 0),d[104].set("errors",d[103]),d[105]=d[104].get("value"),d[106]=d[104].get("errors"),a=[d[105],d[106]],d[95]=a[0],d[96]=a[1],a),d[97]=new c.Map(),d[97].set("value",d[95]),d[97].set("errors",d[96]),d[98]=d[97].get("value"),d[98]!==void 0?(d[100]=d[98].get("entropy"),d[99]=d[97]):(d[100]=d[97].get("errors"),d[101]=d[97].get("errors"),d[102]=new c.Map(),d[102].set("error_msg","EB_EPOCH_FORWARD_DECRYPTION_FAILED"),d[102].set("code",c.i64.cast([0,10004])),d[102].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:171 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processForwardEdge#10()"),d[104]=(d[100].push(d[102]),d[100]),d[103]=new c.Map(),d[103].set("value",void 0),d[103].set("errors",d[100]),d[99]=d[103]),d[82]=d[99]}]):c.resolve((d[87]=d[80].get("errors"),d[88]=d[80].get("errors"),d[89]=new c.Map(),d[89].set("value",void 0),d[89].set("errors",d[87]),d[82]=d[89]))},function(a){return d[83]=d[80].get("value"),d[83]!==void 0?c.sequence([function(a){return d[87]=d[83].get("epoch_chaining_key"),d[88]=d[83].get("epoch_distribution_pre_shared_key"),d[89]=d[82].get("value"),d[89]!==void 0?c.sequence([function(a){return d[91]=d[89].get("entropy"),d[92]=c.createArray(),d[99]=(d[92].push(c.i64.cast([0,32])),d[92]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key").then(function(a){return a=a,d[93]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[93],d[87],d[91],d[92]).then(function(a){return a=a,d[94]=a[0],a})},function(a){return d[94]?d[95]=!1:d[95]=!0,d[95]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] Unable to generate epoch root key."),d[99]=c.createArray(),void 0!==void 0?d[101]=(d[99].push(void 0),d[99]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils","Unable to generate epoch root key.",d[99],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[100]=a[0],a})},function(a){return d[96]=d[100]}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[94],c.i64.cast([0,0])).then(function(a){return a=a,d[99]=a[0],d[100]=a[1],a})},function(a){return d[96]=d[99]}])},function(a){return d[97]=new c.Map(),d[97].set("root_key",d[96]),d[98]=new c.Map(),d[98].set("value",d[97]),d[98].set("errors",void 0),d[90]=d[98]}]):c.resolve((d[91]=d[82].get("errors"),d[92]=d[82].get("errors"),d[93]=new c.Map(),d[93].set("value",void 0),d[93].set("errors",d[91]),d[90]=d[93]))},function(a){return d[84]=d[90]}]):c.resolve((d[87]=d[80].get("errors"),d[88]=d[80].get("errors"),d[89]=new c.Map(),d[89].set("value",void 0),d[89].set("errors",d[87]),d[84]=d[89]))},function(a){return d[85]=d[84].get("value"),d[86]=d[84].get("errors"),a=[d[85],d[86]],d[60]=a[0],d[61]=a[1],a}]):c.sequence([function(a){return d[73]=d[47].get("backward_edge"),c.blobs.neq(d[73],void 0)?c.sequence([function(a){return d[79]=d[58].get("value"),d[79]!==void 0?c.sequence([function(a){return d[87]=d[79].get("epoch_id"),d[88]=d[79].get("backup_id"),d[89]=d[79].get("epoch_anon_id_blob"),d[90]=d[79].get("epoch_root_key_blob"),d[91]=d[79].get("epoch_status"),d[92]=d[79].get("authority_level"),d[93]=d[47].get("to_epoch"),d[94]=d[93].get("epoch_anon_id"),c.nativeOperation(b("LSGetNextEpochAnonId.nop"),d[94]).then(function(a){return a=a,d[95]=a[0],a})},function(a){return c.blobs.eq(d[95],d[89])?d[96]=d[58]:(d[97]=new c.Map(),d[97].set("error_msg","EB_EPOCH_BACKWARD_EDGE_NOT_CONSECUTIVE"),d[97].set("code",c.i64.cast([0,10010])),d[97].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:198 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processBackwardEdge()"),d[98]=c.createArray(),d[100]=(d[98].push(d[97]),d[98]),d[99]=new c.Map(),d[99].set("value",void 0),d[99].set("errors",d[98]),d[96]=d[99]),d[80]=d[96]}]):c.resolve((d[87]=d[58].get("errors"),d[88]=d[58].get("errors"),d[89]=new c.Map(),d[89].set("value",void 0),d[89].set("errors",d[87]),d[80]=d[89]))},function(a){return d[81]=d[80].get("value"),d[81]!==void 0?c.sequence([function(a){return d[87]=d[81].get("epoch_id"),d[88]=d[81].get("backup_id"),d[89]=d[81].get("epoch_anon_id_blob"),d[90]=d[81].get("epoch_root_key_blob"),d[91]=d[81].get("epoch_status"),d[92]=d[81].get("authority_level"),d[93]=c.createArray(),d[98]=(d[93].push(c.i64.cast([0,32])),d[93]),c.nativeOperation(b("LSBase64Encode.nop"),d[89]).then(function(a){return a=a,d[94]=a[0],a})},function(a){return d[94]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blobs.of_string(["epoch_data_storage","_",d[94]].join("")),void 0,d[90],d[93]).then(function(a){return a=a,d[98]=a[0],a})},function(a){return d[98]?d[99]=!1:d[99]=!0,d[99]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] THIS IS NOT EXPECTED. Found null keys while deriving keys for epoch. Returning empty blobish"),d[101]=c.createArray(),void 0!==void 0?d[103]=(d[101].push(void 0),d[101]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils","THIS IS NOT EXPECTED. Found null keys while deriving keys for epoch. Returning empty blobish",d[101],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[102]=a[0],a})},function(a){return d[100]=d[102]}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[98],c.i64.cast([0,0])).then(function(a){return a=a,d[101]=a[0],d[102]=a[1],a})},function(a){return d[100]=d[101]}])},function(a){return d[95]=d[100]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] THIS IS NOT EXPECTED. Failed to base64 encode epoch anon id. Returning empty blobish"),d[98]=c.createArray(),void 0!==void 0?d[100]=(d[98].push(void 0),d[98]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils","THIS IS NOT EXPECTED. Failed to base64 encode epoch anon id. Returning empty blobish",d[98],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[99]=a[0],a})},function(a){return d[95]=d[99]}])},function(a){return d[96]=new c.Map(),d[96].set("epoch_data_storage_key",d[95]),d[97]=new c.Map(),d[97].set("value",d[96]),d[97].set("errors",void 0),d[82]=d[97]}]):c.resolve((d[87]=d[80].get("errors"),d[88]=d[80].get("errors"),d[89]=new c.Map(),d[89].set("value",void 0),d[89].set("errors",d[87]),d[82]=d[89]))},function(a){return d[83]=d[82].get("value"),d[83]!==void 0?c.sequence([function(a){return d[87]=d[83].get("epoch_data_storage_key"),c.nativeOperation(b("LSBase64Encode.nop"),d[73]).then(function(a){return a=a,d[88]=a[0],a})},function(a){return d[95]=d[88],d[95]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedString.nop"),d[87],c.blob("ZXBvY2hfZGF0YV9tZXRhZGF0YQ=="),d[95]).then(function(a){return a=a,d[96]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Decode.nop"),d[96]).then(function(a){return a=a,d[97]=a[0],a})},function(a){return d[89]=d[97]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] Unable to base64 encode backward edge."),d[96]=c.createArray(),void 0!==void 0?d[97]=(d[96].push(void 0),d[96]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils","Unable to base64 encode backward edge.",d[96],c.i64.cast([0,3]))},function(a){return d[89]=void 0}])},function(a){return c.blobs.neq(d[89],void 0)?(d[96]=new c.Map(),d[96].set("root_key",d[89]),d[97]=new c.Map(),d[97].set("value",d[96]),d[97].set("errors",void 0),d[98]=d[97].get("value"),d[99]=d[97].get("errors"),a=[d[98],d[99]],d[90]=a[0],d[91]=a[1],a):(d[96]=c.createArray(),c.blobs.eq(d[89],void 0)?d[103]=(d[96].push("root_key"),d[96]):0,d[97]=d[96].join(", "),d[98]=new c.Map(),d[98].set("error_msg",["The following required nullables are null: ","",d[97]].join("")),d[98].set("code",c.i64.cast([0,2])),d[98].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:227 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processBackwardEdge#5()"),d[99]=c.createArray(),d[103]=(d[99].push(d[98]),d[99]),d[100]=new c.Map(),d[100].set("value",void 0),d[100].set("errors",d[99]),d[101]=d[100].get("value"),d[102]=d[100].get("errors"),a=[d[101],d[102]],d[90]=a[0],d[91]=a[1],a),d[92]=new c.Map(),d[92].set("value",d[90]),d[92].set("errors",d[91]),d[93]=d[92].get("value"),d[93]!==void 0?(d[96]=d[93].get("root_key"),d[94]=d[92]):(d[96]=d[92].get("errors"),d[97]=d[92].get("errors"),d[98]=new c.Map(),d[98].set("error_msg","EB_EPOCH_BACKWARD_DECRYPTION_FAILED"),d[98].set("code",c.i64.cast([0,10013])),d[98].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:229 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processBackwardEdge#4()"),d[100]=(d[96].push(d[98]),d[96]),d[99]=new c.Map(),d[99].set("value",void 0),d[99].set("errors",d[96]),d[94]=d[99]),d[84]=d[94]}]):c.resolve((d[87]=d[82].get("errors"),d[88]=d[82].get("errors"),d[89]=new c.Map(),d[89].set("value",void 0),d[89].set("errors",d[87]),d[84]=d[89]))},function(a){return d[85]=d[84].get("value"),d[86]=d[84].get("errors"),a=[d[85],d[86]],d[74]=a[0],d[75]=a[1],a}]):c.resolve((d[79]=new c.Map(),d[79].set("error_msg","EB_EPOCH_EDGE_NEITHER_FORWARD_NOR_BACKWARD"),d[79].set("code",c.i64.cast([0,10008])),d[79].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:411 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge#9()"),d[80]=c.createArray(),d[84]=(d[80].push(d[79]),d[80]),d[81]=new c.Map(),d[81].set("value",void 0),d[81].set("errors",d[80]),d[82]=d[81].get("value"),d[83]=d[81].get("errors"),a=[d[82],d[83]],d[74]=a[0],d[75]=a[1],a))},function(a){return d[76]=new c.Map(),d[76].set("value",d[74]),d[76].set("errors",d[75]),d[77]=d[76].get("value"),d[78]=d[76].get("errors"),a=[d[77],d[78]],d[60]=a[0],d[61]=a[1],a}])},function(a){return d[62]=new c.Map(),d[62].set("value",d[60]),d[62].set("errors",d[61]),d[63]=d[62].get("value"),d[63]!==void 0?c.sequence([function(a){return d[73]=d[63].get("root_key"),d[74]=d[47].get("to_epoch_fingerprint"),d[75]=c.createArray(),d[80]=(d[75].push(c.i64.cast([0,18])),d[75]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[73],d[75]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[76]!==void 0?c.sequence([function(a){return d[80]=c.i64.of_int32(d[76].length),c.i64.ge(d[80],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[76],c.i64.cast([0,0])).then(function(a){return a=a,d[82]=a[0],d[83]=a[1],a})},function(a){return d[81]=d[82]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[82]=c.createArray(),void 0!==void 0?d[83]=(d[82].push(void 0),d[82]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[82],c.i64.cast([0,3]))},function(a){return d[81]=void 0}])},function(a){return d[77]=d[81]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[80]=c.createArray(),void 0!==void 0?d[81]=(d[80].push(void 0),d[80]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[80],c.i64.cast([0,3]))},function(a){return d[77]=void 0}])},function(a){return c.blobs.neq(d[77],void 0)?d[78]=!0:d[78]=!1,d[78]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.blobs.eq(d[74],void 0)||c.blobs.eq(d[74],d[77])?d[79]=d[62]:(d[80]=new c.Map(),d[80].set("error_msg","EB_EPOCH_DERIVATION_DEST_FINGERPRINT_MISMATCH"),d[80].set("code",c.i64.cast([0,10001])),d[80].set("src_line","LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure.php:415 Closure$LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure::processEdge#11()"),d[81]=c.createArray(),d[83]=(d[81].push(d[80]),d[81]),d[82]=new c.Map(),d[82].set("value",void 0),d[82].set("errors",d[81]),d[79]=d[82]),d[64]=d[79]}]):c.resolve((d[73]=d[62].get("errors"),d[74]=d[62].get("errors"),d[75]=new c.Map(),d[75].set("value",void 0),d[75].set("errors",d[73]),d[64]=d[75]))},function(a){return d[65]=d[64].get("value"),d[65]!==void 0?c.sequence([function(a){return d[73]=d[65].get("root_key"),d[74]=d[47].get("to_epoch"),d[75]=d[74].get("epoch_id"),d[76]=d[47].get("to_epoch"),d[77]=d[76].get("epoch_anon_id"),d[98]="Storing newly derived epoch ",d[99]=c.blobs.to_string(d[77]),d[100]=" authority_level:",d[101]="AUTHORITATIVE",d[102]=" status:",d[103]=c.i64.to_string(c.i64.cast([0,2])),d[78]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[78],d[98],d[78],d[99],d[78],d[100],d[78],d[101],d[78],d[102],d[78],d[103]].join("")),c.resolve()},function(a){return c.filter(c.db.table(169).fetch([[[d[75]]]]),function(a){return c.i64.eq(a.epochId,d[75])&&c.i64.gt(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(b){var a=b.done;b.value;return a?c.db.table(169).put({epochId:d[75],backupId:f.backupId,epochAnonIdBlob:d[77],epochRootKeyBlob:d[73],epochStatus:c.i64.cast([0,2]),authorityLevel:c.i64.cast([0,80])}):0})},function(a){return d[79]=d[47].get("from_epoch"),d[80]=d[79].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[80]).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[81]!==void 0?d[82]=d[81]:d[82]="",d[83]=d[47].get("from_epoch"),d[84]=d[83].get("epoch_id"),d[85]=new c.Map(),d[85].set("anon_id",d[82]),d[85].set("epoch_id",d[84]),d[86]=d[47].get("to_epoch"),d[87]=d[86].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[87]).then(function(a){return a=a,d[88]=a[0],a})},function(a){return d[88]!==void 0?d[89]=d[88]:d[89]="",d[90]=d[47].get("to_epoch"),d[91]=d[90].get("epoch_id"),d[92]=new c.Map(),d[92].set("anon_id",d[89]),d[92].set("epoch_id",d[91]),d[93]=d[47].get("forward_edge"),d[93]?d[94]=!1:d[94]=!0,d[94]?d[95]=!1:d[95]=!0,d[96]=d[47].get("backward_edge"),c.blobs.neq(d[96],void 0)?d[97]=!0:d[97]=!1,a=[d[85],d[92],d[95],d[97],void 0,c.i64.cast([0,0])],d[66]=a[0],d[67]=a[1],d[68]=a[2],d[69]=a[3],d[70]=a[4],d[71]=a[5],a}]):c.sequence([function(a){return d[73]=d[64].get("errors"),d[74]=d[64].get("errors"),d[75]=c.i64.of_int32(d[73].length),c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[73],c.i64.sub(d[75],c.i64.cast([0,1]))).then(function(a){return a=a,d[76]=a[0],d[77]=a[1],a})},function(a){return d[78]=d[76].get("code"),d[79]=d[76].get("src_line"),d[80]=d[76].get("error_msg"),c.i64.eq(d[78],c.i64.cast([0,10004]))?d[81]=c.i64.cast([0,3]):(c.i64.eq(d[78],c.i64.cast([0,10003]))?d[103]=c.i64.cast([0,13]):(c.i64.eq(d[78],c.i64.cast([0,10002]))?d[104]=c.i64.cast([0,9]):(c.i64.eq(d[78],c.i64.cast([0,10001]))?d[105]=c.i64.cast([0,10]):(c.i64.eq(d[78],c.i64.cast([0,10005]))?d[106]=c.i64.cast([0,12]):(c.i64.eq(d[78],c.i64.cast([0,10006]))?d[107]=c.i64.cast([0,11]):(c.i64.eq(d[78],c.i64.cast([0,10008]))?d[108]=c.i64.cast([0,2]):(c.i64.eq(d[78],c.i64.cast([0,10009]))?d[109]=c.i64.cast([0,14]):(c.i64.eq(d[78],c.i64.cast([0,10010]))?d[110]=c.i64.cast([0,15]):(c.i64.eq(d[78],c.i64.cast([0,10011]))?d[111]=c.i64.cast([0,16]):(c.i64.eq(d[78],c.i64.cast([0,10012]))?d[112]=c.i64.cast([0,17]):(c.i64.eq(d[78],c.i64.cast([0,10013]))?d[113]=c.i64.cast([0,6]):d[113]=c.i64.cast([0,1]),d[112]=d[113]),d[111]=d[112]),d[110]=d[111]),d[109]=d[110]),d[108]=d[109]),d[107]=d[108]),d[106]=d[107]),d[105]=d[106]),d[104]=d[105]),d[103]=d[104]),d[81]=d[103]),d[82]=d[47].get("from_epoch"),d[83]=d[82].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[83]).then(function(a){return a=a,d[84]=a[0],a})},function(a){return d[84]!==void 0?d[85]=d[84]:d[85]="",d[86]=d[47].get("from_epoch"),d[87]=d[86].get("epoch_id"),d[88]=new c.Map(),d[88].set("anon_id",d[85]),d[88].set("epoch_id",d[87]),d[89]=d[47].get("to_epoch"),d[90]=d[89].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[90]).then(function(a){return a=a,d[91]=a[0],a})},function(a){return d[91]!==void 0?d[92]=d[91]:d[92]="",d[93]=d[47].get("to_epoch"),d[94]=d[93].get("epoch_id"),d[95]=new c.Map(),d[95].set("anon_id",d[92]),d[95].set("epoch_id",d[94]),d[96]=d[47].get("forward_edge"),d[96]?d[97]=!1:d[97]=!0,d[97]?d[98]=!1:d[98]=!0,d[99]=d[47].get("backward_edge"),c.blobs.neq(d[99],void 0)?d[100]=!0:d[100]=!1,d[101]="",d[102]=c.i64.of_int32(d[73].length),c.i64.gt(d[102],c.i64.cast([0,0]))?c.loopAsync(d[102],function(a){return d[103]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[73],d[103]).then(function(a){return a=a,d[104]=a[0],d[105]=a[1],a})},function(a){return d[106]=d[104].get("code"),d[107]=d[104].get("src_line"),d[108]=d[104].get("error_msg"),d[109]=d[104].get("code"),d[110]=d[104].get("src_line"),d[111]=d[104].get("error_msg"),d[112]=d[104].get("code"),d[113]=d[104].get("src_line"),d[114]=d[104].get("error_msg"),d[101]=[d[101],["at ",d[107],": ","error code ",c.i64.to_string(d[109]),": ",d[114]].join(""),"\n"].join("")}])}):c.resolve()},function(a){return a=[d[88],d[95],d[98],d[100],d[101],d[81]],d[66]=a[0],d[67]=a[1],d[68]=a[2],d[69]=a[3],d[70]=a[4],d[71]=a[5],a}])},function(a){return d[72]=new c.Map(),d[72].set("from",d[66]),d[72].set("to",d[67]),d[72].set("has_forward_edge",d[68]),d[72].set("has_backward_edge",d[69]),d[72].set("error_message",d[70]),d[72].set("result_code",d[71]),d[73]=(d[44].push(d[72]),d[44])}])}):c.resolve()},function(b){return b=[d[34],d[34],a[1],a[2],c.i64.cast([0,0]),c.i64.cast([0,0]),d[44]],d[37]=b[0],d[38]=b[1],d[39]=b[2],d[40]=b[3],d[41]=b[4],d[42]=b[5],d[43]=b[6],b}])},function(a){return a=[d[37],d[38],d[39],d[40],d[41],d[42],d[43]],d[25]=a[0],d[26]=a[1],d[27]=a[2],d[28]=a[3],d[29]=a[4],d[30]=a[5],d[31]=a[6],a}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] Unable to load client state: 24"),d[36]=c.createArray(),void 0!==void 0?d[39]=(d[36].push(void 0),d[36]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure","Unable to load client state: 24",d[36],c.i64.cast([0,3]))},function(e){return d[37]=c.createArray(),d[38]=c.i64.of_int32(a[0].length),c.i64.gt(d[38],c.i64.cast([0,0]))?c.loopAsync(d[38],function(e){return d[39]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[39]).then(function(a){return a=a,d[40]=a[0],d[41]=a[1],a})},function(a){return d[42]=d[40].get("from_epoch"),d[43]=d[42].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[43]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]!==void 0?d[45]=d[44]:d[45]="",d[46]=d[40].get("from_epoch"),d[47]=d[46].get("epoch_id"),d[48]=new c.Map(),d[48].set("anon_id",d[45]),d[48].set("epoch_id",d[47]),d[49]=d[40].get("to_epoch"),d[50]=d[49].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[50]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[51]!==void 0?d[52]=d[51]:d[52]="",d[53]=d[40].get("to_epoch"),d[54]=d[53].get("epoch_id"),d[55]=new c.Map(),d[55].set("anon_id",d[52]),d[55].set("epoch_id",d[54]),d[56]=d[40].get("forward_edge"),d[56]?d[57]=!1:d[57]=!0,d[57]?d[58]=!1:d[58]=!0,d[59]=d[40].get("backward_edge"),c.blobs.neq(d[59],void 0)?d[60]=!0:d[60]=!1,d[61]=new c.Map(),d[61].set("from",d[48]),d[61].set("to",d[55]),d[61].set("has_forward_edge",d[58]),d[61].set("has_backward_edge",d[60]),d[61].set("result_code",c.i64.cast([0,7])),d[61].set("error_message",void 0),d[62]=(d[37].push(d[61]),d[37])}])}):c.resolve()},function(b){return b=[void 0,void 0,void 0,a[2],c.i64.cast([0,0]),c.i64.cast([0,0]),d[37]],d[25]=b[0],d[26]=b[1],d[27]=b[2],d[28]=b[3],d[29]=b[4],d[30]=b[5],d[31]=b[6],b}])},function(a){return a=[d[25],d[26],d[27],d[28],d[29],d[30],d[31]],d[9]=a[0],d[10]=a[1],d[11]=a[2],d[12]=a[3],d[13]=a[4],d[14]=a[5],d[15]=a[6],a}]))})},function(a){return d[17]=c.i64.of_float(Date.now()),d[18]=new c.Map(),d[18].set("local_device_id",d[9]),d[18].set("decryption_device_id",d[10]),d[18].set("target_device_id",d[11]),d[18].set("epoch_sync_reason",d[12]),d[18].set("start_ms",d[8]),d[18].set("end_ms",d[17]),d[18].set("results",d[15]),d[19]=c.toJSON(d[18]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"meb_record_epoch_sync",c.i64.cast([0,50039]),d[19],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[20]=a[0],a})}]):c.resolve()},function(a){return d[2]=c.i64.of_float(Date.now()),d[3]=c.i64.random(),d[5]="Finishing execution. Execution time: ",d[6]=c.i64.to_string(c.i64.sub(d[2],d[0])),d[7]=" ms",d[4]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure] ",d[4],d[5],d[4],d[6],d[4],d[7]].join("")),c.i64.eq(c.i64.mod_(d[3],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[8]=",",d[9]=c.createArray(),void 0!==void 0?d[10]=(d[9].push(void 0),d[9]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure",[d[5],d[8],d[6],d[8],d[7]].join(""),d[9],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeriveAndStoreEpochsStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSDeriveAndStoreEpochsStoredProcedure",["LSDeriveAndStoreEpochs","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDeriveAndStoreEpochs"),e.epochEdges,e.targetDeviceId,e.epochSyncReason,e.traceId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MEBEpochSyncReason",[],(function(a,b,c,d,e,f){a=Object.freeze({EMPTY_RESTORE_PAYLOAD:-3,NONE_PROVIDED_BY_CLIENT:-2,NONE_PROVIDED_BY_SERVER:-1,SNAPSHOT_RESTORE:0,POINT_QUERY_RESTORE:1,RANGE_QUERY_RESTORE:2,MESSAGE_QUERY_RESTORE:3,SURROUNDING_RESTORE:4,DOWNLOAD_EPOCHS_V2:5,PREPARE_OPEN_EPOCH:6,HANDLE_OPEN_EPOCH_SUCCESS:7,HANDLE_INIT_GET_SECRETS:8,DERIVE_ONBOARDING_MATERIAL:9,DECRYPT_AND_WRITE_MESSAGES:10,RESTORE_WITH_SERIALIZER:11,FINISH_ADD_PEER_DEVICE:12});f["default"]=a}),66);
__d("createWorkerMutation",["WorkerRelayNetwork","asyncToGeneratorRuntime","err","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=d("relay-runtime").getRequest(a);if(e.params.operationKind!=="mutation")throw c("err")("createWorkerMutation: Expected mutation operation");var f=d("WorkerRelayNetwork").getWorkerNetworkExecute();e=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield f);return d("executeGraphQLQuery").executeGraphQLQuery(c,a,b).then(function(a){return a.toPromise()}).then(function(a){if(Array.isArray(a)){return(a=a[0])==null?void 0:a.data}else return null})});return function(a){return c.apply(this,arguments)}}();return[e]}g["default"]=a}),98);
__d("WorkerRelay",["WorkerRelayNetwork","createWorkerMutation","createWorkerQuery","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";f.exports={createWorkerMutation:c("createWorkerMutation"),createWorkerQuery:c("createWorkerQuery"),executeGraphQLQuery:d("executeGraphQLQuery").executeGraphQLQuery,getWorkerRelayEnvironment:d("WorkerRelayNetwork").getWorkerNetworkExecute,graphql:d("relay-runtime").graphql}}),34);
__d("handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"encryption_version",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"epoch_anon_id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"epoch_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"encrypted_protobuf_stanza",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"protobuf_timestamp_ms",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"sk_ciphertext",storageKey:null},g=[b,c];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMessage",kind:"LinkedField",name:"encrypted_messages",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBEchoDocument",kind:"LinkedField",name:"echo_document",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"echo_document_string",storageKey:null},a,b,c,{alias:null,args:null,kind:"ScalarField",name:"epoch_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"otid",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanzas",kind:"LinkedField",name:"protobuf_stanzas",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"top_level_protobuf",plural:!1,selections:[d,a,b,c,e,f],storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"supplemental_protobufs",plural:!0,selections:[d,a,b,c,e,f,{alias:null,args:null,kind:"ScalarField",name:"supplemental_key",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_id",storageKey:null},{alias:null,args:null,concreteType:"XFBMessageRangeInfo",kind:"LinkedField",name:"message_range_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_more_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_more_after",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_after",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_delete_mailbox",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_string",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochDerivationSet",kind:"LinkedField",name:"epoch_derivation_set",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupsEpochEdge",kind:"LinkedField",name:"epoch_edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"backward_edge",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochForwardEdge",kind:"LinkedField",name:"forward_edge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"auth_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_entropy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entropy_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"epoch_storage_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"psk_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"from_epoch",plural:!1,selections:g,storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"to_epoch",plural:!1,selections:g,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"from_epoch_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"to_epoch_fingerprint",storageKey:null}],storageKey:null}],storageKey:null}],type:"XFBEncryptedBackupMessages",abstractKey:null}}();e.exports=a}),null);
__d("handleRestoreMessagesGraphQLResponse",["EBAPIQPLPoints","I64","LSAuthorityLevel","LSDecryptMessageProtobufsStoredProcedure","LSDecryptMessagesStoredProcedure","LSDeleteAndReenrollDeviceStateStoredProcedure","LSDeriveAndStoreEpochsStoredProcedure","LSDict","LSFactory","LSIntEnum","LSMEBDeviceReenrollmentReason","LSMEBTaskCreationSource","LSShape","LSVec","MAWEBRestoreTrackingUtils","MAWEncryptedBackupUtils","MAWJobDefinitions","MEBEncryptionVersion","MEBEpochSyncReason","QPLUserFlow","ReQL","WAHashStringToNumber","WALogger","asyncToGeneratorRuntime","handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages.graphql","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Protobuf decryption failed in search range restore response"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][processEncryptedMessagesWithoutPersisting] decryptMessageProtobufs failed with error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is not complete - cannot proceed with graphQL restore for thread ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] backup_id is null during graphQL restore for thread ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is null - cannot proceed with graphQL restore"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] server side exception during graphql restore - ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth][web Client state is null - unable to proceed with GQL restore"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][processEncryptedMessages] decryptMessageProtobufs failed with error: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message with no echo document and no protobuf data, more details: encrypted_protobuf_content: ",", protobuf_epoch_anon_id: ",", protobuf_epoch_id: ",", protobuf_timestamp_ms: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] echo_document_string or echo_epoch_anon_id is null for a message in the GraphQL range restore response"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] otid is null for a message in the GraphQL range restore response"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message is null in the GraphQL range restore response"]);v=function(){return a};return a}var w=c("requireDeferred")("LSRestoreEchoBlobs.nop").__setRef("handleRestoreMessagesGraphQLResponse"),x=c("requireDeferred")("LSRestoreProtobufs.nop").__setRef("handleRestoreMessagesGraphQLResponse");function y(a){if(a==null)return c("MEBEncryptionVersion").UNKNOWN;switch(a){case"ENCRYPTION_KDF_WITH_NULL_SALT":return c("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_NULL_SALT;case"ENCRYPTION_KDF_WITH_VERSION":return c("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_VERSION;case"ENCRYPTION_KDF_WITH_NULL_SALT_DF_CANARY":return c("MEBEncryptionVersion").ENCRYPTION_KDF_WITH_NULL_SALT_DF_CANARY;case"TEST_VERSION":return c("MEBEncryptionVersion").TEST_VERSION;default:return c("MEBEncryptionVersion").UNKNOWN}}function z(a,b){b=b;b==null&&(b="ENCRYPTION_VERSION_MISSING");var c=a.get(b);a.has(b)&&c!=null?a.set(b,c+1):a.set(b,1)}function A(a,b,e,f){if(b==null)return{encryptedLSEchoMessages:[],encryptedMessagesWithProtobufs:[],encryptedNonLSEchoMessages:[]};var g=new Map(),h=new Map(),k=new Map(),l=[],m=[];a=(a=a==null?void 0:a.map(function(a){var e,f,n,o,p,q,r;if(a==null){d("WALogger").ERROR(v());return}var s=a.otid;if(s==null){d("WALogger").ERROR(u());return}e=(e=a.echo_document)==null?void 0:e.echo_document_string;f=(f=a.echo_document)==null?void 0:f.epoch_anon_id;n=(n=a.echo_document)==null?void 0:n.epoch_fingerprint;var w=a.protobuf_stanzas;o=w==null?void 0:(o=w.top_level_protobuf)==null?void 0:o.encrypted_protobuf_stanza;p=w==null?void 0:(p=w.top_level_protobuf)==null?void 0:p.epoch_anon_id;q=w==null?void 0:(q=w.top_level_protobuf)==null?void 0:q.epoch_id;r=w==null?void 0:(r=w.top_level_protobuf)==null?void 0:r.protobuf_timestamp_ms;var x=w==null?void 0:w.supplemental_protobufs;if(e==null||f==null){d("WALogger").ERROR(t());return}if(o==null||p==null||q==null||r==null)if(e.length===0){C(o,p,q,r);return}else{var A,B;A=y((A=a.echo_document)==null?void 0:A.encryption_version);z(g,(B=a.echo_document)==null?void 0:B.encryption_version);l.push(d("LSShape").ofRecord({backup_id:Number(b),encryption_version:(i||(i=d("LSIntEnum"))).ofNumber(A),epoch_anon_id:new TextEncoder().encode(f).buffer,epoch_fingerprint:n!=null?new TextEncoder().encode(n).buffer:void 0,epoch_id:((B=a.echo_document)==null?void 0:B.epoch_id)!=null?(j||(j=d("I64"))).of_string(a.echo_document.epoch_id):void 0,otid:s,value:e}));m.push({backup_id:Number(b),encryption_version:A,epoch_anon_id:new TextEncoder().encode(f).buffer,epoch_fingerprint:n!=null?new TextEncoder().encode(n).buffer:void 0,epoch_id:((B=a.echo_document)==null?void 0:B.epoch_id)!=null?(j||(j=d("I64"))).of_string(a.echo_document.epoch_id):void 0,otid:s,value:e});return}if(w!=null){B=y((A=a.echo_document)==null?void 0:A.encryption_version);z(g,(A=a.echo_document)==null?void 0:A.encryption_version);a=d("LSShape").ofRecord({backup_id:Number(b),encryption_version:(i||(i=d("LSIntEnum"))).ofNumber(B),epoch_anon_id:new TextEncoder().encode(f).buffer,epoch_fingerprint:n!=null?new TextEncoder().encode(n).buffer:void 0,value:e});B=y(w==null?void 0:(A=w.top_level_protobuf)==null?void 0:A.encryption_version);z(h,w==null?void 0:(f=w.top_level_protobuf)==null?void 0:f.encryption_version);n=d("LSShape").ofRecord({encrypted_protobuf:o,encryption_version:i.ofNumber(B),epoch_anon_id:new TextEncoder().encode(p).buffer,epoch_id:(j||(j=d("I64"))).of_string(q),protobuf_timestamp_ms:j.of_string(r)});var D=new(c("LSDict"))();x==null?void 0:x.forEach(function(a){var b=a==null?void 0:a.supplemental_key,c=a==null?void 0:a.encrypted_protobuf_stanza,e=a.epoch_anon_id,f=a==null?void 0:a.epoch_id,g=a==null?void 0:a.protobuf_timestamp_ms;if(c==null||e==null||f==null||g==null||b==null)return;var h=y(a==null?void 0:a.encryption_version);z(k,a==null?void 0:a.encryption_version);D.set(b,d("LSShape").ofRecord({encrypted_protobuf:c,encryption_version:(i||(i=d("LSIntEnum"))).ofNumber(h),epoch_anon_id:new TextEncoder().encode(e).buffer,epoch_id:(j||(j=d("I64"))).of_string(f),protobuf_timestamp_ms:j.of_string(g),sk_ciphertext:a==null?void 0:a.sk_ciphertext}))});return d("LSShape").ofRecord({encrypted_echo_message:a,encrypted_protobufs:d("LSShape").ofRecord({supplemental_protobufs:D,toplevel_protobuf:n}),otid:s})}}).filter(Boolean))!=null?a:[];if(f!=null&&e!=null){c("QPLUserFlow").addPoint(e,"processing_encrypted_messages_complete",{instanceKey:f});for(var n of g.entries()){var o,p=n[0],q=n[1];p=p+"_echo";c("QPLUserFlow").addAnnotations(e,{"int":(o={},o[p]=q,o)},{instanceKey:f})}for(p of h.entries()){q=p[0];o=p[1];n=q+"_protobuf_top_level";c("QPLUserFlow").addAnnotations(e,{"int":(q={},q[n]=o,q)},{instanceKey:f})}for(n of k.entries()){o=n[0];q=n[1];p=o+"_protobuf_supplemental";c("QPLUserFlow").addAnnotations(e,{"int":(o={},o[p]=q,o)},{instanceKey:f})}}B(l,a,e,f);return{encryptedLSEchoMessages:l,encryptedMessagesWithProtobufs:a,encryptedNonLSEchoMessages:m}}function B(a,b,e,f){if(e!=null){if(a.length>0){var g=d("LSShape").toRecord(a[0]);a=d("LSShape").toRecord(a[a.length-1]);c("QPLUserFlow").addAnnotations(e,{string:{first_echo_otid:g.otid,last_echo_otid:a.otid}},{instanceKey:f})}if(b.length>0){a=(g=d("LSShape")).toRecord(b[0]);var h=g.toRecord(a.encrypted_protobufs);b=g.toRecord(b[b.length-1]);g=g.toRecord(b.encrypted_protobufs);c("QPLUserFlow").addAnnotations(e,{string:{first_protobuf_otid:a.otid,first_protobuf_ts:(j||(j=d("I64"))).to_string(d("LSShape").toRecord(h.toplevel_protobuf).protobuf_timestamp_ms),last_protobuf_otid:b.otid,last_protobuf_ts:j.to_string(d("LSShape").toRecord(g.toplevel_protobuf).protobuf_timestamp_ms)}},{instanceKey:f})}}}function C(a,b,c,e){d("WALogger").ERROR(s(),a==null?"null/empty":"not empty",b==null?"null/empty":"not empty",c==null?"null/empty":"not empty",e==null?"null/empty":"not empty")}function D(a){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.backupId,e=a.encryptedMessages,g=a.isPointQuery,h=a.messageRangeInfo,k=a.sortOrderMs,l=a.source,m=a.storage,n=a.threadId,o=a.traceId;a=A(e,b);var p=a.encryptedLSEchoMessages,q=a.encryptedMessagesWithProtobufs;b=(e=h)!=null?e:{};var s=b.has_more_after,t=b.has_more_before,u=b.next_message_timestamp_ms_after,v=b.next_message_timestamp_ms_before;if(t==null||s==null||u==null||v==null)return;if(q.length===0){a=(yield m.runInTransaction(function(a){return c("LSDecryptMessagesStoredProcedure")(c("LSFactory")(a),{actThreadId:n,encryptedMessages:c("LSVec").ofArray(p)})},"readwrite",void 0,void 0,f.id+":544"));h=a[0];if(h!=null){var y=c("LSVec").toArray(h).map(function(a){return d("LSShape").toRecord(a).value});c("promiseDone")(w.load().then(function(a){return m.runInTransaction(function(b){return a(b,0,(j||(j=d("I64"))).zero,c("LSVec").ofArray(y),t,j.of_string(v),s,j.of_string(u),g,n,o,k!=null?k:void 0,(i||(i=d("LSIntEnum"))).ofNumber((b=l)!=null?b:c("LSMEBTaskCreationSource").UNKNOWN),void 0)},"readwrite",void 0,void 0,f.id+":560")}))}}else{e=(yield m.runInTransaction(function(a){return c("LSDecryptMessageProtobufsStoredProcedure")(c("LSFactory")(a),{actThreadId:n,encryptedMessagesWithProtobufs:c("LSVec").ofArray(q)})},"readwrite",void 0,void 0,f.id+":584"));var z=e[0];b=e[1];if(b!=null){a=d("LSShape").toRecord(b);d("WALogger").ERROR(r(),a.error_message)}c("promiseDone")(x.load().then(function(a){return m.runInTransaction(function(b){return a(b,0,n,(b=z)!=null?b:c("LSVec").ofArray([]),t,(j||(j=d("I64"))).of_string(v),s,j.of_string(u),g,o,k!=null?k:void 0,void 0,c("LSVec").ofArray([]),(i||(i=d("LSIntEnum"))).ofNumber((b=l)!=null?b:c("LSMEBTaskCreationSource").UNKNOWN))},"readwrite",void 0,void 0,f.id+":601")}))}});return E.apply(this,arguments)}function a(a,b){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b!=null?yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.secure_encrypted_backups_client_state)):yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state));b=b!=null?yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.secure_encrypted_backups_epochs)):yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_epochs));a=b.filter(function(a){return(j||(j=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}).map(function(a){return(j||(j=d("I64"))).to_string(a.epochId)});if(e==null){d("WALogger").ERROR(q());return}b=e.deviceId;var f=e.mailboxRootKeyBlob;e=e.ocmfClientStateBlob;return{device_id:b,locally_available_epochs:a,mailboxRootKey:f,ocmfClientStateBlob:e}});return F.apply(this,arguments)}function G(a,b,c,d,e){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h){g!=null&&(h!=null&&h?d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotationsWorker({annotations:{bool:{has_epochs:a!=null&&a.epoch_edges.length>0}},pointName:"derive_and_store_epochs_worker",traceId:g}):d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{bool:{has_epochs:a!=null&&a.epoch_edges.length>0}},pointName:"derive_and_store_epochs",traceId:g}));try{if(a!=null){var k=a.epoch_edges,l=[],m=new TextEncoder();k!=null&&(k.forEach(function(a){var b=a.from_epoch,c=a.to_epoch,e=a.forward_edge,f=e==null?void 0:e.auth_public_key,g=e==null?void 0:e.encrypted_entropy,h=e==null?void 0:e.entropy_fingerprint,i=e==null?void 0:e.epoch_storage_public_key;e=e==null?void 0:e.psk_fingerprint;var k;f!=null&&g!=null&&(k=d("LSShape").ofRecord({auth_public_key:m.encode(f).buffer,encrypted_entropy:m.encode(g).buffer,entropy_fingerprint:h!=null?m.encode(h).buffer:void 0,epoch_storage_public_key:i!=null?m.encode(i).buffer:void 0,psk_fingerprint:e!=null?m.encode(e).buffer:void 0}));f=b==null?void 0:b.epoch_anon_id;g=b==null?void 0:b.epoch_id;h=c==null?void 0:c.epoch_anon_id;i=c==null?void 0:c.epoch_id;f!=null&&g!=null&&h!=null&&i!=null&&l.push(d("LSShape").ofRecord({backward_edge:a.backward_edge!=null?m.encode(a.backward_edge).buffer:void 0,forward_edge:k,from_epoch:d("LSShape").ofRecord({epoch_anon_id:m.encode(f).buffer,epoch_id:(j||(j=d("I64"))).of_string(g)}),from_epoch_fingerprint:a.from_epoch_fingerprint!=null?m.encode(a.from_epoch_fingerprint).buffer:void 0,to_epoch:d("LSShape").ofRecord({epoch_anon_id:m.encode(h).buffer,epoch_id:j.of_string(i)}),to_epoch_fingerprint:a.to_epoch_fingerprint!=null?m.encode(a.to_epoch_fingerprint).buffer:void 0}))}),yield b.runInTransaction(function(a){return c("LSDeriveAndStoreEpochsStoredProcedure")(c("LSFactory")(a),{epochEdges:c("LSVec").ofArray(l),epochSyncReason:(i||(i=d("LSIntEnum"))).ofNumber(c("MEBEpochSyncReason").DECRYPT_AND_WRITE_MESSAGES),targetDeviceId:e,traceId:g})},"readwrite",void 0,void 0,f.id+":786"))}}catch(b){g!=null&&(h!=null&&h?d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotationsWorker({annotations:{bool:{has_epochs:a!=null&&a.epoch_edges.length>0},string:{exception:b.message}},pointName:"derive_and_store_epochs_worker_exception",traceId:g}):d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{bool:{has_epochs:a!=null&&a.epoch_edges.length>0},string:{exception:b.message}},pointName:"derive_and_store_epochs_exception",traceId:g}))}});return H.apply(this,arguments)}function e(a,b,c,d,e,f,g,h){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h,j,k,l){var q=a;if(q==null){j!=null&&(d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"null_messages",traceId:j,type:"none"}),d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(j));return}var r=q.backup_id,s=q.encrypted_messages,t=q.epoch_derivation_set,u=q.exception_string,v=q.message_range_info;q=q.should_delete_mailbox;if(u!=null){d("WALogger").ERROR(p(),u);q===!0&&(j!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"delete_mailbox",traceId:j,type:"none"}),yield b.runInTransaction(function(a){return c("LSDeleteAndReenrollDeviceStateStoredProcedure")(c("LSFactory")(a),{reenrollmentReason:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMEBDeviceReenrollmentReason").RESTORE_FAILED_WITH_NO_DEVICE_FOUND),targetDeviceId:g})},"readwrite",void 0,void 0,f.id+":888"));j!=null&&d("MAWEBRestoreTrackingUtils").markEBRestoreFail(j,!1,"server-side-exception",{string:{exception:u}});return}yield G(t,b,g,j);if(s.length===0){j!=null&&(d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"no_messages",traceId:j,type:"none"}),d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(j));return}if(v==null){j!=null&&(d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"message_range_info_null",traceId:j,type:"none"}),d("MAWEBRestoreTrackingUtils").markEBRestoreFail(j));d("WALogger").ERROR(o());return}r==null&&(d("WALogger").WARN(n(),e),j!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"backup_id_null",traceId:j,type:"none"}));q=v.has_more_after;u=v.has_more_before;t=v.next_message_timestamp_ms_after;var w=v.next_message_timestamp_ms_before;if(u==null||q==null||t==null||w==null){j!=null&&(d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:" message_range_info_incomplete",traceId:j,type:"none"}),d("MAWEBRestoreTrackingUtils").markEBRestoreFail(j));d("WALogger").ERROR(m(),e);return}yield D({backupId:r,encryptedMessages:s,isPointQuery:l,messageRangeInfo:v,sortOrderMs:h,source:k,storage:b,threadId:e,traceId:j});return a});return I.apply(this,arguments)}h!==void 0?h:h=b("handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages.graphql");function J(a){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.backupId,e=a.encryptedMessages,g=a.messageRangeInfo,h=a.qplEvent,i=a.runningInWorker,m=a.sortOrderMs,n=a.source,o=a.storage,p=a.threadId;a=a.traceId;var q=a!=null?d("WAHashStringToNumber").hashStringToNumber(a):void 0;e=A(e,b);var r=e.encryptedLSEchoMessages,s=e.encryptedMessagesWithProtobufs;e=(b=g)!=null?b:{};g=e.has_more_after;b=e.has_more_before;var t=e.next_message_timestamp_ms_after;e=e.next_message_timestamp_ms_before;if(b==null||g==null||t==null||e==null)return;if(s.length===0){var u;(u=d("EBAPIQPLPoints")).ebAPIAddQPLPoint(i,h,u.EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_START,void 0,q);var v=(yield o.runInTransaction(function(a){return c("LSDecryptMessagesStoredProcedure")(c("LSFactory")(a),{actThreadId:p,encryptedMessages:c("LSVec").ofArray(r)})},"readwrite",void 0,void 0,f.id+":1097"));u.ebAPIAddQPLPoint(i,h,u.EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_END,void 0,q);u=v[0];if(u!=null){d("EBAPIQPLPoints").ebAPIAddQPLPoint(i,h,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.ECHO_DECODE_START,void 0,q);v=c("LSVec").toArray(u).map(function(a){return d("LSShape").toRecord(a).value}).map(function(a){return d("MAWJobDefinitions").toEncodedEchoMessage(a)});u={echoMessages:v,hasMoreAfter:g,hasMoreBefore:b,isPointQuery:!1,mpsMessageQuery:void 0,nextMessageTimestampMsAfter:(j||(j=d("I64"))).of_string(t),nextMessageTimestampMsBefore:j.of_string(e),referenceTimestamp:m!=null?m:void 0,requestId:a,taskSource:n!=null?n:void 0};return u}}else{d("EBAPIQPLPoints").ebAPIAddQPLPoint(i,h,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_START,void 0,q);v=(yield o.runInTransaction(function(a){return c("LSDecryptMessageProtobufsStoredProcedure")(c("LSFactory")(a),{actThreadId:p,encryptedMessagesWithProtobufs:c("LSVec").ofArray(s)})},"readwrite",void 0,void 0,f.id+":1160"));u=v[0];o=v[1];if(o!=null){v=d("LSShape").toRecord(o);d("WALogger").ERROR(l(),v.error_message)}d("EBAPIQPLPoints").ebAPIAddQPLPoint(i,h,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_END,void 0,q);if(u==null){d("WALogger").ERROR(k());d("EBAPIQPLPoints").ebAPIAddQPLPoint(i,h,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.PROTOBUF_DECRYPTION_FAILURE,void 0,q);return}o=d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(u);v={hasMoreAfter:g,hasMoreBefore:b,isPointQuery:!1,mpsMessageQuery:void 0,nextMessageTimestampMsAfter:(j||(j=d("I64"))).of_string(t),nextMessageTimestampMsBefore:j.of_string(e),protobufMessages:o,referenceTimestamp:m!=null?m:void 0,requestId:a,taskSource:n!=null?n:void 0};return v}});return K.apply(this,arguments)}g.processMessageArray=A;g.getClientState=a;g.deriveAndStoreEpochs=G;g.handleGraphQLRestoreResponse=e;g.processEncryptedMessagesWithoutPersisting=J}),98);
__d("EBAPISharedUtils",["EBAPIQPLPoints","LSDeleteAndReenrollDeviceStateStoredProcedure","LSFactory","LSIntEnum","LSMEBDeviceReenrollmentReason","MAWBridgeSafeActionsWorkerAndUI","MWEBODSEntityName.enum","ODS","WALogger","asyncToGeneratorRuntime","handleRestoreMessagesGraphQLResponse"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Echo to protobuf conversion failed in search range restore response: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] backup_id is null during graphQL restore"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is not complete - cannot proceed with graphQL restore"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is null - cannot proceed with graphQL restore"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] server side exception during graphql restore - ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] GQL worker range restore query returned null for message response"]);o=function(){return a};return a}function a(a){(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,a)}function e(a,b,c,d,e,f,g,h,i,j,k){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h,p,q,r,s,t,u){var v;d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_END,void 0,h);if(a==null||(a==null?void 0:(v=a.viewer)==null?void 0:(v=v.encrypted_backup)==null?void 0:v.mailbox)==null){d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,h);return{response:"invalid-graphql-response",success:!1}}a=a==null?void 0:(v=a.viewer)==null?void 0:(a=v.encrypted_backup)==null?void 0:(v=a.mailbox)==null?void 0:v.messages;if(a==null){d("WALogger").ERROR(o());d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,h);return{response:"invalid-graphql-response",success:!1}}v=a;if((v==null?void 0:v.encrypted_messages)==null){d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES,h);return{response:"invalid-graphql-response",success:!1}}a=v.backup_id;var w=v.encrypted_messages,x=v.epoch_derivation_set,y=v.exception_string,z=v.message_range_info;v=v.should_delete_mailbox;if(y!=null){d("WALogger").ERROR(n(),y);v===!0&&(d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DELETE_MAILBOX,void 0,h),yield g.runInTransaction(function(a){return c("LSDeleteAndReenrollDeviceStateStoredProcedure")(c("LSFactory")(a),{reenrollmentReason:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMEBDeviceReenrollmentReason").RESTORE_FAILED_WITH_NO_DEVICE_FOUND),targetDeviceId:p})},"readwrite",void 0,void 0,f.id+":133"));d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,h,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:y}});return{response:"server-side-exception",success:!1}}d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_START,void 0,h);yield d("handleRestoreMessagesGraphQLResponse").deriveAndStoreEpochs(x,g,p,t,b);d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_END,void 0,h);if(z==null){d("WALogger").ERROR(m());d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,h);return{response:"missing-message-range-info",success:!1}}if(z!=null){v=z.has_more_after;y=z.has_more_before;x=z.next_message_timestamp_ms_after;var A=z.next_message_timestamp_ms_before;if(y==null||v==null||x==null||A==null){d("WALogger").ERROR(l());d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,h);return{response:"missing-message-range-info",success:!1}}}a==null&&(d("WALogger").WARN(k()),d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.BACKUP_ID_NULL,void 0,h));d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.PROCESS_AND_DECRYPT_MESSAGES_START,void 0,h);y=(yield d("handleRestoreMessagesGraphQLResponse").processEncryptedMessagesWithoutPersisting({backupId:a,encryptedMessages:w,messageRangeInfo:z,qplEvent:e,runningInWorker:b,sortOrderMs:u,source:s,storage:g,threadId:q,traceId:t}));d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.PROCESS_AND_DECRYPT_MESSAGES_END,void 0,h);if(y==null){d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EMPTY_DECRYPTION_RESPONSE,h);return{response:"empty-decryption-response",success:!1}}if(y.echoMessages!=null){v=y;x=v.echoMessages;d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.ECHO_TO_PROTOBUF_CONVERSION_START,void 0,h);try{A=(yield d("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("convertEchoMessagesToEBProtobufs",{chatJid:r,encodedEchoMessages:x}));d("EBAPIQPLPoints").ebAPIAddQPLPoint(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.ECHO_TO_PROTOBUF_CONVERSION_END,void 0,h);y=babelHelpers["extends"]({},y,{echoMessages:void 0,protobufMessages:(y.protobufMessages||[]).concat(A)})}catch(a){d("WALogger").ERROR(j(),a.message);d("EBAPIQPLPoints").ebAPIEndFailure(b,e,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.ECHO_TO_PROTOBUF_CONVERSION_FAILURE,h);return{response:"echo-to-protobuf-conversion-error",success:!1}}}d("EBAPIQPLPoints").ebAPIEndSuccess(b,e,h,{bool:{isEcho:((a=y)==null?void 0:a.echoMessages)?((w=y)==null?void 0:w.echoMessages.length)>0:!1,isProtobuf:((z=y)==null?void 0:z.protobufMessages)?((u=y)==null?void 0:u.protobufMessages.length)>0:!1}});return{response:y,success:!0}});return p.apply(this,arguments)}g.bumpOdsRestoreKey=a;g.constructEBRestoreResponse=e}),98);
__d("EBFormatUtils",["I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a!=null)return(h||(h=d("I64"))).min(a,h.of_float(d("WATimeUtils").millisTime()));switch(b){case"before":return(h||(h=d("I64"))).of_float(d("WATimeUtils").millisTime());case"after":return(h||(h=d("I64"))).zero;default:b;return(h||(h=d("I64"))).max_int}}function b(a,b){switch(b){case"before":return[a,0];case"after":return[0,a];default:b;return[Math.ceil(a/2),Math.ceil(a/2)]}}g.adjustTs=a;g.adjustCount=b}),98);
__d("EBGenerateMessageTags",["EncryptedBackupsUploadEntity","MSGDataclassTypes.flow"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.IMAGE:return d("MSGDataclassTypes.flow").MpsMessageTag.Photo;case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.VIDEO:return d("MSGDataclassTypes.flow").MpsMessageTag.Video;case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.GIF:return d("MSGDataclassTypes.flow").MpsMessageTag.Gif;case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.PTT:return d("MSGDataclassTypes.flow").MpsMessageTag.Audio;case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.DOCUMENT:return d("MSGDataclassTypes.flow").MpsMessageTag.File;default:return null}}g.generateEBMessageTags=a}),98);
__d("EBMessagePointQueryWithPersistenceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9085258601531441"}),null);
__d("EBMessagePointQueryWithPersistenceQuery.graphql",["EBMessagePointQueryWithPersistenceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"app_id"},c={defaultValue:null,kind:"LocalArgument",name:"restore_payload_string"},d={defaultValue:null,kind:"LocalArgument",name:"restore_type"},e=[{kind:"Variable",name:"app_id",variableName:"app_id"},{kind:"Variable",name:"restore_payload_string",variableName:"restore_payload_string"},{kind:"Variable",name:"restore_type",variableName:"restore_type"}],f={alias:null,args:null,kind:"ScalarField",name:"encryption_version",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"epoch_anon_id",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"epoch_id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"encrypted_protobuf_stanza",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"protobuf_timestamp_ms",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"sk_ciphertext",storageKey:null},l=[g,h];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"EBMessagePointQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages_point_restore",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"EBMessagePointQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages_point_restore",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMessage",kind:"LinkedField",name:"encrypted_messages",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBEchoDocument",kind:"LinkedField",name:"echo_document",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"echo_document_string",storageKey:null},f,g,h,{alias:null,args:null,kind:"ScalarField",name:"epoch_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"otid",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanzas",kind:"LinkedField",name:"protobuf_stanzas",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"top_level_protobuf",plural:!1,selections:[i,f,g,h,j,k],storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"supplemental_protobufs",plural:!0,selections:[i,f,g,h,j,k,{alias:null,args:null,kind:"ScalarField",name:"supplemental_key",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_id",storageKey:null},{alias:null,args:null,concreteType:"XFBMessageRangeInfo",kind:"LinkedField",name:"message_range_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_more_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_more_after",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_after",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_delete_mailbox",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_string",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochDerivationSet",kind:"LinkedField",name:"epoch_derivation_set",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupsEpochEdge",kind:"LinkedField",name:"epoch_edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"backward_edge",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochForwardEdge",kind:"LinkedField",name:"forward_edge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"auth_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_entropy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entropy_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"epoch_storage_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"psk_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"from_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"to_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"from_epoch_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"to_epoch_fingerprint",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("EBMessagePointQueryWithPersistenceQuery_facebookRelayOperation"),metadata:{},name:"EBMessagePointQueryWithPersistenceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("XFBLSRestoreOperationType.facebook",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["DELTA_GENERIC_MESSAGE_SYNC","INITIAL_RESTORE","MESSAGE_QUERY_RESTORE","POINT_QUERY_RESTORE","RANGE_QUERY_RESTORE","SNAPSHOT_RESTORE","SURROUNDING_RESTORE","UNKNOWN"]);c=a;f["default"]=c}),66);
__d("EBMessagePointQueryWithPersistence",["EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBIsEbEnabled","EBMessagePointQueryWithPersistenceQuery.graphql","I64","LSDecryptMessageProtobufsStoredProcedure","LSDecryptMessagesStoredProcedure","LSDeleteAndReenrollDeviceStateStoredProcedure","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSMEBDeviceReenrollmentReason","LSMEBTaskCreationSource","LSShape","LSVec","MAWBridge","MAWCurrentUser","MAWEBRestoreTrackingUtils","MAWEncryptedBackupUtils","MAWJobDefinitions","MAWMainTraceUtils","QPLUserFlow","WABase64","WAHashStringToNumber","WALogger","WAResultOrError","WorkerRelay","WorkerRelayNetwork","asyncToGeneratorRuntime","cr:7713","gkx","handleRestoreMessagesGraphQLResponse","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] graphQL point restore error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is not complete - cannot proceed with graphQL restore"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] backup_id is null during graphQL restore"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] message range info is null - cannot proceed with graphQL restore"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] server side exception during graphql restore - ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] GQL worker point restore query returned null for message response"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mandatory params of client state are null"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No client state found - unable to restore"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Calling EBLS without EBLS being available for message point query"]);s=function(){return a};return a}var t=h!==void 0?h:h=b("EBMessagePointQueryWithPersistenceQuery.graphql");function a(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.jid,f=a.messageId,g=a.sortOrderMs,h=a.source,u=a.threadId;a=a.traceId;if(!d("EBAPIWorkerCheck").runningInWorker())return d("WAResultOrError").makeError("unsupported-context");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql");a=a!=null?a:d("MAWMainTraceUtils").createTraceId();var v=d("WAHashStringToNumber").hashStringToNumber(a),w=c("qpl")._(521474469,"2612");try{var x;c("QPLUserFlow").start(w,{annotations:{bool:{mainThreadRestore:!1,workerThreadRestore:!0},"int":{source:(x=h)!=null?x:c("LSMEBTaskCreationSource").UNKNOWN}},instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestorePoint(h,a,"GQL_WORKER",!0);if(b("cr:7713")==null){d("WALogger").ERROR(s());c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED}},instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,"ebls_not_initialized");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("ebls-not-intialized")}yield b("cr:7713").init();x=(yield b("cr:7713").getLSStorage());var y;if(c("gkx")("3713"))y=!(yield d("EBIsEbEnabled").isEbEnabledLS(x.tables));else{var z=(yield d("MAWEncryptedBackupUtils").getBackupTenancy(x.tables));y=z==null||!(i||(i=d("I64"))).equal(z,(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))}if(y){c("QPLUserFlow").addPoint(w,"eb_not_enabled",{instanceKey:v});c("QPLUserFlow").endSuccess(w,{instanceKey:v});d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"eb_not_enabled",traceId:a});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(a,!0);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.success");return d("WAResultOrError").makeResult()}d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"lsdb_singleton_retrieved",traceId:a});c("QPLUserFlow").addPoint(w,"lsdb_singleton_retrieved",{instanceKey:v});z=(yield d("handleRestoreMessagesGraphQLResponse").getClientState(x));d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotationsWorker({annotations:{string:{device_id:(i||(i=d("I64"))).to_string((y=z==null?void 0:z.device_id)!=null?y:(i||(i=d("I64"))).zero)}},pointName:"client_state_retrieved",traceId:a});c("QPLUserFlow").addPoint(w,"client_state_retrieved",{data:{string:{device_id:i.to_string((y=z==null?void 0:z.device_id)!=null?y:(i||(i=d("I64"))).zero)}},instanceKey:v});if(z==null){d("WALogger").ERROR(r());c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE}},instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,"no_client_state");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("no-client-state")}var A=z.device_id;y=z.locally_available_epochs;var B=z.mailboxRootKey;z=z.ocmfClientStateBlob;if(A==null||B==null||z==null){d("WALogger").ERROR(q());c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE}},instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-client-state")}var C=d("MAWCurrentUser").getAppID();d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"app_id_retrieved",traceId:a});c("QPLUserFlow").addPoint(w,"app_id_retrieved",{instanceKey:v});y={restore_context:{act_thread_id:d("MAWJobDefinitions").toThreadJidPrimaryId(u),site:"www",tam_thread_subtype:0},success:babelHelpers["extends"]({device_context:{device_id:i.to_string(A),locally_available_epochs:y,raw_tokens:{mailbox_root_key:d("WABase64").encodeB64(B),ocmf_client_state_blob:d("WABase64").encodeB64(z)}},message_id:f},g!=null?{reference_timestamp:g}:{})};d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"graphql_query_start",traceId:a});c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START,{instanceKey:v});yield d("WorkerRelayNetwork").createWorkerNetworkExecute();z=(yield d("WorkerRelay").createWorkerQuery(t,{app_id:String((B=C)!=null?B:"0"),restore_payload_string:JSON.stringify(y),restore_type:"POINT_QUERY_RESTORE"}));d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"graphql_query_end",traceId:a});c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_END,{instanceKey:v});if(z==null||(z==null?void 0:(f=z.viewer)==null?void 0:(C=f.encrypted_backup)==null?void 0:C.mailbox)==null){c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}},instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,"gql_point_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}C=z==null?void 0:(B=z.viewer)==null?void 0:(y=B.encrypted_backup)==null?void 0:(f=y.mailbox)==null?void 0:f.messages_point_restore;if(C==null){d("WALogger").ERROR(p());c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}},instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,"gql_point_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}z=C;if((z==null?void 0:z.encrypted_messages)==null){c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES}},instanceKey:v});d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"null_messages",traceId:a});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,"null_messages");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}B=z.backup_id;y=z.encrypted_messages;f=z.epoch_derivation_set;C=z.exception_string;var D=z.message_range_info;z=z.should_delete_mailbox;if(C!=null){d("WALogger").ERROR(o(),C);z===!0&&(c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DELETE_MAILBOX,{instanceKey:v}),yield x.runInTransaction(function(a){return c("LSDeleteAndReenrollDeviceStateStoredProcedure")(c("LSFactory")(a),{reenrollmentReason:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMEBDeviceReenrollmentReason").RESTORE_FAILED_WITH_NO_DEVICE_FOUND),targetDeviceId:A})},"readwrite"),d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"delete_mailbox",traceId:a}));c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:C}},instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:C}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("server-side-exception")}d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"derive_and_store_epochs_start",traceId:a});c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_START,{instanceKey:v});c("QPLUserFlow").addAnnotations(w,{bool:{hasEpochs:f!=null&&f.epoch_edges.length>0}},{instanceKey:v});yield d("handleRestoreMessagesGraphQLResponse").deriveAndStoreEpochs(f,x,A,a,!0);d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"derive_and_store_epochs_end",traceId:a});c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_END,{instanceKey:v});y.length===0&&(c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_MESSAGES_TO_RESTORE,{instanceKey:v}),d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"no_messages",traceId:a}));if(D==null){d("WALogger").ERROR(n());c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}},instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,"missing_message_range_info");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}B==null&&(d("WALogger").WARN(m()),c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.BACKUP_ID_NULL,{instanceKey:v}),d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"backup_id_null",traceId:a}));z=D.has_more_after;C=D.has_more_before;f=D.next_message_timestamp_ms_after;D=D.next_message_timestamp_ms_before;if(C==null||z==null||f==null||D==null){d("WALogger").ERROR(l());c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}},instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,"message_range_info_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}y=d("handleRestoreMessagesGraphQLResponse").processMessageArray(y,B,w,v);var E=y.encryptedLSEchoMessages,F=y.encryptedMessagesWithProtobufs;if(F.length===0){d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypt_messages_echo_start",traceId:a});c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_START,{instanceKey:v});B=(yield x.runInTransaction(function(a){return c("LSDecryptMessagesStoredProcedure")(c("LSFactory")(a),{actThreadId:u,encryptedMessages:c("LSVec").ofArray(E)})},"readwrite"));d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypt_messages_echo_end",traceId:a});c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_END,{instanceKey:v});y=B[0];if(y!=null){B=c("LSVec").toArray(y).map(function(a){return d("LSShape").toRecord(a).value});c("promiseDone")(d("MAWBridge").getBridge().sendAndReceive("event","uiUpdate",{events:[{tag:"RestoreNativeOp",value:{chatJid:e,echoMessages:c("LSVec").ofArray(B),hasMoreAfter:z,hasMoreBefore:C,isPointQuery:!0,nextMessageTimestampMsAfter:(i||(i=d("I64"))).of_string(f),nextMessageTimestampMsBefore:i.of_string(D),referenceTimestamp:g!=null?(i||(i=d("I64"))).to_string(g):void 0,requestId:a,taskSource:(j||(j=d("LSIntEnum"))).ofNumber((y=h)!=null?y:c("LSMEBTaskCreationSource").UNKNOWN),threadId:u}}]}))}}else{d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypt_messages_protobuf_start",traceId:a});c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_START,{instanceKey:v});B=(yield x.runInTransaction(function(a){return c("LSDecryptMessageProtobufsStoredProcedure")(c("LSFactory")(a),{actThreadId:u,encryptedMessagesWithProtobufs:c("LSVec").ofArray(F)})},"readwrite"));d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypt_messages_protobuf_end",traceId:a});c("QPLUserFlow").addPoint(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_END,{instanceKey:v});if(B[0]!=null){y=d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(B[0]);c("promiseDone")(d("MAWBridge").getBridge().sendAndReceive("event","uiUpdate",{events:[{tag:"RestoreNativeOp",value:{chatJid:e,decryptedMessagesProtobufs:y,hasMoreAfter:z,hasMoreBefore:C,isPointQuery:!0,nextMessageTimestampMsAfter:(i||(i=d("I64"))).of_string(f),nextMessageTimestampMsBefore:i.of_string(D),referenceTimestamp:g!=null?(i||(i=d("I64"))).to_string(g):void 0,requestId:a,taskSource:(j||(j=d("LSIntEnum"))).ofNumber((x=h)!=null?x:c("LSMEBTaskCreationSource").UNKNOWN),threadId:u}}]}))}else{c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPTED_PROTOBUFS_NULL,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPTED_PROTOBUFS_NULL}},instanceKey:v});d("MAWEBRestoreTrackingUtils").addQPLRestorePointWorker({pointName:"decrypted_protobufs_null",traceId:a});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,"decrypted_protobufs_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}}c("QPLUserFlow").endSuccess(w,{annotations:{bool:{isEcho:F.length===0,isProtobuf:F.length>0}},instanceKey:v});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.success");return d("WAResultOrError").makeResult()}catch(b){d("WALogger").ERROR(k(),b);c("QPLUserFlow").endFailure(w,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,errorStackTrace:(B=b.stack)!=null?B:""}},error:b,instanceKey:v});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(a,!0,"gql_point_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.point.gql.error");return d("WAResultOrError").makeError("runtime-error",b)}});return u.apply(this,arguments)}g.pointRestoreQuery=t;g.messagePointQueryWithPersistence=a}),98);
__d("EBgenerateMPSMessageQuery",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{__typename:"MPSMessageQuery",ctx:{__typename:"MPSQueryContext",caller:"HISTORY_RESTORE"},query:{__typename:"MPSMessagePointQuery",include_deleted:!1,otids:b,thread_id:a}}}f.generateMPSMessageQuery=a}),66);
__d("EBMessageBulkPointQuery",["EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBIsEbEnabled","EBMessagePointQueryWithPersistence","EBgenerateMPSMessageQuery","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","LSMEBTaskCreationSource","LSVec","MAWCurrentUser","MAWEncryptedBackupUtils","QPLUserFlow","WABase64","WAHashStringToNumber","WALogger","WAPushSafeTypes","WAResultOrError","WorkerRelay","asyncToGeneratorRuntime","cr:9437","gkx","handleRestoreMessagesGraphQLResponse","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] graphQL bulk point restore error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mandatory params of client state are null"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No client state found - unable to restore"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Calling EBLS without EBLS being available for message bulk point query"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] GQL bulk point query called from non-worker context"]);n=function(){return a};return a}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("EBAPIWorkerCheck").runningInWorker()){d("WALogger").ERROR(n());return d("WAResultOrError").makeError("called-from-main-thread")}d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql");a=d("WAPushSafeTypes").unsafeNotNullable(a);var e=a.chatJid,f=a.messageIds,g=a.sortOrderMsList,o=a.source,p=a.threadId;a=a.traceId;var q=a!=null?d("WAHashStringToNumber").hashStringToNumber(a):void 0,r=c("qpl")._(521482281,"2703");try{var s;c("QPLUserFlow").start(r,{annotations:{bool:{bulkPointQuery:!0,mainThreadRestore:!1,workerThreadRestore:!0},"int":{source:(s=o)!=null?s:c("LSMEBTaskCreationSource").UNKNOWN}},instanceKey:q});if(b("cr:9437")==null){d("WALogger").ERROR(m());c("QPLUserFlow").endFailure(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED,{instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError("ebls-not-intialized")}yield b("cr:9437").init();s=(yield b("cr:9437").getLSStorage());var t;if(c("gkx")("3713"))t=!(yield d("EBIsEbEnabled").isEbEnabledLS(s.tables));else{var u=(yield d("MAWEncryptedBackupUtils").getBackupTenancy(s.tables));t=u==null||!(h||(h=d("I64"))).equal(u,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))}if(t){c("QPLUserFlow").addPoint(r,"eb_not_enabled",{instanceKey:q});c("QPLUserFlow").endSuccess(r,{instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError("eb-not-enabled")}u=(yield d("handleRestoreMessagesGraphQLResponse").getClientState(s));if(u==null){d("WALogger").ERROR(l());c("QPLUserFlow").endFailure(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError("no-client-state")}t=u.device_id;var v=u.locally_available_epochs,w=u.mailboxRootKey;u=u.ocmfClientStateBlob;if(t==null||w==null||u==null){d("WALogger").ERROR(k());c("QPLUserFlow").endFailure(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError("invalid-client-state")}var x=d("MAWCurrentUser").getAppID();v={restore_context:{act_thread_id:p,site:"www",tam_thread_subtype:0},success:{device_context:{device_id:(h||(h=d("I64"))).to_string(t),locally_available_epochs:v,raw_tokens:{mailbox_root_key:d("WABase64").encodeB64(w),ocmf_client_state_blob:d("WABase64").encodeB64(u)}},mps_message_query:JSON.stringify(d("EBgenerateMPSMessageQuery").generateMPSMessageQuery(p,f))}};if(g!=null){w=c("LSVec").ofArray(g.map(function(a){return(h||(h=d("I64"))).of_string(""+a)}));v=babelHelpers["extends"]({},v,{sort_order_ms_list:w})}c("QPLUserFlow").addPoint(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START,{instanceKey:q});f=(yield d("WorkerRelay").createWorkerQuery(d("EBMessagePointQueryWithPersistence").pointRestoreQuery,{app_id:String((u=x)!=null?u:"0"),restore_payload_string:JSON.stringify(v),restore_type:"MESSAGE_QUERY_RESTORE"}));g=(yield d("EBAPISharedUtils").constructEBRestoreResponse(f,!0,r,s,q,t,p,e,o,a,void 0));if(g.success){d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.success");return d("WAResultOrError").makeResult(g.response)}else{d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError(g.response)}}catch(a){d("WALogger").ERROR(j(),a);c("QPLUserFlow").endFailure(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{error:a,instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.bulkpoint.search.gql.error");return d("WAResultOrError").makeError("runtime-error",a)}});return o.apply(this,arguments)}g.messageBulkPointQuery=a}),98);
__d("EBMessageRangeQueryWithPersistenceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8765464933531736"}),null);
__d("EBMessageRangeQueryWithPersistenceQuery.graphql",["EBMessageRangeQueryWithPersistenceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"app_id"},c={defaultValue:null,kind:"LocalArgument",name:"restore_payload_string"},d={defaultValue:null,kind:"LocalArgument",name:"restore_type"},e=[{kind:"Variable",name:"app_id",variableName:"app_id"},{kind:"Variable",name:"restore_payload_string",variableName:"restore_payload_string"},{kind:"Variable",name:"restore_type",variableName:"restore_type"}],f={alias:null,args:null,kind:"ScalarField",name:"encryption_version",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"epoch_anon_id",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"epoch_id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"encrypted_protobuf_stanza",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"protobuf_timestamp_ms",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"sk_ciphertext",storageKey:null},l=[g,h];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"EBMessageRangeQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"handleRestoreMessagesGraphQLResponse_XFBEncryptedBackupMessages"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"EBMessageRangeQueryWithPersistenceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:e,concreteType:"XFBEncryptedBackupMessages",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupMessage",kind:"LinkedField",name:"encrypted_messages",plural:!0,selections:[{alias:null,args:null,concreteType:"XFBEchoDocument",kind:"LinkedField",name:"echo_document",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"echo_document_string",storageKey:null},f,g,h,{alias:null,args:null,kind:"ScalarField",name:"epoch_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"otid",storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanzas",kind:"LinkedField",name:"protobuf_stanzas",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"top_level_protobuf",plural:!1,selections:[i,f,g,h,j,k],storageKey:null},{alias:null,args:null,concreteType:"XFBProtobufStanza",kind:"LinkedField",name:"supplemental_protobufs",plural:!0,selections:[i,f,g,h,j,k,{alias:null,args:null,kind:"ScalarField",name:"supplemental_key",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_id",storageKey:null},{alias:null,args:null,concreteType:"XFBMessageRangeInfo",kind:"LinkedField",name:"message_range_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_more_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_more_after",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_before",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_message_timestamp_ms_after",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_delete_mailbox",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exception_string",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochDerivationSet",kind:"LinkedField",name:"epoch_derivation_set",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackupsEpochEdge",kind:"LinkedField",name:"epoch_edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"backward_edge",storageKey:null},{alias:null,args:null,concreteType:"XFBEpochForwardEdge",kind:"LinkedField",name:"forward_edge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"auth_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_entropy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entropy_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"epoch_storage_public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"psk_fingerprint",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"from_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"XFBEpochIds",kind:"LinkedField",name:"to_epoch",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"from_epoch_fingerprint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"to_epoch_fingerprint",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("EBMessageRangeQueryWithPersistenceQuery_facebookRelayOperation"),metadata:{},name:"EBMessageRangeQueryWithPersistenceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EchoMessageDecryptor",["CryptoUtils","I64","LSAuthorityLevel","LSIntEnum","MEBEncryptionVersion","Promise","ReQL","WACryptoUtils","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No backup id provided"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to derive symmetric key for message"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No epoch keys found for message"]);m=function(){return a};return a}a=function(){function a(){}var e=a.prototype;e.decrypt=function(a,e,f){var g=this;f=f.map(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f=(yield g.getEpochKeysByID(a,b));if(f.length===0){d("WALogger").ERROR(m());return{otid:b.otid,value:null}}f=(yield d("CryptoUtils").deriveMessageSymmetricKey(f[0].epochAnonIdBlob,f[0].epochRootKeyBlob,(f=b.encryption_version)!=null?f:c("MEBEncryptionVersion").UNKNOWN,e));if(f==null||f.length===0){d("WALogger").ERROR(l());return{otid:b.otid,value:null}}f=(yield d("CryptoUtils").symmetricEncryptionCreateDecryptedString(f[0],new TextEncoder().encode([d("CryptoUtils").MESSAGE_ENCYPTION_AAD,e].join(d("CryptoUtils").STRING_JOIN_SEPARATOR)).buffer,b.value));return{otid:b.otid,value:f}});return function(a){return f.apply(this,arguments)}}());return(j||(j=b("Promise"))).all(f)};e.getEpochs=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(b==null){d("WALogger").ERROR(k());return[]}a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_epochs)));return a.filter(function(a){return(h||(h=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&(h||(h=d("I64"))).equal(a.backupId,(h||(h=d("I64"))).of_float(b))&&e.equals(a[e.key])})});function e(b,c,d){return a.apply(this,arguments)}return e}();e.getEpochKeysByID=function(a,b){var c=b.epoch_id;return c!=null?this.getEpochs(a,b.backup_id,{equals:function(a){return a instanceof ArrayBuffer?!1:(h||(h=d("I64"))).equal(c,a)},key:"epochId",value:c}):this.getEpochs(a,b.backup_id,{equals:function(a){return a instanceof ArrayBuffer?d("WACryptoUtils").arrayBuffersEqual(b.epoch_anon_id,a):!1},key:"epochAnonIdBlob",value:b.epoch_anon_id})};return a}();g.EchoMessageDecryptor=a}),98);
__d("LSEncryptedBackupsMessagesRangeQueryDirection",[],(function(a,b,c,d,e,f){a=Object.freeze({BEFORE:1,AFTER:2});f["default"]=a}),66);
__d("EBMessageRangeQueryWithPersistence",["EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBMessageRangeQueryWithPersistenceQuery.graphql","EchoMessageDecryptor","I64","LSDatabaseSingleton","LSDecryptMessageProtobufsStoredProcedure","LSDecryptMessagesStoredProcedure","LSDeleteAndReenrollDeviceStateStoredProcedure","LSEncryptedBackupsMessagesRangeQueryDirection","LSFactory","LSIntEnum","LSMEBDeviceReenrollmentReason","LSMEBTaskCreationSource","LSShape","LSVec","MAWCurrentUser","MAWEBRestoreTrackingUtils","MAWJobDefinitions","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","QPLUserFlow","WABase64","WAHashStringToNumber","WAJids","WAResultOrError","WATagsLogger","WorkerRelay","WorkerRelayNetwork","asyncToGeneratorRuntime","gkx","handleRestoreMessagesGraphQLResponse","justknobx","promiseDone","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["graphQL range restore error ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["message range info is not complete - cannot proceed with graphQL restore"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["backup_id is null during graphQL restore"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["message range info is null - cannot proceed with graphQL restore"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["server side exception during graphql restore - ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["GQL worker range restore query returned null for message response"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["mandatory params of client state are null"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["No client state found - unable to restore"]);s=function(){return a};return a}var t=c("requireDeferred")("LSEBUnifiedRestoreUtils").__setRef("EBMessageRangeQueryWithPersistence"),u=c("requireDeferred")("LSRestoreEchoBlobs.nop").__setRef("EBMessageRangeQueryWithPersistence"),v=c("requireDeferred")("LSRestoreProtobufs.nop").__setRef("EBMessageRangeQueryWithPersistence"),w=d("WATagsLogger").TAGS(["labyrinth_web","EBMessageRangeQueryWithPersistence"]),x=c("justknobx")._("3177"),y=h!==void 0?h:h=b("EBMessageRangeQueryWithPersistenceQuery.graphql");function a(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,g=a.direction,h=a.includeOffset;h=h===void 0?!1:h;var z=a.sortOrderMs,B=a.source,C=a.traceId;if(d("EBAPIWorkerCheck").runningInWorker())return d("WAResultOrError").makeError("unsupported-context");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql");var D=d("WAHashStringToNumber").hashStringToNumber(C),E=c("qpl")._(521471755,"2586");try{var F,G;c("QPLUserFlow").start(E,{annotations:{bool:{mainThreadRestore:!0,workerThreadRestore:!1},"int":{source:(F=B)!=null?F:c("LSMEBTaskCreationSource").UNKNOWN},string:{request_args:JSON.stringify(a)}},instanceKey:D,timeoutInMs:c("justknobx")._("2950")});d("MAWEBRestoreTrackingUtils").markEBRestorePaginated(B,C,"GQL_MAIN_THREAD");var H=(yield (i||(i=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue());d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"lsdb_singleton_retrieved",traceId:C,type:"none"});c("QPLUserFlow").addPoint(E,"lsdb_singleton_retrieved",{instanceKey:D});var I;yield H.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;I=(yield d("handleRestoreMessagesGraphQLResponse").getClientState(H,a));d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{string:{device_id:(j||(j=d("I64"))).to_string((b=(b=I)==null?void 0:b.device_id)!=null?b:(j||(j=d("I64"))).zero)}},pointName:"client_state_retrieved",traceId:C});c("QPLUserFlow").addPoint(E,"client_state_retrieved",{data:{string:{device_id:j.to_string((b=(b=I)==null?void 0:b.device_id)!=null?b:(j||(j=d("I64"))).zero)}},instanceKey:D});b=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByJid(a,j.of_string(d("WAJids").threadIdForChatJid(e)),"GQL_range_restore_eb_api_call"));if(b.type===d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW||b.type===d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD){d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{string:{thread_state_by_jid:b.type}},pointName:"chat_jid_not_found_in_act_mapping_table",traceId:C});c("QPLUserFlow").addPoint(E,"chat_jid_not_found_in_act_mapping_table",{instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(C,!1);c("QPLUserFlow").endSuccess(E,{instanceKey:D});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.thread.missing.error");return d("WAResultOrError").makeError("thread-not-found-in-mi-act-mapping-table")}else d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{string:{thread_state_by_jid:b.type}},pointName:"chat_jid_exists_in_act_mapping_table",traceId:C}),c("QPLUserFlow").addPoint(E,"chat_jid_exists_in_act_mapping_table",{instanceKey:D})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":188");if(I==null){w.ERROR(s());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!1,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("no-client-state")}F=I;var J=F.device_id;a=F.locally_available_epochs;var K=F.mailboxRootKey;F=F.ocmfClientStateBlob;if(J==null||K==null||F==null){w.ERROR(r());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!1,"client_state_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-client-state")}var L=d("MAWCurrentUser").getAppID();d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"app_id_retrieved",traceId:C,type:"none"});c("QPLUserFlow").addPoint(E,"app_id_retrieved",{instanceKey:D});var M=d("WAJids").threadIdForChatJid(e);d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"converted_chatjid_to_threadid",traceId:C,type:"none"});c("QPLUserFlow").addPoint(E,"converted_chatjid_to_threadid",{instanceKey:D});g=g==="before"?c("LSEncryptedBackupsMessagesRangeQueryDirection").BEFORE:c("LSEncryptedBackupsMessagesRangeQueryDirection").AFTER;a={restore_context:{act_thread_id:d("MAWJobDefinitions").toThreadJidPrimaryId(M),site:"www",tam_thread_subtype:0},success:babelHelpers["extends"]({device_context:{device_id:(j||(j=d("I64"))).to_string(J),locally_available_epochs:a,raw_tokens:{mailbox_root_key:d("WABase64").encodeB64(K),ocmf_client_state_blob:d("WABase64").encodeB64(F)}},direction:g,include_offset:h,server_thread_key:M},z!=null?{reference_timestamp:z}:{})};c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START,{instanceKey:D});d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"graphql_query_start",traceId:C,type:"none"});var N;try{yield d("WorkerRelayNetwork").createWorkerNetworkExecute();N=(yield d("WorkerRelay").createWorkerQuery(y,{app_id:String((K=L)!=null?K:"0"),restore_payload_string:JSON.stringify(a),restore_type:"RANGE_QUERY_RESTORE"}));c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_END,{instanceKey:D});d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"graphql_query_end",traceId:C,type:"none"})}catch(a){c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_EXCEPTION,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_EXCEPTION,errorStackTrace:(F=a.stack)!=null?F:""}},instanceKey:D});return d("WAResultOrError").makeError("invalid-graphql-response")}if(N==null||((g=N)==null?void 0:(h=g.viewer)==null?void 0:(L=h.encrypted_backup)==null?void 0:L.mailbox)==null){c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!1,"gql_range_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}h=(K=N)==null?void 0:(a=K.viewer)==null?void 0:(F=a.encrypted_backup)==null?void 0:(g=F.mailbox)==null?void 0:g.messages;if(h==null){w.ERROR(q());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_GRAPHQL_RESPONSE}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!1,"gql_range_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}L=h;if((L==null?void 0:L.encrypted_messages)==null){c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NULL_MESSAGES}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!1,"null_messages");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("invalid-graphql-response")}K=L.backup_id;a=L.encrypted_messages;F=L.epoch_derivation_set;g=L.exception_string;h=L.message_range_info;L=L.should_delete_mailbox;c("QPLUserFlow").addAnnotations(E,{bool:{should_delete_mailbox:(G=L)!=null?G:!1},"int":{response_messages:a.length},string:{message_range_info:JSON.stringify(h)}},{instanceKey:D});if(g!=null){w.ERROR(p(),g);L===!0&&(c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DELETE_MAILBOX,{instanceKey:D}),yield H.runInTransaction(function(a){return c("LSDeleteAndReenrollDeviceStateStoredProcedure")(c("LSFactory")(a),{reenrollmentReason:(k||(k=d("LSIntEnum"))).ofNumber(c("LSMEBDeviceReenrollmentReason").RESTORE_FAILED_WITH_NO_DEVICE_FOUND),targetDeviceId:J})},"readwrite",void 0,void 0,f.id+":532"),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"delete_mailbox",traceId:C,type:"none"}));c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,exception:g}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!1,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.SERVER_SIDE_EXCEPTION,{string:{exception:g}});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("server-side-exception")}c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_START,{instanceKey:D});yield d("handleRestoreMessagesGraphQLResponse").deriveAndStoreEpochs(F,H,J,C);c("QPLUserFlow").addAnnotations(E,{bool:{hasEpochs:F!=null&&F.epoch_edges.length>0}},{instanceKey:D});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DERIVE_AND_STORE_EPOCHS_END,{instanceKey:D});a.length===0&&(c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_MESSAGES_TO_RESTORE,{instanceKey:D}),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"no_messages",traceId:C,type:"none"}));if(h==null){w.ERROR(o());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!1,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO);d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}K==null&&(w.WARN(n()),c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.BACKUP_ID_NULL,{instanceKey:D}),d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"backup_id_null",traceId:C,type:"none"}));var O=h.has_more_after,P=h.has_more_before,Q=h.next_message_timestamp_ms_after,R=h.next_message_timestamp_ms_before;if(P==null||O==null||Q==null||R==null){w.ERROR(m());c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.MISSING_RANGE_INFO}},instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!1,"message_range_info_null");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("missing-message-range-info")}G=d("handleRestoreMessagesGraphQLResponse").processMessageArray(a,K,E,D);var S=G.encryptedLSEchoMessages,T=G.encryptedMessagesWithProtobufs;L=G.encryptedNonLSEchoMessages;g="none";if(S.length>0&&T.length>0&&S.length+T.length===x){g="mixed";c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RESTORING_MIXED_ECHO_PROTOBUF_PAYLOAD,{instanceKey:D});c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_START,{instanceKey:D});F=(yield H.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c("LSDecryptMessagesStoredProcedure")(c("LSFactory")(a),{actThreadId:M,encryptedMessages:c("LSVec").ofArray(S)}));a=(yield c("LSDecryptMessageProtobufsStoredProcedure")(c("LSFactory")(a),{actThreadId:M,encryptedMessagesWithProtobufs:c("LSVec").ofArray(T)}));return{decryptedEchoMsgs:b,decryptedProtobufMsgs:a}});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":743"));h=F.decryptedEchoMsgs;var U=F.decryptedProtobufMsgs;c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_END,{instanceKey:D});var V;h[0]!=null&&(V=c("LSVec").toArray(h[0]).map(function(a){return d("LSShape").toRecord(a).value}));if(c("gkx")("9385")){yield A((a=V)!=null?a:[],L,M,H,C,D)}c("promiseDone")(t.load().then(function(a){return a.echoProtobufConsolidatedRestoreHelper(M,(a=U[0])!=null?a:c("LSVec").ofArray([]),P,(j||(j=d("I64"))).of_string(R),O,j.of_string(Q),!1,C,z,void 0,c("LSVec").ofArray(V),(k||(k=d("LSIntEnum"))).ofNumber((a=B)!=null?a:c("LSMEBTaskCreationSource").UNKNOWN),e,!0)}))}else if(T.length===0){g="echo";c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_START,{instanceKey:D});K=(yield H.runInTransaction(function(a){return c("LSDecryptMessagesStoredProcedure")(c("LSFactory")(a),{actThreadId:M,encryptedMessages:c("LSVec").ofArray(S)})},"readwrite",void 0,void 0,f.id+":827"));c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_ECHO_END,{instanceKey:D});G=K[0];if(G!=null){var W=c("LSVec").toArray(G).map(function(a){return d("LSShape").toRecord(a).value});if(c("gkx")("9385")){yield A((F=W)!=null?F:[],L,M,H,C,D)}c("promiseDone")(u.load().then(function(a){return H.runInTransaction(function(b){return a(b,0,(j||(j=d("I64"))).zero,c("LSVec").ofArray(W),P,j.of_string(R),O,j.of_string(Q),!1,M,C,z,(k||(k=d("LSIntEnum"))).ofNumber((b=B)!=null?b:c("LSMEBTaskCreationSource").UNKNOWN),e)},"readwrite",void 0,void 0,f.id+":865")}))}}else{g="protobuf";c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_START,{instanceKey:D});var X=(yield H.runInTransaction(function(a){return c("LSDecryptMessageProtobufsStoredProcedure")(c("LSFactory")(a),{actThreadId:M,encryptedMessagesWithProtobufs:c("LSVec").ofArray(T)})},"readwrite",void 0,void 0,f.id+":897"));c("QPLUserFlow").addPoint(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.DECRYPT_MESSAGES_PROTOBUF_END,{instanceKey:D});c("promiseDone")(v.load().then(function(a){return H.runInTransaction(function(b){return a(b,0,M,(b=X[0])!=null?b:c("LSVec").ofArray([]),P,(j||(j=d("I64"))).of_string(R),O,j.of_string(Q),!1,C,z,void 0,c("LSVec").ofArray([]),(k||(k=d("LSIntEnum"))).ofNumber((b=B)!=null?b:c("LSMEBTaskCreationSource").UNKNOWN),e)},"readwrite",void 0,void 0,f.id+":916")}))}c("QPLUserFlow").endSuccess(E,{annotations:{string:{restoreType:g}},instanceKey:D});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.success");return d("WAResultOrError").makeResult()}catch(a){w.ERROR(l(),a);c("QPLUserFlow").endFailure(E,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{annotations:{string:{error_description:d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,errorStackTrace:(h=a.stack)!=null?h:""}},error:a,instanceKey:D});d("MAWEBRestoreTrackingUtils").markEBRestoreFail(C,!1,"gql_range_restore_exception");d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.paginated.gql.error");return d("WAResultOrError").makeError("runtime-error",a)}});return z.apply(this,arguments)}function A(a,b,c,d,e,f){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){var i=c("qpl")._(521471755,"2586");f=(yield new(d("EchoMessageDecryptor").EchoMessageDecryptor)().decrypt(f,e,b));e=C(f,a);d("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotations({annotations:{bool:{isMatch:e}},pointName:"ls_and_non_ls_echo_msg_decryption_response_comparison",traceId:g});c("QPLUserFlow").addAnnotations(i,{bool:{does_ls_and_non_ls_echo_msg_decryption_match:e}},{instanceKey:h})});return B.apply(this,arguments)}function C(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c].value!==b[c])return!1;return!0}g.query=y;g.messageRangeQueryWithPersistence=a}),98);
__d("EBMessageRangeQueryForIndexing",["EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","EBIsEbEnabled","EBMessageRangeQueryWithPersistence","I64","LSEncryptedBackupsBackupTenancy","LSEncryptedBackupsMessagesRangeQueryDirection","LSIntEnum","LSMEBTaskCreationSource","MAWCurrentUser","MAWEncryptedBackupUtils","MAWJobDefinitions","QPLUserFlow","WABase64","WAHashStringToNumber","WAJids","WAPushSafeTypes","WAResultOrError","WATagsLogger","WorkerRelay","asyncToGeneratorRuntime","cr:9437","gkx","handleRestoreMessagesGraphQLResponse","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["graphQL range restore error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["mandatory params of client state are null"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["No client state found - unable to restore"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Calling EBLS without EBLS being available for message range query"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["GQL point query called from non-worker context"]);n=function(){return a};return a}var o=d("WATagsLogger").TAGS(["labyrinth_web","EBMessageRangeQueryForIndexing"]);function a(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("EBAPIWorkerCheck").runningInWorker()){o.ERROR(n());return d("WAResultOrError").makeError("called-from-main-thread")}d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql");a=d("WAPushSafeTypes").unsafeNotNullable(a);var e=a.chatJid,f=a.direction,g=a.sortOrderMs,p=a.source;a=a.traceId;var q=a!=null?d("WAHashStringToNumber").hashStringToNumber(a):void 0,r=c("qpl")._(521476367,"2704");try{var s;c("QPLUserFlow").start(r,{annotations:{bool:{mainThreadRestore:!1,rangeQueryForIndexing:!0,workerThreadRestore:!0},"int":{source:(s=p)!=null?s:c("LSMEBTaskCreationSource").UNKNOWN}},instanceKey:q});if(b("cr:9437")==null){o.ERROR(m());c("QPLUserFlow").endFailure(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED,{instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("ebls-not-intialized")}yield b("cr:9437").init();s=(yield b("cr:9437").getLSStorage());var t;if(c("gkx")("3713"))t=!(yield d("EBIsEbEnabled").isEbEnabledLS(s.tables));else{var u=(yield d("MAWEncryptedBackupUtils").getBackupTenancy(s.tables));t=u==null||!(h||(h=d("I64"))).equal(u,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))}if(t){c("QPLUserFlow").addPoint(r,"eb_not_enabled",{instanceKey:q});c("QPLUserFlow").endSuccess(r,{instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("eb-not-enabled")}u=(yield d("handleRestoreMessagesGraphQLResponse").getClientState(s));c("QPLUserFlow").addPoint(r,"client_state_retrieved",{data:{string:{device_id:(h||(h=d("I64"))).to_string((t=u==null?void 0:u.device_id)!=null?t:(h||(h=d("I64"))).zero)}},instanceKey:q});if(u==null){o.ERROR(l());c("QPLUserFlow").endFailure(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("no-client-state")}t=u.device_id;var v=u.locally_available_epochs,w=u.mailboxRootKey;u=u.ocmfClientStateBlob;if(t==null||w==null||u==null){o.ERROR(k());c("QPLUserFlow").endFailure(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("invalid-client-state")}var x=d("MAWCurrentUser").getAppID(),y=d("WAJids").threadIdForChatJid(e);f=f==="before"?c("LSEncryptedBackupsMessagesRangeQueryDirection").BEFORE:c("LSEncryptedBackupsMessagesRangeQueryDirection").AFTER;v={restore_context:{act_thread_id:d("MAWJobDefinitions").toThreadJidPrimaryId(y),site:"www",tam_thread_subtype:0},success:{device_context:{device_id:h.to_string(t),locally_available_epochs:v,raw_tokens:{mailbox_root_key:d("WABase64").encodeB64(w),ocmf_client_state_blob:d("WABase64").encodeB64(u)}},direction:f,include_offset:c("gkx")("5340"),server_thread_key:y}};if(g!=null){w=v.success;v.success=babelHelpers["extends"]({},w,{reference_timestamp:g});v=babelHelpers["extends"]({},v,{success:v.success})}if(p!=null){u=v.success;v.success=babelHelpers["extends"]({},u,{source:p});v=babelHelpers["extends"]({},v,{success:v.success})}c("QPLUserFlow").addPoint(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START,{instanceKey:q});w=(yield d("WorkerRelay").createWorkerQuery(d("EBMessageRangeQueryWithPersistence").query,{app_id:String((f=x)!=null?f:"0"),restore_payload_string:JSON.stringify(v),restore_type:"RANGE_QUERY_RESTORE"}));u=(yield d("EBAPISharedUtils").constructEBRestoreResponse(w,!0,r,s,q,t,y,e,p,a,g));if(u.success){d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.success");return d("WAResultOrError").makeResult(u.response)}else{d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError(u.response)}}catch(a){o.ERROR(j(),a);c("QPLUserFlow").endFailure(r,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{error:a,instanceKey:q});d("EBAPISharedUtils").bumpOdsRestoreKey("restore.request.range.search.gql.error");return d("WAResultOrError").makeError("runtime-error",a)}});return p.apply(this,arguments)}g.messageRangeQueryForIndexing=a}),98);
__d("EBUploadDeletedMessage",["EncryptedBackupsUploadQueue","I64","MAWUserJidWrapper","WAAsMessageApplication","WAJids","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.instanceKey,c=a.msgId,e=a.sender,f=a.serverTs;a=a.sortOrderMs;try{yield d("EncryptedBackupsUploadQueue").putMsgsToEbUpload([{backupDirective:{actionType:3,originalMsgProtocolId:c},instanceKey:b,messageApplication:d("WAAsMessageApplication").castToMessageApplicationBytes(new Uint8Array(0)),msgId:c,originalMsgProtocolId:c,reportingMeta:null,senderId:(h||(h=d("I64"))).of_string(d("WAJids").authorToUserId(e,d("WAJids").extractUserId(d("MAWUserJidWrapper").getMyUserJid()))),serverTs:f,sortOrderMs:a,triggerSource:"upload-deleted-message"}])}catch(a){return d("WAResultOrError").makeError("runtime-error",a)}return d("WAResultOrError").makeResult()});return i.apply(this,arguments)}g.uploadDeletedMessage=a}),98);
__d("EncryptedBackupsConvertToLegacyAttachmentContext",["MAWCastToMsgrServerMediaType","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid "," media type for legacy attachment upload"]);h=function(){return a};return a}function a(a){var b=[];for(var c=0;c<a.length;c++){var e=a[c],f=d("MAWCastToMsgrServerMediaType").castMediaAttachmentTypeToServerMediaType(e.mediaType);f==null?d("WALogger").ERROR(h(),e.mediaType):b.push({mediaObjectId:e.mediaObjectId,mediaType:f})}return b}g["default"]=a}),98);
__d("EncryptedBackupsCastToAttachmentContextMediaType",["EncryptedBackupsUploadEntity","MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid AttachmentContextMediaType: ",""]);h=function(){return a};return a}function a(a){switch(a){case d("MAWDbMedia").MEDIA_TYPE.IMAGE:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.IMAGE;case d("MAWDbMedia").MEDIA_TYPE.VIDEO:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.VIDEO;case d("MAWDbMedia").MEDIA_TYPE.PTT:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.PTT;case d("MAWDbMedia").MEDIA_TYPE.GIF:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.GIF;case d("MAWDbMedia").MEDIA_TYPE.STICKER:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.STICKER;case d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.DOCUMENT;default:a;d("WALogger").ERROR(h(),a);return d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.INVALID}}g["default"]=a}),98);
__d("EncryptedBackupsGetAttachmentContextForReceivedMsg",["EncryptedBackupsCastToAttachmentContextMediaType","EncryptedBackupsUploadEntity","WAMediaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e=new Map();if(((b=a.decodedMsg)==null?void 0:b.unstoredDbMedia)!=null){b=(b=a.decodedMsg)==null?void 0:b.unstoredDbMedia;var f=b.mediaType;b=d("WAMediaUtils").decodeMediaEntryData(b.mediaEntry);var g=b.downloadableThumbnail;b=b.objectId;g=g==null?void 0:g.objectId;f=c("EncryptedBackupsCastToAttachmentContextMediaType")(f);b!=null&&f!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(b),f);g!=null&&g!==b&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(g),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW)}if(((f=a.decodedMsg)==null?void 0:f.unstoredXMA)!=null){g=(b=a.decodedMsg)==null?void 0:b.unstoredXMA;if(g.unstoredFavicon!=null){f=d("WAMediaUtils").decodeMediaEntryData(g.unstoredFavicon.mediaEntry);a=f.objectId;a!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(a),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}if(g.unstoredHeaderMedia!=null){b=d("WAMediaUtils").decodeMediaEntryData(g.unstoredHeaderMedia.mediaEntry);f=b.objectId;f!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(f),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}if(g.unstoredAssociatedMedia!=null){a=d("WAMediaUtils").decodeMediaEntryData(g.unstoredAssociatedMedia.mediaEntry);b=a.objectId;b!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(b),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}g.unstoredPreviews!=null&&g.unstoredPreviews.length>0&&g.unstoredPreviews.forEach(function(a){a=a.mediaEntry;a=d("WAMediaUtils").decodeMediaEntryData(a);a=a.objectId;a!=null&&e.set(d("WAMediaUtils").stringToDeliveryObjectId(a),d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)})}return Array.from(e.entries()).map(function(a){var b=a[0];a=a[1];return{mediaObjectId:b,mediaType:a}})}g["default"]=a}),98);
__d("MessageBackupDirectiveGenerator",["FBLogger","I64","MAWJids","MAWMsgType","MessageBackupSupplementalKeyGenerator","WAGlobals","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){a=d("MessageBackupSupplementalKeyGenerator").createReactionSupplementalKey(a);if(a!=null)return a;throw c("FBLogger")("labyrinth_web").mustfixThrow("Failed to create reaction supplemental key")}function j(a,b){a=d("MessageBackupSupplementalKeyGenerator").createEditSupplementalKey(a,b);if(a!=null)return a;throw c("FBLogger")("labyrinth_web").mustfixThrow("Failed to create edit supplemental key")}function k(a,b){b=d("MAWJids").toUserJid((h||(h=d("I64"))).to_string(b).toString());return{actionType:2,originalMsgProtocolId:a,supplementalKey:i(b)}}function l(a,b,c){b=d("MAWJids").toUserJid((h||(h=d("I64"))).to_string(b).toString());return{actionType:2,originalMsgProtocolId:a,supplementalKey:j(b,c)}}function m(a){if(d("WAJids").isAuthorSystem(a.author))return null;if(a.reactToExternalId!=null)return{author:a.reactToAuthor===d("WAGlobals").getMyUserJid()?"@me":a.reactToAuthor,chat:a.threadJid,externalId:a.reactToExternalId};else if(a.originalMsgExternalId!=null)return{author:a.author,chat:a.threadJid,externalId:a.originalMsgExternalId};else if(a.revokedExternalId!=null)return{author:a.author,chat:a.threadJid,externalId:a.revokedExternalId};return a.externalId==null?null:{author:a.author,chat:a.threadJid,externalId:a.externalId}}function a(a){var b=(h||(h=d("I64"))).of_string(d("WAJids").authorToUserId(a.author,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()))),e=m(a);if(e==null)return null;if(a.originalMsgExternalId!=null){if(a.editTs==null){c("FBLogger")("labyrinth_web").mustfix("editTs is null for edit message during createMessageBackupDirectiveFromDbMsg");return null}return l(e,b,d("WATimeUtils").castUnixTimeToMillisTime(a.editTs))}return a.reactToExternalId!=null?k(e,b):n(e,b,a.type,null)}function n(a,b,e,f){switch(e){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return{actionType:1,originalMsgProtocolId:a};case d("MAWMsgType").MSG_TYPE.REACTION:return k(a,b);case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:if(f==null)throw c("FBLogger")("labyrinth_web").mustfixThrow("editTs is null for edit message during createMessageBackupDirective");return l(a,b,f);case d("MAWMsgType").MSG_TYPE.REVOKED:return{actionType:4,originalMsgProtocolId:a};case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return{actionType:3,originalMsgProtocolId:a};default:c("FBLogger")("labyrinth_web").mustfix("Unsupported message type %s",e);return{actionType:0,originalMsgProtocolId:a}}}g.createMessageBackupDirectiveFromDbMsg=a;g.createMessageBackupDirective=n}),98);
__d("EncryptedBackupsCreateUploadMessage",["EBAPIQPLPoints","EBGenerateMessageTags","EncryptedBackupsConvertToLegacyAttachmentContext","EncryptedBackupsGetAttachmentContextForReceivedMsg","I64","LSRequestId","MAWEBSwitch","MAWMessageSortOrderUtils","MAWMsgType","MessageBackupDirectiveGenerator","QPLUserFlow","WAAsMessageApplication","WAByteArray","WAConsumerApplication.pb","WAGlobals","WAJids","WALogger","WAMsgApplication.pb","WATimeUtils","decodeProtobuf","encodeProtobuf","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] no result or failed for incoming stanza ",""]);i=function(){return a};return a}function j(a){if(a==null)return null;var b;if(a.unstoredDbReaction!=null)return d("MAWMsgType").MSG_TYPE.REACTION;else if(a.unstoredDbEditActionMsg!=null)return d("MAWMsgType").MSG_TYPE.EDIT_ACTION;else if(a.unstoredDbMedia!=null){var c;b=a.unstoredDbMedia.mediaType;c=(c=a.unstoredDbMsg)==null?void 0:c.ephemeralSetting}else if(a.unstoredXMA!=null){var e;b=d("MAWMsgType").MSG_TYPE.XMA;c=(e=(e=a.unstoredDbMsg)==null?void 0:e.ephemeralSetting)!=null?e:(e=a.unstoredXMA.unstoredAssociatedMsg)==null?void 0:e.ephemeralSetting}else if(a.unstoredDbMsg!=null)b=a.unstoredDbMsg.type,c=a.unstoredDbMsg.ephemeralSetting;else return null;return d("MAWMsgType").isEBSupportedMsgType(b)&&!(c!=null&&c.ephemeralExpirationInSec>0)?b:null}function k(a){var b,c=a.stanza.message.decrypted.id;if(((b=a.decodedMsg)==null?void 0:b.unstoredDbReaction)!=null)return{author:a.decodedMsg.unstoredDbReaction.reactToAuthor,chat:c.chat,externalId:a.decodedMsg.unstoredDbReaction.reactToExternalId};else if(((b=a.decodedMsg)==null?void 0:b.unstoredDbEditActionMsg)!=null)return{author:c.author,chat:c.chat,externalId:a.decodedMsg.unstoredDbEditActionMsg.originalMsgExternalId};return c}function l(a){var b;return d("WAAsMessageApplication").castToMessageApplicationBytes(d("encodeProtobuf").encodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,{metadata:a.metadata,payload:{subProtocol:(b={},b[a.subprotocolType]={payload:d("WAByteArray").uint8ArrayToBuffer(a.subprotocol),version:1},b)}}).readByteArray())}function m(a){if(a.subprotocolType!=="consumerMessage")return null;a=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAConsumerApplication.pb").ConsumerApplicationSpec,a.subprotocol);if(a==null)return null;a=(a=a.payload)==null?void 0:a.content;if(a==null)return null;a=a.editMessage;return a==null||a.timestampMs==null?null:d("WATimeUtils").castLongIntToMillisTime(a.timestampMs)}function n(a){var b=a.stanza.message.decrypted.id,e=a.stanza.message.details.ts;a=c("EncryptedBackupsGetAttachmentContextForReceivedMsg")(a);var f=c("EncryptedBackupsConvertToLegacyAttachmentContext")(a),g=[];f.length>0&&f.forEach(function(a){var f=a.mediaObjectId;a=a.mediaType;g.push({deliveryObjectId:f,mediaType:a,messageId:b.externalId,productType:"msgr",threadId:d("WAJids").threadIdForChatJid(b.chat),threadJid:b.chat,traceId:c("LSRequestId").generate(),ts:e})});return{attachmentContext:a,legacyUploadAttachmentArray:g}}function a(a,b,e,f){var g=j(a.decodedMsg);if(g==null){d("WALogger").WARN(i(),a.stanza.message.decrypted.id);c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UNKNOWN_MESSAGE_TYPE,{instanceKey:f});return null}var o=a.stanza.message.decrypted.id,p=o.author,q=o.externalId,r=k(a),s=a.stanza.message.decrypted.msg;if((s==null?void 0:s.version)!=="v3"||s.type!=="subprotocol"){c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UKNOWN_MESSAGE_VERSION_OR_PROTOCOL,{instanceKey:f});return null}var t=l(s);p=(h||(h=d("I64"))).of_string(d("WAJids").authorToUserId(p,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid())));var u=a.stanza.message.details.reportingMeta,v=a.stanza.message.details.ts;a=n(a);var w=a.attachmentContext;a=a.legacyUploadAttachmentArray;var x=w.map(function(a){return d("EBGenerateMessageTags").generateEBMessageTags(a.mediaType)}).filter(Boolean);w.length>0&&c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.ADDED_ATTACHMENT_CONTEXT,{data:{"int":{attachmentCount:w.length}},instanceKey:f});a.length>0&&c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.ADDED_ATTACHMENT_CONTEXT_LEGACY,{data:{"int":{legacyAttachmentCount:a.length}},instanceKey:f});var y=!c("MAWEBSwitch").isEnabled();s=d("MessageBackupDirectiveGenerator").createMessageBackupDirective(r,p,g,g===d("MAWMsgType").MSG_TYPE.EDIT_ACTION?m(s):null);c("QPLUserFlow").addAnnotations(c("qpl")._(521477113,"2698"),{bool:{isRetroactiveUpload:y},"int":{attachmentCount:w.length,backupDirectiveType:s.actionType,legacyAttachmentCount:a.length}},{instanceKey:f});return{attachmentContext:w,backupDirective:s,dbMsgType:g,instanceKey:f,isRetroactiveUpload:y,legacyAttachmentContext:a,messageApplication:t,msgId:o,originalMsgProtocolId:r,reportingMeta:u,senderId:p,serverTs:v,sortOrderMs:(w=e)!=null?w:d("WATimeUtils").castToMillisTime(d("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder({externalId:q,serverTs:v,ts:v})),tags:x,triggerSource:(s=b)!=null?s:"unknown"}}g["default"]=a}),98);
__d("EBUploadReceivedMessages",["EBAPIQPLPoints","EncryptedBackupsCreateUploadMessage","EncryptedBackupsUploadQueue","MWEBODSEntityName.enum","MWEBODSUtils","QPLUserFlow","WAHashStringToNumber","WALogger","WAResultOrError","asyncToGeneratorRuntime","justknobx","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] error generating backup directive for received message, ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] no result or failed for incoming stanza ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.incomingMessages,e=a.msgResults;try{if(b.length===0)return d("WAResultOrError").makeResult();d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload.api.receive.process",b.length);a=b.map(function(a){var b=d("WAHashStringToNumber").hashStringToNumber(c("uuidv4")());c("QPLUserFlow").start(c("qpl")._(521477113,"2698"),{annotations:{bool:{received:!0}},instanceKey:b,timeoutInMs:c("justknobx")._("308")});try{var f=a.stanza.message.decrypted.id;f=e.get(f);if(f==null||!f.success){d("WALogger").EXPECTED_ERROR(i(),a.stanza.message.decrypted.id);c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.MESSAGE_RESULT_FAILURE_OR_NULL,{instanceKey:b});return null}f=c("EncryptedBackupsCreateUploadMessage")(a,"upload-received-messages",void 0,b);f==null?c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATION_FAILURE,{instanceKey:b}):c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATED,{instanceKey:b});return f}catch(a){d("WALogger").ERROR(h(),a);c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.RUNTIME_ERROR,{annotations:{string:{error:a.toString()}},instanceKey:b});return null}}).filter(Boolean);if(a.length===0)return d("WAResultOrError").makeResult();d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload.api.receive.enqueue",a.length);yield d("EncryptedBackupsUploadQueue").putMsgsToEbUpload(a);return d("WAResultOrError").makeResult()}catch(a){return d("WAResultOrError").makeError("runtime-exception",a)}});return j.apply(this,arguments)}g.uploadReceivedMessages=a}),98);
__d("EBUploadReceivedMessagesRevokeUtils",["EBAPIQPLPoints","EncryptedBackupsCreateUploadMessage","MAWGetMsgForProtocolMsgIdTxn","MAWMessageSortOrderUtils","QPLUserFlow","WALogger","WATimeUtils","asyncToGeneratorRuntime","gkx","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] EBUploadReceivedMessagesProtobufOnly not uploading placeholder message - Original message not found for revoked message ",""]);h=function(){return a};return a}var i=c("requireDeferred")("EBAPI").__setRef("EBUploadReceivedMessagesRevokeUtils");function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;if(((e=a.decodedMsg)==null?void 0:(e=e.unstoredDbMsg)==null?void 0:e.type)!=="Revoked"||!c("gkx")("8488"))return null;var f=a.stanza.message.decrypted.id,g=(yield d("MAWGetMsgForProtocolMsgIdTxn").getMsgForProtocolMsgIdTxn({author:f.author,chat:f.chat,externalId:a.decodedMsg.unstoredDbMsg.revokedExternalId}));if(!g.success){d("WALogger").WARN(h(),f.externalId);c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.MESSAGE_RESULT_FAILURE_OR_NULL,{instanceKey:b});return null}var j=d("WATimeUtils").castToMillisTime((e=g.value.sortOrderMs)!=null?e:d("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder({externalId:g.value.externalId,serverTs:g.value.serverTs,ts:g.value.ts}));c("gkx")("6929")&&(yield i.load().then(function(a){return a.uploadDeletedMessage({instanceKey:b,msgId:{author:f.author,chat:f.chat,externalId:g.value.externalId},sender:f.author,serverTs:(a=g.value.serverTs)!=null?a:g.value.ts,sortOrderMs:j})}));return c("EncryptedBackupsCreateUploadMessage")(a,"upload-received-messages",j,b)});return j.apply(this,arguments)}g.createRevokeUploadMsg=a}),98);
__d("EBUploadReceivedMessagesProtobufOnly",["EBAPIQPLPoints","EBUploadReceivedMessagesRevokeUtils","EncryptedBackupsCreateUploadMessage","EncryptedBackupsUploadQueue","Promise","QPLUserFlow","WAHashStringToNumber","WAResultOrError","asyncToGeneratorRuntime","justknobx","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.uploadArray;try{if(a.length===0)return d("WAResultOrError").makeResult();a=a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAHashStringToNumber").hashStringToNumber(c("uuidv4")());c("QPLUserFlow").start(c("qpl")._(521477113,"2698"),{annotations:{bool:{protobufOnly:!0,received:!0}},instanceKey:b,timeoutInMs:c("justknobx")._("308")});try{var e;e=((e=a.decodedMsg)==null?void 0:(e=e.unstoredDbMsg)==null?void 0:e.type)==="Revoked"?d("EBUploadReceivedMessagesRevokeUtils").createRevokeUploadMsg(a,b):c("EncryptedBackupsCreateUploadMessage")(a,"upload-received-messages",void 0,b);e==null?c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATION_FAILURE,{instanceKey:b}):c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATED,{instanceKey:b});return e}catch(a){c("QPLUserFlow").endFailure(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_PAYLOAD_CREATION_FAILURE,{annotations:{string:{error:a.message}},instanceKey:b});return null}});return function(b){return a.apply(this,arguments)}}());a=(yield (h||(h=b("Promise"))).all(a));a=a.filter(Boolean);if(a.length===0)return d("WAResultOrError").makeResult();yield d("EncryptedBackupsUploadQueue").putMsgsToEbUpload(a);return d("WAResultOrError").makeResult()}catch(a){return d("WAResultOrError").makeError("runtime-exception",a)}});return i.apply(this,arguments)}g.uploadReceivedMessagesProtobufOnly=a}),98);
__d("MAWGetAllMediaIdsForXMAMsgApi",["MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWTransactionMode"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWIndexedDb").makeMsgrTransactor({xma:d("MAWTransactionMode").READONLY},"getAllMediaIdsForXMAMsg",function(a){return function(b){var c=new Map();b=b.map(function(b){return d("MAWDbXMATxns").maybeGetXMAFromProtocolMsgId(a,b).then(function(a){var d,e=(d=c.get(b))!=null?d:new Set();a!=null&&(a.faviconMediaId!=null&&e.add(a.faviconMediaId),a.headerMediaId!=null&&e.add(a.headerMediaId),a.previewMediaIds!=null&&a.previewMediaIds.forEach(function(a){return e.add(a)}));c.set(b,e)})});return d("MAWDexieTable").dexieAll(b).then(function(a){return c})}});g.getAllMediaIdsForXMAMsg=a}),98);
__d("EncryptedBackupsGetAttachmentContextForSentMsgXMA",["EncryptedBackupsUploadEntity","MAWDbMediaTxns","MAWGetAllMediaIdsForXMAMsgApi","MAWIndexedDb","MAWTransactionMode","WAMediaUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MAWIndexedDb").makeMsgrTransactor({media:d("MAWTransactionMode").READONLY},"bulkGetRetroactiveMedia",function(a){return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d("MAWDbMediaTxns").bulkGetMedias.apply(void 0,[a].concat(c))}});function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("MAWGetAllMediaIdsForXMAMsgApi").getAllMediaIdsForXMAMsg([a]).then(function(b){b=b.get(a);return b!=null?h(Array.from(b)):[]}));return c.filter(Boolean).flatMap(function(a){var c=b.msgId!=null?a==null?void 0:a.mediaEntries.get(b.msgId):null;c=c!=null?d("WAMediaUtils").decodeMediaEntryData(c):null;var e=[];(c==null?void 0:c.objectId)!=null&&a.mediaType!=null&&e.push({mediaObjectId:c.objectId,mediaType:d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA});c=c==null?void 0:(a=c.downloadableThumbnail)==null?void 0:a.objectId;c!=null&&e.push({isPreview:!0,mediaObjectId:d("WAMediaUtils").stringToDeliveryObjectId(c),mediaType:d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW});return e})});return i.apply(this,arguments)}g["default"]=a}),98);
__d("EncryptedBackupsGetAttachmentContextForSentMsg",["EncryptedBackupsCastToAttachmentContextMediaType","EncryptedBackupsGetAttachmentContextForSentMsgXMA","EncryptedBackupsUploadEntity","WAMediaUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.dbMsg,e=a.isXMAMsg,f=a.media;a=a.protocolMsgIdFromArgs;if(e===!0){e=(yield c("EncryptedBackupsGetAttachmentContextForSentMsgXMA")(a,b));return e.filter(Boolean)}a=[];e=b.msgId!=null?f==null?void 0:f.mediaEntries.get(b.msgId):null;b=e!=null?d("WAMediaUtils").decodeMediaEntryData(e):null;if(f==null||b==null)return[];if(b.objectId!=null&&f.mediaType!=null){a.push({mediaObjectId:b.objectId,mediaType:c("EncryptedBackupsCastToAttachmentContextMediaType")(f.mediaType)});f=(e=b.downloadableThumbnail)==null?void 0:e.objectId;f!=null&&a.push({mediaObjectId:d("WAMediaUtils").stringToDeliveryObjectId(f),mediaType:d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW})}return a});return h.apply(this,arguments)}g["default"]=a}),98);
__d("EncryptedBackupsGetAttachmentContextForSentMsgV2",["EncryptedBackupsCastToAttachmentContextMediaType","EncryptedBackupsUploadEntity","WAMediaUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){var f=new Map(),g=[],h=a.msgId;if(b!=null){a=h!=null?b.mediaEntries.get(h):null;a=a!=null?d("WAMediaUtils").decodeMediaEntryData(a):null;b=c("EncryptedBackupsCastToAttachmentContextMediaType")(b.mediaType);if((a==null?void 0:a.objectId)!=null&&b!=null){var i=a.objectId;f.set(i,b)}b=a==null?void 0:(i=a.downloadableThumbnail)==null?void 0:i.objectId;b!=null&&f.set(b,d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW)}if(e!=null){if(e.favicon!=null){a=e.favicon.objectId;a!=null&&f.set(a,d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}if(e.header!=null){i=e.header.objectId;i!=null&&f.set(i,d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}e.previews!=null&&e.previews.length>0&&e.previews.forEach(function(a){a=a.mediaEntries;a=h!=null?a.get(h):null;a=a!=null?d("WAMediaUtils").decodeMediaEntryData(a):null;if((a==null?void 0:a.objectId)!=null){a=a.objectId;f.set(a,d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA)}})}f.forEach(function(a,b){g.push({mediaObjectId:b,mediaType:a})});return g}g["default"]=a}),98);
__d("EBUploadSentMessage",["EBAPIQPLPoints","EBEnableUnifiedAttachment","EBGenerateMessageTags","EBUnifyLegacyMediaUpload","EncryptedBackupsConvertToLegacyAttachmentContext","EncryptedBackupsGetAttachmentContextForSentMsg","EncryptedBackupsGetAttachmentContextForSentMsgV2","EncryptedBackupsUploadQueue","I64","LSRequestId","MAWEBSwitch","MAWMessageSortOrderUtils","MAWMsgType","MWEBODSEntityName.enum","MWEBODSUtils","MessageBackupDirectiveGenerator","QPLUserFlow","WAFrankingTypes","WAGenReportingMeta","WAGlobals","WAHashStringToNumber","WAJids","WALogger","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime","gkx","justknobx","qpl","requireDeferred","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendWrittenMsg adding message "," attachments to EB upload queue"]);i=function(){return a};return a}var j=c("requireDeferred")("EBAPI").__setRef("EBUploadSentMessage");function k(a){if(a.reactToExternalId!=null)return d("MAWMsgType").MSG_TYPE.REACTION;else if(a.editMsgHistoryId!=null)return d("MAWMsgType").MSG_TYPE.EDIT_ACTION;else if(a.type==null)return null;else return d("MAWMsgType").isEBSupportedMsgType(a.type)&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)?a.type:null}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.dbMsg,e=a.isXMAMsg;e=e===void 0?!1:e;var f=a.media,g=a.messageApplication,l=a.messageApplicationBytes,m=a.protocolMsgId,n=a.serverTs,o=a.triggerSource;o=o===void 0?"upload-sent-message":o;a=a.xmaPayload;var p=d("WAHashStringToNumber").hashStringToNumber(c("uuidv4")()),q=c("qpl")._(521477113,"2698");d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload.api.sent.process",1);try{if(d("WAJids").isAuthorSystem(b.author))return d("WAResultOrError").makeResult();c("QPLUserFlow").start(q,{annotations:{bool:{received:!1}},instanceKey:p,timeoutInMs:c("justknobx")._("308")});var r=k(b);if(r==null){c("QPLUserFlow").endFailure(q,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UNSUPPORTED_MESSAGE_TYPE,{instanceKey:p});return d("WAResultOrError").makeError("Unsupported EB upload message type")}var s=d("MessageBackupDirectiveGenerator").createMessageBackupDirectiveFromDbMsg(b);if(s==null){c("QPLUserFlow").endFailure(q,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UNABLE_TO_CREATE_BACKUP_DIRECTIVE,{instanceKey:p});return d("WAResultOrError").makeError("Unable to create backup directive")}g=g==null?void 0:g.metadata;var t=[];d("EBUnifyLegacyMediaUpload").getEnableUnifyLegacyMediaUpload()||d("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()?t=c("EncryptedBackupsGetAttachmentContextForSentMsgV2")(b,f,a):t=(yield c("EncryptedBackupsGetAttachmentContextForSentMsg")({dbMsg:b,isXMAMsg:e,media:f,protocolMsgIdFromArgs:m}));d("WALogger").LOG(i(),(a=t)==null?void 0:a.length);e=(yield d("WAGenReportingMeta").genReportingMeta(l,(g==null?void 0:g.frankingKey)?d("WAFrankingTypes").castToFrankingKey(new Uint8Array(g==null?void 0:g.frankingKey)):null,g==null?void 0:g.frankingVersion));f=c("EncryptedBackupsConvertToLegacyAttachmentContext")(t);var u=[];a=t.map(function(a){return d("EBGenerateMessageTags").generateEBMessageTags(a.mediaType)}).filter(Boolean);f.length>0&&f.forEach(function(a){var e=a.mediaObjectId;a=a.mediaType;u.push({deliveryObjectId:e,mediaType:a,messageId:m.externalId,productType:"msgr",threadId:d("WAJids").threadIdForChatJid(m.chat),threadJid:b.threadJid,traceId:c("LSRequestId").generate(),ts:n})});t.length>0&&c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.ADDED_ATTACHMENT_CONTEXT);u.length>0&&c("QPLUserFlow").addPoint(c("qpl")._(521477113,"2698"),d("EBAPIQPLPoints").EBUploadQueueQPLPoints.ADDED_ATTACHMENT_CONTEXT_LEGACY);g=!c("MAWEBSwitch").isEnabled();var v=d("WATimeUtils").castToMillisTime((f=b.sortOrderMs)!=null?f:d("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder({externalId:m.externalId,originalTs:b.originalTs,revokedExternalId:b.revokedExternalId,serverTs:n,ts:n}));c("QPLUserFlow").addAnnotations(c("qpl")._(521477113,"2698"),{bool:{isRetroactiveUpload:g},"int":{attachmentCount:t.length,backupDirectiveType:s.actionType,legacyAttachmentCount:u.length}},{instanceKey:p});d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload.api.sent.enqueue",1);yield d("EncryptedBackupsUploadQueue").putMsgsToEbUpload([{attachmentContext:t,backupDirective:s,dbMsgType:r,instanceKey:p,isRetroactiveUpload:g,legacyAttachmentContext:u,messageApplication:l,msgId:m,originalMsgProtocolId:s.originalMsgProtocolId.externalId!==m.externalId?s.originalMsgProtocolId:m,reportingMeta:e,senderId:(h||(h=d("I64"))).of_string(d("WAJids").authorToUserId(m.author,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()))),serverTs:n,sortOrderMs:v,tags:a,triggerSource:o}]);c("gkx")("6929")&&b.type===d("MAWMsgType").MSG_TYPE.REVOKED&&b.originalMsgExternalId==null&&b.reactToExternalId==null&&(c("QPLUserFlow").addPoint(q,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.UPLOAD_DELETED_MESSAGE,{instanceKey:p}),yield j.load().then(function(a){return a.uploadDeletedMessage({instanceKey:p,msgId:{author:m.author,chat:b.threadJid,externalId:b.revokedExternalId},sender:b.author,serverTs:(a=(a=b.originalTs)!=null?a:b.serverTs)!=null?a:b.ts,sortOrderMs:v})}));return d("WAResultOrError").makeResult()}catch(a){c("QPLUserFlow").endFailure(q,d("EBAPIQPLPoints").EBUploadQueueQPLPoints.RUNTIME_ERROR,{instanceKey:p});return d("WAResultOrError").makeError("runtime-error",a)}});return l.apply(this,arguments)}g.uploadSentMessage=a}),98);
__d("EchoSerializationFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5722");b=d("FalcoLoggerInternal").create("echo_serialization_failure",a);e=b;g["default"]=e}),98);
__d("EchoSerializationSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5723");b=d("FalcoLoggerInternal").create("echo_serialization_success",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupTaskSkippedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5727");b=d("FalcoLoggerInternal").create("encrypted_backup_task_skipped",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupsDYIHandleMessageRestore",["EncryptedBackupsDYISingleton","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Issuing next range query for thread with thread key ",", server generated next reference timestamp: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["nextTimestampMs was not supplied for thread with thread key ","."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handling message range query for thread with thread key ",", hasMoreBefore: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread key for thread id: ",""]);l=function(){return a};return a}function a(a,b,c,e,f,g,n){var o=d("EncryptedBackupsDYISingleton").getSingleton(),p=o.getLogger();o=o.getThreadKeyForThreadId(b);if(o==null){p.WARN(l(),b);return}void p.LOG(k(),b,e);c.length>0&&g(o,b,c);if(!e||f==null){e&&f==null&&void p.ERROR(j(),b);m(o);return}g=(h||(h=d("I64"))).to_string(f);void p.LOG(i(),b,g);void n(a,g,b)}function m(a){var b=d("EncryptedBackupsDYISingleton").getSingleton();b.deleteThreadKeyFromThreadsRestoreInProgress(a)}g.handleMessageRangeQueryRestore=a}),98);
__d("EncryptedBackupsDYIMediaDownloadHandlers",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYISingleton","FBLogger","Promise","WAResultOrError","asyncToGeneratorRuntime","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){f=(yield d("EncryptedBackupsDYIFileUtils").getMediaFolderHandle());b=b.split("/")[1];b=c("uuidv4")()+"."+b;yield d("EncryptedBackupsDYIFileUtils").writeFile(f,b,e);f=d("EncryptedBackupsDYISingleton").getSingleton();f.setMediaUrlByPlainTextHash(a,d("EncryptedBackupsDYIFileUtils").DyiMediaFolder+"/"+b);f.deletePlaintextHashFromAttachmentDownloadsInProgress(a);return d("WAResultOrError").makeResult()});return function(b,c,d,e){return a.apply(this,arguments)}}();e=function(){c("FBLogger")("labyrinth_web").debug("[DYIMediaPreviewHandler] Skipping previews for DYI");return(h||(h=b("Promise"))).resolve(d("WAResultOrError").makeResult())};g.DYIMediaDownloadHandler=a;g.DYIMediaPreviewHandler=e}),98);
__d("EncryptedBackupsDYIMessageProcessingUtils",["EncryptedBackupsDYIMediaDownloadHandlers","EncryptedBackupsDYISingleton","MebWAMediaDownloader","Promise","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Failed to resign CDN URL: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Media CDN URL has expired and should be renewed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Successfully downloaded media"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Failed to download media"]);l=function(){return a};return a}function a(a,b){return{isUnsent:!1,media:new Set(),reactions:[],senderName:m(a),text:"",timestamp:(a=b)!=null?a:0,type:""}}function m(a){var b=d("EncryptedBackupsDYISingleton").getSingleton(),c="Unknown User";if(a!=null){b=b.getContactNameForContactId(a);b!=null&&(c=b)}return c}function c(a,c,e,f,g,m,n,o,p,q,r){var s=d("EncryptedBackupsDYISingleton").getSingleton(),t=s.getLogger(),u={author:d("WAJids").toMsgrUserJid(n),chat:d("WAJids").toMsgrUserJid(g),externalId:o},v={hash:p,isUrlRenewed:!1,mediaEntry:f,protocolMsgId:u,sortOrderMs:q};n={onDownloadError:function(){void t.ERROR(l(),v.hash);s.deletePlaintextHashFromAttachmentDownloadsInProgress(v.hash);return(h||(h=b("Promise"))).resolve()},onDownloadSuccess:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){void t.LOG(k(),v.hash);var b=a.mimeType;a=a.plaintext;yield d("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(v.hash,b,a,u)});function c(b){return a.apply(this,arguments)}return c}(),onUrlExpired:function(){void t.LOG(j(),v.hash);return(h||(h=b("Promise"))).resolve()}};var w=new(d("MebWAMediaDownloader").MebWAMediaDownloader)(v,n,a),x=f.serverMediaType;f=f.objectId;if(x!=null&&f!=null&&typeof q==="number"){c={backupEntFbid:c,deliveryObjectId:f,hash:p,mediaType:x,messageId:o,productType:e,sortOrder:q,threadId:g,threadKey:m};f={onResignCdnUrlFailure:function(a){void t.ERROR(i(),v.hash,a.message);s.deletePlaintextHashFromAttachmentDownloadsInProgress(v.hash);return(h||(h=b("Promise"))).resolve()},onResignCdnUrlSuccess:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){});function c(){return a.apply(this,arguments)}return c}()};p=r(c,f);w.setNextHandler(p);p.setNextHandler(new(d("MebWAMediaDownloader").MebWAMediaDownloader)(v,n,a))}void w.handle()}g.buildBaseDyiMessage=a;g.getSenderName=m;g.startMediaDownloadChain=c}),98);
__d("LSCreateDataTrace",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(153).add({traceId:a[0],initTimestampMs:c[0],traceType:a[4],shouldFlush:!1,contextOne:a[1],contextTwo:a[2],contextThree:a[3]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSDataTraceCreateDataTraceStoredProcedure";a.__tables__=["data_trace_meta"];e.exports=a}),null);
__d("LSCreateDataTraceID.nop",["LSRequestId","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d){return(h||(h=b("Promise"))).resolve(c("LSResult")(c("LSRequestId").generate()))};g["default"]=a}),98);
__d("LSIssueAttachmentRestoreTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSBase64Encode.nop","LSBinaryToHex.nop","LSCreateDataTrace","LSCreateDataTraceID.nop","LSCreateDerivedKeys.nop","LSFindBackup","LSFlushDataTrace.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIsMobileClient","LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] Beginning execution."),a[7]!==void 0?c.resolve(d[1]=a[7]):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))&&c.i64.eq(a.backupTenancy,c.i64.cast([0,2]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){b=a.done;a=a.value;return b?d[27]=!1:(a.item,d[27]=!0)})},function(a){return d[27]?d[29]=c.i64.or_(c.i64.cast([0,82]),c.i64.cast([0,128])):d[29]=c.i64.cast([0,82]),c.sequence([function(a){return c.nativeOperation(b("LSCreateDataTraceID.nop")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.sequence([function(a){return d[35]="EncryptedBackups MCD Trace ID",d[36]=c.i64.to_string(d[29]),d[34]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils] ",d[34],d[35],d[34],d[36]].join("")),c.resolve()},function(a){return c.storedProcedure(b("LSCreateDataTrace"),d[31],void 0,void 0,"media_restore",d[29])}])},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[32]?d[33]=!0:d[33]=!1,d[33]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[34]=c.createArray(),void 0!==void 0?d[35]=(d[34].push(void 0),d[34]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[34],c.i64.cast([0,3]))):c.resolve()},function(a){return d[30]=d[31]}])},function(a){return d[1]=d[30]}])},function(a){return c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,1829]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[27]=a[0],a})},function(a){return d[27]?d[28]=!0:d[28]=!1,d[28]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[29],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(f=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,c.i64.cast([0,20]),void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],d[9]=f[7],d[10]=f[8],d[11]=f[9],d[12]=f[10],d[13]=f[11],d[14]=f[12],d[15]=f[13],d[16]=f[14],d[17]=f[15],d[18]=f[16],f):(e=a.item,c.sequence([function(a){return d[32]=e.backupTenancy,d[31]=e.encryptionVersion,d[27]=void 0,c.i64.neq(d[27],void 0)?c.resolve(d[28]=d[27]):c.sequence([function(a){return d[33]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[43]=(d[33].push(c.i64.cast([0,0])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[43]=(d[33].push(c.i64.cast([0,2])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[43]=(d[33].push(c.i64.cast([0,3])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[43]=(d[33].push(c.i64.cast([0,4])),d[33]):0,d[38]=c.createArray(),d[39]=c.i64.of_int32(d[33].length),c.i64.gt(d[39],c.i64.cast([0,0]))?c.loopAsync(d[39],function(a){return d[43]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],d[43]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],a})},function(a){return d[46]=(d[38].push(d[44]),d[38])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[43]=c.createArray(),d[44]=c.i64.of_int32(d[38].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.loopAsync(d[44],function(a){return d[46]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[38],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=(d[43].push(c.i64.to_string(d[47])),d[43])}])}):c.resolve()},function(a){return d[45]=d[43].join(","),d[40]=d[45]}])},function(a){return d[38].some(function(a){return c.i64.eq(d[31],a)})?d[41]=d[31]:d[41]=void 0,c.i64.neq(d[41],void 0)?d[42]=d[41]:d[42]=void 0,d[28]=d[42]}])},function(a){return c.i64.neq(d[28],void 0)?d[29]=d[28]:d[29]=c.i64.cast([0,0]),c.i64.neq(d[32],void 0)?d[30]=d[32]:d[30]=c.i64.cast([0,1]),a=[e.backupId,e.deviceId,e.mailboxRootKeyBlob,e.ocmfClientStateBlob,void 0,void 0,d[29],d[30],e.epochAuthPublicKeyBlob,e.epochAuthPrivateKeyBlob,e.devicePublicKeyBlob,e.devicePrivateKeyBlob,e.epochStoragePublicKeyBlob,e.epochStoragePrivateKeyBlob,e.obliviousValidationTokenBlob,e.authorityLevel,void 0],d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],d[6]=a[4],d[7]=a[5],d[8]=a[6],d[9]=a[7],d[10]=a[8],d[11]=a[9],d[12]=a[10],d[13]=a[11],d[14]=a[12],d[15]=a[13],d[16]=a[14],d[17]=a[15],d[18]=a[16],a}]))})},function(a){return c.storedProcedure(b("LSFindBackup")).then(function(a){return a=a,d[20]=a[0],a})},function(e){return c.blobs.neq(d[5],void 0)?c.i64.neq(d[3],void 0)?d[20]!==void 0?c.blobs.neq(d[4],void 0)?c.sequence([function(e){return d[27]=c.createArray(),d[34]=(d[27].push(d[20]),d[27]),d[34]=(d[27].push(a[1]),d[27]),d[28]=c.toJSON(d[27]),d[29]=c.createArray(),d[34]=(d[29].push(c.i64.cast([0,32])),d[29]),c.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",a[5]].join("")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[30],void 0,d[4],d[29]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return d[31]?d[32]=!1:d[32]=!0,d[32]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),d[34]=c.createArray(),void 0!==void 0?d[35]=(d[34].push(void 0),d[34]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",d[34],c.i64.cast([0,3]))},function(a){return d[33]=void 0}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[31],c.i64.cast([0,0])).then(function(a){return a=a,d[34]=a[0],d[35]=a[1],a})},function(a){return d[33]=d[34]}])},function(e){return c.blobs.neq(d[33],void 0)?c.sequence([function(e){return c.i64.neq(a[9],void 0)?d[34]=a[9]:d[34]=c.i64.cast([-1,4294967295]),c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[6]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[33],d[36],c.i64.cast([0,16])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[37]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[28]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2NvcGU="),d[39]).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[40]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[20]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[43]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[44]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[47]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[48]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[49]).then(function(a){return a=a,d[50]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[4]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[51]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[52]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[53]).then(function(a){return a=a,d[54]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[57]).then(function(a){return a=a,d[58]=a[0],a})},function(e){return d[59]=new c.Map(),d[59].set("attachment_index_key",d[42]==null?"":d[42]),d[59].set("backup_ent_fbid",a[0]),d[59].set("delivery_object_id",a[1]),d[59].set("device_id",d[3]),d[59].set("mailbox_partial_id",d[46]==null?"":d[46]),d[59].set("media_type",a[3]),d[59].set("message_partial_id",d[50]==null?"":d[50]),d[59].set("product_type",a[2]),d[59].set("salt_partial_id",d[54]==null?"":d[54]),d[59].set("sort_key",d[38]==null?"":d[38]),d[59].set("thread_partial_id",d[58]==null?"":d[58]),d[59].set("trace_id",d[1]),d[59].set("source",d[34]),d[60]=new c.Map(),d[60].set("otid",a[4]),d[60].set("server_thread_key",a[8]),d[60].set("timestamp",c.i64.to_string(a[6])),c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[62]=a[0],a})},function(e){return d[63]=new c.Map(),d[63].set("ocmf_client_state_blob",d[61]==null?"":d[61]),d[63].set("mailbox_root_key",d[62]==null?"":d[62]),d[64]=c.createArray(),d[76]=(d[64].push(a[4]),d[64]),d[76]=(d[64].push(a[1]),d[64]),d[65]=c.toJSON(d[64]),d[59].set("raw_identifiers",d[60]),d[59].set("backup_id",d[20]),d[59].set("thread_id",a[5]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[65]).then(function(a){return a=a,d[66]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF90b2tlbl9zYWx0X3Njb3Bl"),d[66]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[67]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[68]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[59].set("salt_partial_access_token",d[69]==null?"":d[69]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[28]).then(function(a){return a=a,d[70]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("YXR0YWNobWVudF9rZXlfc2FsdF9zY29wZQ=="),d[70]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[5],d[71]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[72]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[59].set("salt_partial_attachment_index_key",d[73]==null?"":d[73]),d[59].set("raw_tokens",d[63]),d[74]=c.toJSON(d[59]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_attachment_restore",c.i64.cast([0,50020]),d[74],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),d[1],c.i64.cast([0,0])).then(function(a){return a=a,d[75]=a[0],a})}]):(d[34]="OPE key is null for IssueAttachmentRestoreTask",d[34]!==void 0?c.sequence([function(a){return d[36]=["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[34]].join(""),function(a){c.logger(a).mustfix(a)}(d[36]),d[35]=c.createArray(),d[1]!==void 0?d[37]=(d[35].push(d[1]),d[35]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[34],d[35],c.i64.cast([0,3]))},function(a){return c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),d[36],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[39]?d[40]=!0:d[40]=!1,d[40]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[41]=c.createArray(),void 0!==void 0?d[42]=(d[41].push(void 0),d[41]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[41],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[38]=!0:d[38]=!1,d[38]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[39]=c.createArray(),void 0!==void 0?d[40]=(d[39].push(void 0),d[39]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[39],c.i64.cast([0,3]))):c.resolve()}])}]):c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[38]=!0:d[38]=!1,d[38]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[39]=c.createArray(),void 0!==void 0?d[40]=(d[39].push(void 0),d[39]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[39],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[36]=!0:d[36]=!1,d[36]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[37]=c.createArray(),void 0!==void 0?d[38]=(d[37].push(void 0),d[37]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[37],c.i64.cast([0,3]))):c.resolve()}]))}]):(d[27]="Missing mailbox_root_key for IssueAttachmentRestoreTask",d[27]!==void 0?c.sequence([function(a){return d[29]=["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[27]].join(""),function(a){c.logger(a).mustfix(a)}(d[29]),d[28]=c.createArray(),d[1]!==void 0?d[30]=(d[28].push(d[1]),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[27],d[28],c.i64.cast([0,3]))},function(a){return c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),d[29],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[32]?d[33]=!0:d[33]=!1,d[33]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[34]=c.createArray(),void 0!==void 0?d[35]=(d[34].push(void 0),d[34]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[34],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()}])}]):c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[28]?d[29]=!0:d[29]=!1,d[29]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[30],c.i64.cast([0,3]))):c.resolve()}])):(d[27]="Missing backup_id for IssueAttachmentRestoreTask",d[27]!==void 0?c.sequence([function(a){return d[29]=["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[27]].join(""),function(a){c.logger(a).mustfix(a)}(d[29]),d[28]=c.createArray(),d[1]!==void 0?d[30]=(d[28].push(d[1]),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[27],d[28],c.i64.cast([0,3]))},function(a){return c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),d[29],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[32]?d[33]=!0:d[33]=!1,d[33]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[34]=c.createArray(),void 0!==void 0?d[35]=(d[34].push(void 0),d[34]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[34],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()}])}]):c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[28]?d[29]=!0:d[29]=!1,d[29]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[30],c.i64.cast([0,3]))):c.resolve()}])):(d[27]="Missing device_id for IssueAttachmentRestoreTask",d[27]!==void 0?c.sequence([function(a){return d[29]=["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[27]].join(""),function(a){c.logger(a).mustfix(a)}(d[29]),d[28]=c.createArray(),d[1]!==void 0?d[30]=(d[28].push(d[1]),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[27],d[28],c.i64.cast([0,3]))},function(a){return c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),d[29],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[32]?d[33]=!0:d[33]=!1,d[33]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[34]=c.createArray(),void 0!==void 0?d[35]=(d[34].push(void 0),d[34]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[34],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()}])}]):c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[28]?d[29]=!0:d[29]=!1,d[29]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[30],c.i64.cast([0,3]))):c.resolve()}])):(d[27]="Missing ocmf_client_state_blob for IssueAttachmentRestoreTask",d[27]!==void 0?c.sequence([function(a){return d[29]=["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",d[27]].join(""),function(a){c.logger(a).mustfix(a)}(d[29]),d[28]=c.createArray(),d[1]!==void 0?d[30]=(d[28].push(d[1]),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",d[27],d[28],c.i64.cast([0,3]))},function(a){return c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),d[29],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[32]?d[33]=!0:d[33]=!1,d[33]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[34]=c.createArray(),void 0!==void 0?d[35]=(d[34].push(void 0),d[34]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[34],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()}])}]):c.sequence([function(a){return d[1]!==void 0?c.sequence([function(a){return d[1]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[1],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[1]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),d[1]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[28]?d[29]=!0:d[29]=!1,d[29]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[30],c.i64.cast([0,3]))):c.resolve()}]))},function(a){return d[21]=c.i64.of_float(Date.now()),d[22]=c.i64.random(),d[24]="Finishing execution. Execution time: ",d[25]=c.i64.to_string(c.i64.sub(d[21],d[0])),d[26]=" ms",d[23]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure] ",d[23],d[24],d[23],d[25],d[23],d[26]].join("")),c.i64.eq(c.i64.mod_(d[22],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[27]=",",d[28]=c.createArray(),void 0!==void 0?d[29]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure",[d[24],d[27],d[25],d[27],d[26]].join(""),d[28],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueAttachmentRestoreTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSIssueAttachmentRestoreTaskStoredProcedure",["LSIssueAttachmentRestoreTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueAttachmentRestoreTask"),e.backupEntFbid,e.deliveryObjectId,e.productType,e.mediaType,e.messageId,e.threadId,e.sortOrder,e.traceId,e.serverThreadKey,e.source);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWMIMediaDownloader",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueAttachmentRestoreTaskStoredProcedure","LSMEBTaskCreationSource","MAWCastToMsgrServerMediaType","MAWLoggerUtils","MAWThreadKeyUtils","MebMIMediaDownloader","MediaDownloadMediator","Promise","WALogger","WAMediaUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){return a.apply(this,arguments)||this}var g=e.prototype;g.handle=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this,e=(yield (k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton);d("MediaDownloadMediator").mapDeliveryObjectIdToMediaDownloader(d("WAMediaUtils").stringToDeliveryObjectId(this.mediaDownloadMetadata.deliveryObjectId),this);var g=d("MAWCastToMsgrServerMediaType").castToMsgrServerMediaType(this.mediaDownloadMetadata.mediaType);if(g==null)throw c("FBLogger")("labyrinth_web").mustfixThrow("Unsupported media type");var m=d("MAWThreadKeyUtils").stringThreadKeyToString(this.mediaDownloadMetadata.threadKey),n=new(h||(h=b("Promise")))(function(a,b){window.setTimeout(function(){b(c("err")("[labyrinth_web][MIMediaDownloader] MI Media download timed out"))},2*60*1e3)}),o=d("MAWLoggerUtils").getInstanceKey();return h.race([e.runInTransaction(function(b){return c("LSIssueAttachmentRestoreTaskStoredProcedure")(c("LSFactory")(b),{backupEntFbid:(i||(i=d("I64"))).of_string(a.mediaDownloadMetadata.backupEntFbid),deliveryObjectId:a.mediaDownloadMetadata.deliveryObjectId,mediaType:g,messageId:a.mediaDownloadMetadata.messageId,productType:a.mediaDownloadMetadata.productType,serverThreadKey:m,sortOrder:i.of_float(a.mediaDownloadMetadata.sortOrder),source:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").MSGR_DYI),threadId:a.mediaDownloadMetadata.threadId,traceId:o.toString()})},"readwrite",void 0,void 0,f.id+":68"),n])["catch"](function(b){d("WALogger").ERROR(l(),b.message);return a.handleError(b)})});function e(){return a.apply(this,arguments)}return e}();return e}(c("MebMIMediaDownloader"));g.MAWMIMediaDownloader=a}),98);
__d("MAWEncryptedBackupsDYIProcessProtobufMessages",["CurrentUser","EncryptedBackupsDYIMessageProcessingUtils","EncryptedBackupsDYISingleton","MAWFrontendMediaUtils","MAWHandleEchoMediaMsgsRestoreV2","MAWHandleEchoProtobufsRestoreApi","MAWJids","MAWMIMediaDownloader","MAWMsgType","MebWAMediaDownloader","WAHashUtils","WAMediaUtils","WAStanzaUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Media message is missing encrypted hash"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Media message is missing media key"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Starting DYI media download for attachemnt with hash ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] Media message is missing media data"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Explicitly dropping "," message type"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bump message is not supported in DYI"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Protobuf] XMA message doesn't have xmaData"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Documents are not supported in DYI"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error processing protobuf: ts or messageId or senderId is null"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error processing protobuf: metadata or message type is null"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error processing protobuf. Dropping the message: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error converting protobuf to DYI format. Dropping the message"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error converting protobuf to DYI format. Dropping the message"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decoded protobuf is empty"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Processing "," protobuf messages for thread ",""]);v=function(){return a};return a}function a(a,b,e){var f=d("EncryptedBackupsDYISingleton").getSingleton(),g=f.getLogger();void g.LOG(v(),e.length,b);var h=d("MAWJids").toUserJid(c("CurrentUser").getAccountID());e.forEach(function(c){try{c=d("MAWHandleEchoProtobufsRestoreApi").decodeDecryptedMessageProtobuf(c,h,void 0,new Set(),new Set(),new Map(),new Map(),new Map(),!0);if(c==null){void g.WARN(u());return}if(c!=null&&c.metadata!=null&&c.metadata.messageId!=null){var e=d("WAStanzaUtils").toStanzaId(c.metadata.messageId);c=w(a,b,c);if(c==null){void g.WARN(t());return}f.setMessagesByThreadKey(a,e,c)}else{void g.WARN(s());return}}catch(a){void g.ERROR(r(),a);return}})}function w(a,b,c){var e=d("EncryptedBackupsDYISingleton").getSingleton(),f=e.getLogger(),g=c.metadata,h=c.msgType,i=c.sortOrderMs;if(g==null||h==null){void f.WARN(q());return}h=g.messageId;var j=g.senderId;g=g.timestampMs;if(g==null||typeof g!=="number"||h==null||j==null){void f.WARN(p());return}h=d("WATimeUtils").castMilliSecondsToUnixTime(g);g=d("EncryptedBackupsDYIMessageProcessingUtils").buildBaseDyiMessage(j,i);j=(j=c.decodedPayload)==null?void 0:j.text;if(c.editMsgData.length>0){var k=h;c.editMsgData.forEach(function(a){var b;if(a.ts>k&&((b=a.editMsgContent.message)==null?void 0:b.text)!=null){k=a.ts;j=(b=a.editMsgContent.message)==null?void 0:b.text}})}c.reactionData.length>0&&(g.reactions=c.reactionData.map(function(a){var b=a.reaction;a=a.senderId;return{actor:(a=e.getContactNameForContactId(a))!=null?a:"unknown",reaction:(a=b.text)!=null?a:"unknown"}}));switch(c.msgType){case d("MAWMsgType").MSG_TYPE.TEXT:g.type="text";g.text=j||"";break;case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.PTT:g.type="media";g.text=j||"";g=y(a,b,c,i,g);break;case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:void f.WARN(o());return;case d("MAWMsgType").MSG_TYPE.XMA:g.type="link";if(c.xmaData==null){void f.WARN(n());return}g.text=((h=c.xmaData)==null?void 0:h.ctas.map(function(a){return a.nativeUrl}).filter(Boolean).join("\n"))||"";break;case d("MAWMsgType").MSG_TYPE.REVOKED:g.type="placeholder";g.isUnsent=!0;g.text="User unsent a message";break;case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:g.type="poll";g.text=x(c);break;case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:void f.WARN(m());return;default:void f.LOG(l(),c.msgType);return}return g}function x(a){a=a.groupPollInfo;return a==null?"":"Question: "+a.name+"\nOptions:\n"+a.options.map(function(a){return"- "+a.optionName}).join("\n")}function y(a,b,c,e,f){var g,l=d("EncryptedBackupsDYISingleton").getSingleton(),m=l.getLogger();if(c.mediaMetadata==null){void m.WARN(k());return f}var n=c.mediaMetadata,o=n.attachmentObjectId,p=n.backupEntFbid,q=n.directPath,r=n.encryptedHash,s=n.filename,t=n.mediaContentType,u=n.mediaKey,v=n.mediaKeyTimestamp,w=n.plaintextHash;n=n.size;g=(g=(g=c.metadata)==null?void 0:g.senderId)!=null?g:"0";c=d("WAStanzaUtils").toStanzaId(c.externalId);w=d("WAHashUtils").stringToPlaintextHash(w);t=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(t||"");t=t.serverMediaType;f.media.add(w);if(!l.isAttachmentDownloadInProgressForPlaintextHash(w)&&!l.isAttachmentDownloadCompleteForPlaintextHash(w)){void m.LOG(j(),d("WAHashUtils").sanitisePlaintextHash(w));l.addPlaintextHashToAttachmentDownloadsInProgress(w);if(u==null){m.ERROR(i());return f}if(r==null){m.ERROR(h());return f}l=d("MAWHandleEchoMediaMsgsRestoreV2").constructMediaEntry(w,r,u,q,v,t,s,p,o,null,n);m=d("WAMediaUtils").decodeMediaEntryData(l);void d("EncryptedBackupsDYIMessageProcessingUtils").startMediaDownloadChain(d("MebWAMediaDownloader").MebWADownloadMediaThroughTheBridge,"-8","msgr",m,b,a,g,c,w,e,function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return babelHelpers.construct(d("MAWMIMediaDownloader").MAWMIMediaDownloader,b)})}return f}g.processEBProtobufMessagesForDYI=a}),98);
__d("MAWEncryptedBackupsDYIHandleMessageRestore",["EncryptedBackupsDYIHandleMessageRestore","I64","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueMessageRangeQueryTaskStoredProcedure","LSMEBTaskCreationSource","MAWEBRestoreTrackingUtils","MAWEncryptedBackupsDYIProcessProtobufMessages","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("LSIntEnum")).ofNumber(c("LSMEBTaskCreationSource").MSGR_DYI),l=c("justknobx")._("467"),m=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){d("MAWEBRestoreTrackingUtils").markEBRestoreDYI(c("LSMEBTaskCreationSource").MSGR_DYI),yield a.runInTransaction(function(a){return c("LSIssueMessageRangeQueryTaskStoredProcedure")(c("LSFactory")(a),{isPointQuery:!1,newerNumMessages:(i||(i=d("I64"))).zero,numMessages:i.of_int32(l),source:k,startSortKey:b,threadId:e})},"readwrite",void 0,void 0,f.id+":39")});return function(b,c,d){return a.apply(this,arguments)}}();function a(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton);void d("EncryptedBackupsDYIHandleMessageRestore").handleMessageRangeQueryRestore(f,a,b,c,e,d("MAWEncryptedBackupsDYIProcessProtobufMessages").processEBProtobufMessagesForDYI,m)});return n.apply(this,arguments)}g.taskCreationSource=k;g.MESSENGER_DYI_BATCH_SIZE=l;g.handleMAWProtobufMessageRangeQueryRestore=a}),98);
__d("MAWRestoreProtobufsFromEncryptedBackupsDeferred",["ExecutionEnvironment","I64","LSDatabaseSingleton","WAJobOrchestratorTypes","asyncToGeneratorRuntime","cr:10036","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("MAWRestoreProtobufsFromEncryptedBackupsNOP").__setRef("MAWRestoreProtobufsFromEncryptedBackupsDeferred");function a(a,e,f,g,l,m,n,o,p,q,r,s,t,u,v){u===void 0&&(u=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);return k.load().then(function(){var k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(k){var w;(j||(j=c("ExecutionEnvironment"))).isInWorker&&b("cr:10036")!=null?(yield b("cr:10036").init(),w=(yield b("cr:10036").getLSStorage())):w=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return w.runInTransaction(function(b){return k.call(b,a,e,f,g,l!=null?(i||(i=d("I64"))).to_float(l):0,m,n!=null?(i||(i=d("I64"))).to_float(n):(i||(i=d("I64"))).to_float((i||(i=d("I64"))).max_int),o,p,q,r,s,t,u,v)},"readwrite")});return function(a){return k.apply(this,arguments)}}())}g.call=a}),98);
__d("LSProtobufRestoreHandler",["CurrentUser","LSIntEnum","LSMEBTaskCreationSource","LSVec","MAWAsyncEBPendingQueryPromise","MAWEBRestoreTrackingUtils","MAWEBUnstoredDbMsgUtils","MAWEncryptedBackupUtils","MAWEncryptedBackupsDYIHandleMessageRestore","MAWJids","MAWJobDefinitions","MAWRestoreProtobufsFromEncryptedBackupsDeferred","Promise","WATagsLogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to restore protobufs, with error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Restoring Messenger DYI batch"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no messages but hasMoreBefore is true"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - Failed to decode protobufs, with error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - no decoded messages but hasMoreBefore is true, messages count after decryption: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Protobuf restore native op called with invalid/null protobuf payload"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["restoreProtobufs nativeop - ",""]);p=function(){return a};return a}function a(a,e,f,g,r,s,t,u,v,w,x,y,z,A){var B=null;y!=null&&(B=q(y));d("WATagsLogger").TAGS(["labyrinth_web","protobuf_restore",(y=v)!=null?y:"no_request_id"]).LOG(p(),(y=v)!=null?y:"no_request_id");d("MAWEBRestoreTrackingUtils").markEBRestoreProtobuf(z);if(f!=null)y=f;else if(e!=null)y=d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(e);else{d("WATagsLogger").TAGS(["labyrinth_web","protobuf_restore",(f=v)!=null?f:"no_request_id"]).ERROR(o());d("MAWEBRestoreTrackingUtils").markEBRestoreFail(v,!1,"invalid_protobuf_payload");return(i||(i=b("Promise"))).resolve()}d("MAWEncryptedBackupUtils").logIfDuplicateMessagesFoundInRestore(y,"protobuf_restore");if(v!=null)try{d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_start",traceId:v,type:"protobuf"});f=d("MAWJids").toUserJid(c("CurrentUser").getAccountID());f=d("MAWEBUnstoredDbMsgUtils").getUnstoredDbMsgFromProtobuf(y,a,void 0,f);if(g===!0&&f.length===0){var C;d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_decodedMessages_inconsistency",traceId:v,type:"protobuf"});e=e!=null?c("LSVec").toArray(e).length:0;d("WATagsLogger").TAGS(["labyrinth_web","protobuf_restore",(C=v)!=null?C:"no_request_id"]).ERROR(n(),e)}d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryIfPresent(v,{echoMessages:B,hasMoreAfter:s,hasMoreBefore:g,isPointQuery:u,messages:f,nextMessageTimestampMsBefore:r,protobufMessages:y,referenceTimestamp:w,requestId:v,restoreType:"protobuf",threadId:a})}catch(a){d("WATagsLogger").TAGS(["labyrinth_web","protobuf_restore",(C=v)!=null?C:"no_request_id"]).ERROR(m(),a.message)}if(g===!0&&y.length===0){v!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_messages_inconsistency",traceId:v,type:"protobuf"});d("WATagsLogger").TAGS(["labyrinth_web","protobuf_restore",(e=v)!=null?e:"no_request_id"]).ERROR(l())}f=z!=null&&(h||(h=d("LSIntEnum"))).unwrapIntEnum(z)===c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB;if(f){v!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"search_restore_end",traceId:v,type:"protobuf"});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(v);return(i||(i=b("Promise"))).resolve()}C=z!=null&&(h||(h=d("LSIntEnum"))).unwrapIntEnum(z)===c("LSMEBTaskCreationSource").MSGR_DYI;if(C){d("WATagsLogger").TAGS(["labyrinth_web","protobuf_restore",(e=v)!=null?e:"no_request_id"]).LOG(k());void d("MAWEncryptedBackupsDYIHandleMessageRestore").handleMAWProtobufMessageRangeQueryRestore(a,y,g,r);v!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"dyi_restore_end",traceId:v,type:"protobuf"});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(v);return(i||(i=b("Promise"))).resolve()}c("promiseDone")(d("MAWRestoreProtobufsFromEncryptedBackupsDeferred").call("AdvancedCrypto",d("MAWJobDefinitions").toThreadJidPrimaryId(a),y,g,r,s,t,u,v,w,x,B,z,void 0,(f=A)!=null?f:void 0),function(){v!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_end",traceId:v,type:"protobuf"})},function(a){var b;d("WATagsLogger").TAGS(["labyrinth_web","protobuf_restore",(b=v)!=null?b:"no_request_id"]).ERROR(j(),a.message);b={string:{error:a.message}};v!=null&&d("MAWEBRestoreTrackingUtils").markEBRestoreFail(v,!1,"native_op_reject",b)});return(i||(i=b("Promise"))).resolve()}function q(a){return c("LSVec").toArray(a).map(function(a){return d("MAWJobDefinitions").toEncodedEchoMessage(a)})}g.handleProtobufRestoreHelper=a;g.convertLSEchoMessageVecToArray=q}),98);
__d("LSEBUnifiedRestoreUtils",["CurrentUser","LSIntEnum","LSMEBTaskCreationSource","LSProtobufRestoreHandler","LSVec","MAWAsyncEBPendingQueryPromise","MAWBridgeSafeActionsWorkerAndUI","MAWEBRestoreTrackingUtils","MAWEBUnstoredDbMsgUtils","MAWEncryptedBackupUtils","MAWEncryptedBackupsDYIHandleMessageRestore","MAWJids","MAWJobDefinitions","MAWRestoreProtobufsFromEncryptedBackupsDeferred","Promise","WATagsLogger","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["eb restore nativeop - Failed to restore protobufs, with error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Restoring Messenger DYI batch"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["eb restore nativeop - no messages but hasMoreBefore is true"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["eb restore native op - Failed to decode protobufs, with error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["eb restore nativeop - no decoded messages but hasMoreBefore is true, messages count after decryption: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Restore called with null payload for both echo messages and protobufs"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["starting eb restore - ",""]);p=function(){return a};return a}function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,q,r,s,t,u,v,w,x,y,z){var A;d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",(A=t)!=null?A:"no_request_id"]).LOG(p(),(A=t)!=null?A:"no_request_id");if(e==null&&w==null){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",(A=t)!=null?A:"no_request_id"]).ERROR(o());d("MAWEBRestoreTrackingUtils").markEBRestoreFail(t,!1,"invalid_restore_payload");return(i||(i=b("Promise"))).resolve()}var B=e!=null?z!=null?"mixed":"protobuf":"echo";A=[];e!=null&&A.push.apply(A,d("MAWEncryptedBackupUtils").convertLSTypesToJSTypesForRestoreJob(e));if(z||e===null){z=null;w!=null&&(z=d("LSProtobufRestoreHandler").convertLSEchoMessageVecToArray(w));if(z!=null){w=(yield d("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("convertEchoMessagesToEBProtobufs",{chatJid:y,encodedEchoMessages:z}));A.push.apply(A,w)}}d("MAWEncryptedBackupUtils").logIfDuplicateMessagesFoundInRestore(A,"protobuf_restore");if(t!=null)try{d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_start_unified",traceId:t,type:B});z=d("MAWJids").toUserJid(c("CurrentUser").getAccountID());w=d("MAWEBUnstoredDbMsgUtils").getUnstoredDbMsgFromProtobuf(A,a,void 0,z);if(f===!0&&w.length===0){d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_decodedMessages_inconsistency",traceId:t,type:B});z=e!=null?c("LSVec").toArray(e).length:0;d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",(e=t)!=null?e:"no_request_id"]).ERROR(n(),z)}d("MAWAsyncEBPendingQueryPromise").resolvePendingQueryIfPresent(t,{echoMessages:void 0,hasMoreAfter:q,hasMoreBefore:f,isPointQuery:s,messages:w,nextMessageTimestampMsBefore:g,protobufMessages:A,referenceTimestamp:u,requestId:t,restoreType:"protobuf",threadId:a})}catch(a){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",(e=t)!=null?e:"no_request_id"]).ERROR(m(),a.message)}if(f===!0&&A.length===0){t!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"hasMoreBefore_messages_inconsistency",traceId:t,type:B});d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",(z=t)!=null?z:"no_request_id"]).ERROR(l())}w=x!=null&&(h||(h=d("LSIntEnum"))).unwrapIntEnum(x)===c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB;if(w){t!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"search_restore_end",traceId:t,type:B});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(t);return(i||(i=b("Promise"))).resolve()}e=x!=null&&(h||(h=d("LSIntEnum"))).unwrapIntEnum(x)===c("LSMEBTaskCreationSource").MSGR_DYI;if(e){d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",(z=t)!=null?z:"no_request_id"]).LOG(k());void d("MAWEncryptedBackupsDYIHandleMessageRestore").handleMAWProtobufMessageRangeQueryRestore(a,A,f,g);t!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"dyi_restore_end",traceId:t,type:B});d("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(t);return(i||(i=b("Promise"))).resolve()}c("promiseDone")(d("MAWRestoreProtobufsFromEncryptedBackupsDeferred").call("AdvancedCrypto",d("MAWJobDefinitions").toThreadJidPrimaryId(a),A,f,g,q,r,s,t,u,v,void 0,x,void 0,y),function(){t!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"native_op_end_unified",traceId:t,type:B})},function(a){var b;d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",(b=t)!=null?b:"no_request_id"]).ERROR(j(),a.message);b={string:{error:a.message}};t!=null&&d("MAWEBRestoreTrackingUtils").markEBRestoreFail(t,!1,"native_op_reject_unified",b)});return(i||(i=b("Promise"))).resolve()});return q.apply(this,arguments)}g.echoProtobufConsolidatedRestoreHelper=a}),98);
__d("MAWThreadIdToChatJidMapping",["I64","MAWAsyncEBPendingQueryPromise","MAWJidUtils","ReQL","WALogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot generate ChatJid from threadKey, called from ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot find thread with serverThreadKey ",", called from ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot find MI ACT mapping table entry for threadId ",", called from ",""]);k=function(){return a};return a}var l=new Map();function a(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(l.has(b))return l.get(b);var e=d("MAWAsyncEBPendingQueryPromise").getJidFromThreadId(b);if(e!=null){l.set(b,e);return e}e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange((h||(h=d("I64"))).of_string(b))));if(e==null){d("WALogger").ERROR(k(),b,c);return null}var f=e.serverThreadKey;e=e.jid;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(f)));if(a==null){d("WALogger").ERROR(j(),(h||(h=d("I64"))).to_string(f),c);return null}f=d("MAWJidUtils").LSJidtoChatJid(e,a.threadType);if(f!=null){l.set(b,f);return f}else{d("WALogger").ERROR(i(),c);return null}});return m.apply(this,arguments)}g.genChatJidFromThreadId=a}),98);
__d("LSRestoreProtobufs.nop",["LSProtobufRestoreHandler","MAWThreadIdToChatJidMapping","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p){b=null;p!=null&&(b=d("WAJids").validateChatJid(p));b==null&&(b=(yield d("MAWThreadIdToChatJidMapping").genChatJidFromThreadId(a,c,"LSRestoreProtobufs.nop")));return d("LSProtobufRestoreHandler").handleProtobufRestoreHelper(c,e,void 0,f,g,h,i,j,k,l,m,n,o,b)});function c(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSRestoreEchoBlobsHandler",["LSRestoreProtobufs.nop","LSVec","MAWBridgeSafeActionsWorkerAndUI","MAWEBRestoreTrackingUtils","MAWEncryptedBackupUtils","MAWJobDefinitions","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d,e,f,g,h,j,k,l,m,n){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i,j,k,l,m,n,o,p,q){var r=c("LSVec").toArray(f).map(d("MAWJobDefinitions").toEncodedEchoMessage);n!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"echo_to_protobuf_conversion_start",traceId:n,type:"echo"});r=(yield d("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("convertEchoMessagesToEBProtobufs",{chatJid:q,encodedEchoMessages:r}));n!=null&&d("MAWEBRestoreTrackingUtils").addQPLRestorePoint({pointName:"echo_to_protobuf_conversion_success",traceId:n,type:"echo"});yield c("LSRestoreProtobufs.nop")(a,e,m,d("MAWEncryptedBackupUtils").convertJSTypesToLSTypesForRestoreJob(r),g,i,j,k,l,n,o,"",f,p,q);return(h||(h=b("Promise"))).resolve([!0,c("LSVec").ofArray([]),c("LSVec").ofArray([])])});return i.apply(this,arguments)}g.handleEchoBlobsRestore=a}),98);
__d("LSRestoreEchoBlobs.nop",["LSRestoreEchoBlobsHandler","LSVec","MAWAsyncEBPendingQueryPromise","MAWEBRestoreTrackingUtils","MAWThreadIdToChatJidMapping","Promise","WAJids","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i,j,k,l,m,n,o,p,q,r){var s;r!=null&&(s=d("WAJids").validateChatJid(r));s==null&&(s=(yield d("MAWThreadIdToChatJidMapping").genChatJidFromThreadId(a,n,"LSRestoreEchoBlobs.nop")));if(s==null){o!=null&&d("MAWAsyncEBPendingQueryPromise").rejectPendingQueryIfPresent(o,c("err")("Cannot generate ChatJid from threadKey: "+n));d("MAWEBRestoreTrackingUtils").markEBRestoreFail(o,!1,"no_chat_jid");return(h||(h=b("Promise"))).resolve([!0,c("LSVec").ofArray([]),c("LSVec").ofArray([])])}return d("LSRestoreEchoBlobsHandler").handleEchoBlobsRestore(a,e,g,i,j,k,l,m,n,o,p,q,s)});function e(b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a.apply(this,arguments)}return e}();g["default"]=a}),98);
__d("MAWBridgeTraceRecordCheckpointHandler",["I64","LSAppendDataTraceAddonStoredProcedure","LSFactory","LSFlushDataTrace.nop"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=b.checkPointId,f=b.dataTraceId,g=b.errorMessage,i=b.tags;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:e,dataTraceId:f,errorMessage:g,syncChannel:(h||(h=d("I64"))).neg_one,tags:i}).then(function(){if(b.shouldFlush)return c("LSFlushDataTrace.nop")(a,0,f)})}g.call=a}),98);
__d("MAWRestoreProtobufsFromEncryptedBackupsNOP",["ExecutionEnvironment","I64","LSDataTraceCheckPoint","LSIntEnum","LSMEBTaskCreationSource","MAWBridgeTraceRecordCheckpointHandler","MAWChatJid","MAWJobDefinitions","MAWJobManager","MAWMediaGalleryM2Utils","Promise","Random","ReQL","WAJobOrchestratorTypes","WALoggerDeferred","asyncToGeneratorRuntime","cr:9466","err","ifRequireable","justknobx","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to get thread key for "," when calling restoreProtobufsFromEncryptedBackups"]);l=function(){return a};return a}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){try{c=(yield d("MAWChatJid").toThreadKeyMaybeForChatJidInteger(a,(k||(k=d("I64"))).of_string(c)));if(c!=null){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages_ranges_v2__generated).getKeyRange(c)));if(a!=null)return a.minMessageId}}catch(a){return(i||(i=b("Promise"))).reject(a)}return});return n.apply(this,arguments)}function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,p,q){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,n,o,q,r,s,t,u,v,w,x,y){x===void 0&&(x=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);try{var z=(yield m(a,f));n=(yield d("MAWChatJid").toThreadKeyMaybeForChatJidInteger(a,(k||(k=d("I64"))).of_string(f)));n==null&&void d("WALoggerDeferred").ERROR(l(),f);q=t!=null?Number(t):void 0;u=b("cr:9466")!=null?c("justknobx")._("2620"):0;n=d("Random").coinflip(u);u=b("cr:9466")!=null&&n?b("cr:9466").getMessageMetadataFromDeanonAPI(f,g.length,q):(i||(i=b("Promise"))).resolve();return u.then(function(a){return p(e,f,v,g,z,h,o,r,s,t,w==null?void 0:w,a,x,y)})}catch(e){if(s!=null)return d("MAWBridgeTraceRecordCheckpointHandler").call(a,{checkPointId:(j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),dataTraceId:s,errorMessage:e,shouldFlush:!0,syncChannel:-1,tags:void 0}).then(function(){return(i||(i=b("Promise"))).reject(e)})}return(i||(i=b("Promise"))).resolve()});return o.apply(this,arguments)}function p(a,e,f,g,l,m,n,o,p,q,r,s,t,u){t===void 0&&(t=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);var v;if((h||(h=c("ExecutionEnvironment"))).isInWorker)v=d("MAWJobManager").getJobManager();else{var w;c("ifRequireable")("MAWTimedJob",function(a){a=a.TimedUIJobStarters;w=a},function(){throw c("err")("MAWTimedJob is not requireable in MAWRestoreProtobufsFromEncryptedBackupsNOP")});v=c("nullthrows")(w,"ifRequireable is not sync")}if(p!=null&&r!=null&&(j||(j=d("LSIntEnum"))).unwrapIntEnum(r)===c("LSMEBTaskCreationSource").MESSENGER_MESSAGE_LIST_PAGINATION&&!(h||(h=c("ExecutionEnvironment"))).isInWorker){var x;return v.waitUntilCompleted(d("MAWJobDefinitions").jobSerializers.restoreProtobufsFromEncryptedBackups(f,a,e,g,m,n,o,(x=l)!=null?x:void 0,(x=p)!=null?x:void 0,(x=q)!=null?x:void 0,void 0,{priority:t},r,s,void 0,(x=u)!=null?x:void 0))}if((j||(j=d("LSIntEnum"))).unwrapIntEnum(r||(k||(k=d("I64"))).zero)===c("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE&&d("MAWMediaGalleryM2Utils").shouldSkipSyncToLSDB()&&!(h||(h=c("ExecutionEnvironment"))).isInWorker){return v.waitUntilCompleted(d("MAWJobDefinitions").jobSerializers.restoreProtobufsFromEncryptedBackups(f,a,e,g,m,n,o,(t=l)!=null?t:void 0,(x=p)!=null?x:void 0,(t=q)!=null?t:void 0,void 0,{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},r,s,void 0,(x=u)!=null?x:void 0))}return(i||(i=b("Promise"))).resolve(v.fireAndForget(d("MAWJobDefinitions").jobSerializers.restoreProtobufsFromEncryptedBackups(f,a,e,g,m,n,o,(t=l)!=null?t:void 0,(x=p)!=null?x:void 0,(v=q)!=null?v:void 0,void 0,{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},r,s,void 0,(f=u)!=null?f:void 0)))}g.call=a}),98);
__d("X25519",["$InternalEnum","Promise","WACryptoCurve25519Dependencies","WASignalKeys","WASignalOther","WASignalSignatures"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum").Mirrored(["Encryption","Signing"]),j=b("$InternalEnum")({PublicKey:0,PrivateKey:1,Signature:2});function k(a,b){if(b===i.Encryption)return[];b=1;switch(a){case j.PublicKey:b=1;break;case j.PrivateKey:b=2;break;case j.Signature:b=3;break}return[255,b]}function l(a,b,c){b=k(b,c);c=b.length;if(c<=0)return a;var d=new Uint8Array(c+a.byteLength);d.set(Array.from(b));d.set(a,c);return d}function m(a,b,c){b=k(b,c).length;return a.slice(b)}function n(a,b){return{privateKey:l(a.privateKey,j.PrivateKey,b),publicKey:l(a.publicKey,j.PublicKey,b)}}function a(a){a=n(d("WASignalKeys").makeKeyPair(),a);return{pk:a.publicKey,sk:a.privateKey}}function o(a,b){if(b===i.Encryption)return 32;switch(a){case j.PublicKey:case j.PrivateKey:return 32;case j.Signature:return 64}}function p(a,b,c){var d=k(b,c),e=d.length;b=o(b,c);c=b!=null?e+b:0;if(a.length!==c)return!1;var f=a.subarray(0,e);b=new Uint8Array(d);return b.length===f.length&&b.every(function(a,b){return a===f[b]})}function q(a,b){if(p(a,j.PublicKey,b))return a;return}function r(a,b){if(p(a,j.PrivateKey,b))return a;return}function c(a,b){var c=q(a.pkBytes,b);a=r(a.skBytes,b);if(c!=null&&a!=null)return{pk:c,sk:a}}function e(a,c){a=m(a,j.PrivateKey,i.Signing);return d("WASignalSignatures").signMsg(d("WASignalKeys").makeKeyPairFrom(d("WASignalOther").ensureSize(a,32)),c).then(function(a){a=l(a,j.Signature,i.Signing);return(h||(h=b("Promise"))).resolve(a)})}function f(a){if(p(a,j.Signature,i.Signing))return a}function s(a,b,c){b=m(b,j.PublicKey,i.Signing);return d("WASignalSignatures").verifyMsgSignalVariant(d("WASignalKeys").serializeIdentity(b),c,d("WASignalOther").ensureSize(m(a,j.Signature,i.Signing),64))}function t(a,c){c=c;a=a;return!p(a,j.PublicKey,i.Encryption)||!p(c,j.PrivateKey,i.Encryption)?(h||(h=b("Promise"))).resolve():d("WACryptoCurve25519Dependencies").calculateAgreement(a,c).then(function(a){return(h||(h=b("Promise"))).resolve(new Uint8Array(a))})}g.KeyPurpose=i;g.generateKeys=a;g.publicKeyFromBytes=q;g.secretKeyFromBytes=r;g.keysFromBytes=c;g.sign=e;g.signatureFromBytes=f;g.verify=s;g.exchangeKeys=t}),98);
__d("PublicKeyCrypto",["Promise","UInt8Array","X25519"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c){return(h||(h=b("Promise"))).all([a,c]).then(function(a){return(h||(h=b("Promise"))).resolve(a[0]!=null&&a[1]!=null?d("UInt8Array").concatBytes([a[0],a[1]]):void 0)})}function a(a,b,c){return i(d("X25519").exchangeKeys(c,a),d("X25519").exchangeKeys(c,b))}function c(a,b,c){return i(d("X25519").exchangeKeys(c,a),d("X25519").exchangeKeys(b,a))}g.senderDeriveSharedSecret=a;g.receiverDeriveSharedSecret=c}),98);
__d("WebWorkerInitDeferred",["cr:7429"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a.blLoggingCavalryFields&&b("cr:7429").initLogging(a.blLoggingCavalryFields)}g.initDeferred=a}),98);/*FB_PKG_DELIM*/
__d("InstamadilloReplyAttachmentId",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b.threadKey,b.messageId)));if(a==null)return;return(h||(h=d("I64"))).of_string(a.attachmentFbid)});return i.apply(this,arguments)}g.getReplyAttachmentId=a}),98);
__d("InstamadilloReplyAttachmentType",["LSIntEnum","LSReplyMessageAttachmentType","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e={},e[(f=c("MessagingAttachmentType")).STICKER]=(i=c("LSReplyMessageAttachmentType")).STICKER,e[f.SELFIE_STICKER]=i.STICKER,e[f.IMAGE]=i.PHOTO,e[f.ANIMATED_IMAGE]=i.GIF,e[f.VIDEO]=i.VIDEO,e[f.AUDIO]=i.AUDIO,e[f.XMA]=i.XMA,e[f.EPHEMERAL_IMAGE]=i.PERMANENT_RAVEN_PHOTO,e[f.EPHEMERAL_VIDEO]=i.PERMANENT_RAVEN_VIDEO,e[f.SOUND_BITE]=i.SOUND_BITE,e[f.POWER_UP]=i.POWER_UP,e[f.FILE]=i.OTHER,e[f.CATALOG_ITEM]=i.OTHER,e);function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b.threadKey,b.messageId)));if(a==null||a.length===0)return;if(a.length>1)return(h||(h=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").MULTIPHOTO);else if(a.length===1)return l(a[0])});return k.apply(this,arguments)}function l(a){a=(h||(h=d("LSIntEnum"))).unwrapIntEnum(a.attachmentType);a=j[a];if(a!=null)return(h||(h=d("LSIntEnum"))).ofNumber(a)}g.getReplyAttachmentType=a}),98);
__d("InstamadilloReplySnippet",["CurrentMessengerUser","I64","LSMessagingThreadTypeUtil","PolarisDirectStrings"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){var c;d("PolarisDirectStrings").REPLIED_TO;a&&b?c=d("PolarisDirectStrings").YOU_REPLIED_TO_YOURSELF:b?c=d("PolarisDirectStrings").REPLIED_TO_YOU:a?c=d("PolarisDirectStrings").YOU_REPLIED:c=d("PolarisDirectStrings").REPLIED_TO_THEMSELVES;return c.toString()}function j(a,b,c,e,f){var g=d("PolarisDirectStrings").userRepliedToUser(f,e);b&&c?g=d("PolarisDirectStrings").YOU_REPLIED_TO_YOURSELF:c?g=d("PolarisDirectStrings").userRepliedToYou(f):b?g=d("PolarisDirectStrings").youRepliedToUser(e):a&&(g=d("PolarisDirectStrings").userRepliedToThemselves(f));return g.toString()}function a(a,b,c){var e=b.name,f=c.name,g=(h||(h=d("I64"))).of_string(d("CurrentMessengerUser").getIDorEIMU()),k=h.equal(b.id,c.id);b=h.equal(b.id,g);c=h.equal(c.id,g);g=d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType);if(g)return i(b,c);else return j(k,b,c,f,e)}g.getReplySnippet=a}),98);
__d("InstamadilloReplySourceTypeV2",["LSIntEnum","LSMessageReplySourceTypeV2","LSXmaContentType","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){switch(a){case c("LSXmaContentType").IG_STORY_PHOTO_SHARE:case c("LSXmaContentType").IG_STORY_VIDEO_SHARE:case c("LSXmaContentType").IG_STORY_PHOTO_MENTION:case c("LSXmaContentType").IG_STORY_VIDEO_MENTION:case c("LSXmaContentType").IG_STORY_PHOTO_HIGHLIGHT_SHARE:case c("LSXmaContentType").IG_STORY_VIDEO_HIGHLIGHT_SHARE:return!0;default:return!1}}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=c("LSMessageReplySourceTypeV2").MESSAGE;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b.threadKey,b.messageId)));b=a;if((b==null?void 0:b.xmaContentType)!=null){a=(h||(h=d("LSIntEnum"))).unwrapIntEnum(b.xmaContentType);i(a)&&(e=c("LSMessageReplySourceTypeV2").STORY);e=c("LSMessageReplySourceTypeV2").XMA}return(h||(h=d("LSIntEnum"))).ofNumber(e)});return j.apply(this,arguments)}g.getReplySourceTypeV2=a}),98);
__d("InstamadilloReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.isUnsent?c("LSReplyMessageStatus").DELETED:c("LSReplyMessageStatus").VALID;if(a.ephemeralExpirationTs!=null){a=(h||(h=d("I64"))).to_int32(h.sub(a.ephemeralExpirationTs,h.of_float(d("WATimeUtils").unixTime())));a<=0&&(b=c("LSReplyMessageStatus").EXPIRED)}return(i||(i=d("LSIntEnum"))).ofNumber(b)}g.getReplyStatusType=a}),98);
__d("InstamadilloReplyMessageParams",["InstamadilloReplyAttachmentId","InstamadilloReplyAttachmentType","InstamadilloReplySnippet","InstamadilloReplySourceTypeV2","InstamadilloReplyStatus","LSIntEnum","LSMessageReplySourceType","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return{replyMessageText:void 0,replySnippet:void 0,replySourceId:void 0,replySourceType:void 0,replySourceTypeV2:void 0,replyStatus:void 0,replyToUserId:void 0}}function e(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){a=(yield (i||(i=b("Promise"))).all([g.threads.get(a),g.contacts.get(e),g.messages.index("messageId").get(f)]));e=a[0];var j=a[1];a=a[2];f={replySourceId:f};if(j==null||e==null||a==null)return f;f.replySourceId=a.messageId;f.replySourceTimestampMs=a.timestampMs;f.replyToUserId=a.senderId;f.replyMessageText=a.text;f.replyStatus=d("InstamadilloReplyStatus").getReplyStatusType(a);var k=(yield g.contacts.get(a.senderId));k!=null&&(f.replySnippet=d("InstamadilloReplySnippet").getReplySnippet(e,j,k));f.replySourceType=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE);e=(yield i.all([d("InstamadilloReplySourceTypeV2").getReplySourceTypeV2(g,a),d("InstamadilloReplyAttachmentType").getReplyAttachmentType(g,a),d("InstamadilloReplyAttachmentId").getReplyAttachmentId(g,a)]));j=e[0];k=e[1];g=e[2];f.replySourceTypeV2=j;f.replyAttachmentType=k;f.replyAttachmentId=g;return f});return j.apply(this,arguments)}g.getEmptyReplyMessageParams=a;g.getReplyMessageParams=e}),98);
__d("InstamadilloMessageFactory",["FBLogger","I64","InstamadilloMessageIdUtils","InstamadilloReplyMessageParams","LSAuthorityLevel","LSBitFlag","LSIntEnum","LSMessageRenderingType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSMessageThreadUnsendabilityStatus","LSQuickReplyType","MAWAuthor","MessagingAttachmentType","WAJids","WALongInt","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b=a.externalId,c=d("WAJids").threadIdForChatJid(a.chat);a=(h||(h=d("I64"))).of_string(d("WAJids").threadIdForChatJid(a.chat));c=d("InstamadilloMessageIdUtils").toInstamadilloMessageId(c,b);return{messageId:c,threadKey:a}}function k(a,b,e,f){return{attachmentFbid:a,attachmentIndex:(h||(h=d("I64"))).zero,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").NONE),authorityLevel:h.of_int32(c("LSAuthorityLevel").AUTHORITATIVE),hasMedia:!0,hasXma:!1,isPreviewImage:!1,isSharable:!1,messageId:b,threadKey:e,timestampMs:f,transportKey:"Instamadillo",xmaLayoutType:h.zero,xmasTemplateType:h.zero}}function a(a,b){var c=j(a),d=c.messageId;c=c.threadKey;return k(a.externalId,d,c,b)}function e(a,b,c){a=j(a);var d=a.messageId;a=a.threadKey;return k(b,d,a,c)}function f(a){var b=j(a),c=b.messageId;b=b.threadKey;a={attachmentFbid:a.externalId,attachmentIndex:(h||(h=d("I64"))).zero,ctaId:h.zero,messageId:c,threadKey:b,title:""};return a}function l(a){var b=j(a),c=b.messageId;b=b.threadKey;a={attachmentFbid:a.externalId,attachmentIndex:(h||(h=d("I64"))).zero,defaultActionEnableExtensions:!1,messageId:c,threadKey:b};return a}function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=d("MAWAuthor").getAuthorUserJid(b.author);if(g==null)return c("FBLogger")("igd_web_on_msgr").warn("Skip createBaseInstamadilloMessage: a message cannot exist without an author");var i=b.externalId;g=(h||(h=d("I64"))).of_string(d("WAJids").userIdFromJid(g));b=j(b);var k=b.messageId;b=b.threadKey;a=(yield o(a,{messageId:k,offlineThreadingId:i,senderId:g,threadKey:b,timestampMs:e},f));return a});return n.apply(this,arguments)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f,g,j=b.authorityLevel,k=b.messageId,l=b.offlineThreadingId,m=b.senderId,n=b.threadKey;b=b.timestampMs;var o=(yield a.threads.get(n));o=(o=o==null?void 0:o.cannotUnsendReason)!=null?o:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND);var p={};f=e==null?void 0:(f=e.repliedToMessage)==null?void 0:f.repliedToMessageOtid;f!=null&&(p=(yield d("InstamadilloReplyMessageParams").getReplyMessageParams(n,m,d("InstamadilloMessageIdUtils").toInstamadilloMessageId(n,f),a)));a=e==null?void 0:(a=e.forwardingParams)==null?void 0:a.forwardedThreadId;a=a!=null;var q,r,s=!1;(e==null?void 0:(g=e.ephemeralityParams)==null?void 0:g.ephemeralDurationSec)!=null&&(b==null?s=!0:(q=d("WALongInt").maybeNumberOrThrowIfTooLarge(e.ephemeralityParams.ephemeralDurationSec),r=q!=null?d("WATimeUtils").futureUnixTime(q,d("WATimeUtils").castMilliSecondsToUnixTime((h||(h=d("I64"))).to_float(b))):void 0,s=r!=null&&r<d("WATimeUtils").unixTime()));e=babelHelpers["extends"]({authorityLevel:(g=j)!=null?g:(h||(h=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:o,displayedContentTypes:d("LSBitFlag").empty,editCount:(h||(h=d("I64"))).zero,ephemeralDurationInSec:q!=null?(h||(h=d("I64"))).of_float(q):void 0,ephemeralExpirationTs:r!=null?(h||(h=d("I64"))).of_float(r):void 0,hasQuickReplies:f!=null,isAdminMessage:!1,isCollapsed:!1,isExpired:s,isForwarded:a,isUnsent:!1,messageId:k,messageRenderingType:h.of_int32(c("LSMessageRenderingType").DEFAULT),offlineThreadingId:l,primarySortKey:b,quickReplyType:h.of_int32(c("LSQuickReplyType").NONE),replyAttachmentType:void 0,replySourceTypeV2:a?(h||(h=d("I64"))).of_int32(c("LSMessageReplySourceTypeV2").FORWARD):void 0,replyStatus:void 0,secondarySortKey:void 0,senderId:m,sendStatus:h.of_int32(c("LSMessageSendStatus").SERVER_RECEIVED),sendStatusV2:h.of_int32(2),threadKey:n,timestampMs:b,transportKey:"Instamadillo",unsentTimestampMs:void 0,viewFlags:h.zero},p);return e});return p.apply(this,arguments)}g.getThreadAndMessageId=j;g.createBaseAttachmentWithProtocolMsgId=a;g.createBaseAttachmentWithMediaId=e;g.createBaseAttachmentCta=f;g.createBaseAttachmentItem=l;g.createBaseMessageForProtocolMsgId=m;g.createBaseMessage=o}),98);
__d("InstamadilloTextMessageUtils",["URLMatcher","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isStringNullOrEmpty")(a)?!1:c("URLMatcher").match(a)!=null}g.textHasLinks=a}),98);
__d("LSBumpThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[1],b.i64.cast([0,1]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,2]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,3]))?b.db.table(9).fetch([[[a[2]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,b.i64.le(d.lastActivityTimestampMs,d.lastReadWatermarkTimestampMs)?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}))}):b.resolve(0)},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxBumpThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSBumpThreadStoredProcedure",["LSBumpThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSBumpThread"),e.bumpTimestampMs,e.readStateEffect,e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSFetchInstamadilloMessage",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("offline_threading_id",a[1]),d[0].set("timestamp_sec",a[2]),d[1]=d[0].get("thread_key"),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,60012]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFetchInstamadilloMessageStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateLastActivityTimestamp",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateLastActivityTimestampStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSUpdateThreadSnippet",["LSGetThreadParticipantDisplayName","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.resolve((d[1]="",d[0]=d[1]===""?void 0:d[1]))},function(e){return d[0]!==void 0?c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:d[0],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})}):a[7]?c.sequence([function(e){return c.i64.neq(a[3],void 0)?c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[3]).then(function(a){return a=a,d[2]=a[0],a})},function(b){return a[1]!==void 0?(d[2]!==void 0?d[4]=[d[2],": ",a[1]].join(""):d[4]=a[1],d[3]=d[4]):d[3]=void 0,d[1]=d[3]}]):c.resolve(d[1]=a[1])},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:d[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})})}]):c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:a[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateThreadSnippetStoredProcedure";a.__tables__=["threads","contacts"];e.exports=a}),null);
__d("LSUpdateThreadSnippetFromLastMessageV2",["LSGetThreadParticipantDisplayName","LSGetViewerFBID","LSLocalize","LSUpdateLastActivityTimestamp","LSUpdateThreadSnippet"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.count(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(a[0],b.threadKey)&&[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(b.threadType,a)})})).then(function(a){return d[0]=a})},function(e){return c.i64.eq(d[0],c.i64.cast([0,1]))===!0?c.filter(c.db.table(12).fetchDesc([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&b.isAdminMessage===!1&&b.isUnsent===!1}).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(a){return d[6]=f.text,d[5]=f.threadKey,d[8]=c.i64.cast([0,0]),d[9]=f.messageId,d[4]=f.senderId,d[7]=f.stickerId,d[3]=f.isAdminMessage,d[1]=!0,d[3]||!d[1]?c.resolve(d[2]=d[6]==null?"":d[6]):c.sequence([function(a){return f.isUnsent?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.i64.eq(d[11],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2987332812]),void 0).then(function(a){return d[16]=a})},function(a){return d[12]=d[16]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[17]=c.createArray(),d[19]=(d[17].push(d[16]),d[17]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1530605193]),d[17]).then(function(a){return d[18]=a})},function(a){return d[12]=d[18]}])},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[13]=!1:(e=b.item,d[13]=[c.i64.cast([0,23]),c.i64.cast([0,21]),c.i64.cast([0,18]),c.i64.cast([0,26]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[13]?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],d[20]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],d[20]=a[4],a)})},function(a){return d[19]!==void 0?d[22]=d[19]:d[22]=d[12],d[15]=d[22]}]):c.resolve(d[15]=d[12])},function(a){return d[10]=d[15]}]):c.sequence([function(a){return c.sequence([function(a){return c.i64.eq(f.replyType,c.i64.cast([0,1]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.i64.eq(d[13],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1899892426]),void 0).then(function(a){return d[15]=a})},function(a){return d[14]=d[15]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[16]=c.createArray(),d[18]=(d[16].push(d[15]),d[16]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3287869262]),d[16]).then(function(a){return d[17]=a})},function(a){return d[14]=d[17]}])},function(a){return d[12]=d[14]}]):c.sequence([function(a){return d[6]!==void 0&&d[6]!==""?c.sequence([function(a){return d[16]=d[6]==null?"":d[6],c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.i64.eq(d[14],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[17]=a})},function(a){return d[15]=[d[17],": ",d[16]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[17]=!1:(e=b.item,d[17]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[19]=!1:(e=b.item,d[19]=[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[17]||d[19]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[21]=[d[22],": ",d[16]].join("")}]):c.resolve(d[21]=d[16])},function(a){return d[15]=d[21]}])},function(a){return d[13]=d[15]}]):c.sequence([function(a){return c.i64.neq(d[7],void 0)&&[c.i64.cast([53057,267535043]),c.i64.cast([85970,924785702]),c.i64.cast([85970,1004785694]),c.i64.cast([85970,1044785690])].some(function(a){return c.i64.eq(d[7],a)})?c.sequence([function(a){return d[17]="\udb80\udc00",c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.i64.eq(d[15],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[18]=a})},function(a){return d[16]=[d[18],": ",d[17]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[18]=!1:(e=b.item,d[18]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[20]=!1:(e=b.item,d[20]=[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[18]||d[20]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[22]=[d[23],": ",d[17]].join("")}]):c.resolve(d[22]=d[17])},function(a){return d[16]=d[22]}])},function(a){return d[14]=d[16]}]):c.sequence([function(a){return c.i64.neq(d[7],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.i64.eq(d[16],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[18]=a})},function(a){return d[17]=d[18]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[18]=a[0],a})},function(a){return d[19]=c.createArray(),d[21]=(d[19].push(d[18]),d[19]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3621454483]),d[19]).then(function(a){return d[20]=a})},function(a){return d[17]=d[20]}])},function(a){return d[15]=d[17]}]):c.sequence([function(a){return c.count(c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]})).then(function(a){return d[16]=a})},function(a){return c.i64.eq(d[16],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.i64.eq(d[18],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[20]=a})},function(a){return d[19]=d[20]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[21]=c.createArray(),d[23]=(d[21].push(d[20]),d[21]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[21]).then(function(a){return d[22]=a})},function(a){return d[19]=d[22]}])},function(a){return d[17]=d[19]}]):c.sequence([function(a){return c.i64.eq(d[16],c.i64.cast([0,1]))?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[19]=a[0],d[20]=a[1],d[21]=a[2],d[22]=a[3],d[23]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[19]=a[0],d[20]=a[1],d[21]=a[2],d[22]=a[3],d[23]=a[4],a)})},function(a){return d[25]=void 0,d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,1]))||c.i64.eq(d[19],c.i64.cast([0,15])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3621454483]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,2]))||c.i64.eq(d[19],c.i64.cast([0,8])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2106510577]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3960370133]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,3]))?c.sequence([function(a){return d[20]!==void 0?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.i64.eq(d[31],d[4])?c.sequence([function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[20]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3798396796]),d[33]).then(function(a){return d[34]=a})},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[33]),d[34]),d[36]=(d[34].push(d[20]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3388601579]),d[34]).then(function(a){return d[35]=a})},function(a){return d[32]=d[35]}])},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.i64.eq(d[31],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1556712457]),void 0).then(function(a){return d[33]=a})},function(a){return d[32]=d[33]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[33]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3601791933]),d[34]).then(function(a){return d[35]=a})},function(a){return d[32]=d[35]}])},function(a){return d[30]=d[32]}])},function(a){return d[25]=d[30]}]):c.resolve()},function(a){return d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,4]))||c.i64.eq(d[19],c.i64.cast([0,9])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3759817031]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2934729541]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,5]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,392493418]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,4085467454]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,10]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2738683656]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2996525642]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return c.i64.neq(d[23],void 0)?d[26]=d[23]:(d[21]==="xma_live_location_sharing"?d[30]=c.i64.cast([0,7e3]):d[30]=void 0,d[26]=d[30]),c.i64.neq(d[26],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[26],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return c.i64.eq(d[32],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[34]=a})},function(a){return d[33]=d[34]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[35]=c.createArray(),d[37]=(d[35].push(d[34]),d[35]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[35]).then(function(a){return d[36]=a})},function(a){return d[33]=d[36]}])},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.i64.eq(d[33],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[35]=a})},function(a){return d[34]=d[35]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=c.createArray(),d[38]=(d[36].push(d[35]),d[36]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[36]).then(function(a){return d[37]=a})},function(a){return d[34]=d[37]}])},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[34]=a[0],a})},function(a){return c.i64.eq(d[34],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[36]=a})},function(a){return d[35]=d[36]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[37]=c.createArray(),d[39]=(d[37].push(d[36]),d[37]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[37]).then(function(a){return d[38]=a})},function(a){return d[35]=d[38]}])},function(a){return d[33]=d[35]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.i64.eq(d[35],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[37]=a})},function(a){return d[36]=d[37]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[38]=c.createArray(),d[40]=(d[38].push(d[37]),d[38]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[38]).then(function(a){return d[39]=a})},function(a){return d[36]=d[39]}])},function(a){return d[34]=d[36]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.i64.eq(d[36],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[38]=a})},function(a){return d[37]=d[38]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=c.createArray(),d[41]=(d[39].push(d[38]),d[39]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3759448420]),d[39]).then(function(a){return d[40]=a})},function(a){return d[37]=d[40]}])},function(a){return d[35]=d[37]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.i64.eq(d[37],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[39]=a})},function(a){return d[38]=d[39]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[40]=c.createArray(),d[42]=(d[40].push(d[39]),d[40]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[40]).then(function(a){return d[41]=a})},function(a){return d[38]=d[41]}])},function(a){return d[36]=d[38]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[38]=a[0],a})},function(a){return c.i64.eq(d[38],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[40]=a})},function(a){return d[41]=c.createArray(),d[43]=(d[41].push(d[40]),d[41]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3322002377]),d[41]).then(function(a){return d[42]=a})},function(a){return d[39]=d[42]}]):c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[40]=a})},function(a){return d[39]=d[40]}])},function(a){return d[37]=d[39]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.i64.eq(d[39],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3557790945]),void 0).then(function(a){return d[41]=a})},function(a){return d[40]=d[41]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[42]=c.createArray(),d[44]=(d[42].push(d[41]),d[42]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3756846086]),d[42]).then(function(a){return d[43]=a})},function(a){return d[40]=d[43]}])},function(a){return d[38]=d[40]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.i64.eq(d[40],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[42]=a})},function(a){return d[41]=d[42]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[43]=c.createArray(),d[45]=(d[43].push(d[42]),d[43]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[43]).then(function(a){return d[44]=a})},function(a){return d[41]=d[44]}])},function(a){return d[39]=d[41]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.i64.eq(d[41],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[43]=a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[44]=c.createArray(),d[46]=(d[44].push(d[43]),d[44]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[44]).then(function(a){return d[45]=a})},function(a){return d[42]=d[45]}])},function(a){return d[40]=d[42]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.i64.eq(d[42],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[44]=a})},function(a){return d[43]=d[44]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[45]=c.createArray(),d[47]=(d[45].push(d[44]),d[45]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[45]).then(function(a){return d[46]=a})},function(a){return d[43]=d[46]}])},function(a){return d[41]=d[43]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.i64.eq(d[43],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,780378803]),void 0).then(function(a){return d[45]=a})},function(a){return d[44]=d[45]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[46]=c.createArray(),d[48]=(d[46].push(d[45]),d[46]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3918212613]),d[46]).then(function(a){return d[47]=a})},function(a){return d[44]=d[47]}])},function(a){return d[42]=d[44]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.i64.eq(d[44],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3161890215]),void 0).then(function(a){return d[46]=a})},function(a){return d[45]=d[46]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=c.createArray(),d[49]=(d[47].push(d[46]),d[47]),b("LSLocalize").localizeV2Async(c.i64.cast([0,863428456]),d[47]).then(function(a){return d[48]=a})},function(a){return d[45]=d[48]}])},function(a){return d[43]=d[45]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.i64.eq(d[45],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2716405471]),void 0).then(function(a){return d[47]=a})},function(a){return d[46]=d[47]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[48]=c.createArray(),d[50]=(d[48].push(d[47]),d[48]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3909474073]),d[48]).then(function(a){return d[49]=a})},function(a){return d[46]=d[49]}])},function(a){return d[44]=d[46]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.i64.eq(d[46],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[48]=a})},function(a){return d[47]=d[48]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[49]=c.createArray(),d[51]=(d[49].push(d[48]),d[49]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2804766375]),d[49]).then(function(a){return d[50]=a})},function(a){return d[47]=d[50]}])},function(a){return d[45]=d[47]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1013]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[47]=a[0],a})},function(a){return c.i64.eq(d[47],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[49]=a})},function(a){return d[48]=d[49]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[50]=c.createArray(),d[52]=(d[50].push(d[49]),d[50]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2804766375]),d[50]).then(function(a){return d[51]=a})},function(a){return d[48]=d[51]}])},function(a){return d[46]=d[48]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1014]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.i64.eq(d[48],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[50]=a})},function(a){return d[51]=c.createArray(),d[53]=(d[51].push(d[50]),d[51]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3322002377]),d[51]).then(function(a){return d[52]=a})},function(a){return d[49]=d[52]}]):c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[50]=a})},function(a){return d[49]=d[50]}])},function(a){return d[47]=d[49]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.i64.eq(d[49],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[51]=a})},function(a){return d[50]=d[51]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[52]=c.createArray(),d[54]=(d[52].push(d[51]),d[52]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[52]).then(function(a){return d[53]=a})},function(a){return d[50]=d[53]}])},function(a){return d[48]=d[50]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.i64.eq(d[50],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[52]=a})},function(a){return d[51]=d[52]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[53]=c.createArray(),d[55]=(d[53].push(d[52]),d[53]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[53]).then(function(a){return d[54]=a})},function(a){return d[51]=d[54]}])},function(a){return d[49]=d[51]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1017]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[51]=a[0],a})},function(a){return c.i64.eq(d[51],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[53]=a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[54]=c.createArray(),d[56]=(d[54].push(d[53]),d[54]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[54]).then(function(a){return d[55]=a})},function(a){return d[52]=d[55]}])},function(a){return d[50]=d[52]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1018]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.i64.eq(d[52],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[54]=a})},function(a){return d[53]=d[54]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[55]=c.createArray(),d[57]=(d[55].push(d[54]),d[55]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[55]).then(function(a){return d[56]=a})},function(a){return d[53]=d[56]}])},function(a){return d[51]=d[53]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1019]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[53]=a[0],a})},function(a){return c.i64.eq(d[53],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[55]=a})},function(a){return d[54]=d[55]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[56]=c.createArray(),d[58]=(d[56].push(d[55]),d[56]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[56]).then(function(a){return d[57]=a})},function(a){return d[54]=d[57]}])},function(a){return d[52]=d[54]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1020]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.i64.eq(d[54],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[56]=a})},function(a){return d[55]=d[56]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[57]=c.createArray(),d[59]=(d[57].push(d[56]),d[57]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[57]).then(function(a){return d[58]=a})},function(a){return d[55]=d[58]}])},function(a){return d[53]=d[55]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2e3]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.i64.eq(d[56],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[58]=a})},function(a){return d[57]=d[58]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[59]=c.createArray(),d[61]=(d[59].push(d[58]),d[59]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[59]).then(function(a){return d[60]=a})},function(a){return d[57]=d[60]}])},function(a){return d[55]=d[57]}])},function(a){return d[54]=d[55]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.i64.eq(d[56],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[58]=a})},function(a){return d[57]=d[58]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[59]=c.createArray(),d[61]=(d[59].push(d[58]),d[59]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3759448420]),d[59]).then(function(a){return d[60]=a})},function(a){return d[57]=d[60]}])},function(a){return d[55]=d[57]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.i64.eq(d[57],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[59]=a})},function(a){return d[58]=d[59]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[60]=c.createArray(),d[62]=(d[60].push(d[59]),d[60]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[60]).then(function(a){return d[61]=a})},function(a){return d[58]=d[61]}])},function(a){return d[56]=d[58]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.i64.eq(d[58],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[60]=a})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[61]=a[0],a})},function(a){return c.i64.eq(d[61],d[4])?c.sequence([function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[60]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1247108605]),d[63]).then(function(a){return d[64]=a})},function(a){return d[62]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[63]=a[0],a})},function(a){return d[64]=c.createArray(),d[66]=(d[64].push(d[63]),d[64]),d[66]=(d[64].push(d[60]),d[64]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2966876020]),d[64]).then(function(a){return d[65]=a})},function(a){return d[62]=d[65]}])},function(a){return d[59]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1056933543]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1167688664]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}])},function(a){return d[57]=d[59]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.i64.eq(d[59],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[58]=d[60]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,772459202]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3546068912]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2006]))?c.sequence([function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.i64.eq(d[62],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2459540079]),void 0).then(function(a){return d[64]=a})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[65]=c.createArray(),d[67]=(d[65].push(d[64]),d[65]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1596311291]),d[65]).then(function(a){return d[66]=a})},function(a){return d[63]=d[66]}])},function(a){return d[61]=d[63]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.i64.eq(d[62],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2253698324]),void 0).then(function(a){return d[64]=a})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[65]=c.createArray(),d[67]=(d[65].push(d[64]),d[65]),b("LSLocalize").localizeV2Async(c.i64.cast([0,4269602817]),d[65]).then(function(a){return d[66]=a})},function(a){return d[63]=d[66]}])},function(a){return d[61]=d[63]}])},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2007]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.i64.eq(d[63],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[65]=a})},function(a){return d[64]=d[65]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return d[66]=c.createArray(),d[68]=(d[66].push(d[65]),d[66]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[66]).then(function(a){return d[67]=a})},function(a){return d[64]=d[67]}])},function(a){return d[62]=d[64]}])},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.i64.eq(d[63],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[65]=a})},function(a){return d[64]=d[65]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return d[66]=c.createArray(),d[68]=(d[66].push(d[65]),d[66]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[66]).then(function(a){return d[67]=a})},function(a){return d[64]=d[67]}])},function(a){return d[62]=d[64]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2009]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[65]=a[0],a})},function(a){return c.i64.eq(d[65],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[67]=a})},function(a){return d[66]=d[67]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return d[68]=c.createArray(),d[70]=(d[68].push(d[67]),d[68]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[68]).then(function(a){return d[69]=a})},function(a){return d[66]=d[69]}])},function(a){return d[64]=d[66]}])},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[65]=a[0],a})},function(a){return c.i64.eq(d[65],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[67]=a})},function(a){return d[66]=d[67]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return d[68]=c.createArray(),d[70]=(d[68].push(d[67]),d[68]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[68]).then(function(a){return d[69]=a})},function(a){return d[66]=d[69]}])},function(a){return d[64]=d[66]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[66]=a[0],a})},function(a){return c.i64.eq(d[66],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[68]=a})},function(a){return d[67]=d[68]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return d[69]=c.createArray(),d[71]=(d[69].push(d[68]),d[69]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[69]).then(function(a){return d[70]=a})},function(a){return d[67]=d[70]}])},function(a){return d[65]=d[67]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.i64.eq(d[67],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[69]=a})},function(a){return d[68]=d[69]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[70]=c.createArray(),d[72]=(d[70].push(d[69]),d[70]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[70]).then(function(a){return d[71]=a})},function(a){return d[68]=d[71]}])},function(a){return d[66]=d[68]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2013]))?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[68]=a})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[69]=a[0],a})},function(a){return c.i64.eq(d[69],d[4])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return d[73]=c.createArray(),d[75]=(d[73].push(d[68]),d[73]),b("LSLocalize").localizeV2Async(c.i64.cast([0,785694792]),d[73]).then(function(a){return d[74]=a})},function(a){return d[72]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),d[76]=(d[74].push(d[68]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2625447567]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3982213805]),void 0).then(function(a){return d[73]=a})},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,464916028]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}])},function(a){return d[67]=d[70]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3e3]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[70]=a[0],a})},function(a){return c.i64.eq(d[70],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[72]=a})},function(a){return d[71]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return d[73]=c.createArray(),d[75]=(d[73].push(d[72]),d[73]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[73]).then(function(a){return d[74]=a})},function(a){return d[71]=d[74]}])},function(a){return d[69]=d[71]}])},function(a){return d[68]=d[69]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[70]=a[0],a})},function(a){return c.i64.eq(d[70],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[72]=a})},function(a){return d[71]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return d[73]=c.createArray(),d[75]=(d[73].push(d[72]),d[73]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[73]).then(function(a){return d[74]=a})},function(a){return d[71]=d[74]}])},function(a){return d[69]=d[71]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[73]=a})},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3616471048]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.i64.eq(d[72],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[74]=a})},function(a){return d[73]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[75]=c.createArray(),d[77]=(d[75].push(d[74]),d[75]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3616471048]),d[75]).then(function(a){return d[76]=a})},function(a){return d[73]=d[76]}])},function(a){return d[71]=d[73]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.i64.eq(d[73],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[75]=a})},function(a){return d[74]=d[75]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[76]=c.createArray(),d[78]=(d[76].push(d[75]),d[76]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[76]).then(function(a){return d[77]=a})},function(a){return d[74]=d[77]}])},function(a){return d[72]=d[74]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[74]=a[0],a})},function(a){return c.i64.eq(d[74],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[76]=a})},function(a){return d[75]=d[76]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[77]=c.createArray(),d[79]=(d[77].push(d[76]),d[77]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[77]).then(function(a){return d[78]=a})},function(a){return d[75]=d[78]}])},function(a){return d[73]=d[75]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[75]=a[0],a})},function(a){return c.i64.eq(d[75],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[77]=a})},function(a){return d[76]=d[77]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[77]=a[0],a})},function(a){return d[78]=c.createArray(),d[80]=(d[78].push(d[77]),d[78]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[78]).then(function(a){return d[79]=a})},function(a){return d[76]=d[79]}])},function(a){return d[74]=d[76]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[76]=a[0],a})},function(a){return c.i64.eq(d[76],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[78]=a})},function(a){return d[77]=d[78]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[78]=a[0],a})},function(a){return d[79]=c.createArray(),d[81]=(d[79].push(d[78]),d[79]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[79]).then(function(a){return d[80]=a})},function(a){return d[77]=d[80]}])},function(a){return d[75]=d[77]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[77]=a[0],a})},function(a){return c.i64.eq(d[77],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[79]=a})},function(a){return d[78]=d[79]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[79]=a[0],a})},function(a){return d[80]=c.createArray(),d[82]=(d[80].push(d[79]),d[80]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[80]).then(function(a){return d[81]=a})},function(a){return d[78]=d[81]}])},function(a){return d[76]=d[78]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[78]=a[0],a})},function(a){return c.i64.eq(d[78],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[80]=a})},function(a){return d[79]=d[80]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[81]=c.createArray(),d[83]=(d[81].push(d[80]),d[81]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[81]).then(function(a){return d[82]=a})},function(a){return d[79]=d[82]}])},function(a){return d[77]=d[79]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3010]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[80]=a[0],a})},function(a){return c.i64.eq(d[80],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[82]=a})},function(a){return d[81]=d[82]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[83]=c.createArray(),d[85]=(d[83].push(d[82]),d[83]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[83]).then(function(a){return d[84]=a})},function(a){return d[81]=d[84]}])},function(a){return d[79]=d[81]}])},function(a){return d[78]=d[79]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[80]=a[0],a})},function(a){return c.i64.eq(d[80],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[82]=a})},function(a){return d[81]=d[82]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[83]=c.createArray(),d[85]=(d[83].push(d[82]),d[83]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[83]).then(function(a){return d[84]=a})},function(a){return d[81]=d[84]}])},function(a){return d[79]=d[81]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[81]=a[0],a})},function(a){return c.i64.eq(d[81],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[83]=a})},function(a){return d[82]=d[83]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[84]=c.createArray(),d[86]=(d[84].push(d[83]),d[84]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[84]).then(function(a){return d[85]=a})},function(a){return d[82]=d[85]}])},function(a){return d[80]=d[82]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3013]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.i64.eq(d[82],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[84]=a})},function(a){return d[83]=d[84]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[84]=a[0],a})},function(a){return d[85]=c.createArray(),d[87]=(d[85].push(d[84]),d[85]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[85]).then(function(a){return d[86]=a})},function(a){return d[83]=d[86]}])},function(a){return d[81]=d[83]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3014]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[84]=a[0],a})},function(a){return c.i64.eq(d[84],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[86]=a})},function(a){return d[85]=d[86]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[86]=a[0],a})},function(a){return d[87]=c.createArray(),d[89]=(d[87].push(d[86]),d[87]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[87]).then(function(a){return d[88]=a})},function(a){return d[85]=d[88]}])},function(a){return d[83]=d[85]}])},function(a){return d[82]=d[83]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[84]=a[0],a})},function(a){return c.i64.eq(d[84],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3471188061]),void 0).then(function(a){return d[86]=a})},function(a){return d[85]=d[86]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[86]=a[0],a})},function(a){return d[87]=c.createArray(),d[89]=(d[87].push(d[86]),d[87]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2776822462]),d[87]).then(function(a){return d[88]=a})},function(a){return d[85]=d[88]}])},function(a){return d[83]=d[85]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[85]=a[0],a})},function(a){return c.i64.eq(d[85],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[87]=a})},function(a){return d[86]=d[87]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return d[88]=c.createArray(),d[90]=(d[88].push(d[87]),d[88]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[88]).then(function(a){return d[89]=a})},function(a){return d[86]=d[89]}])},function(a){return d[84]=d[86]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3017]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[86]=a[0],a})},function(a){return c.i64.eq(d[86],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[88]=a})},function(a){return d[87]=d[88]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[88]=a[0],a})},function(a){return d[89]=c.createArray(),d[91]=(d[89].push(d[88]),d[89]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[89]).then(function(a){return d[90]=a})},function(a){return d[87]=d[90]}])},function(a){return d[85]=d[87]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3018]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[87]=a[0],a})},function(a){return c.i64.eq(d[87],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[89]=a})},function(a){return d[88]=d[89]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[89]=a[0],a})},function(a){return d[90]=c.createArray(),d[92]=(d[90].push(d[89]),d[90]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[90]).then(function(a){return d[91]=a})},function(a){return d[88]=d[91]}])},function(a){return d[86]=d[88]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3019]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[88]=a[0],a})},function(a){return c.i64.eq(d[88],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[90]=a})},function(a){return d[89]=d[90]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[90]=a[0],a})},function(a){return d[91]=c.createArray(),d[93]=(d[91].push(d[90]),d[91]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[91]).then(function(a){return d[92]=a})},function(a){return d[89]=d[92]}])},function(a){return d[87]=d[89]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3020]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[89]=a[0],a})},function(a){return c.i64.eq(d[89],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[91]=a})},function(a){return d[90]=d[91]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[91]=a[0],a})},function(a){return d[92]=c.createArray(),d[94]=(d[92].push(d[91]),d[92]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[92]).then(function(a){return d[93]=a})},function(a){return d[90]=d[93]}])},function(a){return d[88]=d[90]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3021]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[90]=a[0],a})},function(a){return c.i64.eq(d[90],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[92]=a})},function(a){return d[91]=d[92]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[92]=a[0],a})},function(a){return d[93]=c.createArray(),d[95]=(d[93].push(d[92]),d[93]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[93]).then(function(a){return d[94]=a})},function(a){return d[91]=d[94]}])},function(a){return d[89]=d[91]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3022]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[91]=a[0],a})},function(a){return c.i64.eq(d[91],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[93]=a})},function(a){return d[92]=d[93]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[93]=a[0],a})},function(a){return d[94]=c.createArray(),d[96]=(d[94].push(d[93]),d[94]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[94]).then(function(a){return d[95]=a})},function(a){return d[92]=d[95]}])},function(a){return d[90]=d[92]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3023]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[92]=a[0],a})},function(a){return c.i64.eq(d[92],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[94]=a})},function(a){return d[93]=d[94]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[94]=a[0],a})},function(a){return d[95]=c.createArray(),d[97]=(d[95].push(d[94]),d[95]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[95]).then(function(a){return d[96]=a})},function(a){return d[93]=d[96]}])},function(a){return d[91]=d[93]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3024]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[93]=a[0],a})},function(a){return c.i64.eq(d[93],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[95]=a})},function(a){return d[94]=d[95]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[95]=a[0],a})},function(a){return d[96]=c.createArray(),d[98]=(d[96].push(d[95]),d[96]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[96]).then(function(a){return d[97]=a})},function(a){return d[94]=d[97]}])},function(a){return d[92]=d[94]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3025]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[94]=a[0],a})},function(a){return c.i64.eq(d[94],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[96]=a})},function(a){return d[95]=d[96]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[96]=a[0],a})},function(a){return d[97]=c.createArray(),d[99]=(d[97].push(d[96]),d[97]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[97]).then(function(a){return d[98]=a})},function(a){return d[95]=d[98]}])},function(a){return d[93]=d[95]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3026]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[95]=a[0],a})},function(a){return c.i64.eq(d[95],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[97]=a})},function(a){return d[96]=d[97]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[97]=a[0],a})},function(a){return d[98]=c.createArray(),d[100]=(d[98].push(d[97]),d[98]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[98]).then(function(a){return d[99]=a})},function(a){return d[96]=d[99]}])},function(a){return d[94]=d[96]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3027]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[96]=a[0],a})},function(a){return c.i64.eq(d[96],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[98]=a})},function(a){return d[97]=d[98]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[98]=a[0],a})},function(a){return d[99]=c.createArray(),d[101]=(d[99].push(d[98]),d[99]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[99]).then(function(a){return d[100]=a})},function(a){return d[97]=d[100]}])},function(a){return d[95]=d[97]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3028]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[97]=a[0],a})},function(a){return c.i64.eq(d[97],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[99]=a})},function(a){return d[98]=d[99]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[99]=a[0],a})},function(a){return d[100]=c.createArray(),d[102]=(d[100].push(d[99]),d[100]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[100]).then(function(a){return d[101]=a})},function(a){return d[98]=d[101]}])},function(a){return d[96]=d[98]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3029]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[98]=a[0],a})},function(a){return c.i64.eq(d[98],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[100]=a})},function(a){return d[99]=d[100]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[100]=a[0],a})},function(a){return d[101]=c.createArray(),d[103]=(d[101].push(d[100]),d[101]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[101]).then(function(a){return d[102]=a})},function(a){return d[99]=d[102]}])},function(a){return d[97]=d[99]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3040]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[99]=a[0],a})},function(a){return c.i64.eq(d[99],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[101]=a})},function(a){return d[100]=d[101]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[101]=a[0],a})},function(a){return d[102]=c.createArray(),d[104]=(d[102].push(d[101]),d[102]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[102]).then(function(a){return d[103]=a})},function(a){return d[100]=d[103]}])},function(a){return d[98]=d[100]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[100]=a[0],a})},function(a){return c.i64.eq(d[100],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[104]=a})},function(a){return d[101]=d[104]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[104]=a[0],a})},function(a){return d[101]=d[104]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[102]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1739999037]),void 0).then(function(a){return d[103]=a})},function(a){return d[99]=d[103]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[101]=a[0],a})},function(a){return c.i64.eq(d[101],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[105]=a})},function(a){return d[102]=d[105]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[105]=a[0],a})},function(a){return d[102]=d[105]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[103]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3373597599]),void 0).then(function(a){return d[104]=a})},function(a){return d[100]=d[104]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[102]=a[0],a})},function(a){return c.i64.eq(d[102],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[106]=a})},function(a){return d[103]=d[106]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[106]=a[0],a})},function(a){return d[103]=d[106]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[104]=a[0],a})},function(a){return c.i64.eq(d[104],d[4])?c.sequence([function(a){return d[106]=c.createArray(),d[108]=(d[106].push(d[103]),d[106]),b("LSLocalize").localizeV2Async(c.i64.cast([0,259473449]),d[106]).then(function(a){return d[107]=a})},function(a){return d[105]=d[107]}]):c.sequence([function(a){return d[106]=c.createArray(),d[108]=(d[106].push(d[103]),d[106]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1338912959]),d[106]).then(function(a){return d[107]=a})},function(a){return d[105]=d[107]}])},function(a){return d[101]=d[105]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[103]=a[0],a})},function(a){return c.i64.eq(d[103],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[107]=a})},function(a){return d[104]=d[107]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[107]=a[0],a})},function(a){return d[104]=d[107]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[105]=a[0],a})},function(a){return c.i64.eq(d[105],d[4])?c.sequence([function(a){return d[107]=c.createArray(),d[109]=(d[107].push(d[104]),d[107]),b("LSLocalize").localizeV2Async(c.i64.cast([0,812940701]),d[107]).then(function(a){return d[108]=a})},function(a){return d[106]=d[108]}]):c.sequence([function(a){return d[107]=c.createArray(),d[109]=(d[107].push(d[104]),d[107]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1099878966]),d[107]).then(function(a){return d[108]=a})},function(a){return d[106]=d[108]}])},function(a){return d[102]=d[106]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[104]=a[0],a})},function(a){return c.i64.eq(d[104],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[108]=a})},function(a){return d[105]=d[108]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[108]=a[0],a})},function(a){return d[105]=d[108]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[106]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3443782102]),void 0).then(function(a){return d[107]=a})},function(a){return d[103]=d[107]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[105]=a[0],a})},function(a){return c.i64.eq(d[105],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[109]=a})},function(a){return d[106]=d[109]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[109]=a[0],a})},function(a){return d[106]=d[109]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[107]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,618905030]),void 0).then(function(a){return d[108]=a})},function(a){return d[104]=d[108]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[106]=a[0],a})},function(a){return c.i64.eq(d[106],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[110]=a})},function(a){return d[107]=d[110]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[110]=a[0],a})},function(a){return d[107]=d[110]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[108]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2470414797]),void 0).then(function(a){return d[109]=a})},function(a){return d[105]=d[109]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[107]=a[0],a})},function(a){return c.i64.eq(d[107],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[111]=a})},function(a){return d[108]=d[111]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[111]=a[0],a})},function(a){return d[108]=d[111]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[109]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1306024833]),void 0).then(function(a){return d[110]=a})},function(a){return d[106]=d[110]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[108]=a[0],a})},function(a){return c.i64.eq(d[108],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[112]=a})},function(a){return d[109]=d[112]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[112]=a[0],a})},function(a){return d[109]=d[112]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[110]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3443782102]),void 0).then(function(a){return d[111]=a})},function(a){return d[107]=d[111]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[109]=a[0],a})},function(a){return c.i64.eq(d[109],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[113]=a})},function(a){return d[110]=d[113]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[113]=a[0],a})},function(a){return d[110]=d[113]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[111]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,618905030]),void 0).then(function(a){return d[112]=a})},function(a){return d[108]=d[112]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,5e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[110]=a[0],a})},function(a){return c.i64.eq(d[110],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[112]=a})},function(a){return d[111]=d[112]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[112]=a[0],a})},function(a){return d[113]=c.createArray(),d[115]=(d[113].push(d[112]),d[113]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[113]).then(function(a){return d[114]=a})},function(a){return d[111]=d[114]}])},function(a){return d[109]=d[111]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,6e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[111]=a[0],a})},function(a){return c.i64.eq(d[111],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[113]=a})},function(a){return d[112]=d[113]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[113]=a[0],a})},function(a){return d[114]=c.createArray(),d[116]=(d[114].push(d[113]),d[114]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[114]).then(function(a){return d[115]=a})},function(a){return d[112]=d[115]}])},function(a){return d[110]=d[112]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,7e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[112]=a[0],a})},function(a){return c.i64.eq(d[112],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2135145355]),void 0).then(function(a){return d[114]=a})},function(a){return d[113]=d[114]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[114]=a[0],a})},function(a){return d[115]=c.createArray(),d[117]=(d[115].push(d[114]),d[115]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3603511704]),d[115]).then(function(a){return d[116]=a})},function(a){return d[113]=d[116]}])},function(a){return d[111]=d[113]}]):c.resolve(d[111]=void 0)},function(a){return d[110]=d[111]}])},function(a){return d[109]=d[110]}])},function(a){return d[108]=d[109]}])},function(a){return d[107]=d[108]}])},function(a){return d[106]=d[107]}])},function(a){return d[105]=d[106]}])},function(a){return d[104]=d[105]}])},function(a){return d[103]=d[104]}])},function(a){return d[102]=d[103]}])},function(a){return d[101]=d[102]}])},function(a){return d[100]=d[101]}])},function(a){return d[99]=d[100]}])},function(a){return d[98]=d[99]}])},function(a){return d[97]=d[98]}])},function(a){return d[96]=d[97]}])},function(a){return d[95]=d[96]}])},function(a){return d[94]=d[95]}])},function(a){return d[93]=d[94]}])},function(a){return d[92]=d[93]}])},function(a){return d[91]=d[92]}])},function(a){return d[90]=d[91]}])},function(a){return d[89]=d[90]}])},function(a){return d[88]=d[89]}])},function(a){return d[87]=d[88]}])},function(a){return d[86]=d[87]}])},function(a){return d[85]=d[86]}])},function(a){return d[84]=d[85]}])},function(a){return d[83]=d[84]}])},function(a){return d[82]=d[83]}])},function(a){return d[81]=d[82]}])},function(a){return d[80]=d[81]}])},function(a){return d[79]=d[80]}])},function(a){return d[78]=d[79]}])},function(a){return d[77]=d[78]}])},function(a){return d[76]=d[77]}])},function(a){return d[75]=d[76]}])},function(a){return d[74]=d[75]}])},function(a){return d[73]=d[74]}])},function(a){return d[72]=d[73]}])},function(a){return d[71]=d[72]}])},function(a){return d[70]=d[71]}])},function(a){return d[69]=d[70]}])},function(a){return d[68]=d[69]}])},function(a){return d[67]=d[68]}])},function(a){return d[66]=d[67]}])},function(a){return d[65]=d[66]}])},function(a){return d[64]=d[65]}])},function(a){return d[63]=d[64]}])},function(a){return d[62]=d[63]}])},function(a){return d[61]=d[62]}])},function(a){return d[60]=d[61]}])},function(a){return d[59]=d[60]}])},function(a){return d[58]=d[59]}])},function(a){return d[57]=d[58]}])},function(a){return d[56]=d[57]}])},function(a){return d[55]=d[56]}])},function(a){return d[54]=d[55]}])},function(a){return d[53]=d[54]}])},function(a){return d[52]=d[53]}])},function(a){return d[51]=d[52]}])},function(a){return d[50]=d[51]}])},function(a){return d[49]=d[50]}])},function(a){return d[48]=d[49]}])},function(a){return d[47]=d[48]}])},function(a){return d[46]=d[47]}])},function(a){return d[45]=d[46]}])},function(a){return d[44]=d[45]}])},function(a){return d[43]=d[44]}])},function(a){return d[42]=d[43]}])},function(a){return d[41]=d[42]}])},function(a){return d[40]=d[41]}])},function(a){return d[39]=d[40]}])},function(a){return d[38]=d[39]}])},function(a){return d[37]=d[38]}])},function(a){return d[36]=d[37]}])},function(a){return d[35]=d[36]}])},function(a){return d[34]=d[35]}])},function(a){return d[33]=d[34]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[27]=d[31]}]):c.resolve(d[27]=void 0)},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,7]))&&d[27]!==void 0?d[25]=d[27]:0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.i64.eq(d[28],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[30]=a})},function(a){return d[29]=d[30]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[31]=c.createArray(),d[33]=(d[31].push(d[30]),d[31]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[31]).then(function(a){return d[32]=a})},function(a){return d[29]=d[32]}])},function(a){return d[18]=d[25]==null?d[29]:d[25]}]):c.sequence([function(a){return d[19]=!0,c.forEach(c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}),function(a){a=a.item;return c.i64.eq(a.attachmentType,c.i64.cast([0,2]))?0:d[19]=!1})},function(a){return d[19]?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.i64.eq(d[21],d[4])?c.sequence([function(a){return d[23]=c.createArray(),d[25]=(d[23].push(d[16]),d[23]),b("LSLocalize").localizeV2Async(c.i64.cast([0,705614308]),d[23]).then(function(a){return d[24]=a})},function(a){return d[22]=d[24]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[26]=(d[24].push(d[23]),d[24]),d[26]=(d[24].push(d[16]),d[24]),b("LSLocalize").localizeV2Async(c.i64.cast([0,313217698]),d[24]).then(function(a){return d[25]=a})},function(a){return d[22]=d[25]}])},function(a){return d[20]=d[22]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.i64.eq(d[21],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3558654267]),void 0).then(function(a){return d[23]=a})},function(a){return d[22]=d[23]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[26]=(d[24].push(d[23]),d[24]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3422266740]),d[24]).then(function(a){return d[25]=a})},function(a){return d[22]=d[25]}])},function(a){return d[20]=d[22]}])},function(a){return d[18]=d[20]}])},function(a){return d[17]=d[18]}])},function(a){return d[15]=d[17]}])},function(a){return d[14]=d[15]}])},function(a){return d[13]=d[14]}])},function(a){return d[12]=d[13]}])},function(a){return d[11]=d[12]}])},function(a){return d[10]=d[11]}])},function(a){return d[2]=d[10]}])},function(e){return c.storedProcedure(b("LSUpdateThreadSnippet"),a[0],d[2],d[3],d[4],c.like(d[2],"%\udb80\udc00%"),void 0,void 0,!1)},function(d){return c.storedProcedure(b("LSUpdateLastActivityTimestamp"),a[0],f.timestampMs)}]))}):c.db.table(12).fetchDesc([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(a){return d[6]=f.text,d[5]=f.threadKey,d[8]=c.i64.cast([0,0]),d[9]=f.messageId,d[4]=f.senderId,d[7]=f.stickerId,d[3]=f.isAdminMessage,d[1]=!0,d[3]||!d[1]?c.resolve(d[2]=d[6]==null?"":d[6]):c.sequence([function(a){return f.isUnsent?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.i64.eq(d[11],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2987332812]),void 0).then(function(a){return d[16]=a})},function(a){return d[12]=d[16]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[17]=c.createArray(),d[19]=(d[17].push(d[16]),d[17]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1530605193]),d[17]).then(function(a){return d[18]=a})},function(a){return d[12]=d[18]}])},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[13]=!1:(e=b.item,d[13]=[c.i64.cast([0,23]),c.i64.cast([0,21]),c.i64.cast([0,18]),c.i64.cast([0,26]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[13]?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],d[20]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],d[20]=a[4],a)})},function(a){return d[19]!==void 0?d[22]=d[19]:d[22]=d[12],d[15]=d[22]}]):c.resolve(d[15]=d[12])},function(a){return d[10]=d[15]}]):c.sequence([function(a){return c.sequence([function(a){return c.i64.eq(f.replyType,c.i64.cast([0,1]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.i64.eq(d[13],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1899892426]),void 0).then(function(a){return d[15]=a})},function(a){return d[14]=d[15]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[16]=c.createArray(),d[18]=(d[16].push(d[15]),d[16]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3287869262]),d[16]).then(function(a){return d[17]=a})},function(a){return d[14]=d[17]}])},function(a){return d[12]=d[14]}]):c.sequence([function(a){return d[6]!==void 0&&d[6]!==""?c.sequence([function(a){return d[16]=d[6]==null?"":d[6],c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.i64.eq(d[14],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[17]=a})},function(a){return d[15]=[d[17],": ",d[16]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[17]=!1:(e=b.item,d[17]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[19]=!1:(e=b.item,d[19]=[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[17]||d[19]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[21]=[d[22],": ",d[16]].join("")}]):c.resolve(d[21]=d[16])},function(a){return d[15]=d[21]}])},function(a){return d[13]=d[15]}]):c.sequence([function(a){return c.i64.neq(d[7],void 0)&&[c.i64.cast([53057,267535043]),c.i64.cast([85970,924785702]),c.i64.cast([85970,1004785694]),c.i64.cast([85970,1044785690])].some(function(a){return c.i64.eq(d[7],a)})?c.sequence([function(a){return d[17]="\udb80\udc00",c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.i64.eq(d[15],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[18]=a})},function(a){return d[16]=[d[18],": ",d[17]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[18]=!1:(e=b.item,d[18]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return c.db.table(9).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[20]=!1:(e=b.item,d[20]=[c.i64.cast([0,18]),c.i64.cast([0,27])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[18]||d[20]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[22]=[d[23],": ",d[17]].join("")}]):c.resolve(d[22]=d[17])},function(a){return d[16]=d[22]}])},function(a){return d[14]=d[16]}]):c.sequence([function(a){return c.i64.neq(d[7],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.i64.eq(d[16],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[18]=a})},function(a){return d[17]=d[18]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[18]=a[0],a})},function(a){return d[19]=c.createArray(),d[21]=(d[19].push(d[18]),d[19]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3621454483]),d[19]).then(function(a){return d[20]=a})},function(a){return d[17]=d[20]}])},function(a){return d[15]=d[17]}]):c.sequence([function(a){return c.count(c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]})).then(function(a){return d[16]=a})},function(a){return c.i64.eq(d[16],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.i64.eq(d[18],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[20]=a})},function(a){return d[19]=d[20]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[21]=c.createArray(),d[23]=(d[21].push(d[20]),d[21]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[21]).then(function(a){return d[22]=a})},function(a){return d[19]=d[22]}])},function(a){return d[17]=d[19]}]):c.sequence([function(a){return c.i64.eq(d[16],c.i64.cast([0,1]))?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[19]=a[0],d[20]=a[1],d[21]=a[2],d[22]=a[3],d[23]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[19]=a[0],d[20]=a[1],d[21]=a[2],d[22]=a[3],d[23]=a[4],a)})},function(a){return d[25]=void 0,d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,1]))||c.i64.eq(d[19],c.i64.cast([0,15])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3621454483]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,2]))||c.i64.eq(d[19],c.i64.cast([0,8])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2106510577]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3960370133]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,3]))?c.sequence([function(a){return d[20]!==void 0?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.i64.eq(d[31],d[4])?c.sequence([function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[20]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3798396796]),d[33]).then(function(a){return d[34]=a})},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[33]),d[34]),d[36]=(d[34].push(d[20]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3388601579]),d[34]).then(function(a){return d[35]=a})},function(a){return d[32]=d[35]}])},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.i64.eq(d[31],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1556712457]),void 0).then(function(a){return d[33]=a})},function(a){return d[32]=d[33]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[33]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3601791933]),d[34]).then(function(a){return d[35]=a})},function(a){return d[32]=d[35]}])},function(a){return d[30]=d[32]}])},function(a){return d[25]=d[30]}]):c.resolve()},function(a){return d[25]===void 0&&(c.i64.eq(d[19],c.i64.cast([0,4]))||c.i64.eq(d[19],c.i64.cast([0,9])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3759817031]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2934729541]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,5]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,392493418]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,4085467454]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,10]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2738683656]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2996525642]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[25]=d[31]}]):c.resolve()},function(a){return c.i64.neq(d[23],void 0)?d[26]=d[23]:(d[21]==="xma_live_location_sharing"?d[30]=c.i64.cast([0,7e3]):d[30]=void 0,d[26]=d[30]),c.i64.neq(d[26],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[26],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return c.i64.eq(d[32],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[34]=a})},function(a){return d[33]=d[34]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[35]=c.createArray(),d[37]=(d[35].push(d[34]),d[35]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[35]).then(function(a){return d[36]=a})},function(a){return d[33]=d[36]}])},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.i64.eq(d[33],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[35]=a})},function(a){return d[34]=d[35]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=c.createArray(),d[38]=(d[36].push(d[35]),d[36]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[36]).then(function(a){return d[37]=a})},function(a){return d[34]=d[37]}])},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[34]=a[0],a})},function(a){return c.i64.eq(d[34],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[36]=a})},function(a){return d[35]=d[36]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[37]=c.createArray(),d[39]=(d[37].push(d[36]),d[37]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[37]).then(function(a){return d[38]=a})},function(a){return d[35]=d[38]}])},function(a){return d[33]=d[35]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.i64.eq(d[35],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[37]=a})},function(a){return d[36]=d[37]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[38]=c.createArray(),d[40]=(d[38].push(d[37]),d[38]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[38]).then(function(a){return d[39]=a})},function(a){return d[36]=d[39]}])},function(a){return d[34]=d[36]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.i64.eq(d[36],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[38]=a})},function(a){return d[37]=d[38]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=c.createArray(),d[41]=(d[39].push(d[38]),d[39]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3759448420]),d[39]).then(function(a){return d[40]=a})},function(a){return d[37]=d[40]}])},function(a){return d[35]=d[37]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.i64.eq(d[37],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[39]=a})},function(a){return d[38]=d[39]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[40]=c.createArray(),d[42]=(d[40].push(d[39]),d[40]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[40]).then(function(a){return d[41]=a})},function(a){return d[38]=d[41]}])},function(a){return d[36]=d[38]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[38]=a[0],a})},function(a){return c.i64.eq(d[38],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[40]=a})},function(a){return d[41]=c.createArray(),d[43]=(d[41].push(d[40]),d[41]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3322002377]),d[41]).then(function(a){return d[42]=a})},function(a){return d[39]=d[42]}]):c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[40]=a})},function(a){return d[39]=d[40]}])},function(a){return d[37]=d[39]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.i64.eq(d[39],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3557790945]),void 0).then(function(a){return d[41]=a})},function(a){return d[40]=d[41]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[42]=c.createArray(),d[44]=(d[42].push(d[41]),d[42]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3756846086]),d[42]).then(function(a){return d[43]=a})},function(a){return d[40]=d[43]}])},function(a){return d[38]=d[40]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.i64.eq(d[40],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[42]=a})},function(a){return d[41]=d[42]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[43]=c.createArray(),d[45]=(d[43].push(d[42]),d[43]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[43]).then(function(a){return d[44]=a})},function(a){return d[41]=d[44]}])},function(a){return d[39]=d[41]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.i64.eq(d[41],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[43]=a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[44]=c.createArray(),d[46]=(d[44].push(d[43]),d[44]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[44]).then(function(a){return d[45]=a})},function(a){return d[42]=d[45]}])},function(a){return d[40]=d[42]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.i64.eq(d[42],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[44]=a})},function(a){return d[43]=d[44]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[45]=c.createArray(),d[47]=(d[45].push(d[44]),d[45]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[45]).then(function(a){return d[46]=a})},function(a){return d[43]=d[46]}])},function(a){return d[41]=d[43]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.i64.eq(d[43],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,780378803]),void 0).then(function(a){return d[45]=a})},function(a){return d[44]=d[45]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[46]=c.createArray(),d[48]=(d[46].push(d[45]),d[46]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3918212613]),d[46]).then(function(a){return d[47]=a})},function(a){return d[44]=d[47]}])},function(a){return d[42]=d[44]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.i64.eq(d[44],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3161890215]),void 0).then(function(a){return d[46]=a})},function(a){return d[45]=d[46]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=c.createArray(),d[49]=(d[47].push(d[46]),d[47]),b("LSLocalize").localizeV2Async(c.i64.cast([0,863428456]),d[47]).then(function(a){return d[48]=a})},function(a){return d[45]=d[48]}])},function(a){return d[43]=d[45]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.i64.eq(d[45],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2716405471]),void 0).then(function(a){return d[47]=a})},function(a){return d[46]=d[47]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[48]=c.createArray(),d[50]=(d[48].push(d[47]),d[48]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3909474073]),d[48]).then(function(a){return d[49]=a})},function(a){return d[46]=d[49]}])},function(a){return d[44]=d[46]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.i64.eq(d[46],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[48]=a})},function(a){return d[47]=d[48]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[49]=c.createArray(),d[51]=(d[49].push(d[48]),d[49]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2804766375]),d[49]).then(function(a){return d[50]=a})},function(a){return d[47]=d[50]}])},function(a){return d[45]=d[47]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1013]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[47]=a[0],a})},function(a){return c.i64.eq(d[47],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[49]=a})},function(a){return d[48]=d[49]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[50]=c.createArray(),d[52]=(d[50].push(d[49]),d[50]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2804766375]),d[50]).then(function(a){return d[51]=a})},function(a){return d[48]=d[51]}])},function(a){return d[46]=d[48]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1014]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.i64.eq(d[48],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[50]=a})},function(a){return d[51]=c.createArray(),d[53]=(d[51].push(d[50]),d[51]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3322002377]),d[51]).then(function(a){return d[52]=a})},function(a){return d[49]=d[52]}]):c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[50]=a})},function(a){return d[49]=d[50]}])},function(a){return d[47]=d[49]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.i64.eq(d[49],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[51]=a})},function(a){return d[50]=d[51]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[52]=c.createArray(),d[54]=(d[52].push(d[51]),d[52]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[52]).then(function(a){return d[53]=a})},function(a){return d[50]=d[53]}])},function(a){return d[48]=d[50]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.i64.eq(d[50],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[52]=a})},function(a){return d[51]=d[52]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[53]=c.createArray(),d[55]=(d[53].push(d[52]),d[53]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[53]).then(function(a){return d[54]=a})},function(a){return d[51]=d[54]}])},function(a){return d[49]=d[51]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1017]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[51]=a[0],a})},function(a){return c.i64.eq(d[51],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[53]=a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[54]=c.createArray(),d[56]=(d[54].push(d[53]),d[54]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[54]).then(function(a){return d[55]=a})},function(a){return d[52]=d[55]}])},function(a){return d[50]=d[52]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1018]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.i64.eq(d[52],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[54]=a})},function(a){return d[53]=d[54]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[55]=c.createArray(),d[57]=(d[55].push(d[54]),d[55]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[55]).then(function(a){return d[56]=a})},function(a){return d[53]=d[56]}])},function(a){return d[51]=d[53]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1019]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[53]=a[0],a})},function(a){return c.i64.eq(d[53],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[55]=a})},function(a){return d[54]=d[55]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[56]=c.createArray(),d[58]=(d[56].push(d[55]),d[56]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[56]).then(function(a){return d[57]=a})},function(a){return d[54]=d[57]}])},function(a){return d[52]=d[54]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,1020]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.i64.eq(d[54],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[56]=a})},function(a){return d[55]=d[56]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[57]=c.createArray(),d[59]=(d[57].push(d[56]),d[57]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[57]).then(function(a){return d[58]=a})},function(a){return d[55]=d[58]}])},function(a){return d[53]=d[55]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2e3]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.i64.eq(d[56],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[58]=a})},function(a){return d[57]=d[58]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[59]=c.createArray(),d[61]=(d[59].push(d[58]),d[59]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[59]).then(function(a){return d[60]=a})},function(a){return d[57]=d[60]}])},function(a){return d[55]=d[57]}])},function(a){return d[54]=d[55]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.i64.eq(d[56],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[58]=a})},function(a){return d[57]=d[58]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[59]=c.createArray(),d[61]=(d[59].push(d[58]),d[59]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3759448420]),d[59]).then(function(a){return d[60]=a})},function(a){return d[57]=d[60]}])},function(a){return d[55]=d[57]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.i64.eq(d[57],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[59]=a})},function(a){return d[58]=d[59]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[60]=c.createArray(),d[62]=(d[60].push(d[59]),d[60]),b("LSLocalize").localizeV2Async(c.i64.cast([0,284944921]),d[60]).then(function(a){return d[61]=a})},function(a){return d[58]=d[61]}])},function(a){return d[56]=d[58]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.i64.eq(d[58],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[60]=a})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[61]=a[0],a})},function(a){return c.i64.eq(d[61],d[4])?c.sequence([function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[60]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1247108605]),d[63]).then(function(a){return d[64]=a})},function(a){return d[62]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[63]=a[0],a})},function(a){return d[64]=c.createArray(),d[66]=(d[64].push(d[63]),d[64]),d[66]=(d[64].push(d[60]),d[64]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2966876020]),d[64]).then(function(a){return d[65]=a})},function(a){return d[62]=d[65]}])},function(a){return d[59]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1056933543]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1167688664]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}])},function(a){return d[57]=d[59]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[59]=a[0],a})},function(a){return c.i64.eq(d[59],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[61]=a})},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[62]=c.createArray(),d[64]=(d[62].push(d[61]),d[62]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1001986796]),d[62]).then(function(a){return d[63]=a})},function(a){return d[60]=d[63]}])},function(a){return d[58]=d[60]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,772459202]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3546068912]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2006]))?c.sequence([function(a){return c.i64.eq(d[30],d[4])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.i64.eq(d[62],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2459540079]),void 0).then(function(a){return d[64]=a})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[65]=c.createArray(),d[67]=(d[65].push(d[64]),d[65]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1596311291]),d[65]).then(function(a){return d[66]=a})},function(a){return d[63]=d[66]}])},function(a){return d[61]=d[63]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.i64.eq(d[62],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2253698324]),void 0).then(function(a){return d[64]=a})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[65]=c.createArray(),d[67]=(d[65].push(d[64]),d[65]),b("LSLocalize").localizeV2Async(c.i64.cast([0,4269602817]),d[65]).then(function(a){return d[66]=a})},function(a){return d[63]=d[66]}])},function(a){return d[61]=d[63]}])},function(a){return d[60]=d[61]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2007]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.i64.eq(d[63],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[65]=a})},function(a){return d[64]=d[65]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return d[66]=c.createArray(),d[68]=(d[66].push(d[65]),d[66]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[66]).then(function(a){return d[67]=a})},function(a){return d[64]=d[67]}])},function(a){return d[62]=d[64]}])},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.i64.eq(d[63],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[65]=a})},function(a){return d[64]=d[65]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return d[66]=c.createArray(),d[68]=(d[66].push(d[65]),d[66]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[66]).then(function(a){return d[67]=a})},function(a){return d[64]=d[67]}])},function(a){return d[62]=d[64]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2009]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[65]=a[0],a})},function(a){return c.i64.eq(d[65],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[67]=a})},function(a){return d[66]=d[67]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return d[68]=c.createArray(),d[70]=(d[68].push(d[67]),d[68]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[68]).then(function(a){return d[69]=a})},function(a){return d[66]=d[69]}])},function(a){return d[64]=d[66]}])},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[65]=a[0],a})},function(a){return c.i64.eq(d[65],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[67]=a})},function(a){return d[66]=d[67]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return d[68]=c.createArray(),d[70]=(d[68].push(d[67]),d[68]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[68]).then(function(a){return d[69]=a})},function(a){return d[66]=d[69]}])},function(a){return d[64]=d[66]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[66]=a[0],a})},function(a){return c.i64.eq(d[66],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[68]=a})},function(a){return d[67]=d[68]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return d[69]=c.createArray(),d[71]=(d[69].push(d[68]),d[69]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[69]).then(function(a){return d[70]=a})},function(a){return d[67]=d[70]}])},function(a){return d[65]=d[67]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.i64.eq(d[67],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[69]=a})},function(a){return d[68]=d[69]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[70]=c.createArray(),d[72]=(d[70].push(d[69]),d[70]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[70]).then(function(a){return d[71]=a})},function(a){return d[68]=d[71]}])},function(a){return d[66]=d[68]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,2013]))?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[68]=a})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[69]=a[0],a})},function(a){return c.i64.eq(d[69],d[4])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return d[73]=c.createArray(),d[75]=(d[73].push(d[68]),d[73]),b("LSLocalize").localizeV2Async(c.i64.cast([0,785694792]),d[73]).then(function(a){return d[74]=a})},function(a){return d[72]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),d[76]=(d[74].push(d[68]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2625447567]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3982213805]),void 0).then(function(a){return d[73]=a})},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,464916028]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}])},function(a){return d[67]=d[70]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3e3]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[70]=a[0],a})},function(a){return c.i64.eq(d[70],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[72]=a})},function(a){return d[71]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return d[73]=c.createArray(),d[75]=(d[73].push(d[72]),d[73]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[73]).then(function(a){return d[74]=a})},function(a){return d[71]=d[74]}])},function(a){return d[69]=d[71]}])},function(a){return d[68]=d[69]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[70]=a[0],a})},function(a){return c.i64.eq(d[70],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[72]=a})},function(a){return d[71]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return d[73]=c.createArray(),d[75]=(d[73].push(d[72]),d[73]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[73]).then(function(a){return d[74]=a})},function(a){return d[71]=d[74]}])},function(a){return d[69]=d[71]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[73]=a})},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3616471048]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.i64.eq(d[72],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[74]=a})},function(a){return d[73]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[75]=c.createArray(),d[77]=(d[75].push(d[74]),d[75]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3616471048]),d[75]).then(function(a){return d[76]=a})},function(a){return d[73]=d[76]}])},function(a){return d[71]=d[73]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.i64.eq(d[73],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[75]=a})},function(a){return d[74]=d[75]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[76]=c.createArray(),d[78]=(d[76].push(d[75]),d[76]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[76]).then(function(a){return d[77]=a})},function(a){return d[74]=d[77]}])},function(a){return d[72]=d[74]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[74]=a[0],a})},function(a){return c.i64.eq(d[74],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[76]=a})},function(a){return d[75]=d[76]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[77]=c.createArray(),d[79]=(d[77].push(d[76]),d[77]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[77]).then(function(a){return d[78]=a})},function(a){return d[75]=d[78]}])},function(a){return d[73]=d[75]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[75]=a[0],a})},function(a){return c.i64.eq(d[75],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[77]=a})},function(a){return d[76]=d[77]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[77]=a[0],a})},function(a){return d[78]=c.createArray(),d[80]=(d[78].push(d[77]),d[78]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[78]).then(function(a){return d[79]=a})},function(a){return d[76]=d[79]}])},function(a){return d[74]=d[76]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[76]=a[0],a})},function(a){return c.i64.eq(d[76],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[78]=a})},function(a){return d[77]=d[78]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[78]=a[0],a})},function(a){return d[79]=c.createArray(),d[81]=(d[79].push(d[78]),d[79]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[79]).then(function(a){return d[80]=a})},function(a){return d[77]=d[80]}])},function(a){return d[75]=d[77]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[77]=a[0],a})},function(a){return c.i64.eq(d[77],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[79]=a})},function(a){return d[78]=d[79]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[79]=a[0],a})},function(a){return d[80]=c.createArray(),d[82]=(d[80].push(d[79]),d[80]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[80]).then(function(a){return d[81]=a})},function(a){return d[78]=d[81]}])},function(a){return d[76]=d[78]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[78]=a[0],a})},function(a){return c.i64.eq(d[78],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[80]=a})},function(a){return d[79]=d[80]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[81]=c.createArray(),d[83]=(d[81].push(d[80]),d[81]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[81]).then(function(a){return d[82]=a})},function(a){return d[79]=d[82]}])},function(a){return d[77]=d[79]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3010]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[80]=a[0],a})},function(a){return c.i64.eq(d[80],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[82]=a})},function(a){return d[81]=d[82]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[83]=c.createArray(),d[85]=(d[83].push(d[82]),d[83]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[83]).then(function(a){return d[84]=a})},function(a){return d[81]=d[84]}])},function(a){return d[79]=d[81]}])},function(a){return d[78]=d[79]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[80]=a[0],a})},function(a){return c.i64.eq(d[80],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[82]=a})},function(a){return d[81]=d[82]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[83]=c.createArray(),d[85]=(d[83].push(d[82]),d[83]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[83]).then(function(a){return d[84]=a})},function(a){return d[81]=d[84]}])},function(a){return d[79]=d[81]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[81]=a[0],a})},function(a){return c.i64.eq(d[81],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[83]=a})},function(a){return d[82]=d[83]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[84]=c.createArray(),d[86]=(d[84].push(d[83]),d[84]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[84]).then(function(a){return d[85]=a})},function(a){return d[82]=d[85]}])},function(a){return d[80]=d[82]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3013]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.i64.eq(d[82],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[84]=a})},function(a){return d[83]=d[84]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[84]=a[0],a})},function(a){return d[85]=c.createArray(),d[87]=(d[85].push(d[84]),d[85]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[85]).then(function(a){return d[86]=a})},function(a){return d[83]=d[86]}])},function(a){return d[81]=d[83]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3014]))?c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[84]=a[0],a})},function(a){return c.i64.eq(d[84],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[86]=a})},function(a){return d[85]=d[86]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[86]=a[0],a})},function(a){return d[87]=c.createArray(),d[89]=(d[87].push(d[86]),d[87]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[87]).then(function(a){return d[88]=a})},function(a){return d[85]=d[88]}])},function(a){return d[83]=d[85]}])},function(a){return d[82]=d[83]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[84]=a[0],a})},function(a){return c.i64.eq(d[84],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3471188061]),void 0).then(function(a){return d[86]=a})},function(a){return d[85]=d[86]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[86]=a[0],a})},function(a){return d[87]=c.createArray(),d[89]=(d[87].push(d[86]),d[87]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2776822462]),d[87]).then(function(a){return d[88]=a})},function(a){return d[85]=d[88]}])},function(a){return d[83]=d[85]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[85]=a[0],a})},function(a){return c.i64.eq(d[85],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[87]=a})},function(a){return d[86]=d[87]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return d[88]=c.createArray(),d[90]=(d[88].push(d[87]),d[88]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[88]).then(function(a){return d[89]=a})},function(a){return d[86]=d[89]}])},function(a){return d[84]=d[86]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3017]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[86]=a[0],a})},function(a){return c.i64.eq(d[86],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[88]=a})},function(a){return d[87]=d[88]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[88]=a[0],a})},function(a){return d[89]=c.createArray(),d[91]=(d[89].push(d[88]),d[89]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[89]).then(function(a){return d[90]=a})},function(a){return d[87]=d[90]}])},function(a){return d[85]=d[87]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3018]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[87]=a[0],a})},function(a){return c.i64.eq(d[87],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[89]=a})},function(a){return d[88]=d[89]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[89]=a[0],a})},function(a){return d[90]=c.createArray(),d[92]=(d[90].push(d[89]),d[90]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[90]).then(function(a){return d[91]=a})},function(a){return d[88]=d[91]}])},function(a){return d[86]=d[88]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3019]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[88]=a[0],a})},function(a){return c.i64.eq(d[88],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[90]=a})},function(a){return d[89]=d[90]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[90]=a[0],a})},function(a){return d[91]=c.createArray(),d[93]=(d[91].push(d[90]),d[91]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[91]).then(function(a){return d[92]=a})},function(a){return d[89]=d[92]}])},function(a){return d[87]=d[89]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3020]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[89]=a[0],a})},function(a){return c.i64.eq(d[89],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[91]=a})},function(a){return d[90]=d[91]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[91]=a[0],a})},function(a){return d[92]=c.createArray(),d[94]=(d[92].push(d[91]),d[92]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[92]).then(function(a){return d[93]=a})},function(a){return d[90]=d[93]}])},function(a){return d[88]=d[90]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3021]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[90]=a[0],a})},function(a){return c.i64.eq(d[90],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[92]=a})},function(a){return d[91]=d[92]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[92]=a[0],a})},function(a){return d[93]=c.createArray(),d[95]=(d[93].push(d[92]),d[93]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[93]).then(function(a){return d[94]=a})},function(a){return d[91]=d[94]}])},function(a){return d[89]=d[91]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3022]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[91]=a[0],a})},function(a){return c.i64.eq(d[91],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[93]=a})},function(a){return d[92]=d[93]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[93]=a[0],a})},function(a){return d[94]=c.createArray(),d[96]=(d[94].push(d[93]),d[94]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[94]).then(function(a){return d[95]=a})},function(a){return d[92]=d[95]}])},function(a){return d[90]=d[92]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3023]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[92]=a[0],a})},function(a){return c.i64.eq(d[92],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[94]=a})},function(a){return d[93]=d[94]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[94]=a[0],a})},function(a){return d[95]=c.createArray(),d[97]=(d[95].push(d[94]),d[95]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[95]).then(function(a){return d[96]=a})},function(a){return d[93]=d[96]}])},function(a){return d[91]=d[93]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3024]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[93]=a[0],a})},function(a){return c.i64.eq(d[93],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[95]=a})},function(a){return d[94]=d[95]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[95]=a[0],a})},function(a){return d[96]=c.createArray(),d[98]=(d[96].push(d[95]),d[96]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[96]).then(function(a){return d[97]=a})},function(a){return d[94]=d[97]}])},function(a){return d[92]=d[94]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3025]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[94]=a[0],a})},function(a){return c.i64.eq(d[94],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[96]=a})},function(a){return d[95]=d[96]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[96]=a[0],a})},function(a){return d[97]=c.createArray(),d[99]=(d[97].push(d[96]),d[97]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[97]).then(function(a){return d[98]=a})},function(a){return d[95]=d[98]}])},function(a){return d[93]=d[95]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3026]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[95]=a[0],a})},function(a){return c.i64.eq(d[95],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[97]=a})},function(a){return d[96]=d[97]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[97]=a[0],a})},function(a){return d[98]=c.createArray(),d[100]=(d[98].push(d[97]),d[98]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[98]).then(function(a){return d[99]=a})},function(a){return d[96]=d[99]}])},function(a){return d[94]=d[96]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3027]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[96]=a[0],a})},function(a){return c.i64.eq(d[96],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[98]=a})},function(a){return d[97]=d[98]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[98]=a[0],a})},function(a){return d[99]=c.createArray(),d[101]=(d[99].push(d[98]),d[99]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[99]).then(function(a){return d[100]=a})},function(a){return d[97]=d[100]}])},function(a){return d[95]=d[97]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3028]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[97]=a[0],a})},function(a){return c.i64.eq(d[97],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[99]=a})},function(a){return d[98]=d[99]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[99]=a[0],a})},function(a){return d[100]=c.createArray(),d[102]=(d[100].push(d[99]),d[100]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[100]).then(function(a){return d[101]=a})},function(a){return d[98]=d[101]}])},function(a){return d[96]=d[98]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3029]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[98]=a[0],a})},function(a){return c.i64.eq(d[98],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[100]=a})},function(a){return d[99]=d[100]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[100]=a[0],a})},function(a){return d[101]=c.createArray(),d[103]=(d[101].push(d[100]),d[101]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[101]).then(function(a){return d[102]=a})},function(a){return d[99]=d[102]}])},function(a){return d[97]=d[99]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,3040]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[99]=a[0],a})},function(a){return c.i64.eq(d[99],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[101]=a})},function(a){return d[100]=d[101]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[101]=a[0],a})},function(a){return d[102]=c.createArray(),d[104]=(d[102].push(d[101]),d[102]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[102]).then(function(a){return d[103]=a})},function(a){return d[100]=d[103]}])},function(a){return d[98]=d[100]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[100]=a[0],a})},function(a){return c.i64.eq(d[100],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[104]=a})},function(a){return d[101]=d[104]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[104]=a[0],a})},function(a){return d[101]=d[104]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[102]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1739999037]),void 0).then(function(a){return d[103]=a})},function(a){return d[99]=d[103]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[101]=a[0],a})},function(a){return c.i64.eq(d[101],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[105]=a})},function(a){return d[102]=d[105]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[105]=a[0],a})},function(a){return d[102]=d[105]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[103]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3373597599]),void 0).then(function(a){return d[104]=a})},function(a){return d[100]=d[104]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[102]=a[0],a})},function(a){return c.i64.eq(d[102],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[106]=a})},function(a){return d[103]=d[106]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[106]=a[0],a})},function(a){return d[103]=d[106]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[104]=a[0],a})},function(a){return c.i64.eq(d[104],d[4])?c.sequence([function(a){return d[106]=c.createArray(),d[108]=(d[106].push(d[103]),d[106]),b("LSLocalize").localizeV2Async(c.i64.cast([0,259473449]),d[106]).then(function(a){return d[107]=a})},function(a){return d[105]=d[107]}]):c.sequence([function(a){return d[106]=c.createArray(),d[108]=(d[106].push(d[103]),d[106]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1338912959]),d[106]).then(function(a){return d[107]=a})},function(a){return d[105]=d[107]}])},function(a){return d[101]=d[105]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[103]=a[0],a})},function(a){return c.i64.eq(d[103],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[107]=a})},function(a){return d[104]=d[107]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[107]=a[0],a})},function(a){return d[104]=d[107]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[105]=a[0],a})},function(a){return c.i64.eq(d[105],d[4])?c.sequence([function(a){return d[107]=c.createArray(),d[109]=(d[107].push(d[104]),d[107]),b("LSLocalize").localizeV2Async(c.i64.cast([0,812940701]),d[107]).then(function(a){return d[108]=a})},function(a){return d[106]=d[108]}]):c.sequence([function(a){return d[107]=c.createArray(),d[109]=(d[107].push(d[104]),d[107]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1099878966]),d[107]).then(function(a){return d[108]=a})},function(a){return d[106]=d[108]}])},function(a){return d[102]=d[106]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[104]=a[0],a})},function(a){return c.i64.eq(d[104],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[108]=a})},function(a){return d[105]=d[108]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[108]=a[0],a})},function(a){return d[105]=d[108]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[106]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3443782102]),void 0).then(function(a){return d[107]=a})},function(a){return d[103]=d[107]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[105]=a[0],a})},function(a){return c.i64.eq(d[105],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[109]=a})},function(a){return d[106]=d[109]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[109]=a[0],a})},function(a){return d[106]=d[109]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[107]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,618905030]),void 0).then(function(a){return d[108]=a})},function(a){return d[104]=d[108]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[106]=a[0],a})},function(a){return c.i64.eq(d[106],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[110]=a})},function(a){return d[107]=d[110]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[110]=a[0],a})},function(a){return d[107]=d[110]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[108]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2470414797]),void 0).then(function(a){return d[109]=a})},function(a){return d[105]=d[109]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[107]=a[0],a})},function(a){return c.i64.eq(d[107],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[111]=a})},function(a){return d[108]=d[111]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[111]=a[0],a})},function(a){return d[108]=d[111]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[109]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1306024833]),void 0).then(function(a){return d[110]=a})},function(a){return d[106]=d[110]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[108]=a[0],a})},function(a){return c.i64.eq(d[108],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[112]=a})},function(a){return d[109]=d[112]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[112]=a[0],a})},function(a){return d[109]=d[112]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[110]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3443782102]),void 0).then(function(a){return d[111]=a})},function(a){return d[107]=d[111]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,4009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[109]=a[0],a})},function(a){return c.i64.eq(d[109],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[113]=a})},function(a){return d[110]=d[113]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[113]=a[0],a})},function(a){return d[110]=d[113]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[111]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,618905030]),void 0).then(function(a){return d[112]=a})},function(a){return d[108]=d[112]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,5e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[110]=a[0],a})},function(a){return c.i64.eq(d[110],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[112]=a})},function(a){return d[111]=d[112]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[112]=a[0],a})},function(a){return d[113]=c.createArray(),d[115]=(d[113].push(d[112]),d[113]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[113]).then(function(a){return d[114]=a})},function(a){return d[111]=d[114]}])},function(a){return d[109]=d[111]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,6e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[111]=a[0],a})},function(a){return c.i64.eq(d[111],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[113]=a})},function(a){return d[112]=d[113]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[113]=a[0],a})},function(a){return d[114]=c.createArray(),d[116]=(d[114].push(d[113]),d[114]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[114]).then(function(a){return d[115]=a})},function(a){return d[112]=d[115]}])},function(a){return d[110]=d[112]}]):c.sequence([function(a){return c.i64.eq(d[26],c.i64.cast([0,7e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[112]=a[0],a})},function(a){return c.i64.eq(d[112],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2135145355]),void 0).then(function(a){return d[114]=a})},function(a){return d[113]=d[114]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[114]=a[0],a})},function(a){return d[115]=c.createArray(),d[117]=(d[115].push(d[114]),d[115]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3603511704]),d[115]).then(function(a){return d[116]=a})},function(a){return d[113]=d[116]}])},function(a){return d[111]=d[113]}]):c.resolve(d[111]=void 0)},function(a){return d[110]=d[111]}])},function(a){return d[109]=d[110]}])},function(a){return d[108]=d[109]}])},function(a){return d[107]=d[108]}])},function(a){return d[106]=d[107]}])},function(a){return d[105]=d[106]}])},function(a){return d[104]=d[105]}])},function(a){return d[103]=d[104]}])},function(a){return d[102]=d[103]}])},function(a){return d[101]=d[102]}])},function(a){return d[100]=d[101]}])},function(a){return d[99]=d[100]}])},function(a){return d[98]=d[99]}])},function(a){return d[97]=d[98]}])},function(a){return d[96]=d[97]}])},function(a){return d[95]=d[96]}])},function(a){return d[94]=d[95]}])},function(a){return d[93]=d[94]}])},function(a){return d[92]=d[93]}])},function(a){return d[91]=d[92]}])},function(a){return d[90]=d[91]}])},function(a){return d[89]=d[90]}])},function(a){return d[88]=d[89]}])},function(a){return d[87]=d[88]}])},function(a){return d[86]=d[87]}])},function(a){return d[85]=d[86]}])},function(a){return d[84]=d[85]}])},function(a){return d[83]=d[84]}])},function(a){return d[82]=d[83]}])},function(a){return d[81]=d[82]}])},function(a){return d[80]=d[81]}])},function(a){return d[79]=d[80]}])},function(a){return d[78]=d[79]}])},function(a){return d[77]=d[78]}])},function(a){return d[76]=d[77]}])},function(a){return d[75]=d[76]}])},function(a){return d[74]=d[75]}])},function(a){return d[73]=d[74]}])},function(a){return d[72]=d[73]}])},function(a){return d[71]=d[72]}])},function(a){return d[70]=d[71]}])},function(a){return d[69]=d[70]}])},function(a){return d[68]=d[69]}])},function(a){return d[67]=d[68]}])},function(a){return d[66]=d[67]}])},function(a){return d[65]=d[66]}])},function(a){return d[64]=d[65]}])},function(a){return d[63]=d[64]}])},function(a){return d[62]=d[63]}])},function(a){return d[61]=d[62]}])},function(a){return d[60]=d[61]}])},function(a){return d[59]=d[60]}])},function(a){return d[58]=d[59]}])},function(a){return d[57]=d[58]}])},function(a){return d[56]=d[57]}])},function(a){return d[55]=d[56]}])},function(a){return d[54]=d[55]}])},function(a){return d[53]=d[54]}])},function(a){return d[52]=d[53]}])},function(a){return d[51]=d[52]}])},function(a){return d[50]=d[51]}])},function(a){return d[49]=d[50]}])},function(a){return d[48]=d[49]}])},function(a){return d[47]=d[48]}])},function(a){return d[46]=d[47]}])},function(a){return d[45]=d[46]}])},function(a){return d[44]=d[45]}])},function(a){return d[43]=d[44]}])},function(a){return d[42]=d[43]}])},function(a){return d[41]=d[42]}])},function(a){return d[40]=d[41]}])},function(a){return d[39]=d[40]}])},function(a){return d[38]=d[39]}])},function(a){return d[37]=d[38]}])},function(a){return d[36]=d[37]}])},function(a){return d[35]=d[36]}])},function(a){return d[34]=d[35]}])},function(a){return d[33]=d[34]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[27]=d[31]}]):c.resolve(d[27]=void 0)},function(a){return d[25]===void 0&&c.i64.eq(d[19],c.i64.cast([0,7]))&&d[27]!==void 0?d[25]=d[27]:0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.i64.eq(d[28],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[30]=a})},function(a){return d[29]=d[30]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[31]=c.createArray(),d[33]=(d[31].push(d[30]),d[31]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1249692047]),d[31]).then(function(a){return d[32]=a})},function(a){return d[29]=d[32]}])},function(a){return d[18]=d[25]==null?d[29]:d[25]}]):c.sequence([function(a){return d[19]=!0,c.forEach(c.filter(c.db.table(16).fetch([[[d[5],d[9]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[8])&&a.messageId===d[9]}),function(a){a=a.item;return c.i64.eq(a.attachmentType,c.i64.cast([0,2]))?0:d[19]=!1})},function(a){return d[19]?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.i64.eq(d[21],d[4])?c.sequence([function(a){return d[23]=c.createArray(),d[25]=(d[23].push(d[16]),d[23]),b("LSLocalize").localizeV2Async(c.i64.cast([0,705614308]),d[23]).then(function(a){return d[24]=a})},function(a){return d[22]=d[24]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[26]=(d[24].push(d[23]),d[24]),d[26]=(d[24].push(d[16]),d[24]),b("LSLocalize").localizeV2Async(c.i64.cast([0,313217698]),d[24]).then(function(a){return d[25]=a})},function(a){return d[22]=d[25]}])},function(a){return d[20]=d[22]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.i64.eq(d[21],d[4])?c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,3558654267]),void 0).then(function(a){return d[23]=a})},function(a){return d[22]=d[23]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[5],d[4]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[26]=(d[24].push(d[23]),d[24]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3422266740]),d[24]).then(function(a){return d[25]=a})},function(a){return d[22]=d[25]}])},function(a){return d[20]=d[22]}])},function(a){return d[18]=d[20]}])},function(a){return d[17]=d[18]}])},function(a){return d[15]=d[17]}])},function(a){return d[14]=d[15]}])},function(a){return d[13]=d[14]}])},function(a){return d[12]=d[13]}])},function(a){return d[11]=d[12]}])},function(a){return d[10]=d[11]}])},function(a){return d[2]=d[10]}])},function(e){return c.storedProcedure(b("LSUpdateThreadSnippet"),a[0],d[2],d[3],d[4],c.like(d[2],"%\udb80\udc00%"),void 0,void 0,!1)}]))})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateThreadSnippetFromLastMessageV2StoredProcedure";a.__tables__=["threads","messages","attachments"];e.exports=a}),null);
__d("LSUpdateThreadSnippetFromLastMessageV2StoredProcedure",["LSSynchronousPromise","LSUpdateThreadSnippetFromLastMessageV2","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSUpdateThreadSnippetFromLastMessageV2"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MessageThreadReadState",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({KEEP_AS_IS:3,MARK_READ:1,MARK_UNREAD:2});b=a;f["default"]=b}),66);
__d("PolarisBaseGraphQLEventHandler",[],(function(a,b,c,d,e,f){"use strict";var g="1/graphqlsubscriptions/",h=Object.freeze({BD_CHALLENGE:"BdChallenge",NONE:"",PINNED_QUESTION:"PinnedQuestion",QUESTION_STATUS:"QuestionStatus",WAVE:"Wave"});a=function(){function a(){}var b=a.prototype;b.processEventMessage=function(a){return};b.getSubTopic=function(){return null};b.getGraphQLSubsciptionPrefix=function(){return g};b.getType=function(){return h.NONE};return a}();f.GRAPH_QL_EVENT_TYPES=h;f.BaseGraphQLEventHandler=a}),66);
__d("PolarisBdChallengeGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","PolarisDirectLogger","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="17935802131473058";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$BdChallengeGraphQLEventHandler$p_1=new(d("PolarisDirectLogger").DirectLogger)("BDChallengeGraphQLEventHandler",b);e.$BdChallengeGraphQLEventHandler$p_1.debugTrace("bd_challenge_gql_handler_init");e.$BdChallengeGraphQLEventHandler$p_2=e.getGraphQLSubsciptionPrefix()+h+"/"+JSON.stringify({input_data:{client_subscription_id:c("uuidv4")()}});return e}var e=b.prototype;e.processEventMessage=function(a){a=a.bd_challenge_event;if(a==null){this.$BdChallengeGraphQLEventHandler$p_1.debugTrace("parsed_message_bad_data");return}};e.getSubTopic=function(){return this.$BdChallengeGraphQLEventHandler$p_2};e.getType=function(){return d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.BD_CHALLENGE};return b}(d("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);g.BdChallengeGraphQLEventHandler=a}),98);
__d("PolarisChannelClientID",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h=c("uuidv4")();a={getID:function(){return h}};b=a;g["default"]=b}),98);
__d("PolarisDesktopPostLoadingShimmer.react",["cx","PolarisIGTheme.react","PolarisReactRedux.react","PolarisSizing","polarisPostModalHelpers","polarisPostSelectors","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){var b,c=d("react-compiler-runtime").c(12),e=a.dimensions,f=a.postId,g=a.viewportHeight;a=a.viewportWidth;var h=a!=null&&a>d("PolarisSizing").MEDIUM_SCREEN_MIN;b=(b=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getPostOrNullById(a,(a=f)!=null?a:"")}))==null?void 0:b.isSponsored;g=(g=g)!=null?g:0;a=(a=a)!=null?a:0;var i;c[0]!==e||c[1]!==b||c[2]!==h||c[3]!==g||c[4]!==a?(i=d("polarisPostModalHelpers").getMediaContainerProps({dimensions:e,hasFooter:b,hasSidebarInRedesign:h,viewportHeight:g,viewportWidth:a}),c[0]=e,c[1]=b,c[2]=h,c[3]=g,c[4]=a,c[5]=i):i=c[5];b=i;g="_aas3"+(h&&e!=null&&e.width>=e.height?" _aas4":"");c[6]!==e?(a=j.jsx(l,{dimensions:e}),c[6]=e,c[7]=a):a=c[7];c[8]!==b||c[9]!==g||c[10]!==a?(i=j.jsx("div",babelHelpers["extends"]({className:g},b,{children:a})),c[8]=b,c[9]=g,c[10]=a,c[11]=i):i=c[11];return i}function l(a){a=a.dimensions;var b={},c=d("PolarisIGTheme.react").useTheme();a&&(b.paddingBottom=d("PolarisSizing").getHeightPercent(a)+"%");return j.jsx("div",{className:"_aas5"+(c.getTheme()===d("PolarisIGTheme.react").IGTheme.Dark?" _aas6":""),style:b})}l.displayName=l.name+" [from "+f.id+"]";function m(a){var b=d("react-compiler-runtime").c(5),c=a.dimensions,e=a.postId,f=a.viewportHeight;a=a.viewportWidth;var g;b[0]!==c||b[1]!==e||b[2]!==f||b[3]!==a?(g=j.jsx(k,{dimensions:c,postId:e,viewportHeight:f,viewportWidth:a}),b[0]=c,b[1]=e,b[2]=f,b[3]=a,b[4]=g):g=b[4];return g}function a(a){var b=d("react-compiler-runtime").c(16),c=a.dimensions,e=a.postId,f=a.viewportHeight;a=a.viewportWidth;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={},b[0]=g):g=b[0];g=g;if(c){var h;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(h={flexDirection:"row"},b[1]=h):h=b[1];g=h}b[2]!==c||b[3]!==e||b[4]!==f||b[5]!==a?(h=j.jsx(m,{dimensions:c,postId:e,viewportHeight:f,viewportWidth:a}),b[2]=c,b[3]=e,b[4]=f,b[5]=a,b[6]=h):h=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(c=j.jsx("div",{className:"_aasa"}),b[7]=c):c=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx("div",{className:"_aasc"}),b[8]=e):e=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsxs("div",{className:"_aas9",children:[c,j.jsxs("div",{className:"_aasb",children:[e,j.jsx("div",{className:"_aasd"})]})]}),b[9]=f):f=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx("div",{className:"_aasf"}),b[10]=a):a=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(c=j.jsx("div",{className:"_aasg"}),b[11]=c):c=b[11];b[12]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsxs("div",{className:"_aas8",children:[f,j.jsxs("div",{className:"_aase",children:[a,c,j.jsx("div",{className:"_aash"})]})]}),b[12]=e):e=b[12];b[13]!==g||b[14]!==h?(f=j.jsxs("div",{className:"_aas7",style:g,children:[h,e]}),b[13]=g,b[14]=h,b[15]=f):f=b[15];return f}g.SIDEBAR_VARIANT_CUTOFF=d("PolarisSizing").MEDIUM_SCREEN_MIN;g.DesktopPostLoadingShimmer=a}),98);
__d("PolarisDirectBaseSubscription",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d){var e=this;this.$5=function(a){e.$4.debugTrace("message_received");var b=e.parsePayload(a);if(b==null)return;if(a.length===0){e.$4.logError("empty_message");return}else a[a.length-1]==="\0"?(b=a.substring(0,a.length-1),e.$4.debugTrace("trimmed_null_char")):b=a;var c={};try{c=JSON.parse(b)}catch(c){typeof c.message==="string"&&c.message.includes("Unexpected token")&&(c.jsonFirstChars=typeof b==="string"?b.substr(0,3):null);e.$4.logError("Cannot parse message "+a,c);return}e.processMessage(c)};this.$1=a;this.$2=b;this.$3=c;this.$4=d;this.$4.debugTrace("ctor")}var b=a.prototype;b.parsePayload=function(a){return a};b.processMessage=function(a){return};b.$6=function(a){var b;return JSON.stringify((b={},b[a]=this.getSubTopics(),b))};b.subscribe=function(){var a=this;if(this.getSubTopics().length<1){this.$4.debugTrace("no_subtopics_to_subscribe");return}this.$4.debugTrace("subscribe_start");this.unsubscribe();this.$3.subscribe(this.$1,this.$5);this.$3.publish(this.$1,this.$6("sub"))["catch"](function(b){return a.$4.logError(b,b==null?void 0:b.message)});this.$4.debugTrace("subscribe_end")};b.unsubscribe=function(){var a=this;if(this.getSubTopics().length<1){this.$4.debugTrace("no_subtopics_to_unsubscribe");return}this.$4.debugTrace("unsubscribe_start");this.$3.publish(this.$1,this.$6("unsub"))["catch"](function(b){return a.$4.logError(b,b==null?void 0:b.message)});this.$3.unsubscribe(this.$1);this.$4.debugTrace("unsubscribe_end")};b.updateSubTopics=function(a){this.$2=a};b.getSubTopics=function(){return this.$2};return a}();f.DirectBaseSubscription=a}),66);
__d("PolarisDirectDeltaHandlers",["invariant","PolarisDirectLogger","memoize"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){return i(a)}function b(a){return i(a)}function e(a){return i(a)}function i(a){if(a==null)return null;if(typeof a!=="string")return a;var b;a;try{b=j(a)}catch(c){d("PolarisDirectLogger").DirectLogger.logError("DirectDeltaHandlers","parse_delta_item.stringify_ids_error",{errorMessage:c.message}),b=a}try{b=JSON.parse(b)}catch(c){d("PolarisDirectLogger").DirectLogger.logError("DirectDeltaHandlers","parse_delta_item.parse_json_error",{errorMessage:c.message}),b=JSON.parse(a)}return b}function j(a){var b=Array.from(a.matchAll(/(id\":)\s*([0-9]+)/gi)),c=0;return b.reduce(function(a,b){var d=new RegExp(b[0]);d.lastIndex=c;a=a.replace(d,b[1]+' "'+b[2]+'"');c=b.index;return a},a)}function f(a){var b=parseInt(a,10);isNaN(b)&&h(0,61446,a);return isNaN(b)?0:b}var k=function(a,b){var e=this;this.$3=c("memoize")(function(){return[{listeners:{replace:e.$1.onHasSeen},regex:/^\/direct_v2\/threads\/(.+)\/participants\/(.+)\/has_seen$/},{listeners:{add:e.$1.onMakeAdmin,remove:e.$1.onRemoveAdmin},regex:/^\/direct_v2\/threads\/(\d+)\/admin_user_ids\/(\d+)$/},{listeners:{add:e.$1.onIndicateTypingActivity},regex:/^\/direct_v2\/threads\/(.+)\/activity_indicator_id\/(.+)$/},{listeners:{add:e.$1.onUpdateEmoji,remove:e.$1.onRemoveEmoji,replace:e.$1.onUpdateEmoji},regex:/^\/direct_v2\/threads\/(\d+)\/items\/(\d+)\/reactions\/likes\/(\d+)$/},{listeners:{add:e.$1.onNewMessage,remove:e.$1.onRemoveMessage,replace:e.$1.onUpdatedMessage},regex:/^\/direct_v2\/threads\/(.+)\/items\/(\d+)$/},{listeners:{replace:e.$1.onUpdateDMSettings},regex:/^\/direct_v2\/threads\/(.+)\/dm_settings$/},{listeners:{remove:e.$1.onRemoveThread,replace:e.$1.onNewThread},regex:/^\/direct_v2\/inbox\/threads\/(.+)$/},{listeners:{replace:e.$1.onUnseenCountChange},regex:/^\/direct_v2\/inbox\/unseen_count$/}]});this.handleDelta=function(a,b){var c=a.op,d=a.path;a=a.value;e.$2.debugTrace("handle_delta_start",{mutationToken:b,op:c,path:d});for(var f=e.$3(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i.listeners[c];if(j){i=i.regex.exec(d);i&&(e.$2.debugTrace("handle_delta_match"),j.apply(void 0,[a,b].concat(i.slice(1))))}}e.$2.debugTrace("handle_delta_end")};this.onSeqIdUpdated=function(a){e.$1.onSeqIdUpdated&&e.$1.onSeqIdUpdated(a)};this.onMqttConnectivityChanged=function(a){e.$1.onMqttConnectivityChanged&&e.$1.onMqttConnectivityChanged(a)};this.onIrisConnectivityChanged=function(a,b){e.$1.onIrisConnectivityChanged&&e.$1.onIrisConnectivityChanged(a,b)};this.onResnapshotRequested=function(a){e.$1.onResnapshotRequested&&e.$1.onResnapshotRequested(a)};this.$1=a;this.$2=new(d("PolarisDirectLogger").DirectLogger)("DirectDeltaHandlers",b)};g.parsePartialDeltaEmoji=a;g.parseDMSettings=b;g.parseDeltaItem=e;g.stringifyIds=j;g.parseDeltaNumber=f;g.DirectDeltaHandlers=k}),98);
__d("PolarisPinnedQuestionGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="PINNED_QUESTION",i="18005526940184517";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$PinnedQuestionGraphQLEventHandler$p_1=b;e.$PinnedQuestionGraphQLEventHandler$p_2=e.getGraphQLSubsciptionPrefix()+i+"/"+JSON.stringify({input_data:{broadcast_id:String(d.id),client_subscription_id:c("uuidv4")()}});return e}var e=b.prototype;e.processEventMessage=function(a){a=a.live_active_question_event;if(a==null)return;a={question:a,type:h};this.$PinnedQuestionGraphQLEventHandler$p_1.eventHandler(a)};e.getSubTopic=function(){return this.$PinnedQuestionGraphQLEventHandler$p_2};e.getType=function(){return d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION};return b}(d("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);g.PinnedQuestionGraphQLEventHandler=a}),98);
__d("PolarisQuestionStatusGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="QUESTION_STATUS",i="18027779584026952";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$QuestionStatusGraphQLEventHandler$p_1=b;e.$QuestionStatusGraphQLEventHandler$p_2=e.getGraphQLSubsciptionPrefix()+i+"/"+JSON.stringify({input_data:{broadcast_id:String(d.id),client_subscription_id:c("uuidv4")()}});return e}var e=b.prototype;e.processEventMessage=function(a){a=a.live_question_submission_status_event;if(a==null)return;a={status:a,type:h};this.$QuestionStatusGraphQLEventHandler$p_1.eventHandler(a)};e.getSubTopic=function(){return this.$QuestionStatusGraphQLEventHandler$p_2};e.getType=function(){return d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS};return b}(d("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);g.QuestionStatusGraphQLEventHandler=a}),98);
__d("PolarisWaveGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","PolarisConfig","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="LIVE_WAVE",i="17882305414154951";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;f=a.call(this)||this;f.$WaveGraphQLEventHandler$p_1=b;f.$WaveGraphQLEventHandler$p_2=f.getGraphQLSubsciptionPrefix()+i+"/"+JSON.stringify({input_data:{broadcast_id:String(e.id),client_subscription_id:c("uuidv4")(),receiver_id:d("PolarisConfig").getViewerId()},publish_data:{broadcast_id:String(e.id),receiver_id:d("PolarisConfig").getViewerId(),waver_id:String(e.broadcast_owner)}});return f}var e=b.prototype;e.processEventMessage=function(a){a=a.live_video_wave_event;if(a==null)return;a={type:h,wave:a};this.$WaveGraphQLEventHandler$p_1.eventHandler(a)};e.getSubTopic=function(){return this.$WaveGraphQLEventHandler$p_2};e.getType=function(){return d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE};return b}(d("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);g.WaveGraphQLEventHandler=a}),98);
__d("PolarisDirectGraphQLSubscription",["PolarisBaseGraphQLEventHandler","PolarisBdChallengeGraphQLEventHandler","PolarisDirectBaseSubscription","PolarisDirectLogger","PolarisPinnedQuestionGraphQLEventHandler","PolarisQuestionStatusGraphQLEventHandler","PolarisWaveGraphQLEventHandler","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";var h="/ig_realtime_sub";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){e=new(d("PolarisDirectLogger").DirectLogger)("DirectGraphQLSubscription",e);c=a.call(this,h,[],c,e)||this;c.$DirectGraphQLSubscription$p_2=e;c.$DirectGraphQLSubscription$p_1=b;c.$DirectGraphQLSubscription$p_3=new Map();c.$DirectGraphQLSubscription$p_4();c.getSubTopics();return c}var e=b.prototype;e.$DirectGraphQLSubscription$p_4=function(){var a=Object.keys(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES);for(var b=0;b<a.length;b++){var c=a[b];d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[c]!==d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE&&d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[c]!==d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION&&!this.$DirectGraphQLSubscription$p_5(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[c])&&this.$DirectGraphQLSubscription$p_2.debugTrace("invalid_handler_type")}};e.getSubTopics=function(){var a=[];for(var b=this.$DirectGraphQLSubscription$p_3,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];f=f.getSubTopic();c("isStringNullOrEmpty")(f)||a.push(f)}this.updateSubTopics(a);return a};e.processMessage=function(b){for(var c=this.$DirectGraphQLSubscription$p_3,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];f.processEventMessage(b)}a.prototype.processMessage.call(this,b)};e.enableOrDisableEventHandlerByType=function(a,b){b?this.$DirectGraphQLSubscription$p_5(a)||this.$DirectGraphQLSubscription$p_2.debugTrace("invalid_handler_type"):this.$DirectGraphQLSubscription$p_3["delete"](a);return this};e.$DirectGraphQLSubscription$p_5=function(a){this.$DirectGraphQLSubscription$p_3||(this.$DirectGraphQLSubscription$p_3=new Map());var b=this.$DirectGraphQLSubscription$p_6(a);if(b!=null){this.$DirectGraphQLSubscription$p_3.set(a,b);return!0}return!1};e.$DirectGraphQLSubscription$p_6=function(a){switch(a){case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.BD_CHALLENGE:return new(d("PolarisBdChallengeGraphQLEventHandler").BdChallengeGraphQLEventHandler)(this.$DirectGraphQLSubscription$p_2.getDebugId());default:return null}};e.enableLiveEventHandler=function(a,b,c){switch(c){case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE:this.$DirectGraphQLSubscription$p_3.set(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE,new(d("PolarisWaveGraphQLEventHandler").WaveGraphQLEventHandler)(b,a));return this;case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION:this.$DirectGraphQLSubscription$p_3.set(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION,new(d("PolarisPinnedQuestionGraphQLEventHandler").PinnedQuestionGraphQLEventHandler)(b,a));return this;case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS:this.$DirectGraphQLSubscription$p_3.set(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS,new(d("PolarisQuestionStatusGraphQLEventHandler").QuestionStatusGraphQLEventHandler)(b,a));return this;default:return this}};e.disableLiveEventHandler=function(a){switch(a){case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE:this.$DirectGraphQLSubscription$p_3["delete"](d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE);return this;case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION:this.$DirectGraphQLSubscription$p_3["delete"](d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION);return this;case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS:this.$DirectGraphQLSubscription$p_3["delete"](d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS);return this;default:return this}};e.unsubscribeGraphQL=function(){this.unsubscribe(),this.enableOrDisableEventHandlerByType(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE,!1)};return b}(d("PolarisDirectBaseSubscription").DirectBaseSubscription);g.DirectGraphQLSubscription=a}),98);
__d("PolarisDirectIrisSubscription",["FBLogger","PolarisDirectLogger","isObject"],(function(a,b,c,d,e,f,g){"use strict";var h=1,i=2,j=1e3,k=64e3;a=function(){function a(a,b,e,f){var g=this;this.$7=function(){g.$6.logDirectClientEvent("ig_direct_iris_subscription",d("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers["extends"]({},g.$2,{action:"attempt",attempt_reason:"mqtt-connected"}));g.$1.onIrisConnectivityChanged("Subscribing");var a=JSON.stringify(g.$2);g.$3.publish("/ig_sub_iris",a)["catch"](function(a){g.$6.logDirectClientEvent("ig_direct_iris_subscription",d("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers["extends"]({},g.$2,{action:"error",error:JSON.stringify(a)})),g.$1.onIrisConnectivityChanged("Unsubscribed")})};this.$8=function(a){var b;if(typeof a==="string"||a instanceof String)try{b=JSON.parse(a)}catch(a){var e="Could not parse sub iris response $(response)";g.$6.logError(e,a);c("FBLogger")("ig_web").mustfix(e);b=a}else c("isObject")(a)?b=a:(c("FBLogger")("ig_web").mustfix("Unknown sub iris response $(response)"),b={succeeded:!1});if(b.succeeded===!0)g.$6.logDirectClientEvent("ig_direct_iris_subscription",d("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers["extends"]({},g.$2,{action:"success"})),g.$1.onIrisConnectivityChanged("Subscribed",g.$2.subscription_type);else{g.$6.logDirectClientEvent("ig_direct_iris_subscription",d("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers["extends"]({},g.$2,b,{action:"error"}));g.$1.onIrisConnectivityChanged("Unsubscribed");if(b.error_type===h)g.$1.onResnapshotRequested(g.$2);else if(b.error_type===i){e=g.$4+Math.floor(Math.random()*1e3);window.setTimeout(g.$7,e);g.$4=Math.min(g.$4*2,k)}}};this.$6=new(d("PolarisDirectLogger").DirectLogger)("DirectIrisSubscription",f);this.$6.debugTrace("ctor",b);this.$1=a;this.$2=b;this.$3=e;this.$4=j}var b=a.prototype;b.subscribe=function(){this.$6.debugTrace("subscribe_start"),this.unsubscribe(),this.$3.subscribe("/ig_sub_iris_response",this.$8),this.$7(),this.$6.debugTrace("subscribe_end")};b.unsubscribe=function(){this.$6.debugTrace("unsubscribe_start"),this.$5&&(window.clearTimeout(this.$5),this.$5=null),this.$3.unsubscribe("/ig_sub_iris_response"),this.$1.onIrisConnectivityChanged("Unsubscribed"),this.$6.debugTrace("unsubscribe_end")};return a}();g.DirectIrisSubscription=a}),98);
__d("PolarisDirectSkywalkerSubscription",["PolarisConfig","PolarisDirectBaseSubscription","PolarisDirectLogger","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h="/pubsub";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f){f=new(d("PolarisDirectLogger").DirectLogger)("DirectSkywalkerSubscription",f);e=a.call(this,h,["ig/u/v1/"+c("nullthrows")(d("PolarisConfig").getViewerId())],e,f)||this;e.$DirectSkywalkerSubscription$p_2=f;e.$DirectSkywalkerSubscription$p_1=b;return e}var e=b.prototype;e.parsePayload=function(b){if(b.indexOf("/activity_indicator_id/")===-1){this.$DirectSkywalkerSubscription$p_2.debugTrace("not_activity_indicator_message");return null}return a.prototype.parsePayload.call(this,b)};e.processMessage=function(b){var c=b.data,d=b.event;if(d!=="patch"){this.$DirectSkywalkerSubscription$p_2.debugTrace("skipped_message",{event:d});return}if(!Array.isArray(c)){this.$DirectSkywalkerSubscription$p_2.debugTrace("parsed_message_bad_data",typeof c);return}for(var d=c,c=Array.isArray(d),e=0,d=c?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=d.length)break;f=d[e++]}else{e=d.next();if(e.done)break;f=e.value}f=f;this.$DirectSkywalkerSubscription$p_1.handleDelta(f,"")}a.prototype.processMessage.call(this,b)};return b}(d("PolarisDirectBaseSubscription").DirectBaseSubscription);g.DirectSkywalkerSubscription=a}),98);
__d("PolarisLiveDeltaHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(a){this.eventHandler=a};f["default"]=a}),66);
__d("PolarisMqttEnv",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({messenger_uses_mqtt_rollout:2,mqtt_ep_with_sid:0,mqtt_fast_lp:11,mqtt_lp_use_fetch:9,mqtt_waterfall_log_client_sampling:1,mqtt_ws_forced_polling_only:4,mqtt_ws_polling_enabled:3,mqtt_ws_reconnect_reset:7});b=function(){var a=b.prototype;a.random=function(){return this.$1!=null?this.$1():Math.random()};a.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};a.clearTimeout=function(a){if(this.$3!=null){this.$3(a);return}window.clearTimeout(a)};a.setTimeout=function(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return this.$4!=null?this.$4.apply(null,arguments):window.setTimeout.apply(null,arguments)};a.getLoggerInstance=function(){return this.$5!=null?this.$5():g.getInstance()};a.genGk=function(a){return this.$6!=null?this.$6(a):!1};a.createSocket=function(a,b){return this.$7!=null?this.$7(a,b):new WebSocket(a)};a.scheduleCallback=function(a){return this.$8!=null?this.$8(a):a()};a.scheduleLoggingCallback=function(a){return this.$9!=null?this.$9(a):a()};a.configRead=function(a,b){return this.$10!=null?this.$10(a,b):b};a.configWrite=function(a,b){this.$11!=null&&this.$11(a,b)};function b(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}a.initialize=function(a,b,c,d,e,f,g,h,i,j,k){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$10=j,this.$11=k};return b}();var g=function(){function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){a.attemptNumber,a.connectionStatus,a.duration,a.errorCode,a.errorMessage,a.failTotal,a.hostname,a.publishes,a.sessionID,a.subscribedTopics,a.successTotal};b.eventLogPull=function(a){a.duration,a.errorMessage,a.hostname,a.pullEventName,a.sessionID,a.status};b.eventLogDisconnect=function(a){a.duration,a.errorCode,a.errorMessage,a.sessionID};b.eventLogPublish=function(a){a.connectionStatus,a.publishStatus,a.sessionID,a.topic};b.eventLogMiscellaneousError=function(a){a.errorMessage};b.logError=function(a,b){};b.logErrorWarn=function(a,b){};b.logWarn=function(a,b){};b.debugTrace=function(a,b){};b.bumpCounter=function(a){};return a}();c={Env:new b(),MqttGkNames:a};f["default"]=c}),66);
__d("PolarisIrisSubscribeChecker",["PolarisMqttEnv"],(function(a,b,c,d,e,f){"use strict";var g=b("PolarisMqttEnv").Env,h=b("PolarisMqttEnv").MqttGkNames;a=function(){function a(a){this.$1=g.getLoggerInstance();this.$2=null;this.$3=!1;this.$4=!1;this.$5=!1;this.$6=!0;this.$7=0;this.$8=a;if(typeof window!=="undefined"){a=window.location.hostname;(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")&&(this.$6=!1)}g.genGk(h.messenger_uses_mqtt_rollout)||(this.$6=!1)}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=g.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(g.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7===1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$1.eventLogMiscellaneousError({errorMessage:a});this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();e.exports=a}),null);
__d("PolarisMqttAnalyticsHook",["InstagramODS","PolarisMqttEnv"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=c("PolarisMqttEnv").Env.getLoggerInstance(),this.$2=0,this.$3=0,this.$4=0,this.$5=0,c("InstagramODS").incr("web.mqtt.session_start"),c("PolarisMqttEnv").Env.isUserLoggedInNow()||c("InstagramODS").incr("web.mqtt.session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){c("InstagramODS").incr("web.mqtt.ws_connect_attempt")};b.onConnectFailure=function(){this.$3++,c("InstagramODS").incr("web.mqtt.ws_connect_failure")};b.onConnected=function(){c("InstagramODS").incr("web.mqtt.ws_connect_connected")};b.onConnectSuccess=function(){this.$2===0&&c("InstagramODS").incr("web.mqtt.ws_connect_first_success"),this.$2++,c("InstagramODS").incr("web.mqtt.ws_connect_success")};b.onConnectionLost=function(){c("InstagramODS").incr("web.mqtt.ws_disconnect")};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){c("InstagramODS").incr("web.mqtt.ws_publish")};b.onMessage=function(a){c("InstagramODS").incr("web.mqtt.message_arrived")};b.onWSFatal=function(){c("InstagramODS").incr("web.mqtt.ws_fatal")};b.onPollRequestSent=function(){c("InstagramODS").incr("web.mqtt.polling_request_send")};b.onPollRequestSuccess=function(){c("InstagramODS").incr("web.mqtt.polling_request_succeed"),this.$4===0&&c("InstagramODS").incr("web.mqtt.polling_first_success"),this.$4++};b.onPollResponse=function(){c("InstagramODS").incr("web.mqtt.lp.message_arrived")};b.onPollFinish=function(){};b.onPollRequestFailed=function(){c("InstagramODS").incr("web.mqtt.polling_request_failed"),this.$5++};return a}();g["default"]=a}),98);
__d("PolarisMqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal()})};return a}();f["default"]=a}),66);
__d("PolarisMqttProtocolUtils",["PolarisMqttEnv"],(function(a,b,c,d,e,f){"use strict";var g=b("PolarisMqttEnv").Env;function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function c(a,b){b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{offset:b,value:c}}function d(a){a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function f(a,b){return 256*a[b]+a[b+1]}function i(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function j(a,b,c,d){d=h(b,c,d);k(a,c,d);return d+b}function k(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function l(a,b,c){var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}b=function(){function a(a,b,c){this.$1=a*1e3,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;this.$3?(this.$3=!1,this.$4(),this.$2=g.setTimeout(function(){a.$6()},this.$1)):this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(g.clearTimeout(this.$2),this.$2=null);this.$1>0&&(this.$2=g.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(g.clearTimeout(this.$2),this.$2=null)};return a}();e.exports={Pinger:b,UTF8Length:i,concatBuffers:a,convertStringToUTF8:k,convertUTF8ToString:l,decodeMultiByteInt:c,encodeMultiByteInt:d,readUInt16BE:f,writeString:j,writeUInt16BE:h}}),null);
__d("PolarisMqttUtils",["PolarisMqttEnv","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h={endpointWithExtraParameter:function(a,b,c){return a.indexOf("?")>0?a+"&"+b+"="+c:a+"?"+b+"="+c},endpointWithExtraParameters:function(a,b){var c=a;b.forEach(function(a,b){c=h.endpointWithExtraParameter(c,b,a)});return c},endpointWithSessionId:function(a,b){return!c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ep_with_sid)?a:h.endpointWithExtraParameter(a,"sid",b.toString())},generateSessionId:function(){return Math.floor(c("PolarisMqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)},hasWSSupport:function(){return"WebSocket"in a&&a.WebSocket!==null},promiseDone:function(a,b,d){var e=arguments.length>1?a.then(b,d):a;c("promiseDone")(e.then(null,function(a){c("PolarisMqttEnv").Env.setTimeout(function(){if(a instanceof Error)throw a;else throw c("err")("promiseDone")},0)}))},sprintf:function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})}};b=h;g["default"]=b}),98);
__d("PolarisMqttProtocolCodec",["PolarisMqttProtocolUtils","PolarisMqttUtils"],(function(a,b,c,d,e,f){"use strict";var g=(c=b("PolarisMqttProtocolUtils")).UTF8Length,h=c.convertStringToUTF8,i=c.convertUTF8ToString,j=c.decodeMultiByteInt,k=c.encodeMultiByteInt,l=c.readUInt16BE,m=c.writeString,n=c.writeUInt16BE,o=b("PolarisMqttUtils").sprintf,p=Object.freeze({CONNACK:2,CONNECT:1,DISCONNECT:14,PINGREQ:12,PINGRESP:13,PUBACK:4,PUBLISH:3,SUBACK:9,SUBSCRIBE:8,UNSUBACK:11,UNSUBSCRIBE:10}),q=[0,6,77,81,73,115,100,112,3];function r(a,b){b=b;var c=b,d=a[b],e=d>>4;b+=1;var f=j(a,b);if(f==null)return{position:c,wireMessage:null};b=f.offset;f=b+f.value;if(f>a.length)return{position:c,wireMessage:null};var g;switch(e){case p.CONNACK:c=a[b++];c=!!(c&1);var h=a[b++];g=new u(c,h);break;case p.PUBLISH:c=d&15;h=c>>1&3;d=l(a,b);b+=2;var k=i(a,b,d);b+=d;d=null;h===1&&(d=l(a,b),b+=2);var m=w.createWithBytes(a.subarray(b,f)),n=(c&1)===1;c=(c&8)===8;g=new x(k,m,h,d,n,c);break;case p.PINGREQ:g=new s("PINGREQ");break;case p.PINGRESP:g=new s("PINGRESP");break;case p.PUBACK:case p.UNSUBACK:k=l(a,b);g=new v(e===p.PUBACK?"PUBACK":"UNSUBACK",k);break;case p.SUBACK:m=l(a,b);b+=2;h=a.subarray(b,f);g=new t(m,h);break;default:throw new Error(o("Invalid MQTT message type %s.",e))}return{position:f,wireMessage:g}}function a(a){var b=[],c=0;while(c<a.length){var d=r(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}d=function(){function a(a){this.messageType=p[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var s=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(d);f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(k(0),1);return b};return b}(d);var t=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(d),u=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(d),v=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=k(b),d=c.length+1;b=new ArrayBuffer(b+d);var e=new Uint8Array(b);e[0]=a;e.set(c,1);d=n(this.messageIdentifier,e,d);return b};return a}(d);c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=q.length+3;b+=g(this.clientId)+2;b+=g(this.connectOptions.userName)+2;var c=k(b);b=new ArrayBuffer(1+c.length+b);var d=new Uint8Array(b);d[0]=a;a=1;d.set(c,1);a+=c.length;d.set(q,a);a+=q.length;c=2|128;d[a++]=c;a=n(this.connectOptions.keepAliveInterval,d,a);a=m(this.clientId,g(this.clientId),d,a);a=m(this.connectOptions.userName,g(this.connectOptions.userName),d,a);return b};return b}(d);b=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e){var f;f=a.call(this,b)||this;f.topic=c;if(d<0&&d>1||d===1&&e==null)throw new TypeError(o("Argument Invalid. qos: %s messageType: %s.",d,b));f.qos=d;f.messageIdentifier=e;return f}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4;a|=2;var b=g(this.topic),c=2+b+2;this.messageType===p.SUBSCRIBE&&(c+=1);var d=k(c);c=new ArrayBuffer(1+d.length+c);var e=new Uint8Array(c);e[0]=a;a=1;e.set(d,1);a+=d.length;this.messageIdentifier!=null&&(a=n(this.messageIdentifier,e,a));a=m(this.topic,b,e,a);this.messageType===p.SUBSCRIBE&&this.qos!=null&&(e[a++]=this.qos);return c};return b}(d);var w=function(){function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(g(b)));h(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=0,d=b.length;while(c<b.length&&b[c]!==123&&b[c]!==91)c++,d--;var e=i(b,c,d);b=b.subarray(c,d);return new a(e,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),x=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&(a|=1);var b=g(this.topic),c=b+2;c+=this.messageIdentifier==null?0:2;var d=this.payloadMessage.bytes();c+=d.byteLength;var e=k(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;f.set(e,1);a=1+e.length;a=m(this.topic,b,f,a);this.messageIdentifier!=null&&(a=n(this.messageIdentifier,f,a));f.set(d,a);return c};return a}(d);e.exports={MESSAGE_TYPE:p,WireMessage:{Base:d,ConnAck:u,Connect:c,Disconnect:f,Ping:s,PubAckUnsubAck:v,Publish:x,Subscription:b},createMessageWithString:w.createWithString,decodeByteMessages:a,decodeMessage:r}}),null);
__d("PolarisMqttTypes",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){this.errorCode=a,this.errorMessage=b};b=function(a,b){this.mqttError=a,this.connAck=b};c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));e.exports={ConnectFailure:b,MqttChannelError:c,MqttError:a}}),null);
__d("PolarisMqttProtocolClient",["PolarisMqttEnv","PolarisMqttProtocolCodec","PolarisMqttProtocolUtils","PolarisMqttTypes"],(function(a,b,c,d,e,f){"use strict";var g=b("PolarisMqttEnv").Env,h=(a=b("PolarisMqttProtocolCodec")).MESSAGE_TYPE,i=a.WireMessage,j=a.createMessageWithString,k=a.decodeByteMessages,l=b("PolarisMqttProtocolUtils").Pinger,m=b("PolarisMqttProtocolUtils").concatBuffers,n=b("PolarisMqttTypes").ConnectFailure;c=b("PolarisMqttTypes").MqttError;var o=30,p=6e4,q={APP_DISCONNECT:new c(7,"Disconnect initiated by app"),CONNACK_FAILURE:new c(5,"Connection failure due to connack"),CONNECT_TIMEOUT:new c(4,"Connect timed out"),INVALID_DATA_TYPE:new c(3,"Received non-arraybuffer from socket."),PING_TIMEOUT:new c(6,"Ping timeout"),SERVER_DISCONNECT:new c(8,"Disconnect message sent my server"),SOCKET_CLOSE:new c(9,"Socket connection closed"),SOCKET_ERROR:new c(1,"Socket error"),SOCKET_MESSAGE:new c(2,"Unable to parse invalid socket message")};d=function(){function a(a){var b=this;this.$11=function(a,c){var d=b.$5,e=b.$2,f=e.onConnectFailure,h=e.onConnectionLost;b.setConnected(!1);d?g.scheduleCallback(function(){h(a)}):g.scheduleCallback(function(){f(new n(a,c!=null?c:-1))});b.$13()};this.$12=function(a){var c=b.$6;if(c==null)return;if(c.readyState!==c.OPEN)return;c.send(a.encode())};this.handleMessage=function(a){switch(a.messageType){case h.CONNACK:b.$7!=null&&(g.clearTimeout(b.$7),b.$7=null);if(a instanceof i.ConnAck){var c=a;if(c.returnCode!==0){b.$9.bumpCounter("protocol.error.connack.invalidreturncode");b.setConnected(!1);b.$11(q.CONNACK_FAILURE,c.returnCode);return}g.scheduleCallback(function(){b.$2.onConnectSuccess()});b.$8!=null&&b.$8.reset()}break;case h.PUBLISH:if(a instanceof i.Publish){var d=a;g.scheduleCallback(function(){b.$2.onMessageArrived(d.topic,d.payloadMessage.payloadString)});c=d.messageIdentifier;b.$9.bumpCounter("protocol.publish.received");if(d.qos===1&&c!=null){c=new i.PubAckUnsubAck("PUBACK",c);b.$12(c)}}break;case h.PUBACK:if(a instanceof i.PubAckUnsubAck){c=a;var e=c.messageIdentifier;b.$9.bumpCounter("protocol.puback.received");g.scheduleCallback(function(){b.$2.onMessageDelivered(e)})}break;case h.PINGRESP:b.$8!=null&&b.$8.reset();break;case h.DISCONNECT:b.$11(q.SERVER_DISCONNECT);break;case h.SUBACK:b.$9.bumpCounter("protocol.suback.received");break;case h.UNSUBACK:b.$9.bumpCounter("protocol.unsuback.received");break;default:b.$9.logError(new Error("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");b.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};this.$3=a;this.$2={ignoreSubProtocol:!1,keepAliveInterval:10,mqttVersion:3,onConnectFailure:function(a){},onConnection:function(){},onConnectionError:function(a){},onConnectionLost:function(a){},onConnectSuccess:function(){},onMessageArrived:function(a,b){},onMessageDelivered:function(a){},userName:""};this.$1="mqttwsclient";this.$4=0;this.$5=!1;this.$9=g.getLoggerInstance()}var b=a.prototype;b.connect=function(a){var b=this;if(this.$5)throw new Error("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(g.clearTimeout(this.$7),this.$7=null);this.$7=g.setTimeout(function(){b.$9.bumpCounter("protocol.error.connect.timeout"),b.$11(q.CONNECT_TIMEOUT)},o*1e3);this.$6=g.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){b.setConnected(!0),b.$12(new i.Connect(b.$1,a)),a.onConnection()};this.$6.onmessage=function(a){a=a.data;if(!(a instanceof ArrayBuffer)){b.$9.bumpCounter("protocol.error.onmessage.type");b.$11(q.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);b.$10!=null&&(a=m(b.$10,a),b.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete b.$10,b.$10=null);a=k(a);var c=a.messages;b.$10=a.remaining;for(a=0;a<c.length;a++)b.handleMessage(c[a])}catch(a){b.$10=null,b.$9.logError(a,q.SOCKET_MESSAGE.errorMessage),b.$9.bumpCounter("protocol.error.onmessage.parse"),b.$11(q.SOCKET_MESSAGE)}};this.$6.onerror=function(a){b.$9.bumpCounter("protocol.error.socket"),b.$11(q.SOCKET_ERROR)};this.$6.onclose=function(a){b.$9.bumpCounter("protocol.socket.close"),b.$11(q.SOCKET_CLOSE)};this.$8!=null&&this.$8.cancel();this.$8=new l(a.keepAliveInterval,this.$12.bind(this,new i.Ping("PINGREQ")),this.$11.bind(this,q.PING_TIMEOUT))};b.$13=function(){this.setConnected(!1),this.$8!=null&&this.$8.cancel(),this.$7!=null&&(g.clearTimeout(this.$7),this.$7=null),this.$6!=null&&(this.$6.onopen=function(a){},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(a){},this.$6.readyState===this.$6.OPEN&&this.$6.close(),delete this.$6,this.$6=null),this.$2.onConnectSuccess=function(){},this.$2.onConnectFailure=function(a){},this.$2.onConnection=function(){},this.$2.onConnectionError=function(a){},this.$2.onConnectionLost=function(a){},this.$2.onMessageArrived=function(a,b){},this.$2.onMessageDelivered=function(a){}};b.disconnect=function(){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$13();return}this.$12(new i.Disconnect());this.$9.bumpCounter("protocol.debug.disconnect");this.$11(q.APP_DISCONNECT)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw new Error("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new i.Subscription("SUBSCRIBE",a,0,this.$14());this.$12(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw new Error("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new i.Subscription("UNSUBSCRIBE",a,0,this.$14());this.$12(a)};b.publish=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var d=this.$14();a=new i.Publish(a,j(b),c,d);this.$12(a);return d};b.$14=function(){++this.$4===p&&(this.$4=1);return this.$4};return a}();e.exports=d}),null);
__d("PolarisMqttUserName",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d,e,f,g){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$8=g,this.$7=typeof document==="object"&&document&&document.hasFocus()}var b=a.prototype;b.gen=function(a,b,c){c={a:navigator.userAgent,aid:this.$5,asi:void 0,chat_on:this.$6,cp:this.$3,ct:"cookie_auth",d:this.$4,dc:"",ecp:this.$2,fg:this.$7,mqtt_sid:"",no_auto_fg:!0,pm:c,s:a,st:b,u:this.$1};this.$8&&this.$8.appSpecificInfo&&(c.asi=this.$8.appSpecificInfo);return JSON.stringify(c)};b.setForegroundState=function(a){this.$7=a};b.setChatVisibility=function(a){this.$6=a};return a}();f["default"]=a}),66);
__d("PolarisMqttConnection",["InstagramODS","PolarisMqttConnectionHookCollection","PolarisMqttEnv","PolarisMqttProtocolClient","PolarisMqttTypes","PolarisMqttUserName","PolarisMqttUtils","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=10,j="publish",k="subscribe",l="unsubscribe";function m(a){}var n=18e4,o=5*1e3,p=15,q=21;a=function(){function a(a){this.$8=!1;this.$10=c("PolarisMqttEnv").Env.getLoggerInstance();this.$11="Disconnected";this.$14=new Set();this.$15=new Map();this.$17=0;this.$18=0;this.$12=0;this.$13=0;this.$8=!1;this.$5="";this.$6=new(c("PolarisMqttUserName"))("0",0,1,"",0,!0);this.$9=0;this.$7=null;var b=function(){};this.$1=b;this.$2=b;this.$3=b;this.$19=new(c("PolarisMqttConnectionHookCollection"))();this.$4=function(){return[]};this.$16=a}var d=a.prototype;d.run=function(a){var b=this,c=a.endpoint,d=a.extraConnectMessageProvider,e=a.mqttUserName,f=a.onJSError,g=a.onMessageReceived,h=a.onStateChange;a=a.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=h;this.$3=g;this.$5=c;this.$6=e;this.$8=!0;this.$12=0;this.$2=f||m;a&&a.forEach(function(a){return b.$14.add(a)});this.$4=d;this.$20()};d.shutdown=function(){this.$21(),this.$22("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")};d.subscribe=function(a){this.$14.add(a);this.ensureConnected(k)&&this.$23(a);return!0};d.publish=function(a,c,d){var e={reject:function(a){},resolve:function(){}},f=new(h||(h=b("Promise")))(function(a,b){e.resolve=a,e.reject=b}),g=this.ensureConnected(j),i="connection_unknown";if(!g)i="connection_not_connected",e.reject(new Error("Client disconnected"));else{c=this.$24(a,c,d,e);i=c===!0?"connection_published":"connection_failed"}this.$10.eventLogPublish({connectionStatus:g,publishStatus:i,sessionID:this.$9,topic:a});return f};d.unsubscribe=function(a){this.$14["delete"](a);this.ensureConnected(l)&&this.$25(a);return!0};d.addHook=function(a){this.$19.addHook(a)};d.removeHook=function(a){this.$19.removeHook(a)};d.isRunning=function(){return this.$8};d.getSessionId=function(){return this.$9};d.ensureConnected=function(a){if(!this.$8){this.$10.debugTrace("ensureConnected","Mqtt connection: "+a+" called when not running");return!1}if(this.$7==null){this.$10.debugTrace("ensureConnected","Mqtt connection: "+a+" called when not connected, ignored");return!1}var b=this.$7.isConnected();if(!b){this.$10.debugTrace("ensureConnected","Mqtt connection: "+a+" called with client not connected");return!1}return!0};d.connectionState=function(){return this.$11};d.testOnlyGetSubscribedTopics=function(){return this.$14};d.$21=function(){this.$8&&this.$7!=null&&(this.$26("Disconnected"),this.$7!=null&&this.$7.disconnect(),this.$7=null)};d.$26=function(a){a!==this.$11&&(this.$11=a,this.$1(a))};d.$20=function(){var a=this;if(!this.$8)return;this.$26("Connecting");var b=Date.now();this.$9=c("PolarisMqttUtils").generateSessionId();var d=Array.from(this.$14),e=c("PolarisMqttUtils").endpointWithSessionId(this.$5,this.$9);try{this.$7=new(c("PolarisMqttProtocolClient"))(e);var f=this.$27(),g=f.map(function(a){return a.topic});e=this.$6.gen(this.$9,d,f);this.$7!=null&&(this.$7.connect({ignoreSubProtocol:!0,keepAliveInterval:i,mqttVersion:3,onConnectFailure:function(c){return a.$28(c,b,d,g)},onConnection:function(){return a.$29(f,d)},onConnectionError:function(b){return a.$30(b)},onConnectionLost:function(b){return a.$31(b)},onConnectSuccess:function(){return a.$32(b,d,g)},onMessageArrived:function(b,c){return a.$33(b,c)},onMessageDelivered:function(b){return a.$34(b)},userName:e}),c("InstagramODS").incr("web.mqtt.protocol.connectattempt"),this.$19.onConnectAttempt())}catch(a){c("InstagramODS").incr("web.mqtt.js_error_in_init_exception"),this.$26("Disconnected"),this.$35(!1,b,d,[],14,a.message),a&&this.$10.logErrorWarn(a,"ws_js_error"),this.$19.onWSFatal(),this.$36(new(c("PolarisMqttTypes").MqttChannelError)(!1,"ws_js_error",a),"client_init")}};d.$27=function(){var a=this.$4(),b=65536;return a.map(function(a){a.messageId=b--;return a})};d.$23=function(a){try{if(this.$7!=null){this.$7.subscribe(a);this.$10.debugTrace("#doSubscribe","Subscribing to "+a);this.$19.onSubscribe(a);c("InstagramODS").incr("web.mqtt.protocol.subscribe");return!0}}catch(a){this.$10.logError(a,"Exception subscribing"),c("InstagramODS").incr("web.mqtt.subscribe_exception"),c("InstagramODS").incr("web.mqtt.protocol.subscribe.error")}return!1};d.$25=function(a){try{if(this.$7!=null){this.$7.unsubscribe(a);this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+a);this.$19.onUnsubscribe(a);c("InstagramODS").incr("web.mqtt.protocol.unsubscribe");return!0}}catch(a){this.$10.logError(a,"Exception unsubscribing"),c("InstagramODS").incr("web.mqtt.unsubscribe_exception"),c("InstagramODS").incr("web.mqtt.protocol.unsubscribe.error")}return!1};d.$24=function(a,b,d,e){if(this.$7!=null)try{b=this.$7.publish(a,b,d);c("InstagramODS").incr("web.mqtt.protocol.publish");var f=b!=null?b:"null";this.$10.debugTrace("#doPublish","publish "+a+" with messageId:"+f+" qos:"+d);this.$19.onPublish(a);b!=null?this.$15.set(b,e):e.resolve();return!0}catch(a){this.$10.logError(a,"Exception publishing");c("InstagramODS").incr("web.mqtt.publish_exception");e.reject(a);c("InstagramODS").incr("web.mqtt.protocol.publish.error");return!1}else return!1};d.$37=function(a){var b=this;a===void 0&&(a=null);if(!this.$8)return;this.$21();this.$22("reconnect");this.$38();this.$9=-1;this.$13=0;a=a!=null?a:Math.pow(2,Math.min(this.$12,6))*(1e3+c("PolarisMqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+a+" ms");c("PolarisMqttEnv").Env.setTimeout(function(){b.$20()},a);this.$12+=1};d.$38=function(){if(!c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_reconnect_reset))return;var a=Date.now()-this.$13,b=this.$13!==0&&a>o,d=this.$12>p;(b||d)&&(this.$12=0);this.$13!==0&&a<=o&&c("InstagramODS").incr("web.mqtt.short_lived_session");d&&c("InstagramODS").incr("web.mqtt.connection_attempt_limit")};d.$35=function(a,b,c,d,e,f){a===!0?this.$18++:this.$17++,this.$10.eventLogConnect({attemptNumber:this.$12,connectionStatus:a,duration:Date.now()-b,errorCode:e,errorMessage:f,failTotal:this.$17,hostname:this.$5,publishes:d,sessionID:this.$9,subscribedTopics:c,successTotal:this.$18})};d.$28=function(a,b,d,e){var f=a.mqttError,g=f.errorMessage;this.$10.debugTrace("connect","Connect failed "+g);c("InstagramODS").incr("web.mqtt.protocol.onconnectfailure");this.$19.onConnectFailure();this.$35(!1,b,d,e,f.errorCode,g);if(a.connAck!=null){c("InstagramODS").incr("web.mqtt.protocol.connect_failure");if(a.connAck===q){this.$37(n);return}}this.$37()};d.$29=function(a,b){var d=this;c("InstagramODS").incr("web.mqtt.protocol.onconnection");this.$10.debugTrace("Connect","Socket established");this.$19.onConnected();b.forEach(function(a){d.$19.onSubscribe(a)});a.forEach(function(a){d.$19.onPublish(a.topic)});this.$26("TransportConnected")};d.$32=function(a,b,d){c("InstagramODS").incr("web.mqtt.protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$19.onConnectSuccess(),this.$35(!0,a,b,d),this.$26("Connected"),this.$39(b),c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_reconnect_reset)||(this.$12=0),this.$13=Date.now()};d.$31=function(a){c("InstagramODS").incr("web.mqtt.protocol.onconnectionlost"),a.errorCode&&this.$10.eventLogDisconnect({duration:Date.now()-this.$13,errorCode:a.errorCode,errorMessage:a.errorMessage,sessionID:this.$9}),this.$10.debugTrace("connect","connection lost"),this.$19.onConnectionLost(),this.$37()};d.$30=function(a){};d.$33=function(a,b){c("InstagramODS").incr("web.mqtt.protocol.onmessagearrived");this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$19.onMessage(a);try{this.$3(a,b)}catch(a){this.$10.logError(a,"Listener threw error"),c("InstagramODS").incr("web.mqtt.listener_error")}};d.$34=function(a){c("InstagramODS").incr("web.mqtt.protocol.onmessagedelivered");var b=a!=null?a:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+b+"}");if(a==null)return;b=this.$15.get(a);if(b==null)return;this.$15["delete"](a);b.resolve()};d.$22=function(a){this.$15.forEach(function(b,c,d){b.reject(new Error(a))}),this.$15.clear()};d.$39=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$14.has(a)||b.unsubscribe(a)});a=new Set(this.$14);a.forEach(function(a){c.has(a)||b.subscribe(a)})};d.$36=function(a,b){try{c("InstagramODS").incr("web.mqtt.js_error_in_init");var d=a?a.message:"error";this.$10.debugTrace("onError",b+": "+d);this.$2(a)}catch(a){c("InstagramODS").incr("web.mqtt.js_error_in_error_logging"),this.$10.logError(a,"JS error while trying to log previous error")}};return a}();g["default"]=a}),98);
__d("PolarisMqttChannel",["FBLogger","InstagramODS","PolarisChannelClientID","PolarisIrisSubscribeChecker","PolarisMqttAnalyticsHook","PolarisMqttConnection","PolarisMqttEnv","PolarisMqttUserName","PolarisMqttUtils","Promise","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=60*1e3;a=function(){function a(a){var b=this,d=a.appId,e=a.capabilities,f=a.chatVisibility;f=f===void 0?!0:f;var g=a.clientCapabilities,h=a.endpoint,i=a.igSpecificOptions,j=a.initialSubscribedTopics,k=a.observer;a=a.userFbid;this.$8=c("PolarisMqttEnv").Env.getLoggerInstance();this.$8.setAppId(d);this.$9=new(c("PolarisMqttUserName"))(a,e,g,c("PolarisChannelClientID").getID(),d,f,i);this.$1=h;this.$5="Disconnected";this.$2=[k];this.$4=new Set();this.$6=new Map();this.$7=new(c("PolarisMqttConnection"))(i);(i==null?void 0:i.deviceId)!=null?this.$3=i.deviceId:this.$3=c("uuidv4")();this.$13=new(c("PolarisMqttAnalyticsHook"))();this.$7.addHook(this.$13);this.$7.addHook(new(c("PolarisIrisSubscribeChecker"))(function(){return b.$4.size>0}));this.$10=!1;this.$12=new Map();this.$11=[];this.$14(j)}var d=a.prototype;d.$14=function(a){var b=this;if(this.$7.isRunning()){this.$15("run","Connection started calling run again");return}if(c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_polling_enabled))if(c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_forced_polling_only)){this.$15("MqttChannel","Websocket disabled, will do long polling only");return}else if(!c("PolarisMqttUtils").hasWSSupport()){this.$15("MqttChannel","Websocket Unavailable, will do long polling only");c("InstagramODS").incr("web.mqtt.ws_unavailable_polling");return}this.$7.run({endpoint:this.$1,extraConnectMessageProvider:function(){return b.$16()},mqttUserName:this.$9,onJSError:function(a){b.$17(a)},onMessageReceived:function(a,c){b.$18(a,c)},onStateChange:function(a){b.$19(a)},subscribedTopics:a})};d.shutdown=function(){this.$7&&this.$7.shutdown()};d.publish=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return c.qos===0?this.$20(a,b):this.$21(a,b,c)};d.$20=function(a,b){return this.$7.publish(a,b,0)};d.$21=function(a,d,e){var f={reject:function(a){},resolve:function(){}},g=new(h||(h=b("Promise")))(function(a,b){f.resolve=a,f.reject=b}),i=c("PolarisMqttEnv").Env.random();d={ack:f,options:e,payload:d,publishToken:i,timeoutId:null,topic:a};e.skipBuffer?this.$7.connectionState()==="Connecting"?this.$11.push(d):this.$22(d):(d.timeoutId=this.$23(i),this.$12.set(i,d),this.$24(d));return g};d.$22=function(a){c("PolarisMqttUtils").promiseDone(this.$7.publish(a.topic,a.payload,a.options.qos),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};d.$24=function(a){var b=this;c("PolarisMqttUtils").promiseDone(this.$7.publish(a.topic,a.payload,a.options.qos),function(){return b.$25(a)},function(){})};d.subscribe=function(a,b){this.$7.subscribe(a);var c=this.$6.get(a);!c?(c=[b],this.$6.set(a,c)):c.push(b)};d.subscribeChannelEvents=function(a){this.$2.push(a)};d.registerExtraConnectPayloadProvider=function(a){var b=this;this.$4.add(a);if(this.$7.isRunning()){a=a.getPublishMessages();a.forEach(function(a){b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})["catch"](function(a){return b.$8.logError(a,a==null?void 0:a.message)})})}};d.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};d.unsubscribe=function(a){this.$7.unsubscribe(a),this.$6["delete"](a)};d.getConnectionState=function(){return this.$5};d.getEndpoint=function(){return this.$1};d.addHook=function(a){this.$7.addHook(a)};d.removeHook=function(a){this.$7.removeHook(a)};d.testOnlyMessageReceived=function(a,b){this.$18(a,b)};d.$26=function(a){var b=this.$12.get(a);b!=null&&b.timeoutId!=null&&c("PolarisMqttEnv").Env.clearTimeout(b.timeoutId);this.$12["delete"](a)};d.$23=function(a){var b=this;return c("PolarisMqttEnv").Env.setTimeout(function(a){var d=b.$12.get(a);if(!d)return;var e=d.topic;c("InstagramODS").incr("web.mqtt.publish_timeout");b.$8.debugTrace("publish_timeout","Timeout publishing topic: "+e+" publishToken: "+a);b.$26(a);d.ack.reject(new Error("Publish Timed Out"))},i,a)};d.$25=function(a){var b=a.publishToken,d=this.$12.get(b);if(!d)return;this.$26(b);a.ack.resolve();this.$8.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);c("InstagramODS").incr("web.mqtt.publish_success")};d.$18=function(a,b){var d=this.$6.get(a);if(!d)this.$8.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var a=d,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;try{f(b)}catch(a){this.$8.logError(a,"Listener exception"),c("InstagramODS").incr("web.mqtt.listener_error")}}};d.$17=function(a){if(c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){a.isRecoverable?c("InstagramODS").incr("web.mqtt.recoverable_error_skipped"):c("InstagramODS").incr("web.mqtt.unrecoverable_error_skipped");return}a.isRecoverable?c("InstagramODS").incr("web.mqtt.recoverable_error_not_skipped"):c("InstagramODS").incr("web.mqtt.unrecoverable_error_not_skipped");a.isRecoverable||(this.$10=!0);this.$27(a)};d.$27=function(a){for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};d.$19=function(a){var b=this;a==="Connecting"?(this.$11.forEach(function(a){a.ack.reject(new Error("Client Reconnecting"))}),this.$11=[]):a==="TransportConnected"&&(this.$11.forEach(function(a){b.$22(a)}),this.$11=[],this.$12.forEach(function(a,c,d){b.$24(a)}));this.$5=this.$28(a);this.$15("_changeState","Connection state = "+a);this.$29()};d.$28=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw c("FBLogger")("ig_web").mustfixThrow("Unknown state "+a)};d.$29=function(){for(var a=this.$2,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.onMQTTStateChanged(this.$5)}};d.$16=function(){var a=this,b=[];this.$4.forEach(function(d){try{d=d.getPublishMessages();Array.prototype.push.apply(b,d)}catch(b){a.$8.logError(b,"ConnectPayload provider exception"),c("InstagramODS").incr("web.mqtt.connectPayloadProvider_error")}});return b};d.$15=function(a,b){this.$8.debugTrace(a,"Mqtt channel: "+b)};d.setForegroundState=function(a){this.$9&&this.$9.setForegroundState(a)};d.setChatVisibility=function(a){this.$9&&this.$9.setChatVisibility(a)};return a}();g["default"]=a}),98);
__d("PolarisMqttLogger",["InstagramODS","PolarisChannelClientID","PolarisDirectLogger","PolarisMqttEnv"],(function(a,b,c,d,e,f,g){"use strict";a="mqtt_client";var h=null,i=new(d("PolarisDirectLogger").DirectLogger)(a,c("PolarisChannelClientID").getID()),j={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish"};b=function(){a.getInstance=function(){h||(h=new a());return h};function a(){this.$1=0,this.$2=Date.now(),this.$3=c("PolarisChannelClientID").getID()}var b=a.prototype;b.setAppId=function(a){this.$1===0&&(this.$1=a)};b.eventLogConnect=function(a){var b=a.attemptNumber,d=a.connectionStatus,e=a.duration,f=a.errorCode,g=a.errorMessage;a.failTotal;var h=a.hostname,i=a.publishes,k=a.sessionID,l=a.subscribedTopics;a.successTotal;d?c("InstagramODS").incr("web.mqtt.mqtt_client_connect.success"):c("InstagramODS").incr("web.mqtt.mqtt_client_connect.failed");a={attempt_number:b,connection_status:d,device_id:this.$3,duration:e,error_code:f,error_message:g,hostname:h,href:window.location.hostname,logged_in:c("PolarisMqttEnv").Env.isUserLoggedInNow(),publishes:i,session_id:k,subscribed_topics:l};this.$4(j.CONNECT,a)};b.eventLogPull=function(a){var b=a.duration,d=a.errorMessage,e=a.hostname,f=a.pullEventName,g=a.sessionID;a=a.status;a={connection_status:a,device_id:this.$3,duration:b,error_message:d,hostname:e,href:window.location.hostname,logged_in:c("PolarisMqttEnv").Env.isUserLoggedInNow(),session_id:g};this.$4(f,a)};b.eventLogDisconnect=function(a){var b=a.duration,d=a.errorCode,e=a.errorMessage;a=a.sessionID;c("InstagramODS").incr("web.mqtt.mqtt_client_disconnect");b={device_id:this.$3,duration:b,error_code:d,error_message:e,href:window.location.hostname,session_id:a};this.$4(j.DISCONNECT,b)};b.eventLogPublish=function(a){a.connectionStatus;a.publishStatus;a.sessionID;a=a.topic;c("InstagramODS").incr("web.mqtt.mqtt_client_publish");c("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.mqtt.mqtt_client_publish."+a)};b.logError=function(a,b){c("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){i.logError(b,a)})};b.eventLogMiscellaneousError=function(a){a=a.errorMessage;a={device_id:this.$3,error_message:a,href:window.location.hostname,logged_in:c("PolarisMqttEnv").Env.isUserLoggedInNow(),time_passed:Date.now()-this.$2};this.$4(j.CLIENT_ERROR,a)};b.logErrorWarn=function(a,b){c("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){i.logError(b,a)})};b.logWarn=function(a,b){};b.debugTrace=function(a,b){c("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){i.debugTrace(a,b)})};b.bumpCounter=function(a){};b.$4=function(a,b){var d=this;c("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){b.event_type=a,b.app_id=d.$1,b.online=d.$5(),i.logDirectEvent(a,b)})};b.$5=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};return a}();g["default"]=b}),98);
__d("polarisSetTimeoutAcrossTransitions",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return setTimeout.apply(void 0,[a,b].concat(d))}f["default"]=a}),66);
__d("PolarisMqttEnvInitializer",["PolarisIsLoggedIn","PolarisMqttEnv","PolarisMqttLogger","PolarisWebStorage","polarisSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h="mqtt:";a={initialize:function(){c("PolarisMqttEnv").Env.initialize(null,d("PolarisIsLoggedIn").isLoggedIn,null,c("polarisSetTimeoutAcrossTransitions"),function(){return c("PolarisMqttLogger").getInstance()},null,null,null,null,function(a,b){var d=c("PolarisWebStorage").getLocalStorage();if(d){d=d.getItem(h+a);if(d!=null)return d}return b},function(a,b){var d=c("PolarisWebStorage").getLocalStorage();d&&(b==null?d.removeItem(h+a):d.setItem(h+a,b))})}};b=a;g["default"]=b}),98);
__d("polarisArraySplitChunks",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=[];for(var d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}f["default"]=a}),66);
__d("polarisNextTick",[],(function(a,b,c,d,e,f){"use strict";process&&typeof process.nextTick==="function"?a=function(a){process.nextTick(a)}:typeof setImmediate==="function"?a=function(a){setImmediate(a)}:typeof window.setTimeout==="function"?a=function(a){window.setTimeout(a,0)}:a=function(a){a()};b=a;f["default"]=b}),66);
__d("polarisForEachAsync",["Promise","polarisNextTick"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d){return new(h||(h=b("Promise")))(function(b,e){var f=0;if(a.length===0){b();return}function g(){try{d(a[f])}catch(a){e(a);return}f++;f>=a.length?b():c("polarisNextTick")(g)}g()})}g["default"]=a}),98);
__d("PolarisDirectMQTT",["InstagramODS","MercuryLocalIDs","PolarisCallGatingHelpers","PolarisConfig","PolarisDeviceOrMachineId","PolarisDirectConstants","PolarisDirectDeltaHandlers","PolarisDirectGraphQLSubscription","PolarisDirectIrisSubscription","PolarisDirectLogger","PolarisDirectSkywalkerSubscription","PolarisLiveDeltaHandler","PolarisLocales","PolarisMediaOverlayInfoTypes","PolarisMqttChannel","PolarisMqttEnvInitializer","PolarisReactRedux.react","nullthrows","polarisArraySplitChunks","polarisDeveloperSettings","polarisForEachAsync","randomInt"],(function(a,b,c,d,e,f,g){"use strict";var h=20;a=function(){function a(a,b){var e=this;this.$8=0;this.$14=function(a){var b;try{b=JSON.parse(a.substr(0,a.length-1))}catch(a){e.$4.logError("Could not parse mqttMessages",a);return}a=b.payload.header;if(a.type===4&&a.conferenceName.includes("ROOM")){var d,f;d=((d=b.payload.body)==null?void 0:(d=d.ringRequest)==null?void 0:d.ringType)%2===1;f=(f=b.payload.body)==null?void 0:(f=f.ringRequest)==null?void 0:(f=f.appMessages)==null?void 0:f.find(function(a){return a.body.genericMessage.topic==="ring_data"});var g="",h="",i="",j=[];if(f){f=JSON.parse(f==null?void 0:(f=f.body)==null?void 0:(f=f.genericMessage)==null?void 0:f.data);var k=f.display_name,l=f.display_uri,m=f.group_name,n=f.ig_thread_id;f=f.participant_usernames;g=n;i=k;j.push(l);if(m)h=m;else{n=f;try{n=JSON.parse(f)}catch(a){}h=Array.isArray(n)?[k].concat(n).join(", "):k}}e.$6(a.type,a.serverInfoData,g,d,h,j,i);c("InstagramODS").incr("web.rtc.ack_ring_message");e.$15(a.conferenceName,a.sequenceNumber,a.serverInfoData,a.transactionId,a.type,a.conferenceType)}else a.type===5&&a.conferenceName.includes("ROOM")?(e.$6(a.type,a.serverInfoData,"",!1,"",[],""),c("InstagramODS").incr("web.rtc.ack_dismiss_message"),e.$15(a.conferenceName,a.sequenceNumber,a.serverInfoData,a.transactionId,a.type,a.conferenceType)):c("InstagramODS").incr("web.rtc.rtc_message_ignored")};this.$16=function(a){var b=c("nullthrows")(e.$1),f;try{f=JSON.parse(a)}catch(a){e.$4.logError("Could not parse mqttMessages",a);return}if(!Array.isArray(f)){e.$4.debugTrace("parsed_message_not_array",typeof f);return}c("polarisForEachAsync")(c("polarisArraySplitChunks")(f,h),function(a){d("PolarisReactRedux.react").batch(function(){for(var c=a,d=Array.isArray(c),f=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;var h=g.data,i=g.event,j=g.mutation_token;g=g.seq_id;e.$4.debugTrace("parsed_message",{event:i,mutation_token:j});if(i!=="patch"){e.$4.debugTrace("skipped_message",{event:i});return}if(!Array.isArray(h)){e.$4.debugTrace("parsed_message_bad_operations",typeof h);return}for(var i=h,h=Array.isArray(i),k=0,i=h?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(h){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}l=l;b.handleDelta(l,j)}if(g){l=e.$2.subscription_type;e.$4.debugTrace("seq_id",{seq_id:g,subscriptionType:l});l==="message"&&b.onSeqIdUpdated(g)}}})})};this.$17=function(a){try{a=JSON.parse(a);if(a.status==="ok"){var b;(a==null?void 0:(b=a.payload)==null?void 0:b.activity_status)==null?e.$4.logDirectEvent("send_message_response_success"):e.$4.logDirectEvent("send_activity_response_success")}else{(a==null?void 0:(b=a.payload)==null?void 0:b.activity_status)==null?e.$4.logError("send_message_response_failed"):e.$4.logDirectEvent("send_activity_response_failed")}}catch(a){e.$4.logError("send_message_response_parse_failed",a)}};this.$18=function(a){e.$4.debugTrace("state_changed",a);var b=c("nullthrows")(e.$1);if(a==="Connected"){var f=c("nullthrows")(e.$5);f.subscribe("/ig_message_sync",e.$16);f.subscribe("/ig_send_message_response",e.$17);d("PolarisCallGatingHelpers").isIncomingCallEnabled()&&!d("PolarisCallGatingHelpers").isWebCallingEnabled()&&f.subscribe("/pubsub",e.$14);e.$3||(e.$3=new(d("PolarisDirectIrisSubscription").DirectIrisSubscription)(b,e.$2,f,e.$4.getDebugId()));e.$3.subscribe();e.$10||(e.$10=new(d("PolarisDirectGraphQLSubscription").DirectGraphQLSubscription)(b,f,e.$4.getDebugId()));e.$2.subscription_type==="message"?(e.$9||(e.$9=new(d("PolarisDirectSkywalkerSubscription").DirectSkywalkerSubscription)(b,f,e.$4.getDebugId())),e.$9.subscribe()):e.$4.debugTrace("skip_skywalker",e.$2);e.$10&&e.$10.subscribe()}else if(a==="Disconnected"){e.$3&&(e.$3.unsubscribe(),e.$3=null);e.$9&&(e.$9.unsubscribe(),e.$9=null);e.$10&&(e.$10.unsubscribeGraphQL(),e.$10=null);f=e.$5;f&&(f.unsubscribe("/ig_message_sync"),f.unsubscribe("/ig_send_message_response"),d("PolarisCallGatingHelpers").isIncomingCallEnabled()&&!d("PolarisCallGatingHelpers").isWebCallingEnabled()&&f.unsubscribe("/pubsub"))}b.onMqttConnectivityChanged(a)};this.$4=new(d("PolarisDirectLogger").DirectLogger)("DirectMQTT",b);this.$4.debugTrace("ctor",a);this.$1=null;this.$2=a;this.$3=null;this.$5=null;this.$9=null;this.$10=null}var b=a.prototype;b.$11=function(){return c("nullthrows")(d("PolarisConfig").getViewerId())};b.$12=function(){return parseInt(d("PolarisConfig").getIGAppID(),10)};b.$13=function(){return d("PolarisDeviceOrMachineId").getDeviceOrMachineId()};b.$15=function(a,b,d,e,f,g){var h=this;if(this.$7==null){var i=c("randomInt")(0,4294967294)+1;this.$7=String(i)}i={endpoint:{appId:this.$12(),deviceId:this.$13(),userId:this.$11()},jsonPayload:{body:{ringResponse:{deviceCapabilities:[],deviceStatus:0}},header:{clientSessionId:this.$7,clientStack:5,conferenceName:a,conferenceType:g,messageTags:[],responseStatusCode:200,retryCount:0,sequenceNumber:b,serverInfoData:d,transactionId:e,type:f}}};c("nullthrows")(this.$5).publish("/rtc_multi",JSON.stringify(i))["catch"](function(a){var b;f===4?c("InstagramODS").incr("web.rtc.ack_ring_message_failed"):f===5?c("InstagramODS").incr("web.rtc.ack_dismiss_message_failed"):c("InstagramODS").incr("web.rtc.ack_message_failed");b=(b=(b=h.$5)==null?void 0:b.getConnectionState())!=null?b:"Unknown";h.$4.logError("ack_rtc_message_failed",a,{conference_type:g,message_type:f,mqtt_state:b});throw a})};b.$19=function(a){var b=this;this.$4.logDirectEvent("send_attempt",{action:a.action,type:a.item_type||""});return c("nullthrows")(this.$5).publish("/ig_send_message",JSON.stringify(babelHelpers["extends"]({client_context:d("MercuryLocalIDs").generateOfflineThreadingID(),device_id:this.$13()},a)))["catch"](function(a){b.$4.logError("send_message_failed",a);throw a})};b.sendRtcHangupRequest=function(a){var b=this;a={endpoint:{appId:this.$12(),deviceId:this.$13(),userId:this.$11()},jsonPayload:{body:{hangupRequest:{detailedReasonString:"",reason:0}},header:{clientSessionId:this.$7,clientStack:5,messageTags:[],retryCount:0,sequenceNumber:this.$8++,serverInfoData:a,transactionId:String(c("randomInt")(0,4294967294)+1),type:2}}};return c("nullthrows")(this.$5).publish("/rtc_multi",JSON.stringify(a))["catch"](function(a){b.$4.logError("send_rtc_hangup_message_failed",a);throw a})};b.sendTextMessage=function(a,b,c,e,f){return this.$19({action:"send_item",item_type:d("PolarisDirectConstants").ThreadItemType.TEXT,mutation_token:c,replied_to_client_context:f,replied_to_item_id:e,text:b,thread_id:a})};b.sendMediaShare=function(a,b,c,e){var f=d("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE;e==="clips"&&(f=d("PolarisDirectConstants").ThreadItemType.CLIP_SHARE);return(c==null?void 0:c.overlay_layout)===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_LAYOUTS.MEDIA_COVER||(c==null?void 0:c.overlay_layout)===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_LAYOUTS.MEDIA_COVER_WITH_BOTTOM_BANNER?this.$19({action:"send_item",item_type:f,media_id:b,share_treatment_title:d("PolarisDirectConstants").InformTreatmentTitleValues.FALLBACK,share_treatment_type:d("PolarisDirectConstants").InformTreatmentTypeValues.WARNING_SCREENS,thread_id:a}):this.$19({action:"send_item",item_type:f,media_id:b,thread_id:a})};b.sendLike=function(a,b){return this.$19({action:"send_item",item_type:d("PolarisDirectConstants").ThreadItemType.LIKE,mutation_token:b,thread_id:a})};b.indicateTypingActivity=function(a,b){return this.$19({action:"indicate_activity",activity_status:a,thread_id:b})};b.markVisualItemSeen=function(a,b){return this.$19({action:"mark_visual_item_seen",item_ids:JSON.stringify([a]),target_item_type:"voice_media",thread_id:b})};b.modifyLikeReaction=function(a,b,c,d,e){return this.$19({action:"send_item",emoji:(e=e)!=null?e:"",item_id:a,item_type:"reaction",node_type:"item",reaction_status:d,reaction_type:"like",target_item_type:b,thread_id:c})};b.disconnect=function(){this.$4.debugTrace("disconnect_start"),this.$3?(this.$4.debugTrace("unsubscribe_iris"),c("nullthrows")(this.$3).unsubscribe(),this.$3=null):this.$4.debugTrace("no_iris"),this.$9?(this.$4.debugTrace("unsubscribe_skywalker"),this.$9=null):this.$4.debugTrace("no_skywalker"),this.$10?(this.$4.debugTrace("unsubscribe_graphql"),this.$10=null):this.$4.debugTrace("no_graphql"),this.$5?(this.$4.debugTrace("shutdown_channel"),c("nullthrows")(this.$5).shutdown(),this.$5=null):this.$4.debugTrace("no_channel"),this.$1&&(this.$1=null),this.$4.debugTrace("disconnect_end")};b.connect=function(a,b){var e=this;this.$4.debugTrace("connect_start");this.disconnect();this.$1=new(d("PolarisDirectDeltaHandlers").DirectDeltaHandlers)(a,this.$4.getDebugId());this.$6=b;a={onJSError:function(a){e.$4.logError("mqtt_js_error",a)},onMQTTStateChanged:this.$18};b={appSpecificInfo:{},deviceId:this.$13()};var f=c("PolarisLocales").language_code;f!=null&&(b.appSpecificInfo["Accept-Language"]=f);c("PolarisMqttEnvInitializer").initialize();f={appId:this.$12(),capabilities:0,chatVisibility:!0,clientCapabilities:1,endpoint:d("PolarisDirectConstants").PROD_MQTT_GATEWAY,igSpecificOptions:b,initialSubscribedTopics:[],observer:a,userFbid:this.$11()};this.$5=new(c("PolarisMqttChannel"))(f);this.$4.debugTrace("connect_end")};b.subscribeToLiveEvent=function(a,b,d){var e=this.$10;if(e==null)return;b=new(c("PolarisLiveDeltaHandler"))(b);e.enableLiveEventHandler(a,b,d);e.subscribe()};b.unsubscribeToLiveEvent=function(a){var b=this.$10;if(b==null)return;b.disableLiveEventHandler(a);b.subscribe()};b.getLogger=function(){return this.$4};return a}();g.DirectMQTT=a}),98);
__d("PolarisPostModalLoading.react",["IGDSBox.react","IGDSSpinner.react","PolarisDesktopPostLoadingShimmer.react","PolarisPostConstants","PolarisUA","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e=a.dimensions,f=a.postId,g=a.viewportHeight;a=a.viewportWidth;if(d("PolarisUA").isDesktop()&&a>d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF){var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=i.jsx(d("PolarisDesktopPostLoadingShimmer.react").DesktopPostLoadingShimmer,{dimensions:e,postId:f,viewportHeight:g,viewportWidth:a}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}b[5]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:i.jsx(c("IGDSSpinner.react"),{color:"light",size:"medium"})}),b[5]=e):e=b[5];return e}g["default"]=a}),98);
__d("PolarisPostModalPaginationArrow.react",["cx","IGDSChevronIcon.react","Locale","PolarisGenericStrings","PolarisIGCoreSVGIconButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.direction;a=a.onClick;var f=c("Locale").isRTL(),g=e==="back"&&!f||e==="next"&&f;f=e==="next"&&!f||e==="back"&&f;f=(g?"_aaqf":"")+(f?" _aaqg":"")+" _aaqh";g=g?d("PolarisGenericStrings").GO_BACK:d("PolarisGenericStrings").NEXT;var h;b[0]!==e||b[1]!==g?(h=j.jsx(c("IGDSChevronIcon.react"),{alt:g,color:"web-always-black",direction:e,size:16}),b[0]=e,b[1]=g,b[2]=h):h=b[2];b[3]!==a||b[4]!==h?(e=j.jsx(c("PolarisIGCoreSVGIconButton.react"),{onClick:a,children:h}),b[3]=a,b[4]=h,b[5]=e):e=b[5];b[6]!==f||b[7]!==e?(g=j.jsx("div",{className:f,children:e}),b[6]=f,b[7]=e,b[8]=g):g=b[8];return g}g["default"]=a}),98);
__d("PolarisPostModalInternal.react",["cx","IGCoreModal.react","IGCoreModalLocation.react","PolarisAutoplayViewpointManager.react","PolarisDOMListener.react","PolarisIsLoggedIn","PolarisLogger","PolarisPostActionLoadPost","PolarisPostModalLoading.react","PolarisPostModalPaginationArrow.react","PolarisPostModalRenderingContext.react","PolarisReactRedux.react","PolarisRoutes","PolarisThreadedCommentActions","getPolarisKeyCommandConfig","nullthrows","polarisPostModalHelpers","polarisPostSelectors","react","useGlobalKeyCommands","usePolarisDisplayProperties"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useMemo,n=b.useRef,o={isInModal:!0};function a(a){var b=a.analyticsContext,e=a.children,f=a.combinedPostIds,g=f===void 0?[]:f;f=a["data-testid"];f=a.dimensions;var h=a.mediaLinkBuilder,i=a.modalEntryPath;i=i===void 0?d("PolarisRoutes").FEED_PATH:i;var p=a.onClose,q=a.onlyReplaceModalHistory,r=a.onOpen,s=a.postCode,t=a.postId,u=a.postModalMediaUFI,v=a.showLoadingShimmer,w=a.skipMediaInfo,x=d("PolarisReactRedux.react").useDispatch(),y=n(null);a=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getAreCommentsFetched(a,t)});var z=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getIsPostDataFetched(a,s)}),A=d("PolarisIsLoggedIn").isLoggedIn()===!0?z:z&&a;z=k(function(){if(!A)if(w===!0)x(d("PolarisThreadedCommentActions").requestInitialComments(t));else{var a;x(d("PolarisPostActionLoadPost").loadPost(s,(a=u)!=null?a:t))}},[w,A,x,s,u,t]);l(z,[z]);var B=g.findIndex(function(a){return a===t}),C=k(function(a){return a>=0&&a<g.length},[g.length]),D=k(function(a){a=B+a;C(a)&&r&&r(c("nullthrows")(g[a]),a,u)},[g,B,C,r,u]),E=k(function(a){p(a),y.current!=null&&y.current.returnToEntry()},[p]);a=m(function(){return[d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateLeft",function(){D(d("polarisPostModalHelpers").LEFT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateRight",function(){D(d("polarisPostModalHelpers").RIGHT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","exit",function(){E()})]},[D,E]);c("useGlobalKeyCommands")(a);z=function(a){return function(b){if(b.metaKey||b.ctrlKey)return;b.preventDefault();b.stopPropagation();D(a);d("PolarisLogger").logAction("postModalArrowClick")}};a=k(function(){var a=d("polarisPostModalHelpers").getModalPageIdFromAnalyticsContext(b);a.length>0&&d("PolarisLogger").logPageView(a,{page_id:a,post_id:t})},[b,t]);var F=C(B-1),G=C(B+1);F=j.jsx("div",{className:"_aeap _aeaq",children:j.jsxs("div",{className:"_aear",children:[F&&j.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"back",onClick:z(d("polarisPostModalHelpers").LEFT_DELTA)}),G&&j.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"next",onClick:z(d("polarisPostModalHelpers").RIGHT_DELTA)})]})});G=c("usePolarisDisplayProperties")();z=G.viewportHeight;G=G.viewportWidth;v=j.jsx(j.Fragment,{children:!A&&v?j.jsx(c("PolarisPostModalLoading.react"),{dimensions:f,postId:t,viewportHeight:z,viewportWidth:G}):e});f=j.jsx(c("IGCoreModal.react"),{aboveContent:F,backgroundColor:"DEPRECATED_transparent",closeButtonPosition:"background","data-testid":void 0,onClose:E,size:"fullscreenResponsive",children:v});return j.jsxs(j.Fragment,{children:[j.jsx(d("PolarisAutoplayViewpointManager.react").FullscreenAutoplayViewpointClipRegion,{id:"postModal"}),j.jsx(c("IGCoreModalLocation.react"),{entryPath:i,nativeReplace:!0,onlyReplaceModalHistory:q,onUpdateHistory:a,pageID:"postPage",parentModule:"PolarisPostModal",path:h(s),ref:y}),j.jsx(c("PolarisDOMListener.react"),{event:"popstate",handler:E,once:!0,target:window}),j.jsx(d("PolarisPostModalRenderingContext.react").PolarisPostModalRenderingContext.Provider,{value:o,children:f})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostModal.react",["PolarisPostModalInternal.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("PolarisPostModalInternal.react"),babelHelpers["extends"]({},a,{showLoadingShimmer:!0})),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("issueSendInstamadilloXMAReceiverFetch",["IGDBridgedAPI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("IGDBridgedAPI").sendXmaReceiverFetch(a)}g["default"]=a}),98);
__d("instamadilloBumpThread",["FBLogger","I64","LSBumpThreadStoredProcedure","LSFactory","LSIntEnum","MAWAuthor","MAWCurrentUser","MessageThreadReadState","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("MAWAuthor").getAuthorUserJid(b.author);if(f==null)return c("FBLogger")("igd_web_on_msgr").warn("Skip instamadilloBumpThread: a message cannot exist without an author");f=(h||(h=d("I64"))).of_string(d("WAJids").userIdFromJid(f));b=h.of_string(d("WAJids").threadIdForChatJid(b.chat));var g=(yield a.threads.get(b));f=h.equal(f,h.of_string(d("MAWCurrentUser").getID()));f=(i||(i=d("LSIntEnum"))).ofNumber(f?c("MessageThreadReadState").KEEP_AS_IS:c("MessageThreadReadState").MARK_UNREAD);g=g==null?void 0:g.lastActivityTimestampMs;g!=null&&(h||(h=d("I64"))).ge(e,g)&&(yield c("LSBumpThreadStoredProcedure")(c("LSFactory")(a),{bumpTimestampMs:e,readStateEffect:f,threadKey:b}))});return j.apply(this,arguments)}g["default"]=a}),98);
__d("instamadilloReplyMessageUtils",["InstamadilloMessageIdUtils","InstamadilloReplyMessageParams","LSFactory","LSFetchInstamadilloMessage","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.messages.index("replySourceIdMessageID")).getKeyRange(c)));e=e.map(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield j(a,b,c)});return function(a){return d.apply(this,arguments)}}());yield (h||(h=b("Promise"))).all(e)});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=(yield d("InstamadilloReplyMessageParams").getReplyMessageParams(b.threadKey,b.senderId,c,a));yield a.messages.put(babelHelpers["extends"]({},b,c))});return k.apply(this,arguments)}function e(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=e==null?void 0:e.repliedToMessageOtid;e=e==null?void 0:e.repliedToMessageWaServerTimeSec;if(f==null||e==null)return;var g=d("InstamadilloMessageIdUtils").toInstamadilloMessageId(b,f);g=(yield a.messages.index("messageId").get(g));if(g!=null)return;yield c("LSFetchInstamadilloMessage")(b,f,e,c("LSFactory")(a))});return l.apply(this,arguments)}g.updateAllRepliesTxn=a;g.fetchReplySourceMessage=e}),98);
__d("handleInstamadilloReceiverFetchContent",["I64","IGDXMAAttachmentUtil","InstamadilloMessageFactory","InstamadilloTextMessageUtils","LSAuthorityLevel","LSFactory","LSIntEnum","LSUpdateThreadSnippetFromLastMessageV2StoredProcedure","LSVerifyThreadRowExistsV2StoredProcedure","MAWExternalId","MNLSXMALayoutType","MessagingAttachmentType","WAResultOrError","asyncToGeneratorRuntime","instamadilloBumpThread","instamadilloReplyMessageUtils","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c,d,e,f,g,h,i){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,k,l,m){j=(yield d("InstamadilloMessageFactory").createBaseMessageForProtocolMsgId(a,b,e,j));if(j==null)return d("WAResultOrError").makeResult({reason:"cannot_create_base_message",result:"skip"});var n=j.threadKey;g=JSON.stringify(g);yield c("LSVerifyThreadRowExistsV2StoredProcedure")(c("LSFactory")(a),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),syncGroup:(i||(i=d("I64"))).of_int32(1),threadKey:n,threadType:i.of_int32(1)});var o=8;c("isStringNullOrEmpty")(f.text)||(o+=1);yield a.messages.put(babelHelpers["extends"]({},j,{displayedContentTypes:i.of_int32(o),text:f.text,textHasLinks:d("InstamadilloTextMessageUtils").textHasLinks(f.text),xmaReceiverFetchParams:g},m));var p;o=l==null?void 0:l.type_;if(o!=null){f=(i||(i=d("I64"))).of_string(d("MAWExternalId").generateExternalId());p=babelHelpers["extends"]({},d("InstamadilloMessageFactory").createBaseAttachmentCta(b),{ctaId:f,type_:o},l);yield a.attachment_ctas.put(p)}yield a.attachments.put(babelHelpers["extends"]({},d("InstamadilloMessageFactory").createBaseAttachmentWithProtocolMsgId(b,e),{attachmentType:h.ofNumber(c("MessagingAttachmentType").XMA),defaultCtaId:(g=p)==null?void 0:g.ctaId,defaultCtaTitle:(m=p)==null?void 0:m.title,defaultCtaType:(f=p)==null?void 0:f.type_,faviconUrl:d("IGDXMAAttachmentUtil").DEFAULT_PROFILE_URL,hasXma:!0,isSharable:!0,xmaLayoutType:h.ofNumber(c("MNLSXMALayoutType").SINGLE)},k));yield d("instamadilloReplyMessageUtils").updateAllRepliesTxn(a,j.messageId);yield c("instamadilloBumpThread")(a,b,e);yield c("LSUpdateThreadSnippetFromLastMessageV2StoredProcedure")(c("LSFactory")(a),{threadKey:n});return d("WAResultOrError").makeResult({result:"handled"})});return j.apply(this,arguments)}g["default"]=a}),98);
__d("renderInstamadilloOptimisticXmaReceiverFetch",["I64","MAWCurrentUser","OfflineThreadingId","Promise","WAJids","WAStanzaUtils","asyncToGeneratorRuntime","handleInstamadilloReceiverFetchContent","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("renderInstamadilloOptimisticXmaReceiverFetch");function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,l){var m=d("OfflineThreadingId").createOfflineThreadingID(),n=d("WAJids").toMsgrUserJid(d("MAWCurrentUser").getID()),o=(i||(i=d("I64"))).of_float(Date.now()),p={author:n,chat:d("WAJids").toMsgrUserJid(a),externalId:d("WAStanzaUtils").toStanzaId(m)};n=(yield j.load());a=(yield n());yield a.runInTransaction(function(a){return c("handleInstamadilloReceiverFetchContent")(a,p,o,e,f,{},g,k,l)},"readwrite");return(h||(h=b("Promise"))).resolve(m)});return k.apply(this,arguments)}g["default"]=a}),98);
__d("getSendPostToInstamadilloRecipient",["fbt","I64","IGDDataclassTypes.flow","LSAuthorityLevel","LSMessageReplySourceTypeV2","LSMessageSendStatus","asyncToGeneratorRuntime","issueSendInstamadilloXMAReceiverFetch","renderInstamadilloOptimisticXmaReceiverFetch"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,e,f,g,j){var k={__typename:"XMSGIgReceiverFetchXmaFeedFetchParams",media_igid:a};e={__typename:"XMSGIgXmaContentRefDataclass",action_type:d("IGDDataclassTypes.flow").XmsgIgXmaActionType.Share,content_type:d("IGDDataclassTypes.flow").XmsgIgReceiverFetchContentType.Feed,fetch_params:k,owner_fbid:e,target_url:g,username:f};var l={contentRef:JSON.stringify(e)},m={authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),isForwarded:j,replySourceTypeV2:j===!0?(i||(i=d("I64"))).of_int32(c("LSMessageReplySourceTypeV2").FORWARD):void 0,sendStatus:i.of_int32(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.of_int32(1)},n={actionUrl:g,nativeUrl:g,targetId:i.of_string(a),type_:"igd_web_post_share"},o={authorityLevel:i.of_int32(c("LSAuthorityLevel").OPTIMISTIC),subtitleText:h._(/*BTDS*/"__JHASH___C2jDMKyMih__JHASH__").toString(),titleText:f};return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d,e,f,g){try{var h=(yield c("renderInstamadilloOptimisticXmaReceiverFetch")(a,l,k,o,n,m));yield c("issueSendInstamadilloXMAReceiverFetch")({comment:e,isDisappearingModeSettingOn:b,offlineThreadingId:h,openEb:d,receiverFetchXma:JSON.stringify(l),threadKey:a});f==null?void 0:f(a)}catch(b){g==null?void 0:g(b,a)}});return function(b,c,d,e,f,g){return a.apply(this,arguments)}}()}g["default"]=a}),226);/*FB_PKG_DELIM*/
__d("IGDSMetaGenAiPanoFilled24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"m15.795 5.206 1.897.854c.11.05.199.138.248.248l.854 1.897a.5.5 0 0 0 .912 0l.854-1.897a.494.494 0 0 1 .248-.248l1.897-.854a.5.5 0 0 0 0-.912l-1.897-.854a.494.494 0 0 1-.248-.248l-.854-1.897a.5.5 0 0 0-.912 0l-.853 1.896a.5.5 0 0 1-.25.25l-1.896.853a.5.5 0 0 0 0 .912Zm7.643 5.596a1.504 1.504 0 0 0-1.644-1.34 1.5 1.5 0 0 0-1.34 1.644A8.8 8.8 0 0 1 20.5 12c0 4.687-3.813 8.5-8.5 8.5S3.5 16.687 3.5 12 7.313 3.5 12 3.5c.302 0 .6.016.895.046a1.5 1.5 0 0 0 .304-2.984C12.805.522 12.405.5 12 .5 5.66.5.5 5.66.5 12S5.66 23.5 12 23.5 23.5 18.34 23.5 12c0-.405-.021-.805-.062-1.198Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDSSavePanoFilledIcon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M20 22a.999.999 0 0 1-.687-.273L12 14.815l-7.313 6.912A1 1 0 0 1 3 21V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("InstagramOrganicCarouselImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4535");b=d("FalcoLoggerInternal").create("instagram_organic_carousel_impression",a);e=b;g["default"]=e}),98);
__d("InstagramUpcomingEventActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2258");b=d("FalcoLoggerInternal").create("instagram_upcoming_event_action",a);e=b;g["default"]=e}),98);
__d("PolarisAPISetUpcomingEventReminder",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return c?d("PolarisInstapi").apiPost("/api/v1/upcoming_events/set_reminder/{event_id}/",{body:{media_pk:b},path:{event_id:a}}):d("PolarisInstapi").apiPost("/api/v1/upcoming_events/unset_reminder/{event_id}/",{path:{event_id:a}})}g.setUpcomingEventReminder=a}),98);
__d("PolarisAppAttributionText.react",["fbt","IGDSExternalLinkPanoOutline24Icon.react","IGDSTextVariants.react","PolarisFastLink.react","PolarisLinkBuilder","PolarisViewpointReact.react","polarisLogAction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useMemo;var k=b.useRef,l=h._(/*BTDS*/"__JHASH__mrLy4FGHzkL__JHASH__");function a(a){var b=d("react-compiler-runtime").c(13),e=a.appId,f=a.appName,g=a.mediaId;a=a.showIcon;var h=a===void 0?!1:a,i=k(!1);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=[function(a){a.percentVisible>=1&&!i.current&&(c("polarisLogAction")("thirdPartyAppAttributionImpression"),i.current=!0)}],b[0]=a):a=b[0];a=a;a=a;var n;b[1]!==e||b[2]!==g?(n=d("PolarisLinkBuilder").buildClipsAppPageLink(e,g),b[1]=e,b[2]=g,b[3]=n):n=b[3];b[4]!==f||b[5]!==h?(g=function(a){return j.jsxs("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 x1q0g3np"},{ref:a,children:[h===!0&&j.jsx("div",babelHelpers["extends"]({className:"xw3qccf"},{children:j.jsx(c("IGDSExternalLinkPanoOutline24Icon.react"),{alt:l,size:12})})),j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{breakWord:!0,zeroMargin:!0,children:j.jsx("div",babelHelpers["extends"]({className:"x1lliihq x6ikm8r x10wlt62 xlyipyv xuxw1ft"},{"data-testid":void 0,children:j.jsx("span",{children:f})}))})]}))},b[4]=f,b[5]=h,b[6]=g):g=b[6];b[7]!==e||b[8]!==g?(a=j.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:a,id:e,children:g}),b[7]=e,b[8]=g,b[9]=a):a=b[9];b[10]!==n||b[11]!==a?(e=j.jsx(c("PolarisFastLink.react"),{href:n,onClick:m,children:a}),b[10]=n,b[11]=a,b[12]=e):e=b[12];return e}function m(){c("polarisLogAction")("thirdPartyAppAttributionClick")}g["default"]=a}),226);
__d("PolarisPostContextFragment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostContextFragment",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostModalContext_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostContextFragment_ad.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostContextFragment_ad",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostModalContext_ad"}],type:"XDTAdInsertionItemClientDict",abstractKey:null};e.exports=a}),null);
__d("PolarisLoadingSheet.react",["IGDSBox.react","IGDSSpinner.react","PolarisIGCoreSheetOrModal","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(1);c("vulture")("bLuKNC_IhY5P4lH7foDdwyW_ty4=");var b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(d("PolarisIGCoreSheetOrModal").IGCoreSheetOrModal,{children:i.jsx(c("IGDSBox.react"),{alignItems:"center",paddingY:8,position:"relative",children:i.jsx(c("IGDSSpinner.react"),{})})}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("PolarisPostModalContextImpl_ad.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalContextImpl_ad",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostModalEntrypointLazy_ad"}],type:"XDTAdInsertionItemClientDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalContextImpl_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalContextImpl_media",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostModalEntrypointLazy_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalEntrypointLazyComponent_ad.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalEntrypointLazyComponent_ad",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostFastOptionsModal_ad"}],type:"XDTAdInsertionItemClientDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalEntrypointLazyComponent_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalEntrypointLazyComponent_media",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostFastAboutThisAccountModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastAdDebugToolModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastAdRemovedModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastAllowCommentsModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastCopyModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastDeleteModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastEmbedModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastGenAITransparencyModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastGenAITransparencyZeroClickModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastHideAdModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastOptionsModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastReportModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastReportAdModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastShareSheet_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastTaggedModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastTagOptionsModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastUnfollowModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastViewAccountModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastWAISTModal_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalEntrypointLazy_ad.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalEntrypointLazy_ad",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostModalEntrypointLazyComponent_ad"}],type:"XDTAdInsertionItemClientDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalEntrypointLazy_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalEntrypointLazy_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastAboutThisAccountModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastAllowCommentsModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostModalEntrypointLazyComponent_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastCopyModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastDeleteModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastEmbedModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastOptionsModal_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalEntrypointLazy.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","FBLogger","IGRouter_DO_NOT_USE.react","JSResourceForInteraction","PolarisPostModalEntrypointLazyComponent_ad.graphql","PolarisPostModalEntrypointLazyComponent_media.graphql","PolarisPostModalEntrypointLazy_ad.graphql","PolarisPostModalEntrypointLazy_media.graphql","hero-tracing","lazyLoadComponent","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||d("react");e=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAboutThisAccountModal.react").__setRef("PolarisPostModalEntrypointLazy.react"));f=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAboutThisAccountModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react"));var n=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAllowCommentsModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),o=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdRemovalErrorModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),p=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdRemovedModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),q=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdRemovedModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),r=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastCopyModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastCopyModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),t=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastDeleteModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),u=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastDeleteModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),v=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastEmbedModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),w=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastEmbedModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),x=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFavoritesModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),y=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastHideAdModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),z=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastHideAdModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),A=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastLoadingModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),B=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastOptionsModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),C=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastOptionsModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),D=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastReportModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),E=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastReportModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),F=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastReportAdModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),G=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastReportAdModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),H=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastShareSheet.react").__setRef("PolarisPostModalEntrypointLazy.react")),I=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastShareSheet.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),J=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastTaggedModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),K=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastTaggedModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),L=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastTagOptionsModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),M=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastTagOptionsModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),N=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastUnfollowModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),O=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastUnfollowModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),P=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastViewAccountModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),Q=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastViewAccountModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),R=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdDebugToolModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),S=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdDebugToolModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),T=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastWAISTModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),U=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastWAISTModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),V=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastGenAITransparencyModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),W=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastGenAITransparencyModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),X=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastGenAITransparencyModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),Y=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastGenAITransparencyZeroClickModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),Z=new Map([["aboutThisAccount",e],["copy",r],["delete",t],["embed",v],["genAITransparency",V],["genAITransparencyZeroClick",X],["hideAd",y],["options",B],["removeAd",p],["report",D],["reportAd",F],["share",H],["tagged",J],["tagOptions",L],["unfollow",N],["viewAccount",P],["viewAdDebugTool",R],["whyAmISeeingThisAd",T]]),$=new Map([["aboutThisAccount",f],["allowComments",n],["copy",s],["delete",u],["embed",w],["genAITransparency",W],["genAITransparencyZeroClick",Y],["hideAd",z],["removeAd",q],["report",E],["reportAd",G],["share",I],["tagged",K],["tagOptions",M],["unfollow",O],["viewAccount",Q],["viewAdDebugTool",S],["whyAmISeeingThisAd",U]]),aa=new Map([["favorites",x],["loading",A],["removeAdError",o]]),ba=new Map([["optionsV2",C]]);function a(a){var e,f=d("react-compiler-runtime").c(14),g=a.ad,j=a.interactionUUID,k=a.media,l=a.location,n=a.onClose,o=a.openModal;a=a.post;k=d("CometRelay").useFragment(h!==void 0?h:h=b("PolarisPostModalEntrypointLazy_media.graphql"),k);g=d("CometRelay").useFragment(i!==void 0?i:i=b("PolarisPostModalEntrypointLazy_ad.graphql"),g);e=(e=k==null?void 0:k.pk)!=null?e:a==null?void 0:a.id;if(e==null)throw c("FBLogger")("instagram_web").mustfixThrow("Both media fragment and post cannot be null");var p="PostModalEntrypoint: Open "+o+" Modal";e=o+"-"+e;var q;f[0]!==g||f[1]!==l||f[2]!==k||f[3]!==n||f[4]!==o||f[5]!==a?(q=m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(ca,{ad:g,location:l,media:k,onClose:n,openModal:o,post:a})}),f[0]=g,f[1]=l,f[2]=k,f[3]=n,f[4]=o,f[5]=a,f[6]=q):q=f[6];f[7]!==e||f[8]!==q?(g=m.jsx(c("CometErrorBoundary.react"),{children:q},e),f[7]=e,f[8]=q,f[9]=g):g=f[9];f[10]!==j||f[11]!==p||f[12]!==g?(l=m.jsx(d("hero-tracing").HeroInteraction,{interactionDesc:p,interactionUUID:j,children:g}),f[10]=j,f[11]=p,f[12]=g,f[13]=l):l=f[13];return l}function ca(a){var e=d("react-compiler-runtime").c(25),f=a.ad,g=a.media,h=a.location,i=a.onClose,l=a.openModal;a=a.post;f=d("CometRelay").useFragment(j!==void 0?j:j=b("PolarisPostModalEntrypointLazyComponent_ad.graphql"),f);g=d("CometRelay").useFragment(k!==void 0?k:k=b("PolarisPostModalEntrypointLazyComponent_media.graphql"),g);var n;e[0]!==l?(n=aa.get(l),e[0]=l,e[1]=n):n=e[1];n=n;if(n){var o;e[2]!==n||e[3]!==i?(o=m.jsx(n,{onClose:i}),e[2]=n,e[3]=i,e[4]=o):o=e[4];return o}e[5]!==l?(n=$.get(l),e[5]=l,e[6]=n):n=e[6];o=n;if(o&&g){e[7]!==o||e[8]!==g||e[9]!==i?(n=m.jsx(o,{media:g,onClose:i}),e[7]=o,e[8]=g,e[9]=i,e[10]=n):n=e[10];return n}e[11]!==l?(o=ba.get(l),e[11]=l,e[12]=o):o=e[12];n=o;if(n&&g){e[13]!==n||e[14]!==f||e[15]!==g||e[16]!==i?(o=m.jsx(n,{ad:f,media:g,onClose:i}),e[13]=n,e[14]=f,e[15]=g,e[16]=i,e[17]=o):o=e[17];return o}e[18]!==l?(n=Z.get(l),e[18]=l,e[19]=n):n=e[19];f=n;if(!f||a==null)throw c("FBLogger")("instagram_web").mustfixThrow('Failed to find a modal for "%s"',l);e[20]!==f||e[21]!==h||e[22]!==i||e[23]!==a?(g=m.jsx(f,{location:h,onClose:i,post:a}),e[20]=f,e[21]=h,e[22]=i,e[23]=a,e[24]=g):g=e[24];return g}e=d("IGRouter_DO_NOT_USE.react").withIGRouter(a);g["default"]=e}),98);
__d("PolarisPostModalContext.react",["CometPlaceholder.react","CometRelay","InteractionTracing","PolarisLoadingModal.react","PolarisLoadingSheet.react","PolarisPostModalContextImpl_ad.graphql","PolarisPostModalContextImpl_media.graphql","PolarisPostModalEntrypointLazy.react","PolarisUA","emptyFunction","qpl","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j,m=l.createContext,n=l.useContext;l.useMemo;var o=l.useState;function p(a){if(d("PolarisUA").isMobile())return null;switch(a){case"share":return k.jsx(c("PolarisLoadingSheet.react"),{});default:return k.jsx(c("PolarisLoadingModal.react"),{})}}var q=m({openModal:null,setOpenModal:null});function a(a){var e=d("react-compiler-runtime").c(13),f=a.ad,g=a.children,j=a.media;a=a.post;f=d("CometRelay").useFragment(h!==void 0?h:h=b("PolarisPostModalContextImpl_ad.graphql"),f);j=d("CometRelay").useFragment(i!==void 0?i:i=b("PolarisPostModalContextImpl_media.graphql"),j);var l=o(null),m=l[0],r=l[1];l=o(null);var s=l[0],t=l[1];e[0]===Symbol["for"]("react.memo_cache_sentinel")?(l=function(a){a!=null&&r(c("InteractionTracing").startInteraction({interactionClass:"fluid",qplEvent:c("qpl")._(27465367,"758"),tracePolicy:"polaris.post_fast."+a.toLowerCase(),traceType:"INTERACTION"})),t(a)},e[0]=l):l=e[0];var u=l;e[1]!==s?(l={openModal:s,setOpenModal:u},e[1]=s,e[2]=l):l=e[2];l=l;l=l;var v=!!n(q).setOpenModal;if(v)return g;e[3]!==f||e[4]!==m||e[5]!==j||e[6]!==s||e[7]!==a?(v=s&&k.jsx(c("CometPlaceholder.react"),{fallback:p(s),children:k.jsx(c("PolarisPostModalEntrypointLazy.react"),{ad:f,interactionUUID:m,media:j,onClose:function(){return u(null)},openModal:s,post:a})}),e[3]=f,e[4]=m,e[5]=j,e[6]=s,e[7]=a,e[8]=v):v=e[8];e[9]!==g||e[10]!==l||e[11]!==v?(f=k.jsxs(q.Provider,{value:l,children:[g,v]}),e[9]=g,e[10]=l,e[11]=v,e[12]=f):f=e[12];return f}function e(){return n(q).setOpenModal||c("emptyFunction")}function f(){return n(q).openModal}g.PostModalContext=a;g.useSetPostModal=e;g.useCurrentlyOpenModal=f}),98);
__d("PolarisPostModalContext_ad.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalContext_ad",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostModalContextImpl_ad"}],type:"XDTAdInsertionItemClientDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalContext_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalContext_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW"},{args:null,kind:"FragmentSpread",name:"PolarisPostModalContextImpl_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalContext.next.react",["CometRelay","PolarisPostModalContext.react","PolarisPostModalContext_ad.graphql","PolarisPostModalContext_media.graphql","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function a(a){var c=d("react-compiler-runtime").c(4),e=a.ad,f=a.children;a=a.queryReference;e=d("CometRelay").useFragment(h!==void 0?h:h=b("PolarisPostModalContext_ad.graphql"),e);a=d("CometRelay").useFragment(i!==void 0?i:i=b("PolarisPostModalContext_media.graphql"),a);var g;c[0]!==e||c[1]!==f||c[2]!==a?(g=k.jsx(d("PolarisPostModalContext.react").PostModalContext,{ad:e,media:a,children:f},a.pk),c[0]=e,c[1]=f,c[2]=a,c[3]=g):g=c[3];return g}g["default"]=a}),98);
__d("usePolarisIsOnPostPage",["useCurrentRouteEntityKey"],(function(a,b,c,d,e,f,g){"use strict";var h="post";function a(){var a=c("useCurrentRouteEntityKey")();a=a==null?void 0:a.entity_type;return a===h}g["default"]=a}),98);
__d("PolarisPostContext.react",["CometRelay","PolarisPostContextFragment.graphql","PolarisPostContextFragment_ad.graphql","PolarisPostModalContext.next.react","PolarisUA","react","react-compiler-runtime","usePolarisIsOnFeedPage","usePolarisIsOnPostPage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;e.useMemo;var l=e.useState,m=k.createContext({analyticsContext:"postPage",availableAudioTracks:[],controller:null,setAvailableAudioTracks:function(a){},setController:function(a){},setTargetAudioTrack:function(a){},shouldCapHeight:!0,targetAudioTrack:null});function a(a){var e=d("react-compiler-runtime").c(18),f=a.ad,g=a.analyticsContext,j=a.children,n=a.currentSidecarIndex;a=a.queryReference;f=d("CometRelay").useFragment(h!==void 0?h:h=b("PolarisPostContextFragment_ad.graphql"),f);a=d("CometRelay").useFragment(i!==void 0?i:i=b("PolarisPostContextFragment.graphql"),a);var o=c("usePolarisIsOnFeedPage")(),p=c("usePolarisIsOnPostPage")(),q;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(q=[],e[0]=q):q=e[0];q=l(q);var r=q[0];q=q[1];var s=l(null),t=s[0];s=s[1];var u=l(null),v=u[0];u=u[1];var w;e[1]!==o||e[2]!==p?(w=o||p&&d("PolarisUA").isMobile(),e[1]=o,e[2]=p,e[3]=w):w=e[3];e[4]!==g||e[5]!==r||e[6]!==v||e[7]!==n||e[8]!==w||e[9]!==t?(o={analyticsContext:g,availableAudioTracks:r,controller:v,currentSidecarIndex:n,setAvailableAudioTracks:q,setController:u,setTargetAudioTrack:s,shouldCapHeight:w,targetAudioTrack:t},e[4]=g,e[5]=r,e[6]=v,e[7]=n,e[8]=w,e[9]=t,e[10]=o):o=e[10];p=o;q=p;e[11]!==f||e[12]!==j||e[13]!==a?(u=k.jsx(c("PolarisPostModalContext.next.react"),{ad:f,queryReference:a,children:j}),e[11]=f,e[12]=j,e[13]=a,e[14]=u):u=e[14];e[15]!==q||e[16]!==u?(s=k.jsx(m.Provider,{value:q,children:u}),e[15]=q,e[16]=u,e[17]=s):s=e[17];return s}g.PolarisPostContext=m;g.PolarisPostContextProvider=a}),98);
__d("PolarisAudioAttributionText.react",["fbt","IGDSMetaGenAiPanoFilled24Icon.react","IGDSMiddleDot.react","IGDSTextVariants.react","JSResourceForInteraction","PolarisClipsConstants","PolarisClipsHelpers","PolarisFastLink.react","PolarisIGCorePressable.react","PolarisLinkBuilder","PolarisPostContext.react","gkx","react","useCometLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useContext,l=b.useEffect,m=c("JSResourceForInteraction")("PolarisVideoVariantSelector.react").__setRef("PolarisAudioAttributionText.react");function a(a){var b=a.audioArtist,e=a.audioID,f=a.audioName,g=a.isMediaOwnerOriginalSound,i=a.isMutedAudio,n=a.isOverMedia;n=n===void 0?!1:n;var o=a.isOwnerPrivate,p=a.muteAudioReason,q=a.onDisabledClipsAudioAttributionClick;a=k(d("PolarisPostContext.react").PolarisPostContext);var r=a.availableAudioTracks,s=a.controller,t=a.targetAudioTrack,u=c("gkx")("7221")&&r.some(function(a){return a.lang!==null&&a.role==="dub"})&&s!=null;a=c("useCometLazyDialog")(m);var v=a[0],w=a[1];l(function(){u&&w()},[v,w,u]);if(!d("PolarisClipsHelpers").hasAudioAttributionText({audioArtist:b,audioName:f,isMediaOwnerOriginalSound:g}))return null;if(u&&s!=null){a=h._(/*BTDS*/"__JHASH__e0zGfKpE6GF__JHASH__");a=j.jsxs("div",{style:{alignItems:"center",display:"flex"},children:[g===!0?j.jsx("div",{style:{paddingRight:6},children:j.jsx(c("IGDSMetaGenAiPanoFilled24Icon.react"),{alt:a,size:12})}):null,j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:n?"textOnMedia":"primaryText",children:g===!0?j.jsx("span",{children:a}):j.jsxs("span",{children:[b,j.jsx(c("IGDSMiddleDot.react"),{color:n?"textOnMedia":"primaryText"}),a]})})]});var x=function(){v({availableAudioTracks:r,controller:s,targetAudioTrack:t})};return j.jsx(c("PolarisIGCorePressable.react"),{onPress:x,children:a})}x=j.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{color:n?"textOnMedia":"primaryText",zeroMargin:!0,children:j.jsx("div",{className:"x78zum5 xh8yej3","data-testid":void 0,children:g===!0?j.jsx("span",{className:"x6ikm8r x10wlt62 xlyipyv xuxw1ft",children:f}):j.jsxs("span",{className:"x6ikm8r x10wlt62 xlyipyv xuxw1ft",children:[b,j.jsx(c("IGDSMiddleDot.react"),{color:n?"textOnMedia":"primaryText"}),f]})})});var y=g===!0&&o===!0;a=function(){q&&q(y?d("PolarisClipsConstants").AUDIO_PAGE_DOES_NOT_EXIST_PRIVATE_USER:String(p))};return e!=null?y||i?j.jsx(c("PolarisIGCorePressable.react"),{onPress:a,children:x}):j.jsx(c("PolarisFastLink.react"),{className:"xh8yej3",href:d("PolarisLinkBuilder").buildClipsAudioPageLink(e),children:x}):x}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("PolarisBoostCanSkipPro2ProQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6844670978909501"}),null);
__d("PolarisBoostCanSkipPro2ProQuery.graphql",["PolarisBoostCanSkipPro2ProQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"entrypoint"},c={defaultValue:null,kind:"LocalArgument",name:"platform"},d=[{kind:"Variable",name:"entrypoint",variableName:"entrypoint"},{kind:"Variable",name:"platform",variableName:"platform"}],e={alias:null,args:null,kind:"ScalarField",name:"can_user_skip_pro_identity_setup",storageKey:null};return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"PolarisBoostCanSkipPro2ProQuery",selections:[{alias:null,args:d,concreteType:"IGProfessionalIdentityCacheGQL",kind:"LinkedField",name:"ig_professional_cache",plural:!1,selections:[e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"PolarisBoostCanSkipPro2ProQuery",selections:[{alias:null,args:d,concreteType:"IGProfessionalIdentityCacheGQL",kind:"LinkedField",name:"ig_professional_cache",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("PolarisBoostCanSkipPro2ProQuery_instagramRelayOperation"),metadata:{},name:"PolarisBoostCanSkipPro2ProQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisBoostCanSkipPro2Pro",["CometRelay","PolarisBoostCanSkipPro2ProQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("PolarisBoostCanSkipPro2ProQuery.graphql");function a(a,b,c){return d("CometRelay").fetchQuery(a,i,{entrypoint:b,platform:"WEB"},{fetchPolicy:"network-only"}).toPromise().then(function(a){a=(a=a==null?void 0:(a=a.ig_professional_cache)==null?void 0:a.can_user_skip_pro_identity_setup)!=null?a:!1;c.logIpiCacheEvent(a?"client_should_skip_boost_onboarding":"client_should_not_skip_boost_onboarding_on_cache_fetch_success");return a})["catch"](function(a){c.logIpiCacheEvent("client_should_not_skip_boost_onboarding_on_cache_fetch_failure",a.message);return!1})}g.getCanSkipPro2Pro=a}),98);
__d("PolarisBoostOkDialog.react",["fbt","IGCoreDialog.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(7),c=a.body,e=a.onPress;a=a.title;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"__JHASH__A3AENjyzsZ1__JHASH__"),b[0]=f):f=b[0];b[1]!==e?(f=j.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{children:f,color:"ig-error-or-destructive",onClick:e}),b[1]=e,b[2]=f):f=b[2];b[3]!==c||b[4]!==f||b[5]!==a?(e=j.jsx(d("IGCoreDialog.react").IGCoreDialog,{body:c,title:a,children:f}),b[3]=c,b[4]=f,b[5]=a,b[6]=e):e=b[6];return e}g["default"]=a}),226);
__d("PolarisBoostQPLUtils",["QPLJoinUtils","QuickPerformanceLogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=c("qpl")._(467537745,"2144");(h||(h=c("QuickPerformanceLogger"))).markerStart(b);d("QPLJoinUtils").setJoinId(h,b,a)}function b(a){var b=c("qpl")._(467537745,"2144");(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(b,{});h.markerEnd(b,2);d("QPLJoinUtils").setJoinId(h,b,a)}g.markBoostEnterFlowStart=a;g.markBoostEnterFlowEnd=b}),98);
__d("PolarisCoauthorSheet.react",["IGDSBox.react","IGDSListItem.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","PolarisFastLink.react","PolarisFollowButtonContainer.react","PolarisIGCoreConstants","PolarisIGCoreSheetOrModal","PolarisLinkBuilder","PolarisUA","PolarisUserAvatar.react","nullthrows","polarisLogAction","qex","react","react-compiler-runtime","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){var b=d("react-compiler-runtime").c(4);a=a.user;var e;b[0]!==a.id||b[1]!==a.relationship||b[2]!==a.username?(e=i.jsx(c("PolarisFollowButtonContainer.react"),{analyticsContext:"UNKNOWN__POLARIS_USER_BUTTON_SECTION",borderless:!1,isFollowing:a.relationship,isInline:!0,userId:a.id,username:a.username,useSmallText:!1}),b[0]=a.id,b[1]=a.relationship,b[2]=a.username,b[3]=e):e=b[3];return e}function k(a){var b=d("react-compiler-runtime").c(9);a=a.user;var e=a.isVerified;a=a.username;if(a===void 0)return null;var f;b[0]!==a?(f=i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{zeroMargin:!0,children:a}),b[0]=a,b[1]=f):f=b[1];b[2]!==e?(a=e&&i.jsx(c("IGDSVerifiedBadge.react"),{size:"small"}),b[2]=e,b[3]=a):a=b[3];b[4]!==a?(e=i.jsx(c("IGDSBox.react"),{marginStart:2,children:a}),b[4]=a,b[5]=e):e=b[5];b[6]!==f||b[7]!==e?(a=i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",children:[f,e]}),b[6]=f,b[7]=e,b[8]=a):a=b[8];return a}function l(a){var b=d("react-compiler-runtime").c(2);a=a.user;a=a.fullName;if(a==null)return null;var e;b[0]!==a?(e=i.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",zeroMargin:!0,children:a})}),b[0]=a,b[1]=e):e=b[1];return e}function m(a){var b,e=d("react-compiler-runtime").c(28),f=a.onClick;a=a.user;var g=a.profilePictureUrl,h=a.username;b=((b=c("usePolarisViewer")())==null?void 0:b.id)===a.id;var m;e[0]!==b||e[1]!==a?(m=!b&&c("qex")._("384")?i.jsx(j,{user:a}):null,e[0]=b,e[1]=a,e[2]=m):m=e[2];e[3]!==g||e[4]!==h?(b=i.jsx(c("PolarisUserAvatar.react"),{isLink:!0,profilePictureUrl:g,size:c("PolarisIGCoreConstants").AVATAR_SIZES.medium,username:h}),e[3]=g,e[4]=h,e[5]=b):b=e[5];e[6]!==f?(g=function(){f()},e[6]=f,e[7]=g):g=e[7];var n;e[8]!==h?(n=d("PolarisLinkBuilder").buildUserLink(h),e[8]=h,e[9]=n):n=e[9];var o;e[10]!==a?(o=i.jsx(l,{user:a}),e[10]=a,e[11]=o):o=e[11];var p;e[12]!==n||e[13]!==o?(p=i.jsx(c("PolarisFastLink.react"),{href:n,children:o}),e[12]=n,e[13]=o,e[14]=p):p=e[14];e[15]!==h?(n=d("PolarisLinkBuilder").buildUserLink(h),e[15]=h,e[16]=n):n=e[16];e[17]!==a?(o=i.jsx(k,{user:a}),e[17]=a,e[18]=o):o=e[18];e[19]!==n||e[20]!==o?(h=i.jsx(c("PolarisFastLink.react"),{href:n,children:o}),e[19]=n,e[20]=o,e[21]=h):h=e[21];e[22]!==m||e[23]!==b||e[24]!==g||e[25]!==p||e[26]!==h?(a=i.jsx(c("IGDSListItem.react"),{addOnEnd:m,addOnStart:b,onPress:g,subtitle:p,testid:void 0,title:h}),e[22]=m,e[23]=b,e[24]=g,e[25]=p,e[26]=h,e[27]=a):a=e[27];return a}function n(a){var b=d("react-compiler-runtime").c(6),e=a.coauthors,f=a.mediaId;a=a.mediaOwner;var g;b[0]!==f?(g=function(){c("polarisLogAction")("coauthorSheetItemClick",{mediaId:f,source:"CoauthorSheetItems"})},b[0]=f,b[1]=g):g=b[1];var h=g;if(b[2]!==e||b[3]!==h||b[4]!==a){g=[].concat(e);g.unshift(a);g=g.map(function(a){a=c("nullthrows")(a);a=a.user;return i.jsx(m,{onClick:h,user:a},a.id)});b[2]=e;b[3]=h;b[4]=a;b[5]=g}else g=b[5];return g}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.componentDidMount=function(){c("polarisLogAction")("coauthorSheetImpression",{mediaId:this.props.mediaId,numCoauthors:this.props.coauthors.length,source:"CoauthorSheet"})};e.render=function(){var a=this.props,b=a.coauthors,e=a.mediaId,f=a.mediaOwner,g=a.onClose;a=a.title;return i.jsx(d("PolarisIGCoreSheetOrModal").IGCoreSheetOrModal,{onClose:g,title:a,children:i.jsx(c("IGDSBox.react"),{flex:"grow",marginBottom:d("PolarisUA").isMobile()?6:void 0,overflow:"auto",children:i.jsx(n,{coauthors:b,mediaId:e,mediaOwner:f})})})};return b}(i.PureComponent);g.Username=k;g.CoauthorSheetItem=m;g.CoauthorSheetItems=n;g.CoauthorSheet=a}),98);
__d("PolarisCoauthorCountWithSheet.react",["fbt","IGDSTextVariants.react","PolarisCoauthorSheet.react","PolarisFastLink.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"__JHASH__knipFRoxAOv__JHASH__");function l(a){return h._(/*BTDS*/"__JHASH__gVvWvw7eP27__JHASH__",[h._param("num_coauthors",a)])}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isCoauthorSheetOpen:!1},c.$1=function(){c.props.onClick!=null&&c.props.onClick(),c.props.disableSheet!==!0&&c.setState({isCoauthorSheetOpen:!0})},c.$2=function(){c.setState({isCoauthorSheetOpen:!1})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.render=function(){return j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisFastLink.react"),{onClick:this.$1,children:j.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryText",children:l(this.props.coauthors.length)})}),this.state.isCoauthorSheetOpen&&j.jsx(d("PolarisCoauthorSheet.react").CoauthorSheet,{coauthors:this.props.coauthors,mediaId:this.props.mediaId,mediaOwner:this.props.mediaOwner,onClose:this.$2,title:k})]})};return b}(j.PureComponent);g["default"]=a}),226);
__d("PolarisCommentButton.react",["fbt","IGDSCommentPanoOutlineIcon.react","IGDSIconButton.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"__JHASH__DRKjP2-nYQr__JHASH__");function a(a){var b=d("react-compiler-runtime").c(10),e=a.className,f=a["data-testid"],g=a.onClick;b[0]!==g?(a=function(a){a.preventDefault(),g(a)},b[0]=g,b[1]=a):a=b[1];a=a;var h;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(h=j.jsx(c("IGDSCommentPanoOutlineIcon.react"),{alt:k,color:"ig-secondary-text",size:24}),b[2]=h):h=b[2];var i;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("IGDSCommentPanoOutlineIcon.react"),{alt:k,color:"ig-primary-text",size:24}),b[3]=i):i=b[3];b[4]!==a?(h=j.jsx(c("IGDSIconButton.react"),{hover:h,onClick:a,children:i}),b[4]=a,b[5]=h):h=b[5];b[6]!==e||b[7]!==f||b[8]!==h?(i=j.jsx("span",{className:e,"data-testid":void 0,children:h}),b[6]=e,b[7]=f,b[8]=h,b[9]=i):i=b[9];return i}g["default"]=a}),226);
__d("PolarisFeedCardProvider.react",["emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.useState,k=i.createContext({isCaptionMoreClicked:!1,isCarouselCardVisible:!1,isMediaRendered:null,setIsCaptionMoreClicked:c("emptyFunction"),setIsCarouselCardVisible:c("emptyFunction"),setIsMediaRendered:null});function a(a){var b=d("react-compiler-runtime").c(7);a=a.children;var c=j(null),e=c[0];c=c[1];var f=j(!1),g=f[0];f=f[1];var h=j(!0),l=h[0];h=h[1];b[0]!==g||b[1]!==l||b[2]!==e?(f={isCaptionMoreClicked:g,isCarouselCardVisible:l,isMediaRendered:e,setIsCaptionMoreClicked:f,setIsCarouselCardVisible:h,setIsMediaRendered:c},b[0]=g,b[1]=l,b[2]=e,b[3]=f):f=b[3];h=f;c=h;b[4]!==a||b[5]!==c?(g=i.jsx(k.Provider,{value:c,children:a}),b[4]=a,b[5]=c,b[6]=g):g=b[6];return g}g.PolarisFeedCardContext=k;g.PolarisFeedCardProvider=a}),98);
__d("PolarisFeedLikeHeart.react",["PolarisInteractionsStrings","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx("title",{children:d("PolarisInteractionsStrings").LIKE_TEXT}),a[0]=b):b=a[0];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsxs("svg",{"aria-label":d("PolarisInteractionsStrings").LIKE_TEXT,viewBox:"0 0 48 48",width:128,children:[b,i.jsx("defs",{children:i.jsxs("linearGradient",{gradientTransform:"rotate(35)",id:"ig_heart_gradient",children:[i.jsx("stop",{offset:"0%",stopColor:"#FF7A00"}),i.jsx("stop",{offset:"40%",stopColor:"#FF0169"}),i.jsx("stop",{offset:"100%",stopColor:"#D300C5"})]})}),i.jsx("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z",fill:"url(#ig_heart_gradient)"})]}),a[1]=b):b=a[1];return b}g["default"]=a}),98);
__d("PolarisVpvdImpressionAction",["InstagramAdVpvdImpFalcoEvent","InstagramOrganicCarouselVpvdImpFalcoEvent","InstagramOrganicVpvdImpFalcoEvent","PolarisContainerModuleUtils","PolarisInteractionsLogger","PolarisLoggerUtils","PolarisNavChain","PolarisViewpointActionUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=250,i=500,j=new Map(),k=new Map(),l=new Set();function m(a,b){var c=j.get(a);b.percentVisible>=.5&&c==null&&j.set(a,b.snapshotTime);if(b.percentVisible<.5&&c!=null){c=b.snapshotTime-c;k.set(a,c+((c=k.get(a))!=null?c:0));j["delete"](a)}c=(c=k.get(a))!=null?c:0;if(b.state==="exited"&&c>=h){k["delete"](a);return c}return null}function n(a){return a>=i?a:null}function a(a,b,e,f){return function(g){var h,i,j=e!=null&&f!=null,k=a.id;j&&e!=null&&f!=null&&(k=e);g=m(k,g);if(g==null)return;h=(h=a.owner)==null?void 0:h.id;var o={client_sub_impression:l.has(k),inventory_source:a.inventorySource,legacy_duration_ms:n(g),m_pk:d("PolarisViewpointActionUtils").getMPKForFeedMedia(a),m_t:d("PolarisInteractionsLogger").getMediaTypeFromPost(a).toString(),max_duration_ms:g,nav_chain:(i=c("PolarisNavChain").getInstance())==null?void 0:i.getNavChainForSend(),pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(b),pk:h,sum_duration_ms:g};j&&e!=null&&f!=null?(c("InstagramAdVpvdImpFalcoEvent").logImmediately(function(){var a;return babelHelpers["extends"]({},o,{ad_id:e,m_pk:(a=o.m_pk)!=null?a:"",max_duration_ms:o.max_duration_ms.toString(),tracking_token:f})}),g>=2e3&&e!=null&&a.isAd!=null&&a.isAd&&c("InstagramAdVpvdImpFalcoEvent").logImmediately(function(){var a;return babelHelpers["extends"]({},o,{ad_id:e,m_pk:(a=o.m_pk)!=null?a:"",max_duration_ms:o.max_duration_ms.toString(),module_name:"engaged_view",tracking_token:f})})):c("InstagramOrganicVpvdImpFalcoEvent").log(function(){return babelHelpers["extends"]({},o)});l.add(k)}}function b(a,b,e,f,g){return function(h){var i=m(a.id,h);if(i==null)return;c("InstagramOrganicCarouselVpvdImpFalcoEvent").log(function(){var h;return{carousel_cover_media_id:d("PolarisLoggerUtils").getFormattedMediaID(b.id,(h=(h=a.owner)==null?void 0:h.id)!=null?h:""),carousel_index:e.toString(),carousel_media_id:d("PolarisLoggerUtils").getFormattedMediaID(a.id,(h=(h=a.owner)==null?void 0:h.id)!=null?h:""),carousel_starting_media_id:b.id,client_sub_impression:l.has(a.id),inventory_source:a.inventorySource,legacy_duration_ms:n(i),m_pk:d("PolarisLoggerUtils").getFormattedMediaID(f,(h=(h=a.owner)==null?void 0:h.id)!=null?h:""),max_duration_ms:i,nav_chain:(h=c("PolarisNavChain").getInstance())==null?void 0:h.getNavChainForSend(),pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(g),sum_duration_ms:i}});l.add(a.id)}}function e(a,b,e){return function(f){var g=m(a.id,f);if(g==null)return;c("InstagramOrganicVpvdImpFalcoEvent").log(function(){var f;return{client_sub_impression:l.has(a.id),legacy_duration_ms:n(g),m_pk:a.id,max_duration_ms:g,nav_chain:(f=c("PolarisNavChain").getInstance())==null?void 0:f.getNavChainForSend(),pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(e),reel_id:a.id,reel_position:b.toString(),sum_duration_ms:g}});l.add(a.id)}}g.getDwellTime=m;g.makePostVpvdImpressionAction=a;g.makeCarouselVpvdImpressionAction=b;g.makeClipVpvdImpressionAction=e}),98);
__d("PolarisFeedSeenStateManagerSingleton",["PolarisVpvdImpressionAction"],(function(a,b,c,d,e,f,g){"use strict";var h=24,i=250,j=function(){function a(){this.$1=new Map()}var b=a.prototype;b.clear=function(){this.$1.clear()};b.count=function(){return this.$1.size};b.addImpressionFromPost=function(a,b){a=this.$2(a);b=(b=d("PolarisVpvdImpressionAction").getDwellTime(a,b))!=null?b:0;if(b<i)return;this.$1.set(a,b)};b.addImpression=function(a){var b=a.carouselParentID,c=a.mediaID;a=a.snapshot;b=b!=null?c+"-"+b:c;a=(c=d("PolarisVpvdImpressionAction").getDwellTime(b,a))!=null?c:0;if(a<i)return;this.$1.set(b,a)};b.getViewInfo=function(){var a=Array.from(this.$1).map(function(a){var b=a[0];a=a[1];return{media_id:b,media_pct:1,time_info:{10:a,25:a,50:a,75:a},version:h}});return JSON.stringify(a)};b.$2=function(a){return a.carouselParentId!=null?this.$3(a):this.$4(a)};b.$4=function(a){var b;b=(b=(b=a.owner)==null?void 0:b.id)!=null?b:0;return a.id+"_"+b};b.$3=function(a){var b,c;b=(b=(b=a.owner)==null?void 0:b.id)!=null?b:0;c=((c=a.carouselParentId)!=null?c:0)+"_"+b;a=a.id+"_"+b;return c+"-"+a};return a}(),k=null;a={get:function(){k==null&&(k=new j());return k}};b=a;g["default"]=b}),98);
__d("PolarisInvitedCoauthorsSheet.react",["IGDSBox.react","IGDSListItem.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","PolarisFastLink.react","PolarisIGCoreConstants","PolarisIGCoreSheetOrModal","PolarisLinkBuilder","PolarisUA","PolarisUserAvatar.react","nullthrows","polarisLogAction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){var b=d("react-compiler-runtime").c(9);a=a.user;var e=a.isVerified;a=a.username;if(a===void 0)return null;var f;b[0]!==a?(f=i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{zeroMargin:!0,children:a}),b[0]=a,b[1]=f):f=b[1];b[2]!==e?(a=e&&i.jsx(c("IGDSVerifiedBadge.react"),{size:"small"}),b[2]=e,b[3]=a):a=b[3];b[4]!==a?(e=i.jsx(c("IGDSBox.react"),{marginStart:2,children:a}),b[4]=a,b[5]=e):e=b[5];b[6]!==f||b[7]!==e?(a=i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",children:[f,e]}),b[6]=f,b[7]=e,b[8]=a):a=b[8];return a}function k(a){var b=d("react-compiler-runtime").c(2);a=a.user;a=a.fullName;if(a==null)return null;var e;b[0]!==a?(e=i.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",children:i.jsx(d("IGDSTextVariants.react").IGDSTextBody,{color:"secondaryText",zeroMargin:!0,children:a})}),b[0]=a,b[1]=e):e=b[1];return e}function l(a){var b=d("react-compiler-runtime").c(29),e=a.onClick;a=a.user;var f=a.profilePictureUrl,g=a.username,h;b[0]!==f||b[1]!==g?(h=i.jsx(c("PolarisUserAvatar.react"),{isLink:!0,profilePictureUrl:f,size:c("PolarisIGCoreConstants").AVATAR_SIZES.medium,username:g}),b[0]=f,b[1]=g,b[2]=h):h=b[2];b[3]!==g?(f=d("PolarisLinkBuilder").buildUserLink(g),b[3]=g,b[4]=f):f=b[4];var l;b[5]!==f?(l={url:f},b[5]=f,b[6]=l):l=b[6];b[7]!==e?(f=function(){e()},b[7]=e,b[8]=f):f=b[8];var m;b[9]!==g?(m=d("PolarisLinkBuilder").buildUserLink(g),b[9]=g,b[10]=m):m=b[10];var n;b[11]!==a?(n=i.jsx(k,{user:a}),b[11]=a,b[12]=n):n=b[12];var o;b[13]!==m||b[14]!==n?(o=i.jsx(c("PolarisFastLink.react"),{href:m,children:n}),b[13]=m,b[14]=n,b[15]=o):o=b[15];b[16]!==g?(m=d("PolarisLinkBuilder").buildUserLink(g),b[16]=g,b[17]=m):m=b[17];b[18]!==a?(n=i.jsx(j,{user:a}),b[18]=a,b[19]=n):n=b[19];b[20]!==m||b[21]!==n?(g=i.jsx(c("PolarisFastLink.react"),{href:m,children:n}),b[20]=m,b[21]=n,b[22]=g):g=b[22];b[23]!==h||b[24]!==g||b[25]!==l||b[26]!==f||b[27]!==o?(a=i.jsx(c("IGDSListItem.react"),{addOnStart:h,linkProps:l,onPress:f,subtitle:o,title:g}),b[23]=h,b[24]=g,b[25]=l,b[26]=f,b[27]=o,b[28]=a):a=b[28];return a}function m(a){var b=d("react-compiler-runtime").c(5),e=a.invitedCoauthors,f=a.mediaId;b[0]!==f?(a=function(){c("polarisLogAction")("invitedCoauthorsSheetItemClick",{mediaId:f,source:"InvitedCoauthorsSheetItems"})},b[0]=f,b[1]=a):a=b[1];var g=a;if(b[2]!==g||b[3]!==e){a=[].concat(e);a=a.map(function(a){a=c("nullthrows")(a);a=a.user;return i.jsx(l,{onClick:g,user:a},a.id)});b[2]=g;b[3]=e;b[4]=a}else a=b[4];return a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.componentDidMount=function(){c("polarisLogAction")("invitedCoauthorsSheetImpression",{mediaId:this.props.mediaId,numCoauthors:this.props.invitedCoauthors.length,source:"InvitedCoauthorsSheet"})};e.render=function(){var a=this.props,b=a.invitedCoauthors,e=a.mediaId,f=a.onClose;a=a.title;return i.jsx(d("PolarisIGCoreSheetOrModal").IGCoreSheetOrModal,{onClose:f,title:a,children:i.jsx(c("IGDSBox.react"),{flex:"grow",marginBottom:d("PolarisUA").isMobile()?6:void 0,overflow:"auto",children:i.jsx(m,{invitedCoauthors:b,mediaId:e})})})};return b}(i.PureComponent);g.Username=j;g.InvitedCoauthorsSheetItem=l;g.InvitedCoauthorsSheetItems=m;g.InvitedCoauthorsSheet=a}),98);
__d("PolarisInvitedCoauthorsCountWithSheet.react",["fbt","IGDSTextVariants.react","PolarisFastLink.react","PolarisInvitedCoauthorsSheet.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"__JHASH__wNd7B5voz_d__JHASH__");function l(a){return h._(/*BTDS*/"__JHASH__jbBHibgQP0s__JHASH__",[h._param("num_coauthors",a)])}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isCoauthorSheetOpen:!1},c.$1=function(){c.props.onClick!=null&&c.props.onClick(),c.props.disableSheet!==!0&&c.setState({isCoauthorSheetOpen:!0})},c.$2=function(){c.setState({isCoauthorSheetOpen:!1})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.render=function(){return j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisFastLink.react"),{onClick:this.$1,children:j.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"primaryText",children:l(this.props.coauthors.length-1)})}),this.state.isCoauthorSheetOpen&&j.jsx(d("PolarisInvitedCoauthorsSheet.react").InvitedCoauthorsSheet,{invitedCoauthors:this.props.coauthors,mediaId:this.props.mediaId,onClose:this.$2,title:k})]})};return b}(j.PureComponent);g["default"]=a}),226);
__d("PolarisLikeAnimation.react",["cx","PolarisFeedLikeHeart.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=30,l=-30;function a(a){var b=d("react-compiler-runtime").c(1);a=a.likeEventCount;var e=Math.floor(Math.random()*(k-l+1))+l;if(a>0){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx("div",{className:"_aa7p",children:j.jsx("span",{className:"x1q3qbx4 xqz12i x4hg4is x972fbf xcfux6l x1qhh985 xm0m39n xln7xf2 xk390pu xdj266r xkrivgy xat24cr x1gryazu xg01cxk xexx8yu x4uap5 x18d9i69 xkhd6sd x47corl x1f85oc2 x11njtxf x1q1rmc8",style:{"--random-rotation-deg":e+"deg"},children:j.jsx(c("PolarisFeedLikeHeart.react"),{})})}),b[0]=a):a=b[0];return a}return null}g["default"]=a}),98);
__d("PolarisLikedByListActions",["FBLogger","PolarisInstapi","PolarisRelationshipActionGetRelationshipInfoForUserIds","PolarisUserModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return{searchInput:b,shortcode:a,type:"LIKED_BY_LIST_SEARCH_INPUT_SET"}}function e(a){return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){try{e=(yield d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/likers/",{path:{media_id:a}}));e=(e=(e=e.data.users)==null?void 0:e.map(function(a){return c("PolarisUserModel").fromNativeResponse(a).toReduxStore()}))!=null?e:[];var f=e.map(function(a){return a.id});yield b(d("PolarisRelationshipActionGetRelationshipInfoForUserIds").getRelationshipInfoForUserIds(f));b({mediaId:a,type:"LIKED_BY_LIST_NATIVE_REQUEST_UPDATED",users:e})}catch(a){c("FBLogger")("ig_web").catching(a)}});return function(a,b){return e.apply(this,arguments)}}()}g.setSearchInput=a;g.requestNativeLikedByList=e}),98);
__d("PolarisLikedByListButton.react",["IGDSText.react","PolarisFastLink.react","PolarisUA","react","react-compiler-runtime","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(10),e=a.children,f=a.code,g=a.inModal;a=a.onClick;var h=c("usePolarisViewer")();f="/p/"+f+"/liked_by/";var j;b[0]!==g||b[1]!==h?(j=!h&&g!==!0||d("PolarisUA").isDesktop(),b[0]=g,b[1]=h,b[2]=j):j=b[2];b[3]!==e?(g=i.jsx(c("IGDSText.react"),{weight:"semibold",zeroMargin:!0,children:e}),b[3]=e,b[4]=g):g=b[4];b[5]!==a||b[6]!==f||b[7]!==j||b[8]!==g?(h=i.jsx(c("PolarisFastLink.react"),{href:f,onClick:a,shouldOpenModal:j,children:g}),b[5]=a,b[6]=f,b[7]=j,b[8]=g,b[9]=h):h=b[9];return h}g["default"]=a}),98);
__d("PolarisLikedByListDialogContentWrapper.react",["IGDSBox.react","IGDSThemeConstantsHelpers","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=400-d("IGDSThemeConstantsHelpers").getNumericValue("scrollable-content-header-height"),k=200;function a(a){var b=d("react-compiler-runtime").c(2);a=a.children;var e;b[0]!==a?(e=i.jsx(c("IGDSBox.react"),{flex:"grow",maxHeight:j,minHeight:k,overflow:"hidden",children:a}),b[0]=a,b[1]=e):e=b[1];return e}g.CONTAINER_MAX_HEIGHT=j;g.CONTAINER_MIN_HEIGHT=k;g.PolarisLikedByListDialogContentWrapper=a}),98);
__d("PolarisLikedByListDialogHeader.react",["fbt","IGDSDialogHeader.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"__JHASH__kRHJRYG8Kn5__JHASH__");function a(a){var b=d("react-compiler-runtime").c(2);a=a.onClose;var e;b[0]!==a?(e=j.jsx(c("IGDSDialogHeader.react"),{onClose:a,children:k}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),226);
__d("PolarisLikedByListDialogPlaceholder.react",["IGDSDialogPlaceholder.react","IGDSListItemPlaceholder.react","PolarisLikedByListDialogContentWrapper.react","PolarisLikedByListDialogHeader.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(12);a=a.onClose;var e;b[0]!==a?(e=i.jsx(c("PolarisLikedByListDialogHeader.react"),{onClose:a}),b[0]=a,b[1]=e):e=b[1];var f,g,h,j;if(b[2]===Symbol["for"]("react.memo_cache_sentinel")){var k;f=i.jsx(k=c("IGDSListItemPlaceholder.react"),{color:"elevatedHighlightBackground",fullWidth:!0,index:0});g=i.jsx(k,{color:"elevatedHighlightBackground",fullWidth:!0,index:1});h=i.jsx(k,{color:"elevatedHighlightBackground",fullWidth:!0,index:2});j=i.jsx(k,{color:"elevatedHighlightBackground",fullWidth:!0,index:3});k=i.jsx(k,{color:"elevatedHighlightBackground",fullWidth:!0,index:4});b[2]=f;b[3]=g;b[4]=h;b[5]=j;b[6]=k}else f=b[2],g=b[3],h=b[4],j=b[5],k=b[6];b[7]!==e?(f=i.jsx(d("PolarisLikedByListDialogContentWrapper.react").PolarisLikedByListDialogContentWrapper,{children:i.jsxs(i.Fragment,{children:[e,f,g,h,j,k]})}),b[7]=e,b[8]=f):f=b[8];b[9]!==a||b[10]!==f?(g=i.jsx(c("IGDSDialogPlaceholder.react"),{onClose:a,children:f}),b[9]=a,b[10]=f,b[11]=g):g=b[11];return g}g["default"]=a}),98);
__d("PolarisLikedByText.react",["fbt","IGDSButton.react","IGDSText.react","PolarisBigNumber.react","PolarisFastLink.react","PolarisLikedByListButton.react","PolarisLinkBuilder","PolarisPostUtils","PolarisUserLink.react","PolarisUserLinkWithHoverCard.react","nullthrows","polarisLogAction","react","react-compiler-runtime","useCurrentRoute","usePolarisViewer"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){var b=d("react-compiler-runtime").c(5);a=a.user;var e=a.id,f;b[0]!==a.username?(f=c("nullthrows")(a.username),b[0]=a.username,b[1]=f):f=b[1];b[2]!==f||b[3]!==a.id?(e=j.jsx(c("PolarisUserLinkWithHoverCard.react"),{userId:e,username:f}),b[2]=f,b[3]=a.id,b[4]=e):e=b[4];return e}var l=function(){c("polarisLogAction")("likeCountClick")};function a(a){var b=d("react-compiler-runtime").c(61),e=a.code,f=a.hideCounts,g=a.inModal,i=a.onClick,m=a.onLike,n=a.topLikers,o=a.totalCount;a=a.users;var p=c("usePolarisViewer")(),q=c("useCurrentRoute")();q=q==null?void 0:q.url;var r;b[0]!==a||b[1]!==p?(r=d("PolarisPostUtils").getOrderedUsersForLikedByList(a,p),b[0]=a,b[1]=p,b[2]=r):r=b[2];r=r;if(o===1){var s;b[3]!==o?(s=h._(/*BTDS*/"__JHASH__zesVpNWdLc7__JHASH__",[h._param("count",o)]),b[3]=o,b[4]=s):s=b[4];s=s}else if(f){var t;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(t=h._(/*BTDS*/"__JHASH__NVsWra1TrS4__JHASH__"),b[5]=t):t=b[5];s=t}else{b[6]!==o?(t=h._(/*BTDS*/"__JHASH__yx6RcYfWPfd__JHASH__",[h._param("count",j.jsx(c("PolarisBigNumber.react"),{value:o}))]),b[6]=o,b[7]=t):t=b[7];s=t}t=o!==0&&a.length===0&&!f;if(t){b[8]!==e||b[9]!==g||b[10]!==s||b[11]!==i?(a=j.jsx(c("PolarisLikedByListButton.react"),{code:e,inModal:g,onClick:i,children:s}),b[8]=e,b[9]=g,b[10]=s,b[11]=i,b[12]=a):a=b[12];return a}else if(o===0){if(p){b[13]!==m?(t=h._(/*BTDS*/"__JHASH__zPcIHFAljfW__JHASH__",[h._param("like this",j.jsx(c("IGDSButton.react"),{display:"block",label:h._(/*BTDS*/"__JHASH__W_f8r2RdLZ8__JHASH__"),onClick:m,variant:"secondary_link"}))]),b[13]=m,b[14]=t):t=b[14];return t}b[15]!==q?(a=d("PolarisLinkBuilder").buildLoginLink(q,{source:"post_likers"}),b[15]=q,b[16]=a):a=b[16];b[17]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._(/*BTDS*/"__JHASH__rkOqXU3D6LE__JHASH__"),b[17]=p):p=b[17];b[18]!==a?(m=j.jsx(c("PolarisFastLink.react"),{href:a,children:p}),b[18]=a,b[19]=m):m=b[19];t=m;b[20]!==t?(q=h._(/*BTDS*/"__JHASH__VVvwm-KPzHp__JHASH__",[h._param("Log in",t)]),b[20]=t,b[21]=q):q=b[21];return q}else if(o===1&&f){if(n!=null&&n.length===1){p=n[0];b[22]!==p?(a=j.jsx(c("IGDSText.react"),{weight:"semibold",children:p}),b[22]=p,b[23]=a):a=b[23];b[24]!==p||b[25]!==a?(m=j.jsx(c("PolarisUserLink.react"),{color:"ig-primary-text",username:p,children:a}),b[24]=p,b[25]=a,b[26]=m):m=b[26];t=m;b[27]!==t?(q=h._(/*BTDS*/"__JHASH__q4wDyrHVOdd__JHASH__",[h._param("username",t)]),b[27]=t,b[28]=q):q=b[28];return q}else if(r.length===1){b[29]!==r?(p=h._(/*BTDS*/"__JHASH__q4wDyrHVOdd__JHASH__",[h._param("username",j.jsx(k,{user:r[0]}))]),b[29]=r,b[30]=p):p=b[30];return p}}else if((r.length>=1||f&&n!=null&&n.length>=1)&&(o>=2||o===-1)){if(f)if(r.length===2&&o===2){a=r[0];b[31]!==a?(m=j.jsx(k,{user:a}),b[31]=a,b[32]=m):m=b[32];t=m;q=r[1];b[33]!==q?(p=j.jsx(k,{user:q}),b[33]=q,b[34]=p):p=b[34];a=p}else{b[35]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"__JHASH__qkGZoir7PES__JHASH__"),b[35]=m):m=b[35];q=m;b[36]!==e||b[37]!==g||b[38]!==i?(p=j.jsx(c("PolarisLikedByListButton.react"),{code:e,inModal:g,onClick:i,children:q}),b[36]=e,b[37]=g,b[38]=i,b[39]=p):p=b[39];a=p;if(n!=null&&n.length>=1){m=n[0];b[40]!==m?(p=j.jsx(c("IGDSText.react"),{weight:"semibold",children:m}),b[40]=m,b[41]=p):p=b[41];b[42]!==m||b[43]!==p?(n=j.jsx(c("PolarisUserLink.react"),{color:"ig-primary-text",username:m,children:p}),b[42]=m,b[43]=p,b[44]=n):n=b[44];t=n}else{m=r[0];b[45]!==m?(p=j.jsx(k,{user:m}),b[45]=m,b[46]=p):p=b[46];t=p}}else{b[47]!==o?(n=o>2?h._(/*BTDS*/"__JHASH__TqguRNzb8Vy__JHASH__",[h._param("count",j.jsx(c("PolarisBigNumber.react"),{value:o-1}))]):h._(/*BTDS*/"__JHASH__FHgoDdBvGlx__JHASH__"),b[47]=o,b[48]=n):n=b[48];q=n;b[49]!==e||b[50]!==g||b[51]!==q||b[52]!==i?(m=j.jsx(c("PolarisLikedByListButton.react"),{code:e,inModal:g,onClick:i,children:q}),b[49]=e,b[50]=g,b[51]=q,b[52]=i,b[53]=m):m=b[53];a=m;p=r[0];b[54]!==p?(o=j.jsx(k,{user:p}),b[54]=p,b[55]=o):o=b[55];t=o}b[56]!==t||b[57]!==a?(n=h._(/*BTDS*/"__JHASH__ULbzii5uqUI__JHASH__",[h._param("username",t),h._param("other users",a)]),b[56]=t,b[57]=a,b[58]=n):n=b[58];return n}if(f)return null;b[59]!==s?(e=j.jsx(c("IGDSButton.react"),{display:"block",label:s,onClick:l,variant:"secondary_link"}),b[59]=s,b[60]=e):e=b[60];return e}g["default"]=a}),226);
__d("PolarisLineClampText.react",["fbt","FDSLineClamp.react","IGDSText.react","PolarisIGCorePressable.react","PolarisIGCoreText","PolarisUserText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useState,l=2,m=1e4;function a(a){var b=d("react-compiler-runtime").c(29),e,f,g,i,n,o;b[0]!==a?(i=a.lines,f=a.prependElement,e=a.color,n=a.headlineTag,o=a.value,g=babelHelpers.objectWithoutPropertiesLoose(a,["lines","prependElement","color","headlineTag","value"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=n,b[6]=o):(e=b[1],f=b[2],g=b[3],i=b[4],n=b[5],o=b[6]);a=i===void 0?l:i;i=n===void 0?"h1":n;n=k(!1);var p=n[0],q=n[1];b[7]!==e||b[8]!==i||b[9]!==g||b[10]!==o?(n=j.jsx(c("PolarisUserText.react"),babelHelpers["extends"]({},g,{color:e,display:"inline",headlineTag:i,size:"body",value:o})),b[7]=e,b[8]=i,b[9]=g,b[10]=o,b[11]=n):n=b[11];i=n;g=e==="ig-text-on-media"?"textOnMedia":"secondaryText";b[12]!==p?(o=function(){return q(!p)},b[12]=p,b[13]=o):o=b[13];b[14]===Symbol["for"]("react.memo_cache_sentinel")?(n={display:"inline"},b[14]=n):n=b[14];a=p?m:a;var r;b[15]!==f||b[16]!==a||b[17]!==i?(r=j.jsxs(c("FDSLineClamp.react"),{lines:a,children:[f,i]}),b[15]=f,b[16]=a,b[17]=i,b[18]=r):r=b[18];b[19]!==p||b[20]!==g?(f=!p&&j.jsx(c("IGDSText.react"),{color:g,textAlign:"start",zeroMargin:!0,children:h._(/*BTDS*/"__JHASH__o8KDH-tdLwt__JHASH__")}),b[19]=p,b[20]=g,b[21]=f):f=b[21];b[22]!==o||b[23]!==r||b[24]!==f?(a=j.jsxs(c("PolarisIGCorePressable.react"),{onPress:o,style:n,children:[r,f]}),b[22]=o,b[23]=r,b[24]=f,b[25]=a):a=b[25];b[26]!==e||b[27]!==a?(i=j.jsx(c("PolarisIGCoreText"),{color:e,display:"inline",zeroMargin:!0,children:a}),b[26]=e,b[27]=a,b[28]=i):i=b[28];return i}g["default"]=a}),226);
__d("PolarisUserTagIndicator.react",["IGDSBox.react","IGDSUserPanoFilledIcon.react","PolarisGenericStrings","PolarisIGCoreButton.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={absolute:{bottom:"x1ey2m1c",start:"x17qophe",position:"x10l6tqk",$$css:!0},root:{background:"x1ym3s0w",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",cursor:"x1ypdohk",marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",opacity:"xg01cxk",position:"x1n2onr6",transitionDuration:"x13dflua",transitionProperty:"x19991ni",$$css:!0},visible:{opacity:"x1hc1fzr",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(13),e=a.absolute,f=a.endAndornment,g=a.onClick;a=a.visible;e=e===void 0?!1:e;a=a===void 0?!0:a;var i;b[0]!==e||b[1]!==a?(i=(h||(h=c("stylex"))).props(k.root,e&&k.absolute,a&&k.visible),b[0]=e,b[1]=a,b[2]=i):i=b[2];e=f!=null?3:2;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("IGDSUserPanoFilledIcon.react"),{alt:d("PolarisGenericStrings").TAG_TEXT,color:"web-always-white",size:12}),b[3]=a):a=b[3];b[4]!==f||b[5]!==e?(a=j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"center",paddingX:e,paddingY:2,position:"relative",children:[a,f]}),b[4]=f,b[5]=e,b[6]=a):a=b[6];b[7]!==g||b[8]!==a?(f=j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:g,children:a}),b[7]=g,b[8]=a,b[9]=f):f=b[9];b[10]!==i||b[11]!==f?(e=j.jsx("div",babelHelpers["extends"]({},i,{children:f})),b[10]=i,b[11]=f,b[12]=e):e=b[12];return e}g["default"]=a}),98);
__d("PolarisLoggedOutUserTagIndicator.react",["PolarisConfig","PolarisUA","PolarisUserTagIndicator.react","react","react-compiler-runtime","useCurrentRoute","usePolarisLoggedOutContentWallEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(7),e=a.defaultOnClick;a=a.visible;a=a===void 0?!0:a;var f=c("useCurrentRoute")(),g=c("usePolarisLoggedOutContentWallEntryPointDialog")(),h=g[0],j=(g=f==null?void 0:f.url)!=null?g:"/";b[0]!==e||b[1]!==j||b[2]!==h?(f=function(){d("PolarisUA").isDesktop()&&!d("PolarisConfig").isLoggedOutFRXEligible()?h&&h({nextUrl:j,source:"post_tagged",variant:"feature_wall"}):e!=null&&e()},b[0]=e,b[1]=j,b[2]=h,b[3]=f):f=b[3];g=f;b[4]!==g||b[5]!==a?(f=i.jsx(c("PolarisUserTagIndicator.react"),{absolute:!0,onClick:g,visible:a}),b[4]=g,b[5]=a,b[6]=f):f=b[6];return f}g["default"]=a}),98);
__d("PolarisMediaVideo.react",["cr:6866","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");g["default"]=b("cr:6866")}),98);
__d("PolarisPartnershipAdAvatar.react",["IGDSBox.react","PolarisClickEventLoggerProvider.react","PolarisProfileClickEventLoggerProvider.react","PolarisSponsoredPostContext.react","PolarisUserAvatar.react","PolarisUserHoverCard.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var b,e,f,g=d("react-compiler-runtime").c(25),h=a.firstIdentity;a=a.secondIdentity;var k=j(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext);k=k.onSecondaryProfileClick;var l=!a.is_unpublished;b=(b=a.id)!=null?b:"";e=(e=a.username)!=null?e:"";var m=!a.is_unpublished;f=(f=a.profile_pic_url)!=null?f:"";a=(a=a.username)!=null?a:"";var n;g[0]!==m||g[1]!==f||g[2]!==a?(n=i.jsx(c("PolarisUserAvatar.react"),{isLink:m,profilePictureUrl:f,size:24,username:a}),g[0]=m,g[1]=f,g[2]=a,g[3]=n):n=g[3];g[4]!==l||g[5]!==b||g[6]!==e||g[7]!==n?(m=i.jsx(c("PolarisUserHoverCard.react"),{display:"block",isUserAvailable:l,userId:b,username:e,children:n}),g[4]=l,g[5]=b,g[6]=e,g[7]=n,g[8]=m):m=g[8];g[9]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x1qjc9v5 xvbhtw8 x14yjl9h xudhj91 x18nykt9 xww2gxu x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x78zum5 xdt5ytf x2lah0s xk390pu x1923su1 xdj266r x11i5rnm xat24cr x1mh8g0r x4p5aij x19um543 x1j85h84 x1m6msm x10l6tqk xfr5jun x11njtxf"},g[9]=f):f=g[9];a=!h.is_unpublished;b=(l=h.username)!=null?l:"";e=!h.is_unpublished;l=(n=h.profile_pic_url)!=null?n:"";n=(n=h.username)!=null?n:"";var o;g[10]!==e||g[11]!==l||g[12]!==n?(o=i.jsx(c("PolarisUserAvatar.react"),{isLink:e,profilePictureUrl:l,size:24,username:n}),g[10]=e,g[11]=l,g[12]=n,g[13]=o):o=g[13];g[14]!==h.id||g[15]!==a||g[16]!==b||g[17]!==o?(e=i.jsx(c("PolarisUserHoverCard.react"),{display:"block",isUserAvailable:a,userId:h.id,username:b,children:o}),g[14]=h.id,g[15]=a,g[16]=b,g[17]=o,g[18]=e):e=g[18];g[19]!==k||g[20]!==e?(l=i.jsx("div",babelHelpers["extends"]({},f,{children:i.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"row",justifyContent:"start",children:i.jsx(c("PolarisClickEventLoggerProvider.react"),{children:i.jsx(c("PolarisProfileClickEventLoggerProvider.react"),{onProfileClick:k,children:e})})})})),g[19]=k,g[20]=e,g[21]=l):l=g[21];g[22]!==l||g[23]!==m?(n=i.jsxs(c("IGDSBox.react"),{alignItems:"end",height:32,position:"relative",width:32,children:[m,l]}),g[22]=l,g[23]=m,g[24]=n):n=g[24];return n}g["default"]=a}),98);
__d("PolarisPartnershipAdHeader.react",["cx","fbt","IGDSTextVariants.react","PolarisClickEventLoggerProvider.react","PolarisProfileClickEventLoggerProvider.react","PolarisSponsoredPostContext.react","PolarisUserHoverCard.react","PolarisUserLink.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useContext;function a(a){var b=d("react-compiler-runtime").c(4),e=a.firstIdentity;a=a.secondIdentity;var f=l(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext);f=f.onSecondaryProfileClick;var g;b[0]!==e||b[1]!==f||b[2]!==a?(g=k.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{zeroMargin:!0,children:i._(/*BTDS*/"__JHASH__EDvwZGAvckz__JHASH__",[i._param("primary identity name",k.jsx(c("PolarisClickEventLoggerProvider.react"),{children:k.jsx(c("PolarisProfileClickEventLoggerProvider.react"),{onProfileClick:f,children:k.jsx(m,{identity:e})})})),i._param("secondary identity name",k.jsx(m,{identity:a})),i._implicitParam("=m2",k.jsx(d("IGDSTextVariants.react").IGDSTextBody,{children:i._(/*BTDS*/"__JHASH__eE_Jo8cJd7w__JHASH__")}))])}),b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];return g}function m(a){var b=d("react-compiler-runtime").c(5);a=a.identity;var e;b[0]!==a.full_name||b[1]!==a.id||b[2]!==a.is_unpublished||b[3]!==a.username?(e=a.is_unpublished===!0?k.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"secondaryText",zeroMargin:!0,children:k.jsx("span",{className:"_aaqs",children:a.full_name})}):k.jsx(c("PolarisUserHoverCard.react"),{display:"inline-block",isUserAvailable:!a.is_unpublished,userId:a.id,username:a.username,children:k.jsx(c("PolarisUserLink.react"),{username:a.username})}),b[0]=a.full_name,b[1]=a.id,b[2]=a.is_unpublished,b[3]=a.username,b[4]=e):e=b[4];return e}g["default"]=a}),226);
__d("PolarisUpcomingEventIndicator.react",["cx","IGDSBox.react","IGDSCalendarPanoFilledIcon.react","PolarisGenericStrings","PolarisIGCoreButton.react","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.onClick;c("vulture")("P51bpiycyl5EoqQjSMYsoDc6Oss=");var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"center",paddingX:2,paddingY:2,position:"relative",children:j.jsx(c("IGDSCalendarPanoFilledIcon.react"),{alt:d("PolarisGenericStrings").UPCOMING_EVENT_ICON_ALT,color:"web-always-white",size:12})}),b[0]=e):e=b[0];b[1]!==a?(e=j.jsx("div",{className:"_a9-2 _a9-3 _a9-4",children:j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:a,children:e})}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("PolarisPostActionSetUpcomingEventReminder",["InstagramUpcomingEventActionFalcoEvent","PolarisAPISetUpcomingEventReminder","PolarisContainerModuleUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e,f,g,h){c("InstagramUpcomingEventActionFalcoEvent").log(function(){return{action:"upcoming_event_reminder_on",pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(g),source_of_action:h,upcoming_event_id:a}});return function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield d("PolarisAPISetUpcomingEventReminder").setUpcomingEventReminder(a,e,!0));c.status==="ok"&&(yield b({eventId:a,reminderEnabled:!0,type:"UPCOMING_EVENT_REMINDER_SET"}),f(!1))});return function(a){return c.apply(this,arguments)}}()}g.setUpcomingEventReminder=a}),98);
__d("PolarisPostActionUnsetUpcomingEventReminder",["InstagramUpcomingEventActionFalcoEvent","PolarisAPISetUpcomingEventReminder","PolarisContainerModuleUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e,f,g){c("InstagramUpcomingEventActionFalcoEvent").log(function(){return{action:"upcoming_event_reminder_off",pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(f),source_of_action:g,upcoming_event_id:a}});return function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield d("PolarisAPISetUpcomingEventReminder").setUpcomingEventReminder(a,null,!1));c.status==="ok"&&(yield b({eventId:a,reminderEnabled:!1,type:"UPCOMING_EVENT_REMINDER_UNSET"}),e(!1))});return function(a){return c.apply(this,arguments)}}()}g.unsetUpcomingEventReminder=a}),98);
__d("PolarisUpcomingEventStrings",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._(/*BTDS*/"__JHASH__6l0c6O_mEEs__JHASH__");b=h._(/*BTDS*/"__JHASH__rV1x4VLA-xS__JHASH__");c=h._(/*BTDS*/"__JHASH__wffskxZPcq7__JHASH__");d=h._(/*BTDS*/"__JHASH__dmPXhvuUXZ2__JHASH__");e=h._(/*BTDS*/"__JHASH__QEHopTzhoM2__JHASH__");f=h._(/*BTDS*/"__JHASH__8VmaTNZNFR2__JHASH__");h=h._(/*BTDS*/"__JHASH__tBYM5KMeEH4__JHASH__");g.IN_THIS_PHOTO_TITLE_TEXT=a;g.IN_THIS_VIDEO_TITLE_TEXT=b;g.UPCOMING_EVENT_TITLE_TEXT=c;g.ACCOUNTS_TITLE_TEXT=d;g.GET_REMINDER_TEXT=e;g.CANCEL_REMINDER_TEXT=f;g.UPCOMING_EVENT_NOTIFICATION_INFO_TEXT=h}),226);
__d("PolarisUpcomingEventContainerFooter.react",["IGDSBox.react","IGDSDivider.react","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisPostActionSetUpcomingEventReminder","PolarisPostActionUnsetUpcomingEventReminder","PolarisReactRedux.react","PolarisUA","PolarisUpcomingEventStrings","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useState;function a(a){var b=d("react-compiler-runtime").c(12),e=a.analyticsContext,f=a.eventId,g=a.mediaId,h=a.reminderEnabled;c("vulture")("NLWjsHAMQ04eewgoYjPLdvFCbAE=");a=j(!1);var k=a[0],l=a[1],m=d("PolarisReactRedux.react").useDispatch();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx(c("PolarisIGCoreText"),{color:"ig-secondary-text",size:"footnote",textAlign:d("PolarisUA").isDesktop()?"left":"center",weight:"light",children:d("PolarisUpcomingEventStrings").UPCOMING_EVENT_NOTIFICATION_INFO_TEXT}),b[0]=a):a=b[0];a=a;var n=h?"ig-secondary-button":"ig-primary-button",o=h?d("PolarisUpcomingEventStrings").CANCEL_REMINDER_TEXT:d("PolarisUpcomingEventStrings").GET_REMINDER_TEXT,p;b[1]!==e||b[2]!==m||b[3]!==f||b[4]!==g||b[5]!==h?(p=function(){l(!0),h?m(d("PolarisPostActionUnsetUpcomingEventReminder").unsetUpcomingEventReminder(f,l,e,"tag_indicator")):m(d("PolarisPostActionSetUpcomingEventReminder").setUpcomingEventReminder(f,g,l,e,"tag_indicator"))},b[1]=e,b[2]=m,b[3]=f,b[4]=g,b[5]=h,b[6]=p):p=b[6];p=p;b[7]!==k||b[8]!==p||b[9]!==n||b[10]!==o?(a=d("PolarisUA").isDesktop()?i.jsxs(i.Fragment,{children:[i.jsx(c("IGDSBox.react"),{marginBottom:6,marginTop:2,paddingX:3,position:"relative",children:a}),i.jsx(c("IGDSDivider.react"),{}),i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,color:n,loading:k,onClick:p,children:i.jsx(c("IGDSBox.react"),{padding:4,position:"relative",children:o})})]}):i.jsxs(i.Fragment,{children:[i.jsx(c("IGDSBox.react"),{marginTop:1,paddingX:4,position:"relative",children:i.jsx(c("PolarisIGCoreButton.react"),{color:n,large:!0,loading:k,onClick:p,children:o})}),i.jsx(c("IGDSBox.react"),{marginBottom:4,marginTop:3,paddingX:5,position:"relative",children:a})]}),b[7]=k,b[8]=p,b[9]=n,b[10]=o,b[11]=a):a=b[11];return a}g["default"]=a}),98);
__d("PolarisUpcomingEventUtils",["fbt","PolarisLocales"],(function(a,b,c,d,e,f,g,h){"use strict";var i={day:"numeric",month:"short",weekday:"short"},j={hour:"numeric",minute:"2-digit"};function a(a){if(a==null)return"Unknown time";a=new Date(a*1e3);var b=c("PolarisLocales").locale.replace("_","-"),d=a.toLocaleDateString(b,i);a=a.toLocaleTimeString(b,j);return h._(/*BTDS*/"__JHASH__U_fK7-Pg0rr__JHASH__",[h._param("dateString",d),h._param("timeString",a)])}function b(a){return a>Math.floor(Date.now()/1e3)}g.getUpcomingEventDateString=a;g.getUpcomingEventIsActive=b}),226);
__d("PolarisUpcomingEventContainer.react",["fbt","IGDSBox.react","IGDSText.react","IGDSTextVariants.react","InstagramUpcomingEventActionFalcoEvent","PolarisContainerModuleUtils","PolarisThumbnail.react","PolarisUpcomingEventContainerFooter.react","PolarisUpcomingEventUtils","PolarisViewpointReact.react","react","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useMemo,m=b.useState,n=h._(/*BTDS*/"__JHASH__LNT7mjfpcW-__JHASH__");function a(a){var b=a.analyticsContext,e=a.mediaId,f=a.upcomingEvent;a=a.upcomingEventThumbnailSrc;c("vulture")("ujL2NsR_Z2oGeZb1il3ekzQ_tvo=");f=(f=f)!=null?f:{};var g=f.eventId,h=f.reminderEnabled,i=f.startTime;f=f.title;var o=m(d("PolarisUpcomingEventUtils").getUpcomingEventIsActive(i)),p=o[0],q=o[1];o=l(function(){return d("PolarisUpcomingEventUtils").getUpcomingEventDateString(i)},[i]);k(function(){var a=window.setInterval(function(){q(d("PolarisUpcomingEventUtils").getUpcomingEventIsActive(i))},15e3);return function(){return window.clearInterval(a)}},[]);var r=function(a){switch(a.state){case"exited":c("InstagramUpcomingEventActionFalcoEvent").log(function(){return{action:"upcoming_event_sheet_time_spent",event_sheet_time_spent:a.getTimeSpent()/1e3,pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(b),source_of_action:"tag_indicator",upcoming_event_id:g}});break}};r=d("PolarisViewpointReact.react").useViewpoint({action:r,id:e});return j.jsxs(c("IGDSBox.react"),{containerRef:r,position:"relative",children:[j.jsxs(c("IGDSBox.react"),{direction:"row",position:"relative",children:[j.jsx(c("IGDSBox.react"),{padding:4,position:"relative",children:j.jsx(c("PolarisThumbnail.react"),{alt:n,dimension:88,src:a})}),j.jsxs(c("IGDSBox.react"),{alignSelf:"center",flex:"grow",position:"relative",children:[j.jsx(d("IGDSTextVariants.react").IGDSTextTitle,{children:f}),j.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:j.jsx(c("IGDSText.react"),{color:"secondaryText",size:"body",weight:"light",children:o})})]})]}),p&&j.jsx(c("PolarisUpcomingEventContainerFooter.react"),{analyticsContext:b,eventId:g,mediaId:e,reminderEnabled:h})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("PolarisUpcomingEventSheetOrModal.react",["fbt","PolarisIGCoreSheetOrModal","PolarisUA","PolarisUpcomingEventContainer.react","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"__JHASH__Tnjj3OQWZIp__JHASH__");function a(a){var b=d("react-compiler-runtime").c(8),e=a.analyticsContext,f=a.mediaId,g=a.onClose,h=a.upcomingEvent;a=a.upcomingEventThumbnailSrc;c("vulture")("2C4yEPEtQ3kCYS6zynJQVz9JEAQ=");var i;b[0]!==e||b[1]!==f||b[2]!==h||b[3]!==a?(i=j.jsx(c("PolarisUpcomingEventContainer.react"),{analyticsContext:e,mediaId:f,upcomingEvent:h,upcomingEventThumbnailSrc:a}),b[0]=e,b[1]=f,b[2]=h,b[3]=a,b[4]=i):i=b[4];b[5]!==g||b[6]!==i?(e=j.jsx(d("PolarisIGCoreSheetOrModal").IGCoreSheetOrModal,{onClose:g,title:d("PolarisUA").isDesktop()?k:null,children:i}),b[5]=g,b[6]=i,b[7]=e):e=b[7];return e}g["default"]=a}),226);
__d("PolarisUserTagSheet.react",["IGDSBox.react","IGDSListItem.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","PolarisIGCoreConstants","PolarisIGCoreSheetOrModal","PolarisLinkBuilder","PolarisUA","PolarisUserAvatar.react","nullthrows","polarisLogAction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){var b=d("react-compiler-runtime").c(9);a=a.user;var e=a.isVerified;a=a.username;if(a===void 0)return null;var f;b[0]!==a?(f=i.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{zeroMargin:!0,children:a}),b[0]=a,b[1]=f):f=b[1];b[2]!==e?(a=e&&i.jsx(c("IGDSVerifiedBadge.react"),{size:"small"}),b[2]=e,b[3]=a):a=b[3];b[4]!==a?(e=i.jsx(c("IGDSBox.react"),{marginStart:2,children:a}),b[4]=a,b[5]=e):e=b[5];b[6]!==f||b[7]!==e?(a=i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",children:[f,e]}),b[6]=f,b[7]=e,b[8]=a):a=b[8];return a}function k(a){var b=d("react-compiler-runtime").c(17),e=a.onClick;a=a.user;var f=a.fullName,g=a.profilePictureUrl,h=a.username,k;b[0]!==g||b[1]!==h?(k=i.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:g,size:c("PolarisIGCoreConstants").AVATAR_SIZES.medium,username:h}),b[0]=g,b[1]=h,b[2]=k):k=b[2];b[3]!==h?(g=d("PolarisLinkBuilder").buildUserLink(h),b[3]=h,b[4]=g):g=b[4];b[5]!==g?(h={url:g},b[5]=g,b[6]=h):h=b[6];b[7]!==e?(g=function(){e()},b[7]=e,b[8]=g):g=b[8];var l;b[9]!==a?(l=i.jsx(j,{user:a}),b[9]=a,b[10]=l):l=b[10];b[11]!==f||b[12]!==k||b[13]!==h||b[14]!==g||b[15]!==l?(a=i.jsx(c("IGDSListItem.react"),{addOnStart:k,linkProps:h,onPress:g,subtitle:f,testid:void 0,title:l}),b[11]=f,b[12]=k,b[13]=h,b[14]=g,b[15]=l,b[16]=a):a=b[16];return a}function l(a){var b=d("react-compiler-runtime").c(7),e=a.mediaId;a=a.usertags;var f;b[0]!==e?(f=function(){c("polarisLogAction")("userTagSheetItemClick",{mediaId:e,source:"UserTagSheetItems"})},b[0]=e,b[1]=f):f=b[1];var g=f;if(b[2]!==g||b[3]!==a){b[5]!==g?(f=function(a){a=c("nullthrows")(a);a=a.user;return i.jsx(k,{onClick:g,user:a},a.id)},b[5]=g,b[6]=f):f=b[6];f=a.map(f);b[2]=g;b[3]=a;b[4]=f}else f=b[4];return f}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.componentDidMount=function(){c("polarisLogAction")("userTagSheetImpression",{mediaId:this.props.mediaId,numUsertags:this.props.usertags.length,source:"UserTagSheet"})};e.render=function(){var a=this.props,b=a.mediaId,e=a.onClose,f=a.title;a=a.usertags;return i.jsx(d("PolarisIGCoreSheetOrModal").IGCoreSheetOrModal,{onClose:e,title:f,children:i.jsx(c("IGDSBox.react"),{flex:"grow",marginBottom:d("PolarisUA").isMobile()?6:void 0,overflow:"auto",children:i.jsx(l,{mediaId:b,usertags:a})})})};return b}(i.PureComponent);g.Username=j;g.UserTagSheetItem=k;g.UserTagSheetItems=l;g.UserTagSheet=a}),98);
__d("PolarisUpcomingEventWithUserTagsSheetOrModal.react",["PolarisIGCoreSheetOrModal","PolarisIGCoreTabV2.react","PolarisIGCoreTabsV2.react","PolarisUpcomingEventContainer.react","PolarisUpcomingEventStrings","PolarisUserTagSheet.react","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(15),e=a.analyticsContext,f=a.isVideo,g=a.mediaId,h=a.onClose,j=a.upcomingEvent,k=a.upcomingEventThumbnailSrc;a=a.usertags;c("vulture")("VuQ14PnOjNmL8523kPnuaWtbVeE=");f=f?d("PolarisUpcomingEventStrings").IN_THIS_VIDEO_TITLE_TEXT:d("PolarisUpcomingEventStrings").IN_THIS_PHOTO_TITLE_TEXT;var l;b[0]!==e||b[1]!==g||b[2]!==j||b[3]!==k?(l=j!=null&&k!=null&&i.jsx(c("PolarisIGCoreTabV2.react"),{node:i.jsx(c("PolarisUpcomingEventContainer.react"),{analyticsContext:e,mediaId:g,upcomingEvent:j,upcomingEventThumbnailSrc:k}),children:d("PolarisUpcomingEventStrings").UPCOMING_EVENT_TITLE_TEXT}),b[0]=e,b[1]=g,b[2]=j,b[3]=k,b[4]=l):l=b[4];b[5]!==g||b[6]!==a?(e=a!=null&&i.jsx(c("PolarisIGCoreTabV2.react"),{node:i.jsx(d("PolarisUserTagSheet.react").UserTagSheetItems,{mediaId:g,usertags:a}),children:d("PolarisUpcomingEventStrings").ACCOUNTS_TITLE_TEXT}),b[5]=g,b[6]=a,b[7]=e):e=b[7];b[8]!==l||b[9]!==e?(j=i.jsxs(c("PolarisIGCoreTabsV2.react"),{children:[l,e]}),b[8]=l,b[9]=e,b[10]=j):j=b[10];b[11]!==h||b[12]!==f||b[13]!==j?(k=i.jsx(d("PolarisIGCoreSheetOrModal").IGCoreSheetOrModal,{onClose:h,title:f,children:j}),b[11]=h,b[12]=f,b[13]=j,b[14]=k):k=b[14];return k}g["default"]=a}),98);
__d("PolarisUpcomingEventIndicatorWithSheetOrModal.react",["InstagramUpcomingEventActionFalcoEvent","PolarisContainerModuleUtils","PolarisUpcomingEventIndicator.react","PolarisUpcomingEventSheetOrModal.react","PolarisUpcomingEventWithUserTagsSheetOrModal.react","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState;function a(a){var b=d("react-compiler-runtime").c(17),e=a.analyticsContext,f=a.isVideo,g=a.mediaId,h=a.upcomingEvent,k=a.upcomingEventThumbnailSrc;a=a.usertags;c("vulture")("AivHJaZfcIra52D2uVgyLm9aJf0=");var l=j(!1),m=l[0],n=l[1];l=a!=null&&a.length>0;var o;b[0]!==e||b[1]!==h.eventId?(o=function(){c("InstagramUpcomingEventActionFalcoEvent").log(function(){return{action:"upcoming_event_tag_indicator_click",pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(e),source_of_action:"tag_indicator",upcoming_event_id:h.eventId}}),n(!0)},b[0]=e,b[1]=h.eventId,b[2]=o):o=b[2];o=o;var p;b[3]!==o?(p=i.jsx(c("PolarisUpcomingEventIndicator.react"),{onClick:o}),b[3]=o,b[4]=p):p=b[4];b[5]!==e||b[6]!==m||b[7]!==f||b[8]!==g||b[9]!==l||b[10]!==h||b[11]!==k||b[12]!==a?(o=m&&(l?i.jsx(c("PolarisUpcomingEventWithUserTagsSheetOrModal.react"),{analyticsContext:e,isVideo:f,mediaId:g,onClose:function(){return n(!1)},upcomingEvent:h,upcomingEventThumbnailSrc:k,usertags:a}):i.jsx(c("PolarisUpcomingEventSheetOrModal.react"),{analyticsContext:e,mediaId:g,onClose:function(){return n(!1)},upcomingEvent:h,upcomingEventThumbnailSrc:k})),b[5]=e,b[6]=m,b[7]=f,b[8]=g,b[9]=l,b[10]=h,b[11]=k,b[12]=a,b[13]=o):o=b[13];b[14]!==p||b[15]!==o?(m=i.jsxs(i.Fragment,{children:[p,o]}),b[14]=p,b[15]=o,b[16]=m):m=b[16];return m}g["default"]=a}),98);
__d("PolarisUserTagInner.react",["react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={pointer:{borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",height:"xqtp20y",start:"xtzzx4i",marginStart:"xbmpl8g",position:"x10l6tqk",width:"xnalus7",$$css:!0},pointerDown:{borderBottomWidth:"x1qhh985",borderEndColor:"xogb00i",borderEndStyle:"xu3j5b3",borderEndWidth:"x1e7kja",borderStartColor:"x1ftr3km",borderStartStyle:"x26u7qi",borderStartWidth:"x19d7kov",borderTopColor:"xccvetk",borderTopStyle:"x13fuv20",borderTopWidth:"x1kr8tdy",top:"xdsb8wn",$$css:!0},pointerUp:{borderBottomColor:"x17nu0il",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xqm4iv",borderEndColor:"xogb00i",borderEndStyle:"xu3j5b3",borderEndWidth:"x1e7kja",borderStartColor:"x1ftr3km",borderStartStyle:"x26u7qi",borderStartWidth:"x19d7kov",borderTopWidth:"x972fbf",top:"xjibb99",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(11),e=a.isPointingUp,f=a.pointerStyle;a=a.username;var g;b[0]!==e?(g=(h||(h=c("stylex"))).props(e&&k.pointerUp,!e&&k.pointerDown,k.pointer),b[0]=e,b[1]=g):g=b[1];b[2]!==f||b[3]!==g?(e=j.jsx("div",babelHelpers["extends"]({},g,{style:f})),b[2]=f,b[3]=g,b[4]=e):e=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x972fbf xcfux6l x1qhh985 xm0m39n xln7xf2 xk390pu xdj266r xq8finb xat24cr x16n37ib xexx8yu x4uap5 x18d9i69 xkhd6sd x11njtxf"},b[5]=f):f=b[5];b[6]!==a?(g=j.jsx("span",babelHelpers["extends"]({},f,{children:a})),b[6]=a,b[7]=g):g=b[7];b[8]!==e||b[9]!==g?(f=j.jsxs(j.Fragment,{children:[e,g]}),b[8]=e,b[9]=g,b[10]=f):f=b[10];return f}g["default"]=a}),98);
__d("PolarisUserTag.react",["cx","PolarisFastLink.react","PolarisUserTagInner.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){var b=d("react-compiler-runtime").c(23),e=a.action,f=a.className,g=a.forwardedRef,h=a.isPointingUp,i=a.isShowingTags,k=a.pointerStyle,m=a.style;a=a.user;var n=l;a=a.username;if(e!=null){var o;b[0]!==e||b[1]!==h||b[2]!==k||b[3]!==a?(o=j.jsx("div",{className:"_aa1q",children:n(h,k,a,e)}),b[0]=e,b[1]=h,b[2]=k,b[3]=a,b[4]=o):o=b[4];b[5]!==f||b[6]!==g||b[7]!==m||b[8]!==o?(e=j.jsx("div",{className:f,ref:g,style:m,children:o}),b[5]=f,b[6]=g,b[7]=m,b[8]=o,b[9]=e):e=b[9];return e}o="_aa1q";e="/"+a+"/";b[10]!==h||b[11]!==k||b[12]!==a?(n=n(h,k,a),b[10]=h,b[11]=k,b[12]=a,b[13]=n):n=b[13];b[14]!==i||b[15]!==e||b[16]!==n?(h=j.jsx(c("PolarisFastLink.react"),{canTabFocus:i,className:o,href:e,children:n}),b[14]=i,b[15]=e,b[16]=n,b[17]=h):h=b[17];b[18]!==f||b[19]!==g||b[20]!==m||b[21]!==h?(k=j.jsx("div",{className:f,ref:g,style:m,children:h}),b[18]=f,b[19]=g,b[20]=m,b[21]=h,b[22]=k):k=b[22];return k}function l(a,b,d,e){return j.jsxs("span",{className:"_aa1p",children:[j.jsx(c("PolarisUserTagInner.react"),{isPointingUp:a,pointerStyle:b,username:d}),e]})}l.displayName=l.name+" [from "+f.id+"]";a=j.forwardRef(function(a,b){return j.jsx(k,babelHelpers["extends"]({},a,{forwardedRef:b}))});g["default"]=a}),98);
__d("PolarisPhotoWithIndicator.react",["cx","PolarisBatchDOM","PolarisEventLoop","PolarisIsLoggedIn","PolarisLoggedOutUserTagIndicator.react","PolarisPhoto.react","PolarisUA","PolarisUpcomingEventIndicatorWithSheetOrModal.react","PolarisUserTag.react","PolarisUserTagIndicator.react","joinClasses","polarisOnlyHandleSingleClick","react","react-compiler-runtime","useCurrentRoute","usePolarisLoggedOutContentWallEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=.04,l=2e3,m=-50,n={horizontalOffset:m,isPointingUp:!0},o=.85,p=6;function q(a,b){b=b+k/2;var c=b>a,d=b>1-a;c=c||d;return c?d?m+(m-100*k)*(1-(1-a)/b):m-(m-100*k)*(1-a/b):m}var r=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=c=b.call.apply(b,[this].concat(f))||this,c.state={isShowingIndicator:!0,isShowingTags:!1,tagAdjustments:new Map()},c.$3=new Map(),c.$11=function(){c.setState({isShowingIndicator:!1}),c.$8()},c.$7=d("polarisOnlyHandleSingleClick").onlyHandleSingleClick(function(){if(!d("PolarisIsLoggedIn").isLoggedIn()&&d("PolarisUA").isDesktop()){c.$12();return}var a=c.props,b=a.alwaysShowIndicator;a=a.usertags;var e=c.state.isShowingTags;if(a&&a.length>0){a=!e;c.$8();c.setState({isShowingIndicator:a||b,isShowingTags:a})}}),a)||babelHelpers.assertThisInitialized(c)}var e=a.prototype;e.componentDidUpdate=function(a){a.isVisible&&!this.props.isVisible?this.$4():!a.isVisible&&this.props.isVisible&&this.$5()};e.componentDidMount=function(){this.$6()};e.componentWillUnmount=function(){this.$7.cancel(),this.$8()};e.$9=function(a){return{height:a.offsetHeight,left:a.offsetLeft,top:a.offsetTop,width:a.offsetWidth}};e.$6=function(){var a=this;d("PolarisBatchDOM").mutate(function(){if(!a.$2)return;var b=a.$9(a.$2),c=new Map();a.$3.forEach(function(d,e){d=a.$9(d);var f=d.top/b.height<=o,g=d.width/b.width/2;d=d.left/b.width;d=q(d,g);c.set(e,{horizontalOffset:d,isPointingUp:f})});a.setState({tagAdjustments:c})})};e.$10=function(){this.$1||(this.$1=c("PolarisEventLoop").setTimeout(this.$11,l))};e.$8=function(){this.$1&&(c("PolarisEventLoop").clearTimeout(this.$1),this.$1=null)};e.$12=function(){var a=this.props.onLoggedOutIntentClickLoginModal;a("post_tagged")};e.$5=function(){!this.state.isShowingTags&&!this.props.alwaysShowIndicator&&this.$10()};e.$4=function(){this.state.isShowingTags||(this.$8(),this.setState({isShowingIndicator:!0}))};e.$13=function(){var a=this;return!this.props.usertags?null:this.props.usertags.map(function(b,d){var e=s(b,d);d=a.state.tagAdjustments.get(e)||n;var f={left:b.x*100+"%",marginTop:(d.isPointingUp?p:-p)+"px",top:b.y*100+"%",transform:"translate(\n          "+d.horizontalOffset+"%,\n          "+(d.isPointingUp?0:-100)+"%\n        ) scale("+(a.state.isShowingTags?1:0)+")"},g={left:-d.horizontalOffset+"%"};return j.jsx(c("PolarisUserTag.react"),{className:"_aa1y",isPointingUp:d.isPointingUp,isShowingTags:a.state.isShowingTags,pointerStyle:g,ref:function(b){b!=null&&a.$3.set(e,b)},style:f,user:b.user},e)})};e.$14=function(){var a=this.props,b=a.analyticsContext,e=a.isFocused,f=a.upcomingEvent,g=a.upcomingEventMediaId,h=a.upcomingEventThumbnailSrc;a=a.usertags;var i=this.state.isShowingIndicator;return f?j.jsx(c("PolarisUpcomingEventIndicatorWithSheetOrModal.react"),{analyticsContext:b,isVideo:!1,mediaId:g,upcomingEvent:f,upcomingEventThumbnailSrc:h,usertags:a}):d("PolarisIsLoggedIn").isLoggedIn()?j.jsx(c("PolarisUserTagIndicator.react"),{absolute:!0,onClick:this.$7,visible:i||e}):j.jsx(c("PolarisLoggedOutUserTagIndicator.react"),{defaultOnClick:this.$7,visible:i||e})};e.render=function(){var a=this,b=this.props,d=b.accessibilityCaption,e=b.className,f=b.onPhotoRendered,g=b.rich,h=b.src;b=b.srcSet;var i=this.state,k=i.isShowingIndicator;i=i.isShowingTags;d={accessibilityCaption:d,dimensions:this.props.dimensions,imgXstyle:this.props.imgXstyle,likeEventCount:this.props.likeEventCount,postId:this.props.postId};return j.jsxs("div",{className:c("joinClasses")(e,"_aa1z"+(i?" _aa1-":"")+(k?" _aa1_":"")),ref:function(b){return a.$2=b},children:[j.jsx(c("PolarisPhoto.react"),babelHelpers["extends"]({},d,{className:c("joinClasses")("_aa20",e),onClick:this.$7,onPhotoRendered:f,rich:g,src:h,srcSet:b})),this.$14(),this.$13()]})};return a}(j.Component);r.defaultProps={alwaysShowIndicator:!1};function s(a,b){return"usertag-"+(a&&a.user&&a.user.username)+"-"+b}function a(a){var b=d("react-compiler-runtime").c(6),e=c("useCurrentRoute")(),f=c("usePolarisLoggedOutContentWallEntryPointDialog")(),g=f[0];b[0]!==(e==null?void 0:e.url)||b[1]!==g?(f=function(a){var b;g&&g({nextUrl:(b=e==null?void 0:e.url)!=null?b:"/",source:a,variant:"feature_wall"})},b[0]=e==null?void 0:e.url,b[1]=g,b[2]=f):f=b[2];f=f;var h;b[3]!==f||b[4]!==a?(h=j.jsx(r,babelHelpers["extends"]({},a,{onLoggedOutIntentClickLoginModal:f})),b[3]=f,b[4]=a,b[5]=h):h=b[5];return h}g.EDGE_THRESHOLD=k;g.TAG_ORIENTATION_CHANGE_POINT=o;g.TAG_POINTER_HEIGHT=p;g.getHorizontalOffset=q;g.PhotoWithIndicator=a}),98);
__d("PolarisPoliticalContextButton.react",["IGDSBox.react","PolarisIGCoreText","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e=a.className,f=a.text;a=a.textColor;c("vulture")("psxDgyITTTpw3HS2mQedS_1eXPw=");var g;b[0]!==f||b[1]!==a?(g=i.jsx(c("IGDSBox.react"),{position:"relative",children:i.jsx(c("PolarisIGCoreText").BodyEmphasized,{color:a,display:"inline",zeroMargin:!0,children:f})}),b[0]=f,b[1]=a,b[2]=g):g=b[2];b[3]!==e||b[4]!==g?(f=i.jsx("div",{className:e,children:g}),b[3]=e,b[4]=g,b[5]=f):f=b[5];return f}g["default"]=a}),98);
__d("useCurrentRouteBuilder",["CometRouteParams","ConstUriUtils","jsRouteBuilder","react","useCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a){var b,e=d("CometRouteParams").useRouteParams();b=(b=c("useCurrentRoute")())!=null?b:{};var f=b.routePath;b=b.url;b=b!=null?(b=d("ConstUriUtils").getUri(b))==null?void 0:b.getPath():null;var g=(a==null?void 0:a.useUrlPath)===!0?b:f;return i(function(){return g==null?null:c("jsRouteBuilder")(g,Object.freeze({}),new Set(),e)},[g,e])}g["default"]=a}),98);
__d("XPolarisBoostControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/b/{media_id}/",Object.freeze({context:"boost_unknown"}),void 0);b=a;g["default"]=b}),98);
__d("usePolarisBoostOpenBoostFlow",["CometRelay","JSResourceForInteraction","PolarisBoostCanSkipPro2Pro","PolarisBoostQPLUtils","PolarisBoostUtils.react","PolarisNavigationUtils","PolarisPromotedPostsLogger","XPolarisBoostControllerRouteBuilder","browserHistory_DO_NOT_USE","react","react-compiler-runtime","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;var i=c("JSResourceForInteraction")("IGDSPro2ProDialog.react").__setRef("usePolarisBoostOpenBoostFlow");function a(){var a=d("react-compiler-runtime").c(3),b=c("useIGDSLazyDialog")(i),e=b[0],f=d("CometRelay").useRelayEnvironment();a[0]!==f||a[1]!==e?(b=function(a){var b=a.abTestingMediaIds,g=a.analyticsContext,h=a.audioSpec,i=a.boostedStatus,j=a.defaultsOverride,k=a.flowID,l=a.mediaID,m=a.overrideReturnPath,n=a.returnPathOverride;a=a.shouldLogTapEntrypoint;m=m===void 0?!1:m;a=a===void 0?!0:a;d("PolarisBoostQPLUtils").markBoostEnterFlowStart(k);var o=d("PolarisPromotedPostsLogger").getPolarisBoostEntryPointType(g),p=new(d("PolarisPromotedPostsLogger").PolarisPromotedPostsLogger)({entry_point:o,m_pk:l,promote_flow_type:d("PolarisBoostUtils.react").getIGBoostFlowTypeFromBoostedStatus(i),waterfall_id:k});a&&p.logTapEntryPoint();i=m?n:d("browserHistory_DO_NOT_USE").getURL(d("browserHistory_DO_NOT_USE").browserHistory);var q=c("XPolarisBoostControllerRouteBuilder").buildURL({ab_test_media_ids:b,audio_asset_id:(a=h==null?void 0:h.audio_asset_id)!=null?a:void 0,audio_asset_start_time_in_ms:(m=h==null?void 0:h.audio_asset_start_time_in_ms)!=null?m:void 0,audio_cluster_id:(n=h==null?void 0:h.audio_cluster_id)!=null?n:void 0,context:g,defaults_override:j,flow_id:k,media_id:l,return_path:i}).toString(),r=function(){return e({boostUri:q,entryPoint:o,flowID:k})};d("PolarisBoostCanSkipPro2Pro").getCanSkipPro2Pro(f,o,p).then(function(a){a?(p.logIpiCacheEvent("pro_identity_boost_onboarding_complete"),d("PolarisNavigationUtils").openURL(q)):r()})["catch"](r)},a[0]=f,a[1]=e,a[2]=b):b=a[2];return b}g["default"]=a}),98);
__d("PolarisPostBoostButton.react",["IGDSBox.react","IGDSButton.react","IGDSText.react","JSResourceForInteraction","PolarisBoostOkDialog.react","PolarisBoostUtils.react","PolarisBoostedStatusEnum","PolarisIGCorePressable.react","PolarisIGTheme.react","PolarisLoadingModal.react","PolarisPostBoostButtonType","PolarisPromotedPostsLogger","PolarisUA","gkx","isStringNotNullAndNotWhitespaceOnly","qex","react","stylex","useCurrentRouteBuilder","useIGDSLazyDialog","usePolarisBoostOpenBoostFlow","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useMemo,l=b.useState,m=c("JSResourceForInteraction")("PolarisBoostNotDeliveringDialog.react").__setRef("PolarisPostBoostButton.react"),n=c("JSResourceForInteraction")("PolarisBoostMusicErrorDialog.react").__setRef("PolarisPostBoostButton.react"),o=c("JSResourceForInteraction")("PolarisBoostMediaIneligibleErrorDialog.react").__setRef("PolarisPostBoostButton.react"),p={grayedOutButton:{opacity:"xbyyjgo",$$css:!0},overlayBoostButton:{backgroundColor:"xz3rzyy",paddingTop:"x1y1aw1k",paddingEnd:"x1pi30zi",paddingBottom:"xwib8y2",paddingStart:"x1swvt13",position:"x10l6tqk",":hover_backgroundColor":"xcls6s",$$css:!0},selfProfileGridOverlayBoostButton:{borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",bottom:"xy58vm5",$$css:!0},storyViewerOverlayBoostButton:{alignItems:"x6s0dn4",borderTopStartRadius:"x11jm1t7",borderTopEndRadius:"xe0know",borderBottomEndRadius:"x3f462a",borderBottomStartRadius:"xhtl50t",bottom:"x874rk5",display:"x78zum5",height:"xn3w4p2",justifyContent:"xl56j7k",width:"x1tucx9d",$$css:!0}};function a(a){var b=a.analyticsContext,e=a.boostedStatus,f=a.boostUnavailableIdentifier,g=a.boostUnavailableReason,i=a.buttonType;i=i===void 0?c("PolarisPostBoostButtonType").PRIMARY:i;var q=a.fullWidth;q=q===void 0?!1:q;var r=a.isLink;r=r===void 0?!1:r;var s=a.isOrganicMediaArchived;s=s===void 0?!1:s;var t=a.mediaId,u=a.productType,v=a.refetch;a=l(!1);var w=a[0],x=a[1],y=c("useCurrentRouteBuilder")({useUrlPath:!0});a=c("useIGDSLazyDialog")(m,function(){return j.jsx(c("PolarisLoadingModal.react"),{})});var z=a[0];a=c("useIGDSLazyDialog")(n,function(){return j.jsx(c("PolarisLoadingModal.react"),{})});var A=a[0];a=c("useIGDSLazyDialog")(o,function(){return j.jsx(c("PolarisLoadingModal.react"),{})});var B=a[0];a=d("PolarisBoostUtils.react").getIsBoostButtonDisabledFromBoostedStatus(e);var C=c("isStringNotNullAndNotWhitespaceOnly")(g),D=["carousel_or_image_has_non_copyright_music_eligible_by_removing","carousel_or_image_has_copyright_music_eligible_by_removing"],E=D.includes(f),F=f==="clips_has_music_with_copyright",G=function(){return F&&c("gkx")("1211")===!0},H=function(){return F&&d("PolarisUA").isMobile()&&c("qex")._("1556")===!0},I=f==="low_resolution_video_eligible_for_sr",J=d("PolarisPromotedPostsLogger").getPolarisBoostEntryPointType(b),K=c("uuidv4")(),L=k(function(){return new(d("PolarisPromotedPostsLogger").PolarisPromotedPostsLogger)({entry_point:J,m_pk:t,promote_flow_type:d("PolarisBoostUtils.react").getIGBoostFlowTypeFromBoostedStatus(e),waterfall_id:K})},[e,J,t,K]),M=e===c("PolarisBoostedStatusEnum").FINISHED,N=function(){A({analyticsContext:b,flowID:K,isBoostAgain:M,logger:L,mediaId:t,musicFlow:d("PolarisBoostUtils.react").BoostMusicErrorFlow.REMOVE_MUSIC,openBoostFlow:S})},O=function(){A({analyticsContext:b,flowID:K,isBoostAgain:M,logger:L,mediaId:t,musicFlow:d("PolarisBoostUtils.react").BoostMusicErrorFlow.SWAP_MUSIC_MSITE,openBoostFlow:S,returnPath:y==null?void 0:y.getPath()})},P=function(){A({analyticsContext:b,flowID:K,isBoostAgain:M,logger:L,mediaId:t,musicFlow:d("PolarisBoostUtils.react").BoostMusicErrorFlow.SWAP_MUSIC_DESKTOP,openBoostFlow:S})},Q=function(){B({analyticsContext:b,boostUnavailableReason:g,flowID:K,logger:L,productType:u})},R=c("usePolarisBoostOpenBoostFlow")(),S=function(a){if(e===c("PolarisBoostedStatusEnum").NOT_APPROVED||e===c("PolarisBoostedStatusEnum").SCHEDULED||e===c("PolarisBoostedStatusEnum").PAUSED)d("PolarisBoostUtils.react").handleAdToolsButtonClickWithLogging(K,b);else if(e===c("PolarisBoostedStatusEnum").NOT_DELIVERING&&c("gkx")("7608")===!0)z({analyticsContext:b,flowID:K,igID:t,logger:L,refetch:v});else{R({analyticsContext:b,audioSpec:(a=a)!=null?a:void 0,boostedStatus:e,flowID:K,mediaID:t})}},T=function(){if(C)if(E)N();else if(H())O();else if(G())P();else if(I)S();else{var a;c("qex")._("334")===!0?Q():x(!0);L.logEnterError((a=f)!=null?a:"",(a=g)!=null?a:"","no_permission")}else S()};D=C&&!E&&!F&&!I;var U=d("PolarisIGTheme.react").useTheme().getTheme()===d("PolarisIGTheme.react").IGTheme.Dark;s=d("PolarisBoostUtils.react").getBoostButtonCTAFromBoostedStatus(e,s,u);w=w&&g!=null&&j.jsx(c("PolarisBoostOkDialog.react"),{body:g,onPress:function(){x(!1)},title:d("PolarisBoostUtils.react").BOOST_UNAVAILABLE_TEXT});switch(i){case c("PolarisPostBoostButtonType").SELF_PROFILE_GRID_OVERLAY:case c("PolarisPostBoostButtonType").STORY_VIEWER_OVERLAY:return j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisIGCorePressable.react"),{disabled:a||D,onPress:function(a){T(),a.stopPropagation(),a.preventDefault()},children:j.jsx(c("IGDSBox.react"),{alignItems:"center",justifyContent:"center",width:"100%",children:j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props([p.overlayBoostButton,i===c("PolarisPostBoostButtonType").SELF_PROFILE_GRID_OVERLAY&&p.selfProfileGridOverlayBoostButton,i===c("PolarisPostBoostButtonType").STORY_VIEWER_OVERLAY&&p.storyViewerOverlayBoostButton,D&&p.grayedOutButton]),{children:j.jsx(c("IGDSText.react"),{color:"webAlwaysBlack",size:"label",textAlign:"center",weight:"semibold",zeroMargin:!0,children:s})}))})}),w]});case c("PolarisPostBoostButtonType").PRIMARY:return j.jsxs(c("IGDSBox.react"),{alignItems:"end",direction:"column",width:q?"100%":void 0,children:[j.jsx(c("IGDSButton.react"),{"data-testid":void 0,fullWidth:q,isDisabled:a,label:s,onClick:T,variant:d("PolarisBoostUtils.react").getBoostButtonVariantFromBoostedStatus(e,r,U),xstyle:D?p.grayedOutButton:void 0}),w]})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostFastCommentPrimitive.react",["IGDSBox.react","IGDSVerifiedBadge.react","PolarisIGCoreText","PolarisIsLoggedIn","PolarisTruncatedText.react","PolarisUserLinkWithHoverCard.react","react","react-compiler-runtime","usePolarisAnalyticsContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(13),e=a.isAuthorUnpublished,f=a.isAuthorVerified,g=a.isCaption,h=a.onMoreClick,j=a.text,k=a.userId;a=a.username;e=e===void 0?!1:e;f=f===void 0?!1:f;g=g===void 0?!1:g;var l=c("usePolarisAnalyticsContext")(),m;b[0]!==e||b[1]!==f||b[2]!==k||b[3]!==a?(m=e===!0?null:i.jsxs(i.Fragment,{children:[i.jsx(c("PolarisUserLinkWithHoverCard.react"),{color:"ig-primary-text",userId:k,username:a}),f&&i.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginStart:1,position:"relative",children:i.jsx(c("IGDSVerifiedBadge.react"),{size:"small"})}),i.jsx(c("PolarisIGCoreText"),{display:"inline",zeroMargin:!0,children:"\xa0"})]}),b[0]=e,b[1]=f,b[2]=k,b[3]=a,b[4]=m):m=b[4];e=m;b[5]!==l||b[6]!==g||b[7]!==h||b[8]!==j?(f=!d("PolarisIsLoggedIn").isLoggedIn()&&g===!1?i.jsx(c("PolarisTruncatedText.react"),{analyticsContext:l,isCaption:g,limit:40,value:j}):i.jsx(c("PolarisTruncatedText.react"),{analyticsContext:l,isCaption:g,onMoreClick:h,value:j}),b[5]=l,b[6]=g,b[7]=h,b[8]=j,b[9]=f):f=b[9];b[10]!==e||b[11]!==f?(k=i.jsxs(c("IGDSBox.react"),{"data-testid":void 0,display:"block",flex:"grow",position:"relative",children:[e,f]}),b[10]=e,b[11]=f,b[12]=k):k=b[12];return k}g["default"]=a}),98);
__d("PolarisPostFastCrawlerComment.react",["IGDSBox.react","IGDSVerifiedBadge.react","PolarisIGCoreText","PolarisLineClampText.react","PolarisUserLinkWithHoverCard.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.headlineTag,f=a.isAuthorUnpublished,g=a.isAuthorVerified,h=a.text,j=a.userId;a=a.username;e=e===void 0?"h1":e;f=f===void 0?!1:f;g=g===void 0?!1:g;var k;b[0]!==f||b[1]!==g||b[2]!==j||b[3]!==a?(k=f===!0?null:i.jsxs(i.Fragment,{children:[i.jsx(c("PolarisUserLinkWithHoverCard.react"),{color:"ig-primary-text",userId:j,username:a}),g&&i.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginStart:1,position:"relative",children:i.jsx(c("IGDSVerifiedBadge.react"),{size:"small"})}),i.jsx(c("PolarisIGCoreText"),{display:"inline",zeroMargin:!0,children:"\xa0"})]}),b[0]=f,b[1]=g,b[2]=j,b[3]=a,b[4]=k):k=b[4];f=k;b[5]!==f||b[6]!==e||b[7]!==h?(g=i.jsx(c("IGDSBox.react"),{"data-testid":void 0,display:"block",flex:"grow",position:"relative",children:i.jsx(c("PolarisLineClampText.react"),{headlineTag:e,prependElement:f,value:h})}),b[5]=f,b[6]=e,b[7]=h,b[8]=g):g=b[8];return g}g["default"]=a}),98);
__d("PolarisPostFooterCTA.react",["cx","IGDSBox.react","IGDSChevronIcon.react","PolarisAdsGatingHelpers","PolarisExternalLink.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisIGTheme.react","PolarisPostImpressionTrackingNode.react","PolarisPostUtils","PolarisUA","isStringNullOrEmpty","react","react-compiler-runtime","useMergeRefs","usePolarisOffsiteTrackingDataURLParams"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useRef;b=j.forwardRef(a);function a(a,b){var e=d("react-compiler-runtime").c(69),f=a.ctaAdditionalAnimation,g=a.ctaDominantColor,h=a["data-testid"],i=a.disableAnimation,l=a.externalURL,m=a.forceBottomBorder,n=a.fullWidth,o=a.height,p=a.icon,q=a.isActive,r=a.isForAd,s=a.isForPersistentCta,t=a.isForSidecar,u=a.leadGenFormID,v=a.onClick,w=a.secondaryText,x=a.showChevron,y=a.showRoundedBorder,z=a.text,A=a.textAlign;a=a.textThemedColor;f=f===void 0?d("PolarisPostUtils").PostFooterCTAAnimationStyle.NONE:f;x=x===void 0?!1:x;y=y===void 0?!1:y;A=A===void 0?"center":A;var B=d("PolarisIGTheme.react").useTheme(),C;e[0]!==g?(C=g!=null&&d("PolarisAdsGatingHelpers").allowWebAds(),e[0]=g,e[1]=C):C=e[1];C=C;var D;e[2]!==p?(D=p!=null?j.jsxs(j.Fragment,{children:[j.jsx(c("IGDSBox.react"),{"data-testid":void 0,flex:"none",position:"relative",children:p}),j.jsx(c("IGDSBox.react"),{marginEnd:3,position:"relative"})]}):null,e[2]=p,e[3]=D):D=e[3];p=D;e[4]!==C||e[5]!==z?(D=C?j.jsx("span",babelHelpers["extends"]({className:"x9bdzbf"},{children:z})):j.jsx(j.Fragment,{children:z}),e[4]=C,e[5]=z,e[6]=D):D=e[6];z=D;D=C?"web-always-white":(D=a)!=null?D:"ig-primary-text";var E;e[7]!==D||e[8]!==x?(E=x?j.jsxs(j.Fragment,{children:[j.jsx(c("IGDSBox.react"),{flex:"grow",height:"100%",marginEnd:7,position:"relative",right:!0}),j.jsx(c("IGDSChevronIcon.react"),{alt:d("PolarisGenericStrings").RIGHT_CHEVRON,color:D,"data-testid":void 0,direction:"next",size:16})]}):null,e[7]=D,e[8]=x,e[9]=E):E=e[9];D=E;x=B.getTheme()===d("PolarisIGTheme.react").IGTheme.Dark?a==null?void 0:a.dark:a==null?void 0:a.light;if(x!=null){e[10]!==x?(E={color:x},e[10]=x,e[11]=E):E=e[11];e[12]!==E||e[13]!==z?(B=j.jsx("span",{style:E,children:z}),e[12]=E,e[13]=z,e[14]=B):B=e[14];z=B}a=null;if(!c("isStringNullOrEmpty")(w)){e[15]!==w||e[16]!==A?(x=j.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:j.jsx(c("PolarisIGCoreText").Body2,{color:"ig-secondary-text",textAlign:A,children:w})}),e[15]=w,e[16]=A,e[17]=x):x=e[17];a=x}E="_aarz"+(q&&!s?" _aar-":"")+(s?" _alv8":"")+(i?"":" _aar_")+(C?" _aceq":"");e[18]!==g||e[19]!==C?(B=C?{background:g}:null,e[18]=g,e[19]=C,e[20]=B):B=e[20];e[21]!==A||e[22]!==z?(w=j.jsx(c("PolarisIGCoreText"),{size:"body",textAlign:A,weight:"semibold",children:z}),e[21]=A,e[22]=z,e[23]=w):w=e[23];e[24]!==a||e[25]!==w?(x=j.jsxs(c("IGDSBox.react"),{flex:"shrink",position:"relative",children:[w,a]}),e[24]=a,e[25]=w,e[26]=x):x=e[26];e[27]!==D||e[28]!==p||e[29]!==x?(i=j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"start",position:"relative",width:"100%",children:[p,x,D]}),e[27]=D,e[28]=p,e[29]=x,e[30]=i):i=e[30];e[31]!==B||e[32]!==i||e[33]!==E?(g=j.jsx("div",{className:E,"data-testid":void 0,style:B,children:i}),e[31]=B,e[32]=i,e[33]=E,e[34]=g):g=e[34];A=g;z=c("usePolarisOffsiteTrackingDataURLParams")(l);if(l!=null){e[35]!==A||e[36]!==l||e[37]!==u||e[38]!==v||e[39]!==z?(a=j.jsx(c("PolarisExternalLink.react"),{className:"_ad63","data-testid":void 0,href:l,leadGenFormID:u,onClick:v,queryParams:z,children:A}),e[35]=A,e[36]=l,e[37]=u,e[38]=v,e[39]=z,e[40]=a):a=e[40];A=a}else if(v!=null){e[41]===Symbol["for"]("react.memo_cache_sentinel")?(w={__className:"_ad63"},e[41]=w):w=e[41];e[42]!==v?(D=function(){return v()},e[42]=v,e[43]=D):D=e[43];e[44]!==A||e[45]!==D?(p=j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,dangerouslySetClassName:w,onClick:D,children:A}),e[44]=A,e[45]=D,e[46]=p):p=e[46];A=p}x=t!==!0&&r!==!0;e[47]===Symbol["for"]("react.memo_cache_sentinel")?(B=d("PolarisUA").isDesktop(),e[47]=B):B=e[47];i=B;e[48]!==m?(E=(m===!0||d("PolarisUA").isMobile())&&!i,e[48]=m,e[49]=E):E=e[49];g=E;l=k(null);u=c("useMergeRefs")(b,l);z="_aart"+(q?" _aaru":"")+(s?" _alv9":"")+(t===!0?" _aarv":"")+(n===!0?" _aarw":"")+(n===!0&&m===!0?" _aarx":"")+(i&&!C?" _ai7q":"")+(y?" _alva":"")+(y&&!s?" _aikk":"")+(f===d("PolarisPostUtils").PostFooterCTAAnimationStyle.POP_IN?" _alwd":"")+(f===d("PolarisPostUtils").PostFooterCTAAnimationStyle.SLIDE_UP?" _al_y":"");e[50]!==o?(a=o!=null?{height:o+"px"}:{},e[50]=o,e[51]=a):a=e[51];w=q&&x?"_aary":"";e[52]!==w?(D=j.jsx("div",{className:w}),e[52]=w,e[53]=D):D=e[53];e[54]!==m||e[55]!==n||e[56]!==q||e[57]!==g?(p=g&&j.jsx("div",{className:"_aas0"+(m===!0&&n===!0?" _aas1":""),children:j.jsx("div",{className:q?"_aary":""})}),e[54]=m,e[55]=n,e[56]=q,e[57]=g,e[58]=p):p=e[58];e[59]!==A||e[60]!==h||e[61]!==u||e[62]!==z||e[63]!==a||e[64]!==D||e[65]!==p?(r=j.jsxs("div",{className:z,"data-testid":void 0,ref:u,style:a,children:[D,A,p]}),e[59]=A,e[60]=h,e[61]=u,e[62]=z,e[63]=a,e[64]=D,e[65]=p,e[66]=r):r=e[66];B=r;if(d("PolarisAdsGatingHelpers").enableFeedPostImpressionLogging()){e[67]!==B?(E=j.jsx(c("PolarisPostImpressionTrackingNode.react"),{childrenRef:l,componentType:"text",elementId:"ctaText",trackingNode:"CTA",children:B}),e[67]=B,e[68]=E):E=e[68];return E}return B}e=b;g["default"]=e}),98);
__d("PolarisPostHeader.react",["cx","fbt","IGDSBox.react","IGDSMiddleDot.react","IGDSText.react","IGDSTextVariants.react","IGDSVerifiedBadge.react","PolarisAppAttributionText.react","PolarisAudioAttributionText.react","PolarisAvatarWithStoriesContainer.react","PolarisClickEventLoggerProvider.react","PolarisClipsHelpers","PolarisCloseFriendsLabel.react","PolarisCoauthorCountWithSheet.react","PolarisEligibleForCommissionUnit.react","PolarisFeedPageConstants","PolarisFollowButtonContainer.react","PolarisHashtagLink.react","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisLinkBuilder","PolarisLocationLink.react","PolarisLoggedOutIntentDialog.entrypoint","PolarisPanavisionQEHelpers","PolarisPartnershipAdAvatar.react","PolarisPartnershipAdHeader.react","PolarisProfileClickEventLoggerProvider.react","PolarisReactRedux.react","PolarisSponsoredLabel.react","PolarisSponsoredPostContext.react","PolarisSponsorsUnit.react","PolarisTagAvatar.react","PolarisTimestamp.react","PolarisTrackingNodeProvider.react","PolarisTransparencyLabel.react","PolarisTransparencyUtils.react","PolarisUA","PolarisUserAvatar.react","PolarisUserAvatarWithStories.react","PolarisUserHoverCard.react","PolarisUserLink.react","URI","err","gkx","nullthrows","react","react-compiler-runtime","useIGDSEntryPointDialog","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePolarisMinimalContent","usePolarisPageID","usePolarisTrackingDataProfileURLParams"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=k||(k=d("react"));b=k;var m=b.useContext,n=b.useEffect,o=b.useState,p=i._(/*BTDS*/"__JHASH__OMxqSO8Gxcr__JHASH__");function q(a,b){a=a;var c=a==null?void 0:a.song_name,d=a==null?void 0:a.artist_name;b=(a==null?void 0:a.uses_original_audio)&&b===a.artist_name;return{audioArtist:d,audioName:c,isMediaOwnerOriginalSound:b}}function r(a){var b=d("react-compiler-runtime").c(16),e=a.owner;a=d("usePolarisTrackingDataProfileURLParams").usePolarisTrackingDataProfileURLParams(m(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext).canUserSeePersistentCta);var f=c("usePolarisPageID")(),g=d("usePolarisMinimalContent").usePolarisMinimalContentExtendedIntentUpsells(),h=d("usePolarisMinimalContent").usePolarisMinimalContent(),i=h||g;b[0]!==i||b[1]!==e.username||b[2]!==a?(h=i?void 0:new(j||(j=c("URI")))(d("PolarisLinkBuilder").buildUserLink(c("nullthrows")(e.username))).setQueryData(a).toString(),b[0]=i,b[1]=e.username,b[2]=a,b[3]=h):h=b[3];g=h;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[4]=a):a=b[4];h=c("useIGDSEntryPointDialog")(c("PolarisLoggedOutIntentDialog.entrypoint"),a);var k=h[0];b[5]!==i||b[6]!==k||b[7]!==e.username||b[8]!==f?(a=function(a){a.preventDefault(),f==="postPage"&&i&&d("PolarisUA").isMobile()&&k({source:"post_username_click",username:e.username})},b[5]=i,b[6]=k,b[7]=e.username,b[8]=f,b[9]=a):a=b[9];h=a;b[10]!==e.username?(a=c("nullthrows")(e.username),b[10]=e.username,b[11]=a):a=b[11];var n;b[12]!==h||b[13]!==a||b[14]!==g?(n=l.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,color:"ig-secondary-button",href:g,onClick:h,children:a}),b[12]=h,b[13]=a,b[14]=g,b[15]=n):n=b[15];return n}function s(a){var b=d("react-compiler-runtime").c(12),e=a.clipsAudioAttributionInfo,f=a.onDisabledClipsAudioAttributionClick;a=a.owner;e=e;var g;b[0]!==e||b[1]!==a.username?(g=q(e,a.username),b[0]=e,b[1]=a.username,b[2]=g):g=b[2];g=g;var h=g.audioArtist,i=g.audioName;g=g.isMediaOwnerOriginalSound;var j=e==null?void 0:e.audio_id;a=a.isPrivate===!0;var k=(e==null?void 0:e.should_mute_audio)===!0;e=e==null?void 0:e.should_mute_audio_reason;var m;b[3]!==h||b[4]!==j||b[5]!==i||b[6]!==g||b[7]!==k||b[8]!==a||b[9]!==e||b[10]!==f?(m=l.jsx(c("PolarisAudioAttributionText.react"),{audioArtist:h,audioID:j,audioName:i,isMediaOwnerOriginalSound:g,isMutedAudio:k,isOwnerPrivate:a,muteAudioReason:e,onDisabledClipsAudioAttributionClick:f}),b[3]=h,b[4]=j,b[5]=i,b[6]=g,b[7]=k,b[8]=a,b[9]=e,b[10]=f,b[11]=m):m=b[11];return m}function t(a){var b=d("react-compiler-runtime").c(6),e=a.clipsAttributionInfo;a=a.mediaID;e=e;var f=e==null?void 0:e.attribution_app_name;e=e==null?void 0:e.attribution_app_id;if(f!=null&&e!=null){var g;b[0]!==e?(g=e.toString(),b[0]=e,b[1]=g):g=b[1];b[2]!==f||b[3]!==a||b[4]!==g?(e=l.jsx(c("PolarisAppAttributionText.react"),{appId:g,appName:f,mediaId:a}),b[2]=f,b[3]=a,b[4]=g,b[5]=e):e=b[5];return e}return null}function u(a){var b=d("react-compiler-runtime").c(56),e=a.audioAttributionText,f=a.clipsAttributionInfo,g=a.clipsAudioAttributionInfo,h=a.followHashtagInfo,i=a.isSponsored,j=a.location,k=a.mediaId,m=a.owner,n=a.showEligibleForCommissions,o=a.showOrganicPPL,p=a.sponsoredLabel,r=a.sponsors;a=a.transparencyLabelOwner;var s=c("usePolarisIsOnAdsActivityPage")(),u;b[0]!==k||b[1]!==a?(u=a!=null&&d("PolarisTransparencyUtils.react").shouldShowTransparencyLabel(a)&&a.transparencyProductEnabled===!0&&l.jsx(c("PolarisTransparencyLabel.react"),{mediaId:k,screen:"feed",user:a}),b[0]=k,b[1]=a,b[2]=u):u=b[2];a=u;b[3]!==k||b[4]!==o||b[5]!==r?(u=o&&l.jsx(c("PolarisSponsorsUnit.react"),{loggingData:{mediaId:k},source:"feed_timeline",sponsors:r||[]}),b[3]=k,b[4]=o,b[5]=r,b[6]=u):u=b[6];o=u;b[7]!==h||b[8]!==m.username?(r=h&&l.jsx(c("PolarisUserLink.react"),{className:"_adkn",username:c("nullthrows")(m.username)}),b[7]=h,b[8]=m.username,b[9]=r):r=b[9];u=r;b[10]!==n?(h=n&&l.jsx(c("PolarisEligibleForCommissionUnit.react"),{}),b[10]=n,b[11]=h):h=b[11];r=h;b[12]!==j?(n=j&&l.jsx(c("PolarisIGCoreText").Body2,{color:"ig-secondary-text",display:"truncated",zeroMargin:!0,children:l.jsx(c("PolarisLocationLink.react"),{className:"_aaqk",location:c("nullthrows")(j)})}),b[12]=j,b[13]=n):n=b[13];h=n;var v;if(b[14]!==r||b[15]!==e||b[16]!==f||b[17]!==g||b[18]!==u||b[19]!==s||b[20]!==i||b[21]!==h||b[22]!==k||b[23]!==o||b[24]!==m.username||b[25]!==p||b[26]!==a){j=q(g,m.username);b[32]!==f||b[33]!==k?(n=l.jsx(t,{clipsAttributionInfo:f,mediaID:k}),b[32]=f,b[33]=k,b[34]=n):n=b[34];n=n;if(i===!0&&p==null&&!s)throw c("err")("Unexpected: a feed ad is being rendered without a sponsored label");v="_aaql";var w;b[35]===Symbol["for"]("react.memo_cache_sentinel")?(w={className:"x78zum5 xdt5ytf"},b[35]=w):w=b[35];var x;b[36]!==p?(x=p!=null&&l.jsx(c("PolarisSponsoredLabel.react"),{label:p}),b[36]=p,b[37]=x):x=b[37];b[38]!==r||b[39]!==u||b[40]!==o||b[41]!==x||b[42]!==a?(w=l.jsx(d("IGDSTextVariants.react").IGDSTextBody2,{zeroMargin:!0,children:l.jsxs("div",babelHelpers["extends"]({},w,{children:[a,o,x,r,u]}))}),b[38]=r,b[39]=u,b[40]=o,b[41]=x,b[42]=a,b[43]=w):w=b[43];b[44]===Symbol["for"]("react.memo_cache_sentinel")?(x={className:"x78zum5"},b[44]=x):x=b[44];j=d("PolarisClipsHelpers").hasAudioAttributionText(j)?e:l.jsx("div",{className:"_aaqm",children:h});b[14]=r;b[15]=e;b[16]=f;b[17]=g;b[18]=u;b[19]=s;b[20]=i;b[21]=h;b[22]=k;b[23]=o;b[24]=m.username;b[25]=p;b[26]=a;b[27]=n;b[28]=x;b[29]=j;b[30]=v;b[31]=w}else n=b[27],x=b[28],j=b[29],v=b[30],w=b[31];b[45]!==f?(r=f!=null&&l.jsx(c("IGDSMiddleDot.react"),{color:"primaryText"}),b[45]=f,b[46]=r):r=b[46];b[47]!==n||b[48]!==r||b[49]!==x||b[50]!==j?(e=l.jsxs("div",babelHelpers["extends"]({},x,{children:[j,r,n]})),b[47]=n,b[48]=r,b[49]=x,b[50]=j,b[51]=e):e=b[51];b[52]!==e||b[53]!==v||b[54]!==w?(g=l.jsxs("div",{className:v,children:[w,e]}),b[52]=e,b[53]=v,b[54]=w,b[55]=g):g=b[55];return g}function v(a){var b=d("react-compiler-runtime").c(44),e=a.analyticsContext,f=a.coauthorProducers,g=a.followHashtagInfo,h=a.headerAvatarSize,i=a.isPartnershipAd,j=a.isTagAvatarLink,k=a.onTagAvatarShowRing,m=a.owner;a=a.sponsors;var n;b[0]!==e?(n=function(){return e===d("PolarisFeedPageConstants").FEED_PAGE_ANALYTICS_CONTEXT?"reel_feed_timeline_item_header":"reel_feed_timeline"},b[0]=e,b[1]=n):n=b[1];n=n;if(g){var o=g.name;g=g.profile_pic_url;var p;b[2]!==j||b[3]!==o||b[4]!==g?(p=g!=null&&g.length>0&&l.jsx(c("PolarisTagAvatar.react"),{isLink:j,profilePictureUrl:g,tagName:o}),b[2]=j,b[3]=o,b[4]=g,b[5]=p):p=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(j=l.jsx("div",{className:"_aaqo",children:"#"}),b[6]=j):j=b[6];b[7]!==p?(g=l.jsxs(l.Fragment,{children:[p,j]}),b[7]=p,b[8]=g):g=b[8];b[9]!==o||b[10]!==k||b[11]!==g?(j=l.jsx(c("PolarisAvatarWithStoriesContainer.react"),{animateOnLoad:!0,entrypoint:"reel_feed_timeline",onShowRing:k,size:30,tagName:o,children:g}),b[9]=o,b[10]=k,b[11]=g,b[12]=j):j=b[12];return j}if(f==null?void 0:f.length){p=f[0];b[13]!==p.profilePictureUrl||b[14]!==p.username?(o=l.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:p.profilePictureUrl,size:24,username:p.username}),b[13]=p.profilePictureUrl,b[14]=p.username,b[15]=o):o=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(k={className:"x1qjc9v5 xvbhtw8 x14yjl9h xudhj91 x18nykt9 xww2gxu x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x78zum5 xdt5ytf x2lah0s xk390pu x1923su1 xdj266r x11i5rnm xat24cr x1mh8g0r x4p5aij x19um543 x1j85h84 x1m6msm x10l6tqk xfr5jun x11njtxf"},b[16]=k):k=b[16];b[17]!==m.profilePictureUrl||b[18]!==m.username?(g=l.jsx("div",babelHelpers["extends"]({},k,{children:l.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"row",justifyContent:"start",children:l.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:m.profilePictureUrl,size:24,username:m.username})})})),b[17]=m.profilePictureUrl,b[18]=m.username,b[19]=g):g=b[19];b[20]!==o||b[21]!==g?(j=l.jsxs(c("IGDSBox.react"),{alignItems:"end",height:32,position:"relative",width:32,children:[o,g]}),b[20]=o,b[21]=g,b[22]=j):j=b[22];return j}if(c("gkx")("5712")&&i&&(a==null?void 0:a.length)===1){f=m.fullName||"";p=m.isUnpublished||!1;k=m.profilePictureUrl||"";o=m.username||"";b[23]!==m.id||b[24]!==f||b[25]!==p||b[26]!==k||b[27]!==o?(g={full_name:f,id:m.id,is_unpublished:p,profile_pic_url:k,username:o},b[23]=m.id,b[24]=f,b[25]=p,b[26]=k,b[27]=o,b[28]=g):g=b[28];j=g;i=a[0];b[29]!==j||b[30]!==i?(f=l.jsx(c("PolarisPartnershipAdAvatar.react"),{firstIdentity:j,secondIdentity:i}),b[29]=j,b[30]=i,b[31]=f):f=b[31];return f}p=!m.isUnpublished;k=m.id;g=(o=m.username)!=null?o:"";a=!m.isUnpublished;j=m.profilePictureUrl;i=n();b[32]!==h||b[33]!==m.id||b[34]!==m.profilePictureUrl||b[35]!==m.username||b[36]!==a||b[37]!==i?(f=l.jsx(c("PolarisUserAvatarWithStories.react"),{isLink:a,profilePictureUrl:j,showRingWhenSeen:!1,size:h,storyEntrypoint:i,userId:m.id,username:m.username}),b[32]=h,b[33]=m.id,b[34]=m.profilePictureUrl,b[35]=m.username,b[36]=a,b[37]=i,b[38]=f):f=b[38];b[39]!==m.id||b[40]!==p||b[41]!==g||b[42]!==f?(o=l.jsx(c("PolarisUserHoverCard.react"),{display:"block",isUserAvailable:p,userId:k,username:g,children:f}),b[39]=m.id,b[40]=p,b[41]=g,b[42]=f,b[43]=o):o=b[43];return o}function w(a){var b=d("react-compiler-runtime").c(63),e=a.adTitle,f=a.analyticsContext,g=a.coauthorProducers,h=a.followHashtagInfo,i=a.mediaId,j=a.owner,k=a.postHeaderMode,m=a.showVerifiedBadge;a=a.sponsors;var o=d("PolarisReactRedux.react").useDispatch(),q,s;b[0]!==g||b[1]!==o?(q=function(){var a;a=[].concat((a=g)!=null?a:[]);o({type:"PROFILE_PAGE_USERS_LOADED",users:a})},s=[o,g],b[0]=g,b[1]=o,b[2]=q,b[3]=s):(q=b[2],s=b[3]);n(q,s);if(h){b[4]!==h.name?(q=l.jsx(d("IGDSTextVariants.react").IGDSTextBody,{zeroMargin:!0,children:l.jsx(c("PolarisHashtagLink.react"),{className:"_aaqr",tag:h.name})}),b[4]=h.name,b[5]=q):q=b[5];return q}if(c("gkx")("5712")&&k.PartnershipAd){if((a==null?void 0:a.length)!==1)return null;s=j.fullName||"";h=j.isUnpublished||!1;q=j.profilePictureUrl||"";var t=j.username||"",u;b[6]!==j.id||b[7]!==s||b[8]!==h||b[9]!==q||b[10]!==t?(u={full_name:s,id:j.id,is_unpublished:h,profile_pic_url:q,username:t},b[6]=j.id,b[7]=s,b[8]=h,b[9]=q,b[10]=t,b[11]=u):u=b[11];s=u;h=a[0];b[12]!==s||b[13]!==h?(q=l.jsx(c("PolarisPartnershipAdHeader.react"),{firstIdentity:s,secondIdentity:h}),b[12]=s,b[13]=h,b[14]=q):q=b[14];return q}if(j.isUnpublished===!0){if(e!=null&&e.trim().length!==0){b[15]!==e?(t=l.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"secondaryText",zeroMargin:!0,children:l.jsx("span",{className:"_aaqs",children:e})}),b[15]=e,b[16]=t):t=b[16];return t}u=j.fullName!=null&&j.fullName!==""?j.fullName:j.username;b[17]!==u?(a=l.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"secondaryText",zeroMargin:!0,children:l.jsx("span",{className:"_aaqs",children:u})}),b[17]=u,b[18]=a):a=b[18];return a}if(k.DisplayFBPage===!0&&(e!=null&&e.trim().length!==0)){b[19]!==e?(s=l.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{color:"secondaryText",zeroMargin:!0,children:l.jsx("span",{className:"_aaqs",children:e})}),b[19]=e,b[20]=s):s=b[20];return s}if(g==null?void 0:g.length){if(b[21]!==g){q=(h=g)!=null?h:[];b[21]=g;b[22]=q}else q=b[22];b[23]!==q?(t=q.map(x),b[23]=q,b[24]=t):t=b[24];u=t;k=(a=j.fullName)!=null?a:"";s=(e=j.isVerified)!=null?e:!1;q=(h=j.profilePictureUrl)!=null?h:"";a=(t=j.username)!=null?t:"";b[25]!==j.id||b[26]!==k||b[27]!==s||b[28]!==q||b[29]!==a?(e={user:{fullName:k,id:j.id,isVerified:s,profilePictureUrl:q,username:a}},b[25]=j.id,b[26]=k,b[27]=s,b[28]=q,b[29]=a,b[30]=e):e=b[30];h=e;t=g[0];k=!j.isUnpublished;q=(s=j.username)!=null?s:"";b[31]!==j?(a=l.jsx(r,{owner:j}),b[31]=j,b[32]=a):a=b[32];b[33]!==j.id||b[34]!==k||b[35]!==q||b[36]!==a?(e=l.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"row",display:"flex",children:l.jsx(c("PolarisUserHoverCard.react"),{display:"inline",isUserAvailable:k,userId:j.id,username:q,children:a})}),b[33]=j.id,b[34]=k,b[35]=q,b[36]=a,b[37]=e):e=b[37];b[38]===Symbol["for"]("react.memo_cache_sentinel")?(s=l.jsx("span",{className:"_aaqv"}),b[38]=s):s=b[38];b[39]===Symbol["for"]("react.memo_cache_sentinel")?(k=l.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"row",display:"flex",children:l.jsxs(d("IGDSTextVariants.react").IGDSTextBody,{children:[s,p,l.jsx("span",{className:"_aaqv"})]})}),b[39]=k):k=b[39];if(b[40]!==f||b[41]!==g.length||b[42]!==t||b[43]!==u||b[44]!==i||b[45]!==h){a=g.length>1?l.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"row",display:"flex",children:l.jsx(d("IGDSTextVariants.react").IGDSTextBody,{children:l.jsx(c("PolarisCoauthorCountWithSheet.react"),{analyticsContext:f,coauthors:u,mediaId:i,mediaOwner:h})})}):l.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"row",display:"flex",children:l.jsx(c("PolarisUserHoverCard.react"),{display:"inline",isUserAvailable:!t.isUnpublished,userId:t.id,username:(q=t.username)!=null?q:"",children:l.jsx(r,{owner:t})})});b[40]=f;b[41]=g.length;b[42]=t;b[43]=u;b[44]=i;b[45]=h;b[46]=a}else a=b[46];b[47]!==e||b[48]!==a?(s=l.jsx("div",{className:"_aaqt _aaqu",children:l.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{textAlign:"start",zeroMargin:!0,children:l.jsxs(c("IGDSBox.react"),{alignItems:"start",direction:"row",display:"flex",children:[e,k,a]})})}),b[47]=e,b[48]=a,b[49]=s):s=b[49];return s}q=!j.isUnpublished;t=(f=j.username)!=null?f:"";b[50]!==j?(u=l.jsx(r,{owner:j}),b[50]=j,b[51]=u):u=b[51];b[52]!==j.id||b[53]!==q||b[54]!==t||b[55]!==u?(i=l.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{zeroMargin:!0,children:l.jsx(c("PolarisUserHoverCard.react"),{display:"inline",isUserAvailable:q,userId:j.id,username:t,children:u})}),b[52]=j.id,b[53]=q,b[54]=t,b[55]=u,b[56]=i):i=b[56];b[57]!==j.isVerified||b[58]!==m?(h=m===!0&&j.isVerified===!0&&l.jsx(c("IGDSBox.react"),{marginStart:1,position:"relative",children:l.jsx(c("IGDSVerifiedBadge.react"),{size:"small"})}),b[57]=j.isVerified,b[58]=m,b[59]=h):h=b[59];b[60]!==i||b[61]!==h?(k=l.jsx("div",{className:"_aaqt",children:l.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",position:"relative",children:[i,h]})}),b[60]=i,b[61]=h,b[62]=k):k=b[62];return k}function x(a){var b;return{user:{fullName:(b=a.fullName)!=null?b:"",id:a.id,isVerified:(b=a.isVerified)!=null?b:!1,profilePictureUrl:(b=a.profilePictureUrl)!=null?b:"",username:(b=a.username)!=null?b:""}}}function a(a){var b=d("react-compiler-runtime").c(44),e=a.adTitle,f=a.analyticsContext,g=a.clipsAttributionInfo,h=a.clipsAudioAttributionInfo,i=a.coauthorProducers,j=a.displayFBPageName,k=a.followHashtagInfo,n=a.headerAvatarSize,p=a.inModal,q=a.isAffiliate,r=a.isPaidPartnership,t=a.isSharedToCloseFriends,x=a.isSponsored,z=a.location,A=a.mediaId,B=a.onDisabledClipsAudioAttributionClick,C=a.owner,D=a.postedAt,E=a.reducedAvatarMargin,F=a.shouldShowFollowButton,G=a.showVerifiedBadge,H=a.sidebarVariantOptionsButton,I=a.sponsoredLabel,J=a.sponsors,K=a.transparencyLabelOwner;a=o(!0);var L=a[0],M=a[1],N=!k&&r&&I==null,O=J!=null&&J.length>0&&I!=null,P=!k&&!r&&q;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){M(!1)},b[0]=a):a=b[0];var Q=a;b[1]!==h||b[2]!==B||b[3]!==C?(r=l.jsx(s,{clipsAudioAttributionInfo:h,onDisabledClipsAudioAttributionClick:B,owner:C}),b[1]=h,b[2]=B,b[3]=C,b[4]=r):r=b[4];var R=r;q=c("usePolarisIsOnFeedPage")();a=c("usePolarisIsOnAdsActivityPage")();b[5]!==p||b[6]!==a||b[7]!==q?(B=(q||a)&&p!==!0&&d("PolarisUA").isDesktop(),b[5]=p,b[6]=a,b[7]=q,b[8]=B):B=b[8];var S=B,T=S;r=m(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext);p=r.onProfileClick;b[9]!==j||b[10]!==O?(a={DisplayFBPage:j,PartnershipAd:O},b[9]=j,b[10]=O,b[11]=a):a=b[11];var U=a;b[12]!==e||b[13]!==f||b[14]!==R||b[15]!==g||b[16]!==h||b[17]!==i||b[18]!==T||b[19]!==k||b[20]!==n||b[21]!==S||b[22]!==O||b[23]!==t||b[24]!==x||b[25]!==L||b[26]!==z||b[27]!==A||b[28]!==C||b[29]!==U||b[30]!==D||b[31]!==E||b[32]!==F||b[33]!==P||b[34]!==N||b[35]!==G||b[36]!==H||b[37]!==I||b[38]!==J||b[39]!==K?(q=l.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:230,children:function(a){return l.jsxs("header",{className:"_aaqw"+(S?" _aaqx":"")+(T?" _aggb":"")+(d("PolarisPanavisionQEHelpers").hasDenserMobileWebFeed()?" _ap5a":""),"data-testid":void 0,ref:a,children:[l.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:69,children:function(a){return l.jsx("div",{ref:a,children:l.jsx(v,{analyticsContext:f,coauthorProducers:i,followHashtagInfo:k,headerAvatarSize:n,isPartnershipAd:O,isTagAvatarLink:L,onTagAvatarShowRing:Q,owner:C,sponsors:J})})}}),l.jsxs("div",{className:"_aaqy"+(H&&!S?" _aaqz":"")+(H&&S?" _aaq-":"")+(E===!0?" _aaq_":"")+(d("PolarisPanavisionQEHelpers").hasDenserMobileWebFeed()?" _ap5c":""),children:[l.jsxs("div",{className:"_aar0"+(F?" _ad95":"")+(H?" _aar1":""),children:[l.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:10,children:function(a){return l.jsx("div",babelHelpers["extends"]({className:"x78zum5"},{ref:a,children:l.jsx(w,{adTitle:e,analyticsContext:f,coauthorProducers:i,followHashtagInfo:k,mediaId:A,owner:C,postHeaderMode:U,showVerifiedBadge:G,sponsors:J})}))}}),!x&&D!=null&&T&&l.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",position:"relative",children:l.jsx("div",{className:"_ajqd",children:l.jsxs(c("IGDSText.react"),{color:"secondaryText",size:"body",zeroMargin:!0,children:[l.jsx(c("IGDSMiddleDot.react"),{color:"secondaryText"}),l.jsx(c("PolarisTimestamp.react"),{isLong:!1,value:D})]})})}),F&&!t&&l.jsxs("div",{className:"_aar2",children:[l.jsx("div",{className:"_aar3",children:l.jsx(c("IGDSMiddleDot.react"),{color:T?"secondaryText":void 0})}),l.jsx(c("PolarisFollowButtonContainer.react"),{analyticsContext:f,borderless:!0,"data-testid":void 0,isInline:!0,userId:C.id,username:(a=C.username)!=null?a:""})]})]}),l.jsx(u,{audioAttributionText:R,clipsAttributionInfo:g,clipsAudioAttributionInfo:h,followHashtagInfo:k,isSponsored:x,location:z,mediaId:A,owner:C,showEligibleForCommissions:P,showOrganicPPL:N,sponsoredLabel:I,sponsors:J,transparencyLabelOwner:K})]}),t&&l.jsx(c("PolarisCloseFriendsLabel.react"),{onClick:y})]})}}),b[12]=e,b[13]=f,b[14]=R,b[15]=g,b[16]=h,b[17]=i,b[18]=T,b[19]=k,b[20]=n,b[21]=S,b[22]=O,b[23]=t,b[24]=x,b[25]=L,b[26]=z,b[27]=A,b[28]=C,b[29]=U,b[30]=D,b[31]=E,b[32]=F,b[33]=P,b[34]=N,b[35]=G,b[36]=H,b[37]=I,b[38]=J,b[39]=K,b[40]=q):q=b[40];b[41]!==p||b[42]!==q?(B=l.jsx(c("PolarisClickEventLoggerProvider.react"),{children:l.jsx(c("PolarisProfileClickEventLoggerProvider.react"),{onProfileClick:p,children:q})}),b[41]=p,b[42]=q,b[43]=B):B=b[43];return B}function y(){}g["default"]=a}),226);
__d("PolarisPostMediaOverlayInfoFooterCTA.react",["fbt","CometPlaceholder.react","IGDSInfoPanoOutlineIcon.react","IGDSMisinformationPanoOutline24Icon.react","JSResourceForInteraction","PolarisAssetManagerGlyphMapping","PolarisIGCoreIcon.react","PolarisInformTreatmentBanner.react","PolarisInformTreatmentDialogRootEntrypoint.entrypoint","PolarisInformTreatmentSensitivityType","PolarisInstagramMediaOverlayFalcoEvent","PolarisMediaOverlayInfoTypes","PolarisMisinformationConstants","PolarisPostFooterCTA.react","gkx","justknobx","lazyLoadComponent","react","react-compiler-runtime","useIGDSEntryPointDialog","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect;b.useMemo;var l=b.useRef,m=b.useState,n=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisPostMediaOverlayInfoFooterCTA.react")),o=c("JSResourceForInteraction")("PolarisInformTreatmentSensitivityDetailsDialog.react").__setRef("PolarisPostMediaOverlayInfoFooterCTA.react");function p(a,b){var c=a.analyticsContext,e=a.bannerInfo,f=a.entityID,g=e.bannerButton,h=e.overlayLayout,i=e.overlayType;d("PolarisInstagramMediaOverlayFalcoEvent").PolarisInstagramMediaOverlayFalcoEvent.log(function(){return d("PolarisInstagramMediaOverlayFalcoEvent").PolarisInstagramMediaOverlayFalcoEvent.buildPayloadForLog({button:g,containerModule:d("PolarisInstagramMediaOverlayFalcoEvent").PolarisInstagramMediaOverlayFalcoEvent.getLoggableContainerModuleFromAnalyticsContext(c),entityID:f,event:b,overlayLayout:h,overlayType:i})})}function q(a){var b=a.entityID,c=a.onLoggedImpression;p(a,d("PolarisInstagramMediaOverlayFalcoEvent").IG_MEDIA_OVERLAY_FALCO_CLIENT_EVENTS.IMPRESSION);c!=null&&c(b)}function r(a){p(a,d("PolarisInstagramMediaOverlayFalcoEvent").IG_MEDIA_OVERLAY_FALCO_CLIENT_EVENTS.ACTION)}function s(a,b){r(a),b()}function t(a){a=a.bannerInfo;var b=a.bannerButton,e=a.iconAltText;a=a.iconGlyph;var f=b.action_url;b=b.text_color;e=e!=null?h._(/*BTDS*/"__JHASH__tZoHuCBQNgF__JHASH__",[h._param("text",e)]):d("PolarisMisinformationConstants").POST_FOOTER_CTA_ALT_TEXT;if(a===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_ICON_GLYPHS.INFO)return f==="com.instagram.misinformation.fact_check_sheet.action"&&c("justknobx")._("2450")?j.jsx(c("IGDSMisinformationPanoOutline24Icon.react"),{alt:e,color:b!=null?b:"ig-primary-icon",size:24}):j.jsx(c("IGDSInfoPanoOutlineIcon.react"),{alt:e,color:b!=null?b:"ig-primary-icon",size:16});else if(a===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_ICON_GLYPHS.WARNING)return j.jsx(c("PolarisIGCoreIcon.react"),{alt:e,icon:d("PolarisAssetManagerGlyphMapping").ICONS.WARNING_OUTLINE_16_RED5});return null}e=j.forwardRef(a);function a(a,b){var e=d("react-compiler-runtime").c(47),f;e[0]!==a?(f=babelHelpers["extends"]({},a),e[0]=a,e[1]=f):f=e[1];a=m(!1);var g=a[0],h=a[1];a=m(0);var i=a[0],l=a[1];a=f;var p=a.bannerInfo,r=a["data-testid"],w=a.disableImpressionLogging,x=a.entityID,y=a.forceBottomBorder,z=a.fullWidth;a=a.isForSidecar;var A=p.animationInfo,B=p.bannerButton;p=p.text;var C=A.canAnimateSlideIn,D=A.isHidden,E=B.action,F=B.action_url;A=B.has_chevron;var G=B.is_text_centered,H=B.secondary_text;B=B.text_color;var I=E===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_ACTIONS.OPEN_EXTERNAL_URL?F:void 0,J=v(f),K=J!==x,L;e[2]!==w||e[3]!==g||e[4]!==D||e[5]!==K||e[6]!==f?(J=function(){(K||g===!1)&&w!==!0&&D!==!0?(q(f),h(!0)):K&&h(!1)},L=[w,D,K,g,f,h],e[2]=w,e[3]=g,e[4]=D,e[5]=K,e[6]=f,e[7]=J,e[8]=L):(J=e[7],L=e[8]);k(J,L);e[9]!==E||e[10]!==i||e[11]!==f?(J=E!==d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_ACTIONS.NO_OP?function(){return s(f,function(){return l(i+1)})}:void 0,e[9]=E,e[10]=i,e[11]=f,e[12]=J):J=e[12];var M=J;e[13]===Symbol["for"]("react.memo_cache_sentinel")?(L=function(){l(0)},e[13]=L):L=e[13];J=L;e[14]!==x?(L={media_id:x},e[14]=x,e[15]=L):L=e[15];L=c("useIGDSEntryPointDialog")(c("PolarisInformTreatmentDialogRootEntrypoint.entrypoint"),L);var N=L[0];L=c("useIGDSLazyDialog")(o);var O=L[0];e[16]!==E||e[17]!==F||e[18]!==M||e[19]!==f||e[20]!==N||e[21]!==O?(L=function(){if(E!==d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_ACTIONS.NO_OP){s(f,u);if(F!=null)bb38:switch(F){case"com.instagram.misinformation.fact_check_sheet.action":N({});break bb38;case"com.bloks.www.instagram.igwb.yci.sensitive_resource_bottomsheet":case"com.instagram.sensitivity.see_why_sheets.sensitivity_sheet_action":O({sensitivityType:d("PolarisInformTreatmentSensitivityType").SensitivityType.SENSITIVE});break bb38;case"com.instagram.sensitivity.see_why_sheets.violence_sheet_action":O({sensitivityType:d("PolarisInformTreatmentSensitivityType").SensitivityType.VIOLENCE});break bb38;default:M&&M()}}},e[16]=E,e[17]=F,e[18]=M,e[19]=f,e[20]=N,e[21]=O,e[22]=L):L=e[22];L=L;var P=f.analyticsContext||"",Q;e[23]!==x||e[24]!==P?(Q={media_id:x,module:P},e[23]=x,e[24]=P,e[25]=Q):Q=e[25];x=Q;P=x;if(e[26]!==E||e[27]!==F||e[28]!==i||e[29]!==P||e[30]!==C||e[31]!==r||e[32]!==L||e[33]!==I||e[34]!==y||e[35]!==z||e[36]!==A||e[37]!==a||e[38]!==D||e[39]!==G||e[40]!==M||e[41]!==f||e[42]!==b||e[43]!==H||e[44]!==p||e[45]!==B){x=c("gkx")("5268")?j.jsx(c("PolarisInformTreatmentBanner.react"),{analyticsContext:f.analyticsContext,externalURL:I,isStory:!1,onClick:L,secondaryText:H,text:p}):j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisPostFooterCTA.react"),{"data-testid":void 0,disableAnimation:!C,externalURL:I,forceBottomBorder:y,fullWidth:z,icon:t(f),isActive:!D,isForSidecar:a,onClick:M,ref:b,secondaryText:H,showChevron:(Q=A)!=null?Q:!1,text:p,textAlign:G===!0?"center":"left",textThemedColor:B}),E===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_ACTIONS.OPEN_BLOKS_APP&&i>0&&F!=null&&j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(n,{appId:F,bridgeOverrides_DEPRECATED:{onResumeStoryPlayback:J},params:P},i)})]});e[26]=E;e[27]=F;e[28]=i;e[29]=P;e[30]=C;e[31]=r;e[32]=L;e[33]=I;e[34]=y;e[35]=z;e[36]=A;e[37]=a;e[38]=D;e[39]=G;e[40]=M;e[41]=f;e[42]=b;e[43]=H;e[44]=p;e[45]=B;e[46]=x}else x=e[46];return x}function u(){}f=e;function v(a){var b=a.entityID,c=l();k(function(){c.current=b});return c.current}g["default"]=f}),226);
__d("PolarisPostModalRenderingContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext({isInModal:!1});function a(){return i(j)}g.PolarisPostModalRenderingContext=j;g.usePolarisPostModalRenderingContext=a}),98);
__d("usePolarisShowFooterCTA",["PolarisPostUtils","polarisGetPostFromGraphMediaInterface","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a,b,c,e){return i(function(){if(e===!0)return null;if(a==null)return null;var f=a.isSidecar,g=null,h=null;if(f===!0){var i=d("PolarisPostUtils").getCurrentSidecarItemFromPost(a,b);i!=null&&(h=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayBottomBannerInfoFromSidecarChild(i,c[i.id]===!0),h!=null&&(g=i))}g==null&&(h=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayBottomBannerInfoFromRootPost(a,c[a.id]===!0),h!=null&&(g=a));return g==null||h==null?null:{bottomBannerInfo:h,isParentPostSidecar:f,itemWithBanner:g}},[b,c,e,a])}g["default"]=a}),98);
__d("PolarisPostOverlayInfoFooterCTA.react",["CometRelay","PolarisPostMediaOverlayInfoFooterCTA.react","PolarisRelayEnvironment","react","react-compiler-runtime","usePolarisShowFooterCTA"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){var b=d("react-compiler-runtime").c(8),e=a.analyticsContext,f=a.bottomBannerInfo,g=a.dynamicFooterRef,h=a.idsWithDisabledMediaOverlayInfoImpressionLogging,j=a.isParentPostSidecar,k=a.itemWithBannerID;a=a.onLogOverlayImpression;var l=f.hasMediaCover;l=l||h[k]===!0;b[0]!==e||b[1]!==f||b[2]!==l||b[3]!==g||b[4]!==j||b[5]!==k||b[6]!==a?(h=i.jsx(d("CometRelay").RelayEnvironmentProvider,{environment:c("PolarisRelayEnvironment"),children:i.jsx(c("PolarisPostMediaOverlayInfoFooterCTA.react"),{analyticsContext:e,bannerInfo:f,"data-testid":void 0,disableImpressionLogging:l,entityID:k,isForSidecar:j,onLoggedImpression:a,ref:g})}),b[0]=e,b[1]=f,b[2]=l,b[3]=g,b[4]=j,b[5]=k,b[6]=a,b[7]=h):h=b[7];return h}function a(a){var b=d("react-compiler-runtime").c(8),e,f,g,h;b[0]!==a?(e=a.currentSidecarIndex,f=a.idsWithClearedBlurOverlays,h=a.rootPost,g=babelHelpers.objectWithoutPropertiesLoose(a,["currentSidecarIndex","idsWithClearedBlurOverlays","rootPost"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h):(e=b[1],f=b[2],g=b[3],h=b[4]);a=c("usePolarisShowFooterCTA")(h,e,f);b[5]!==a||b[6]!==g?(h=a!=null?i.jsx(j,babelHelpers["extends"]({bottomBannerInfo:a.bottomBannerInfo,isParentPostSidecar:a.isParentPostSidecar,itemWithBannerID:a.itemWithBanner.id},g)):null,b[5]=a,b[6]=g,b[7]=h):h=b[7];return h}g.PolarisPostOverlayInfoFooterCTARenderer=j;g.PolarisPostOverlayInfoFooterCTA=a}),98);
__d("PolarisPostTimestamp.react",["IGDSText.react","PolarisFastLink.react","PolarisIGCoreText","PolarisLinkBuilder","PolarisTimestamp.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(12),e=a.code,f=a.isVideo,g=a.postedAt,h=a.productType;a=a.username;var j;b[0]!==e||b[1]!==f||b[2]!==h||b[3]!==a?(j=d("PolarisLinkBuilder").buildUsernameMediaLink(a,e,{isVideo:f,productType:h}),b[0]=e,b[1]=f,b[2]=h,b[3]=a,b[4]=j):j=b[4];e=j;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f={navigation_source:"polaris_timestamp"},b[5]=f):f=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(h="x1p4m5qa",b[6]=h):h=b[6];b[7]!==g?(a=i.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",children:i.jsx(c("PolarisTimestamp.react"),{className:h,isLong:!0,value:g})}),b[7]=g,b[8]=a):a=b[8];b[9]!==e||b[10]!==a?(j=i.jsx(c("PolarisIGCoreText"),{display:"block",zeroMargin:!0,children:i.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,href:e,traceParams:f,children:a})}),b[9]=e,b[10]=a,b[11]=j):j=b[11];return j}g["default"]=a}),98);
__d("PolarisPostToastProvider.react",["react","useMergeRefs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));d=h;var j=d.useContext,k=d.useMemo,l=d.useRef,m=d.useState;d=i.forwardRef(e);var n={ActionText:null,BodyText:null,actionHref:"/",positionStyles:{absolutePositionStyles:{},width:0},postToastContainerElem:null,setActionHref:function(){},setActionText:function(){},setBodyText:function(){},setPositionStyles:function(){},setShowToast:function(){},showToast:!1},o=i.createContext(n);function a(){return j(o)}function b(a){var b=a.ActionText,c=a.BodyText,d=a.actionHref,e=a.setActionHref,f=a.setActionText,g=a.setBodyText;a=a.setShowToast;e(d);f(b);g(c);a(!0)}function e(a,b){a=a.children;var d=m(null),e=d[0],f=d[1];d=m(null);var g=d[0],h=d[1];d=m("");var j=d[0],p=d[1];d=m(n.positionStyles);var q=d[0],r=d[1];d=m(!1);var s=d[0],t=d[1],u=l(null);d=c("useMergeRefs")(u,b);b=k(function(){return{ActionText:e,BodyText:g,actionHref:j,positionStyles:q,postToastContainerElem:u.current,setActionHref:p,setActionText:f,setBodyText:h,setPositionStyles:r,setShowToast:t,showToast:s}},[e,g,j,q,s]);return i.jsx(o.Provider,{value:b,children:a(d)})}e.displayName=e.name+" [from "+f.id+"]";e=d;g.usePostToastContext=a;g.showPostToast=b;g.PostToastProvider=e}),98);
__d("PolarisPostViewInsights.react",["fbt","CometPlaceholder.react","CometRouteParams","IGDSButton.react","JSResourceForInteraction","PolarisLinkBuilder","QuickPerformanceLogger","lazyLoadComponent","qex","qpl","react","react-compiler-runtime","useCometRouterDispatcher","useCometRouterState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useEffect;b.useMemo;var m=b.useState,n=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisPostViewInsights.react"));function o(a){switch(a){case"com.instagram.insights.media_refresh.videos.ad_bottom_sheet.action":(i||(i=c("QuickPerformanceLogger"))).markerStart(c("qpl")._(39130588,"1610"),0);break;case"com.instagram.insights.media_refresh.videos.bottom_sheet.action":(i||(i=c("QuickPerformanceLogger"))).markerStart(c("qpl")._(39130588,"1610"),0);break;case"com.instagram.insights.media_refresh.clips.ad_bottom_sheet.action":(i||(i=c("QuickPerformanceLogger"))).markerStart(c("qpl")._(39137013,"1611"),0);break;case"com.instagram.insights.media_refresh.clips.bottom_sheet.action":(i||(i=c("QuickPerformanceLogger"))).markerStart(c("qpl")._(39137013,"1611"),0);break;default:(i||(i=c("QuickPerformanceLogger"))).markerStart(c("qpl")._(39124994,"1612"),0)}}function a(a){var b=d("react-compiler-runtime").c(21),e=a.bloksAppId,f=a.mediaId;a=d("CometRouteParams").useRouteParams();var g=a.show_insights;a=m(Boolean(g));var i=a[0],j=a[1],p=c("useCometRouterDispatcher")(),q=c("useCometRouterState")(),r;b[0]!==g?(a=function(){j(Boolean(g))},r=[g],b[0]=g,b[1]=a,b[2]=r):(a=b[1],r=b[2]);l(a,r);b[3]!==f?(a={media_id:f},b[3]=f,b[4]=a):a=b[4];r=a;a=r;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(r=function(){return j(!1)},b[5]=r):r=b[5];r=r;var s;b[6]!==e||b[7]!==p||b[8]!==f||b[9]!==(q==null?void 0:q.main)?(s=function(){var a;a=(a=c("qex")._("1542"))!=null?a:!1;a?p==null?void 0:p.go(d("PolarisLinkBuilder").buildImmersiveMediaInsightsLink(String(f)),{passthroughProps:{fallbackUrl:q==null?void 0:q.main.route.url},target:"self"}):(j(!0),o(e))},b[6]=e,b[7]=p,b[8]=f,b[9]=q==null?void 0:q.main,b[10]=s):s=b[10];s=s;var t;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(t=h._(/*BTDS*/"__JHASH__ibs5xsuNLiq__JHASH__"),b[11]=t):t=b[11];b[12]!==s?(t=k.jsx(c("IGDSButton.react"),{display:"block",label:t,onClick:s,variant:"primary_link"}),b[12]=s,b[13]=t):t=b[13];b[14]!==e||b[15]!==a||b[16]!==i?(s=i?k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(n,{appId:e,bridgeOverrides_DEPRECATED:{onResumeStoryPlayback:r},loadingFallback:k.jsx("div",{}),params:a})}):null,b[14]=e,b[15]=a,b[16]=i,b[17]=s):s=b[17];b[18]!==t||b[19]!==s?(r=k.jsxs("section",{children:[t,s]}),b[18]=t,b[19]=s,b[20]=r):r=b[20];return r}g["default"]=a}),226);
__d("PolarisPostViews.react",["cx","fbt","IGDSTextVariants.react","PolarisBigNumber.react","polarisLogAction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useState;function m(a){return a===1?i._(/*BTDS*/"__JHASH__-4rMdzmO7iR__JHASH__",[i._param("count",a)]):i._(/*BTDS*/"__JHASH__bzQqcYCqjPQ__JHASH__",[i._param("count",k.jsx(c("PolarisBigNumber.react"),{value:a}))])}m.displayName=m.name+" [from "+f.id+"]";function n(a){return a===1?i._(/*BTDS*/"__JHASH__gVA7T1ZCZwN__JHASH__",[i._param("count",a)]):i._(/*BTDS*/"__JHASH__7IxnQp4Oj43__JHASH__",[i._param("count",k.jsx(c("PolarisBigNumber.react"),{value:a}))])}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=d("react-compiler-runtime").c(11),c=a.likeCount;a=a.onClose;var e;b[0]!==a?(e=k.jsx("div",{className:"_aaur",onClick:a,role:"button",tabIndex:"0"}),b[0]=a,b[1]=e):e=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("div",{className:"_aaus"}),b[2]=a):a=b[2];var f;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=k.jsx("div",{className:"_aaut"}),b[3]=f):f=b[3];var g="_aauu",h;b[4]!==c?(h=n(c),b[4]=c,b[5]=h):h=b[5];b[6]!==h?(c=k.jsx("div",{className:g,children:h}),b[6]=h,b[7]=c):c=b[7];b[8]!==e||b[9]!==c?(g=k.jsxs("div",{children:[e,a,f,c]}),b[8]=e,b[9]=c,b[10]=g):g=b[10];return g}function a(a){var b=d("react-compiler-runtime").c(17),e=a.analyticsContext,f=a.likeCount;a=a.viewCount;var g=l(!1),h=g[0],i=g[1];b[0]!==e||b[1]!==h?(g=function(){h||c("polarisLogAction")("viewCountClick",{source:e}),i(!h)},b[0]=e,b[1]=h,b[2]=g):g=b[2];g=g;var j="_aauv",n="_aauw",p;b[3]!==a?(p=m(a),b[3]=a,b[4]=p):p=b[4];b[5]!==p?(a=k.jsx(d("IGDSTextVariants.react").IGDSTextBodyEmphasized,{zeroMargin:!0,children:p}),b[5]=p,b[6]=a):a=b[6];b[7]!==g||b[8]!==a?(p=k.jsx("span",{className:n,onClick:g,role:"button",tabIndex:"0",children:a}),b[7]=g,b[8]=a,b[9]=p):p=b[9];b[10]!==g||b[11]!==f||b[12]!==h?(n=h&&k.jsx(o,{likeCount:f,onClose:g}),b[10]=g,b[11]=f,b[12]=h,b[13]=n):n=b[13];b[14]!==p||b[15]!==n?(a=k.jsxs("div",{className:j,children:[p,n]}),b[14]=p,b[15]=n,b[16]=a):a=b[16];return a}g["default"]=a}),226);
__d("PolarisStepIndicator.react",["cx","joinClasses","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k="horizontal",l="vertical",m="default",n="immersiveViewer",o="overlay",p="overlayShadow";function a(a){var b=d("react-compiler-runtime").c(11),e=a.className,f=a.direction,g=a.numSteps,h=a.selectedStep;a=a.style;f=f===void 0?k:f;a=a===void 0?m:a;var i=f===l;f=f===k;var q=a===m,r=a===o,s=a===p;i="_acvz"+(i?" _acnd":"")+(f?" _acnc":"")+(q?" _acne":"")+(r?" _acng":"")+(s?" _acnh":"")+(a===n?" _any_":"");b[0]!==e||b[1]!==i?(f=c("joinClasses")(e,i),b[0]=e,b[1]=i,b[2]=f):f=b[2];if(b[3]!==g||b[4]!==h){b[6]!==h?(q=function(a,b){return j.jsx("div",{className:"_acnb"+(b===h?" _acnf":"")},"step"+b)},b[6]=h,b[7]=q):q=b[7];r=new Array(g).fill(0).map(q);b[3]=g;b[4]=h;b[5]=r}else r=b[5];b[8]!==f||b[9]!==r?(s=j.jsx("div",{className:f,children:r}),b[8]=f,b[9]=r,b[10]=s):s=b[10];return s}g["default"]=a}),98);
__d("PolarisSidecar_DEPRECATED.react",["IGDSBox.react","PolarisPagerButton.react","PolarisResponsiveBlock.react","PolarisSizing","PolarisStepIndicator.react","PolarisVirtualHSnapScroll.react","getPolarisKeyCommandConfig","polarisLogAction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=400;a=1;var k=1,l=a+k,m={areaClick:null,pagerClick:"click",scroll:"scroll",swipe:null};b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.state={hoveredOver:!1,mediaWidth:d.props.initialMediaWidthGuess||0,sidecarChildIndex:d.props.initialCarouselIndex||0},d.$1=null,d.$2=!1,d.$3={},d.$4=function(a){var b=d.props,c=b.initialCarouselIndex;b=b.numSidecarChildren;d.$1=a;if(c!=null&&c>0&&c<b&&d.$2===!1){(a=d.$1)==null?void 0:a.snapToIndex(c);d.$2=!0}d.props.onSetScrollRef&&d.props.onSetScrollRef(d.$1)},d.$5=function(a){d.$2=a},d.$6=function(a){return Math.min(Math.pow(Math.abs(a),.75)*3,j)},d.$9=function(a){d.setState({mediaWidth:a})},d.$10=function(a){a=a.interactionType;a=m[a];a!=null&&!d.$3[a]&&(c("polarisLogAction")("sidecarEngagement",{source:" hscroll",type:a}),d.$3[a]=!0);d.props.onInteract&&d.props.onInteract()},d.$11=function(){var a=d.props,b=a.numSidecarChildren,c=a.onChildIndexChange,e=d.state.sidecarChildIndex,f=(a=(a=d.$1)==null?void 0:a.getCurrentIndex())!=null?a:0;f!==e&&f>=0&&f<b&&d.setState({sidecarChildIndex:f},function(){c&&c(e,f,b)})},b)||babelHelpers.assertThisInitialized(d)}var e=b.prototype;e.$7=function(){this.setState({hoveredOver:!0})};e.$8=function(){this.setState({hoveredOver:!1})};e.$12=function(){var a;return i.jsx(c("PolarisStepIndicator.react"),{className:"x6s0dn4 x1oozmrk x4r51d9 xi8xln7 xl56j7k x47corl x10l6tqk",numSteps:this.props.numSidecarChildren,selectedStep:this.state.sidecarChildIndex,style:(a=this.props.stepIndicatorStyle)!=null?a:"overlay"})};e.$13=function(){var a=this.props,b=a.dimensions;a=a.numSidecarChildren;if(a===0)return null;a=b.toSorted(function(a,b){a=a.width/a.height;b=b.width/b.height;return a-b})[0];if(!a)return null;b=d("PolarisSizing").getHeightPercent(a);a={paddingBottom:b+"%"};return i.jsx("div",babelHelpers["extends"]({className:"x1qjc9v5 x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x1lliihq xdt5ytf x2lah0s xdj266r x11i5rnm xat24cr x1mh8g0r xexx8yu x4uap5 x18d9i69 xkhd6sd x1n2onr6"},{style:a}))};e.$14=function(a){var b=this;return a==="immersiveViewer"?[d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("mediaViewer","goToNextIndex",function(){var a;(a=b.$1)==null?void 0:a.snapToNext()}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("mediaViewer","goToPrevIndex",function(){var a;(a=b.$1)==null?void 0:a.snapToPrev()})]:[]};e.render=function(){var a=this,b=this.props,e=b.autoScrollOnFocus,f=b.initialCarouselIndex,g=b.mediaFooter;b=b.numSidecarChildren;var h=this.state.mediaWidth,j=this.$12(),m=!this.props.hoverTriggeredPager,n=this.$14(this.props.stepIndicatorStyle);return i.jsxs("div",babelHelpers["extends"]({className:"x1qjc9v5 x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x78zum5 xdt5ytf x2lah0s x17qophe xdj266r x11i5rnm xat24cr x1mh8g0r xexx8yu x4uap5 x18d9i69 xkhd6sd x1n2onr6 x13vifvy x11njtxf"},{onMouseEnter:function(){a.$7()},onMouseLeave:function(){a.$8()},ref:this.props.containerRef,children:[i.jsxs(c("PolarisResponsiveBlock.react"),{className:"x1lliihq x1n2onr6",onResize:this.$9,children:[this.$13(),h>0&&i.jsx(c("IGDSBox.react"),{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:i.jsx(c("PolarisVirtualHSnapScroll.react"),{animationDuration:this.$6,autoScrollOnFocus:e,initialIndex:(e=f)!=null?e:0,initialNextPagerVisibleGuess:f!=null&&f<b,initialPreviousPagerVisibleGuess:f!=null&&f>0,initialVisibleItemsGuess:l,itemWidth:h,navigationCommands:n,onInteract:this.$10,onVisibilityChange:this.$11,overscan:this.props.renderAllSidecarChildren===!0?b:k,pagerDisabled:!m&&!this.state.hoveredOver,pagerVariant:d("PolarisPagerButton.react").PAGER_BUTTON_VARIANTS.sidecar,scrollRef:this.$4,setScrollRefMounted:this.$5,children:this.props.renderSidecarChildren(this.state.mediaWidth,this.state.sidecarChildIndex)})})]}),g,j]}))};return b}(i.PureComponent);e=b;g._Sidecar=b;g.Sidecar=e}),98);
__d("PolarisUserTagIndicatorWithSheet.react",["fbt","PolarisUserTagIndicator.react","PolarisUserTagSheet.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useState,l=h._(/*BTDS*/"__JHASH__k2FQhmyaBWn__JHASH__");function a(a){var b=d("react-compiler-runtime").c(13),e=a.disableSheet,f=a.mediaId,g=a.onClick;a=a.usertags;var h=k(!1),i=h[0],m=h[1];b[0]!==e||b[1]!==g?(h=function(){g==null?void 0:g(),e!==!0&&m(!0)},b[0]=e,b[1]=g,b[2]=h):h=b[2];h=h;var n;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(n=function(){m(!1)},b[3]=n):n=b[3];n=n;var o;b[4]!==h?(o=j.jsx(c("PolarisUserTagIndicator.react"),{absolute:!0,onClick:h}),b[4]=h,b[5]=o):o=b[5];b[6]!==i||b[7]!==f||b[8]!==a?(h=i&&j.jsx(d("PolarisUserTagSheet.react").UserTagSheet,{mediaId:f,onClose:n,title:l,usertags:a}),b[6]=i,b[7]=f,b[8]=a,b[9]=h):h=b[9];b[10]!==o||b[11]!==h?(n=j.jsxs(j.Fragment,{children:[o,h]}),b[10]=o,b[11]=h,b[12]=n):n=b[12];return n}g["default"]=a}),226);
__d("XPolarisMobileAllCommentsControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/p/{shortcode}/comments/",Object.freeze({enable_persistent_cta:!1}),void 0);b=a;g["default"]=b}),98);
__d("usePolarisNavigateToLogin",["PolarisLinkBuilder","PolarisLoggedOutIntentDialog.entrypoint","PolarisUA","react","react-compiler-runtime","useIGDSEntryPointDialog","useIsPolarisDynamicIntentDialogEnabled","usePolarisLoggedOutContentWallEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a,b,e){var f=d("react-compiler-runtime").c(8),g=e===void 0?!1:e;f[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={},f[0]=e):e=f[0];e=c("useIGDSEntryPointDialog")(c("PolarisLoggedOutIntentDialog.entrypoint"),e);var h=e[0];e=c("usePolarisLoggedOutContentWallEntryPointDialog")();var i=e[0],j=d("useIsPolarisDynamicIntentDialogEnabled").useIsPolarisDynamicIntentDialogPostEnabled();f[1]!==g||f[2]!==j||f[3]!==i||f[4]!==h||f[5]!==b||f[6]!==a?(e=function(c){var e;bb6:switch(c){case"comment":e="post_feedback_comment";break bb6;case"direct":e="post_feedback_direct";break bb6;case"like":e="post_feedback_like";break bb6;case"save":default:e="post_feedback_save"}d("PolarisUA").isDesktop()?i&&i({nextUrl:d("PolarisLinkBuilder").buildMediaLink(a),source:e,variant:"feature_wall"}):g===!0?j?(e==="post_feedback_comment"&&(e="post_comment_view_all"),h({source:e})):i&&i({nextUrl:d("PolarisLinkBuilder").buildMediaLink(a),source:e,variant:"content_wall"}):h({source:e,username:b})},f[1]=g,f[2]=j,f[3]=i,f[4]=h,f[5]=b,f[6]=a,f[7]=e):e=f[7];return e}g["default"]=a}),98);
__d("usePolarisPostSetURLSidecarIndex",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){return i}function i(a){var b=new URLSearchParams(window.location.search);if(a===b.get("img_index"))return;b.set("img_index",String(a));window.history.replaceState(babelHelpers["extends"]({},history.state),"","?"+b.toString())}g["default"]=a}),98);
__d("usePolarisPostShowSavedToastHandler",["fbt","PolarisLinkBuilder","PolarisPostToastProvider.react","PolarisSavedPostsTypes","react","react-compiler-runtime","usePolarisViewer"],(function(a,b,c,d,e,f,g,h){"use strict";var i;(i||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(3),b=d("PolarisPostToastProvider.react").usePostToastContext(),e=c("usePolarisViewer")(),f;a[0]!==b||a[1]!==(e==null?void 0:e.username)?(f=function(){var a;d("PolarisPostToastProvider.react").showPostToast(babelHelpers["extends"]({},b,{ActionText:h._(/*BTDS*/"__JHASH__vD_V0nwq90r__JHASH__"),BodyText:h._(/*BTDS*/"__JHASH__Ohp7zsmQCxJ__JHASH__"),actionHref:d("PolarisLinkBuilder").buildUserSavedCollectionLink((a=e==null?void 0:e.username)!=null?a:"",d("PolarisSavedPostsTypes").ALL_POSTS_SAVED_COLLECTION_PATH,d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION)}))},a[0]=b,a[1]=e==null?void 0:e.username,a[2]=f):f=a[2];e==null?void 0:e.username;return f}g["default"]=a}),226);